var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
				value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _BankUI = require("./script/BankUI");

var _BankUI2 = _interopRequireDefault(_BankUI);

var _BankCardUI = require("./script/BankCardUI");

var _BankCardUI2 = _interopRequireDefault(_BankCardUI);

var _BankCardAdUI = require("./script/BankCardAdUI");

var _BankCardAdUI2 = _interopRequireDefault(_BankCardAdUI);

var _HxButton = require("./script/HxButton");

var _HxButton2 = _interopRequireDefault(_HxButton);

var _ChestUI = require("./script/ChestUI");

var _ChestUI2 = _interopRequireDefault(_ChestUI);

var _EventTimerView = require("./script/EventTimerView");

var _EventTimerView2 = _interopRequireDefault(_EventTimerView);

var _FriendDefeatUI = require("./script/FriendDefeatUI");

var _FriendDefeatUI2 = _interopRequireDefault(_FriendDefeatUI);

var _FriendsListItem = require("./script/FriendsListItem");

var _FriendsListItem2 = _interopRequireDefault(_FriendsListItem);

var _FriendsUI = require("./script/FriendsUI");

var _FriendsUI2 = _interopRequireDefault(_FriendsUI);

var _GameResultUI = require("./script/GameResultUI");

var _GameResultUI2 = _interopRequireDefault(_GameResultUI);

var _GameUI = require("./script/GameUI");

var _GameUI2 = _interopRequireDefault(_GameUI);

var _FloatUpHint = require("./script/FloatUpHint");

var _FloatUpHint2 = _interopRequireDefault(_FloatUpHint);

var _MainUI = require("./script/MainUI");

var _MainUI2 = _interopRequireDefault(_MainUI);

var _MenuUI = require("./script/MenuUI");

var _MenuUI2 = _interopRequireDefault(_MenuUI);

var _OrderResultUI = require("./script/OrderResultUI");

var _OrderResultUI2 = _interopRequireDefault(_OrderResultUI);

var _TutorUI = require("./script/TutorUI");

var _TutorUI2 = _interopRequireDefault(_TutorUI);

var _SoundToggle = require("./script/SoundToggle");

var _SoundToggle2 = _interopRequireDefault(_SoundToggle);

var _DevVKScores = require("./script/DevVKScores");

var _DevVKScores2 = _interopRequireDefault(_DevVKScores);

var _PromoView = require("./script/PromoView");

var _PromoView2 = _interopRequireDefault(_PromoView);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
				function GameConfig() {
								_classCallCheck(this, GameConfig);
				}

				_createClass(GameConfig, null, [{
								key: "init",
								value: function init() {
												//注册Script或者Runtime引用
												var reg = Laya.ClassUtils.regClass;
												reg("script/BankUI.js", _BankUI2.default);
												reg("script/BankCardUI.js", _BankCardUI2.default);
												reg("script/BankCardAdUI.js", _BankCardAdUI2.default);
												reg("script/HxButton.js", _HxButton2.default);
												reg("script/ChestUI.js", _ChestUI2.default);
												reg("script/EventTimerView.js", _EventTimerView2.default);
												reg("script/FriendDefeatUI.js", _FriendDefeatUI2.default);
												reg("script/FriendsListItem.js", _FriendsListItem2.default);
												reg("script/FriendsUI.js", _FriendsUI2.default);
												reg("script/GameResultUI.js", _GameResultUI2.default);
												reg("script/GameUI.js", _GameUI2.default);
												reg("script/FloatUpHint.js", _FloatUpHint2.default);
												reg("script/MainUI.js", _MainUI2.default);
												reg("script/MenuUI.js", _MenuUI2.default);
												reg("script/OrderResultUI.js", _OrderResultUI2.default);
												reg("script/TutorUI.js", _TutorUI2.default);
												reg("script/SoundToggle.js", _SoundToggle2.default);
												reg("script/DevVKScores.js", _DevVKScores2.default);
												reg("script/PromoView.js", _PromoView2.default);
								}
				}]);

				return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 750;
GameConfig.height = 1334;
GameConfig.scaleMode = "full";
GameConfig.screenMode = "none";
GameConfig.alignV = "middle";
GameConfig.alignH = "center";
GameConfig.startScene = "scenes/MainScene.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = false;

GameConfig.init();

},{"./script/BankCardAdUI":9,"./script/BankCardUI":10,"./script/BankUI":11,"./script/ChestUI":16,"./script/DevVKScores":17,"./script/EventTimerView":18,"./script/FloatUpHint":19,"./script/FriendDefeatUI":20,"./script/FriendsListItem":22,"./script/FriendsUI":23,"./script/GameResultUI":25,"./script/GameUI":26,"./script/HxButton":36,"./script/MainUI":40,"./script/MenuUI":41,"./script/OrderResultUI":45,"./script/PromoView":46,"./script/SoundToggle":53,"./script/TutorUI":55}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _ColorFilterSetter = require("./comp/ColorFilterSetter");

var _ColorFilterSetter2 = _interopRequireDefault(_ColorFilterSetter);

var _Locale = require("./script/Locale");

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		_Locale2.default.initialize();

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = !window.isYandex;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			var reg = Laya.ClassUtils.regClass;
			reg("laya.effect.ColorFilterSetter", _ColorFilterSetter2.default);

			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./comp/ColorFilterSetter":3,"./script/Locale":38}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _FilterSetterBase2 = require("./FilterSetterBase");

var _FilterSetterBase3 = _interopRequireDefault(_FilterSetterBase2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ColorFilterSetter = function (_FilterSetterBase) {
    _inherits(ColorFilterSetter, _FilterSetterBase);

    function ColorFilterSetter() {
        _classCallCheck(this, ColorFilterSetter);

        var _this = _possibleConstructorReturn(this, (ColorFilterSetter.__proto__ || Object.getPrototypeOf(ColorFilterSetter)).call(this));

        _this.on(Laya.Event.ADDED, _this, _this._onAdded);
        _this.on(Laya.Event.REMOVED, _this, _this._onRemoved);
        _this._brightness = 0; // -100 - 100
        _this._contrast = 0; // -100 - 100
        _this._saturation = 0; // -100 - 100
        _this._hue = 0; // -180 - 180
        _this._red = 0; // 0-255
        _this._green = 0; // 0-255
        _this._blue = 0; // 0-255
        _this._alpha = 0; // 0-255
        _this._color = null; // '#RRGGBB'
        return _this;
    }

    _createClass(ColorFilterSetter, [{
        key: "buildFilter",
        value: function buildFilter() {
            if (this._filter) {
                this._filter.reset();
                this._filter.color(this.red, this.green, this.blue, this.alpha);
                this._filter.adjustHue(this.hue);
                this._filter.adjustContrast(this.contrast);
                this._filter.adjustBrightness(this.brightness);
                this._filter.adjustSaturation(this.saturation);
            }
            _get(ColorFilterSetter.prototype.__proto__ || Object.getPrototypeOf(ColorFilterSetter.prototype), "buildFilter", this).call(this);
        }
    }, {
        key: "alpha",
        get: function get() {
            return this._alpha;
        },
        set: function set(value) {
            this._alpha = value;this.paramChanged();
        }
    }, {
        key: "red",
        get: function get() {
            return this._red;
        },
        set: function set(value) {
            this._red = value;this.paramChanged();
        }
    }, {
        key: "green",
        get: function get() {
            return this._green;
        },
        set: function set(value) {
            this._green = value;this.paramChanged();
        }
    }, {
        key: "blue",
        get: function get() {
            return this._blue;
        },
        set: function set(value) {
            this._blue = value;this.paramChanged();
        }
    }, {
        key: "brightness",
        get: function get() {
            return this._brightness;
        },
        set: function set(value) {
            this._brightness = value;this.paramChanged();
        }
    }, {
        key: "contrast",
        get: function get() {
            return this._contrast;
        },
        set: function set(value) {
            this._contrast = value;this.paramChanged();
        }
    }, {
        key: "hue",
        get: function get() {
            return this._hue;
        },
        set: function set(value) {
            this._hue = value;this.paramChanged();
        }
    }, {
        key: "saturation",
        get: function get() {
            return this._saturation;
        },
        set: function set(value) {
            this._saturation = value;this.paramChanged();
        }
    }, {
        key: "color",
        get: function get() {
            return this._color;
        },
        set: function set(value) {
            this._color = value;
            var color0 = Laya.ColorUtils.create(value);
            this._red = color0.arrColor[0] * 255;
            this._green = color0.arrColor[1] * 255;
            this._blue = color0.arrColor[2] * 255;
            this.paramChanged();
        }
    }]);

    return ColorFilterSetter;
}(_FilterSetterBase3.default);

exports.default = ColorFilterSetter;

},{"./FilterSetterBase":4}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FilterSetterBase = function (_Laya$Node) {
    _inherits(FilterSetterBase, _Laya$Node);

    function FilterSetterBase() {
        _classCallCheck(this, FilterSetterBase);

        var _this = _possibleConstructorReturn(this, (FilterSetterBase.__proto__ || Object.getPrototypeOf(FilterSetterBase)).call(this));

        _this._target = null;
        _this._filter = null;
        return _this;
    }

    _createClass(FilterSetterBase, [{
        key: "paramChanged",
        value: function paramChanged() {
            Laya.timer.callLater(this, this.buildFilter);
        }
    }, {
        key: "buildFilter",
        value: function buildFilter() {
            // For overriding
        }
    }, {
        key: "target",
        get: function get() {
            return this._target;
        },
        set: function set(value) {
            if (this._target) {
                Laya.UIUtils.clearFilter(this._target, ColorFilter);
                this._filter = null;
            }
            this._target = value;
            if (this._target) {
                this._filter = new Laya.ColorFilter();
                Laya.UIUtils.addFilter(this._target, this._filter);
                this.paramChanged();
            }
        }
    }]);

    return FilterSetterBase;
}(Laya.Node);

exports.default = FilterSetterBase;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var AdShowPolicy = function () {
    function AdShowPolicy(backend, promoAction) {
        _classCallCheck(this, AdShowPolicy);

        this._backend = backend;
        this._promoAction = promoAction;
    }

    _createClass(AdShowPolicy, [{
        key: "onNewGame",
        value: function onNewGame() {
            if (this._trySkipFirst()) return;
            var level = this._backend.profile.level;
            // if (SocialApi.isYA) {
            //     if (level > 1)
            //         SocialApi.inst.adsShow();
            //     return;
            // }
            if (level >= 3 && this._backend.userEvents.Ad.showBeforeStart) {
                this._countDown--;
                if (this._countDown <= 0) {
                    this._countDown = level < 20 ? 3 : 2;
                    if (!this._tryShowPromo()) _SocialApi2.default.inst.adsShow();
                }
            } else {
                this._tryShowPromo();
            }
        }
    }, {
        key: "_trySkipFirst",
        value: function _trySkipFirst() {
            if (this._countDown === undefined) {
                this._countDown = 1;
                return true;
            }
            return false;
        }
    }, {
        key: "_tryShowPromo",
        value: function _tryShowPromo() {
            return !_SocialApi2.default.isYA && this._promoAction && this._promoAction();
        }
    }]);

    return AdShowPolicy;
}();

exports.default = AdShowPolicy;

},{"./Backend":6,"./SocialApi":51}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Network = require("./Network");

var _Network2 = _interopRequireDefault(_Network);

var _NetErrors = require("./NetErrors");

var _NetErrors2 = _interopRequireDefault(_NetErrors);

var _SettingsAll = require("./SettingsAll");

var _SettingsAll2 = _interopRequireDefault(_SettingsAll);

var _UserProfile = require("./UserProfile");

var _UserProfile2 = _interopRequireDefault(_UserProfile);

var _UserEvents = require("./UserEvents");

var _UserEvents2 = _interopRequireDefault(_UserEvents);

var _BankCard = require("./BankCard");

var _BankCard2 = _interopRequireDefault(_BankCard);

var _UserOptions = require("./UserOptions");

var _UserOptions2 = _interopRequireDefault(_UserOptions);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Backend = function (_Laya$EventDispatcher) {
    _inherits(Backend, _Laya$EventDispatcher);

    _createClass(Backend, null, [{
        key: "SERVER_SETTINGS_ALL",
        get: function get() {
            return "settings.get";
        }
    }, {
        key: "SERVER_PROFILE",
        get: function get() {
            return "user.profile";
        }
    }, {
        key: "SERVER_USER_EVENTS",
        get: function get() {
            return "user.events";
        }
    }, {
        key: "SERVER_USERS_GET",
        get: function get() {
            return "users.get";
        }
    }, {
        key: "SERVER_USERS_PROFILE",
        get: function get() {
            return "users.profile";
        }
    }, {
        key: "SERVER_GAME_START",
        get: function get() {
            return "game.start";
        }
    }, {
        key: "SERVER_GAME_SET_PROGRESS",
        get: function get() {
            return "game.setProgress";
        }
    }, {
        key: "SERVER_GAME_COMPLETE",
        get: function get() {
            return "game.complete";
        }
    }, {
        key: "SERVER_GAME_RESUME",
        get: function get() {
            return "game.resume";
        }
    }, {
        key: "SERVER_FRIEND_ASK",
        get: function get() {
            return "friends.askHelp";
        }
    }, {
        key: "SERVER_FRIEND_HELP",
        get: function get() {
            return "friends.help";
        }
    }, {
        key: "SERVER_FRIEND_GET_ASK",
        get: function get() {
            return "friends.getAsk";
        }
    }, {
        key: "SERVER_RECEIVE_LIFE",
        get: function get() {
            return 'receive.life';
        }
    }, {
        key: "SERVER_RECEIVE_CHEST",
        get: function get() {
            return 'receive.chest';
        }
    }, {
        key: "SERVER_RECEIVE_HELPS",
        get: function get() {
            return 'user.receiveHelps';
        }
    }, {
        key: "SERVER_BANK_CARDS",
        get: function get() {
            return 'bank.cards';
        }
    }, {
        key: "SERVER_AD_CLAIM_REWARD",
        get: function get() {
            return 'ad.claimReward';
        }
    }, {
        key: "SERVER_USER_OPTION_GET_ALL",
        get: function get() {
            return 'user.option.getAll';
        }
    }, {
        key: "SERVER_USER_OPTION_SET",
        get: function get() {
            return 'user.option.set';
        }
    }, {
        key: "SERVER_GAME_LOADING",
        get: function get() {
            return 'systemCommands.gameLoading';
        }
    }, {
        key: "CLIENT_SETTINGS_ALL",
        get: function get() {
            return "client.settings.all";
        }
    }, {
        key: "CLIENT_PROFILE",
        get: function get() {
            return "client.user.profile";
        }
    }, {
        key: "CLIENT_USER_EVENTS",
        get: function get() {
            return "client.user.events";
        }
    }, {
        key: "CLIENT_USERS_GET",
        get: function get() {
            return "client.users.get";
        }
    }, {
        key: "CLIENT_USERS_PROFILE",
        get: function get() {
            return "client.users.profile";
        }
    }, {
        key: "CLIENT_BANK_CARDS",
        get: function get() {
            return 'client.bank.cards';
        }
    }, {
        key: "CLIENT_FRIEND_GET_ASK",
        get: function get() {
            return "client.friends.getAsk";
        }
    }, {
        key: "CLIENT_USER_OPTION_GET_ALL",
        get: function get() {
            return 'client.user.option.getAll';
        }
    }, {
        key: "ERROR_INFO_URGENT",
        get: function get() {
            return "client.error.infoUrgent";
        }
    }, {
        key: "ERROR_EXCEPTION",
        get: function get() {
            return "client.error.exception";
        }
    }, {
        key: "ERROR_GAME",
        get: function get() {
            return "client.error.game";
        }
    }, {
        key: "ERROR_NETWORK",
        get: function get() {
            return "ERROR_NETWORK";
        }
    }, {
        key: "CODE_ERR_UNKNOWN",
        get: function get() {
            return -50000;
        }
    }, {
        key: "CODE_ERR_RESOURCE_OPERATION",
        get: function get() {
            return 500;
        }
    }, {
        key: "CODE_ERR_EVENT_TYPE",
        get: function get() {
            return 501;
        }
    }, {
        key: "CODE_ERR_EVENT_PARAM_TYPE",
        get: function get() {
            return 502;
        }
    }, {
        key: "CODE_ERR_EVENT_NOT_FOUND",
        get: function get() {
            return 503;
        }
    }, {
        key: "CODE_ERR_STATE",
        get: function get() {
            return 504;
        }
    }, {
        key: "COINS_FOR_AD",
        get: function get() {
            return 20;
        }
    }]);

    function Backend(token, url, disableAdStats) {
        _classCallCheck(this, Backend);

        var _this = _possibleConstructorReturn(this, (Backend.__proto__ || Object.getPrototypeOf(Backend)).call(this));

        _this._token = token;
        _this._cmdId = 0;
        _this._network = new _Network2.default(url || "/api-web/v1", token);
        _this.reset();
        _this.on(Backend.CLIENT_SETTINGS_ALL, _this, _this._onSettingsAll);
        _this.on(Backend.CLIENT_PROFILE, _this, _this._onProfile);
        _this.on(Backend.CLIENT_USER_EVENTS, _this, _this._onUserEvents);
        _this.on(Backend.CLIENT_BANK_CARDS, _this, _this._onBankCards);
        _this.on(Backend.CLIENT_FRIEND_GET_ASK, _this, _this._onFriendGetAsk);
        _this.on(Backend.CLIENT_USERS_GET, _this, _this._onUsersGet);
        _this.on(Backend.CLIENT_USER_OPTION_GET_ALL, _this, _this._onUserOption);
        _this._resumeCount = 0;
        _this._freeResumeCount = 0;
        _this._userOptions = new _UserOptions2.default(_this);
        if (!disableAdStats) {
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_REQUESTED, _this, function () {
                this._statAd({ request: 1 });
            });
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_NO, _this, function () {
                this._statAd({ absent: 1 });
            });
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_STARTED, _this, function () {
                this._statAd({ run: 1 });
            });
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_COMPLETE, _this, function () {
                this._statAd({ complete: 1 });
            });
        }
        return _this;
    }

    _createClass(Backend, [{
        key: "suspend",
        value: function suspend() {
            if (!this.suspend) {
                this._working = false;
                Laya.timer.clearAll(this);
            }
        }
    }, {
        key: "resume",
        value: function resume() {
            if (this.suspended) {
                this._working = true;
                if (this._current) {
                    this._pended = this._current.concat(this._pended);
                    this._current = null;
                }
                Laya.timer.frameLoop(1, this, this._onFrame);
            }
        }
    }, {
        key: "reset",
        value: function reset() {
            this._current = null;
            this._pended = [];
            this.resume();
        }
    }, {
        key: "setLoadingProgress",
        value: function setLoadingProgress(value) {
            this._api(Backend.SERVER_GAME_LOADING, {
                loadPercent: value,
                osVersion: window.navigator ? window.navigator.userAgent : "",
                webglEnabled: window.IsWebGLSupported() ? '1' : '0',
                hasSocialConnect: _SocialApi2.default.inst.initialized ? '1' : '0'
            });
        }
    }, {
        key: "settingsAllGet",


        // API --->
        value: function settingsAllGet() {
            this._settingsAll = new _SettingsAll2.default({
                moneySoftPerFriendHelp: 10,
                timeBetweenFriendHelp: 21600,
                moneySoft4Resume: 1000,
                arrayMoneySoft4Resume: [100, 200, 500, 1000, 2000, 5000],
                chest: {
                    timeOpen: 21600,
                    maxMoneySoft: 100
                },
                timeToFreeLife: 10800
            });
            this._api(Backend.SERVER_SETTINGS_ALL);
        }
    }, {
        key: "bankCardsGet",
        value: function bankCardsGet() {
            this._api(Backend.SERVER_BANK_CARDS);
        }
    }, {
        key: "profileGet",
        value: function profileGet() {
            this._api(Backend.SERVER_PROFILE);
        }
    }, {
        key: "userEventsGet",
        value: function userEventsGet() {
            this._api(Backend.SERVER_USER_EVENTS);
        }
    }, {
        key: "usersGet",
        value: function usersGet(idsSocial) {
            this._api(Backend.SERVER_USERS_GET, { net: _SocialApi2.default.providerId, idsSocial: idsSocial });
        }
    }, {
        key: "gameStart",
        value: function gameStart() {
            this._freeResumeCount = 0;
            this._resumeCount = 0;
            this._api(Backend.SERVER_GAME_START);
        }
    }, {
        key: "gameWin",
        value: function gameWin(scores) {
            this._api(Backend.SERVER_GAME_SET_PROGRESS, { levelUp: true, scores: scores });
        }
    }, {
        key: "gameLoose",
        value: function gameLoose(scores) {
            this._api(Backend.SERVER_GAME_SET_PROGRESS, { scores: scores });
            this._api(Backend.SERVER_GAME_COMPLETE, { scores: scores });
        }
        /*gameResume(useSoftMoney) {
            if (!useSoftMoney)
                this._api(Backend.SERVER_RECEIVE_LIFE, { id: this.userEvents.Life.id });
            else
                this._resumeCount++;
            this._api(Backend.SERVER_GAME_RESUME, useSoftMoney ? { useMoneySoft: true } : { useLife: true });
        }*/

    }, {
        key: "gameResumeFree",
        value: function gameResumeFree() {
            this._freeResumeCount++;
            this._api(Backend.SERVER_RECEIVE_LIFE, { id: this.userEvents.Life.id });
            this._api(Backend.SERVER_GAME_RESUME, { useLife: true });
        }
    }, {
        key: "gameResumeSoft",
        value: function gameResumeSoft() {
            this._resumeCount++;
            this._api(Backend.SERVER_GAME_RESUME, { useMoneySoft: true });
        }
        //gameResumeAds() {
        //    this._api(Backend.SERVER_GAME_RESUME, { useAds: true });
        //}

    }, {
        key: "userOptionsGet",
        value: function userOptionsGet() {
            this._api(Backend.SERVER_USER_OPTION_GET_ALL);
        }
    }, {
        key: "userOptionSet",
        value: function userOptionSet(key, value) {
            this._api(Backend.SERVER_USER_OPTION_SET, { key: key, value: value });
        }
        // friendHelp(id) {
        //     this._api(Backend.SERVER_FRIEND_HELP, { social_id: id });
        // }

    }, {
        key: "friendAsk",
        value: function friendAsk(id) {
            this._api(Backend.SERVER_FRIEND_ASK, { social_id: id });
        }
    }, {
        key: "friendReplyAll",
        value: function friendReplyAll() {
            this._api(Backend.SERVER_FRIEND_GET_ASK);
        }
    }, {
        key: "receiveHelps",
        value: function receiveHelps() {
            this._api(Backend.SERVER_RECEIVE_HELPS);
        }
    }, {
        key: "receiveChest",
        value: function receiveChest() {
            //this._moneyBeforeChest = this.profile.moneySoft;
            this._api(Backend.SERVER_RECEIVE_CHEST, { id: this.userEvents.Chest.id });
        }
    }, {
        key: "addCoinsForAd",
        value: function addCoinsForAd() {
            //this._statAd({complete:1});
            this._api(Backend.SERVER_AD_CLAIM_REWARD);
        }
    }, {
        key: "friendScoreUpdate",
        value: function friendScoreUpdate(friendInfos) {
            if (!friendInfos.length) return;
            this.once(Backend.CLIENT_USERS_GET, this, function (data) {
                var users = data.list;
                var socToFriend = friendInfos.reduce(function (s, e) {
                    s[e.id] = e;return s;
                }, {});
                var gameToSocId = users.reduce(function (s, e) {
                    s[e.id] = e.idSocial;return s;
                }, {});
                var leftCount = friendInfos.length;
                var onProfile = function (data) {
                    //console.log("onProfile", data);
                    socToFriend[gameToSocId[data.id]].score = data.scoresMax;
                    users.splice(0, 1);
                    if (!users.length) this.off(Backend.CLIENT_USERS_PROFILE, this, onProfile);
                }.bind(this);
                for (var i = 0; i < users.length; i++) {
                    if (users[i].id) this._api(Backend.SERVER_USERS_PROFILE, { idInternal: users[i].id });else users.splice(i, 1);
                }if (users.length) this.on(Backend.CLIENT_USERS_PROFILE, this, onProfile);
            }.bind(this));
            this.usersGet(friendInfos.map(function (e) {
                return e.id;
            }));
            //this._api(Backend.SERVER_USERS_GET,  friendInfos.map(e => e.id));
        }
    }, {
        key: "validatePurchase",
        value: function validatePurchase(purchase) {
            return new Promise(function (resolve) {
                var onResponse = function onResponse(data) {
                    if (data.hash == purchase.hash) {
                        this.off('client.bank.buy', this, onResponse);
                        resolve(data.result == 'success' || data.result == 'duplicate');
                    }
                };
                this.on('client.bank.buy', this, onResponse);
                this._api('bank.buy', purchase);
            }.bind(this));
        }
    }, {
        key: "_statAd",
        value: function _statAd(data) {
            this._api("systemCommands.stats.ad", data);
        }
    }, {
        key: "devAddMoney",
        value: function devAddMoney(value) {
            this._api("systemCommands.debug.setUserParams", { moneySoft: this.profile.moneySoft + value });
        }
    }, {
        key: "devAddToChest",
        value: function devAddToChest(value) {
            this._api("systemCommands.debug.addToChest", { moneySoft: value });
        }
    }, {
        key: "devSpeedUpEvent",
        value: function devSpeedUpEvent(id) {
            this._api("systemCommands.debug.changeTimeEvent", { id: id, timeRemain: 0 });
        }
    }, {
        key: "devSetProgress",
        value: function devSetProgress(level, scores) {
            level = Number(level);
            scores = Number(scores);
            if (isNaN(level) || isNaN(scores)) return;
            this._api('systemCommands.debug.setProgress', { level: Math.max(1, level), scores: 0, scoresMax: Math.max(0, scores) });
            setTimeout(function () {
                document.location.reload();
            }, 500);
        }
        // <--- API

    }, {
        key: "_api",
        value: function _api(cmd, data) {
            this._pended.push({ id: ++this._cmdId, cmd: cmd, data: data || {} });
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            if (this._current || !this._pended.length) return;
            this._current = this._pended;
            this._pended = [];
            this._network.post({
                token: this._token,
                time: new Date().toISOString(),
                commands: this._current
            }, this._onSuccess.bind(this), this._onFail.bind(this));
        }
    }, {
        key: "_onSuccess",
        value: function _onSuccess(data) {
            var current = this._current;
            for (var id in data.commands) {
                var cmdPack = data.commands[id];
                for (var i in cmdPack) {
                    this._processReply(id, current[id], cmdPack[i]);
                }
            }
            if (current == this._current) this._current = null;
        }
    }, {
        key: "_onFail",
        value: function _onFail(code, message) {
            //this.suspend();
            console.error('Backend: (' + code + ') ' + message);
            this._current = null;
            this.event(Backend.ERROR_NETWORK, { code: code, message: message });
        }
    }, {
        key: "_processReply",
        value: function _processReply(id, request, reply) {
            //console.log(reply);
            try {
                var data = reply.data;
                if (reply.status != 'ok') {
                    console.error('Backend: (' + data.code + ') ' + data.message);
                }
                data._request = request;
                this.event(reply.cmd, data);
            } catch (e) {
                console.log(e);
            }
        }
    }, {
        key: "_onSettingsAll",
        value: function _onSettingsAll(data) {
            this._settingsAll = new _SettingsAll2.default(data.settings);
        }
    }, {
        key: "_onProfile",
        value: function _onProfile(data) {
            this._profile = new _UserProfile2.default(data);
        }
    }, {
        key: "_onUserEvents",
        value: function _onUserEvents(data) {
            this._userEvents = new _UserEvents2.default(this, data);
        }
    }, {
        key: "_onBankCards",
        value: function _onBankCards(data) {
            this._bankCards = [];
            for (var i in data.list) {
                this._bankCards.push(new _BankCard2.default(data.list[i]));
            }
        }
    }, {
        key: "_onFriendGetAsk",
        value: function _onFriendGetAsk(data) {
            for (var i in data.list) {
                this._api(Backend.SERVER_FRIEND_HELP, { social_id: data.list[i] });
            }
        }
    }, {
        key: "_onUsersGet",
        value: function _onUsersGet(data) {
            // NOTHING TODO
        }
    }, {
        key: "suspended",
        get: function get() {
            return !this._working;
        }
    }, {
        key: "profile",
        get: function get() {
            return this._profile;
        }
    }, {
        key: "settingsAll",
        get: function get() {
            return this._settingsAll;
        }
    }, {
        key: "userEvents",
        get: function get() {
            return this._userEvents;
        }
    }, {
        key: "bankCards",
        get: function get() {
            return this._bankCards;
        }
    }, {
        key: "userOptions",
        get: function get() {
            return this._userOptions;
        }
    }, {
        key: "resumeCount",
        get: function get() {
            return this._resumeCount;
        }
    }, {
        key: "freeResumeCount",
        get: function get() {
            return this._freeResumeCount;
        }
    }, {
        key: "resumeCost",
        get: function get() {
            return this.settingsAll.getMoneySoft4Resume(this._resumeCount);
        }
    }, {
        key: "resumeCostOld",
        get: function get() {
            return this.resumeCost;
        }
    }]);

    return Backend;
}(Laya.EventDispatcher);

exports.default = Backend;

},{"./BankCard":8,"./NetErrors":43,"./Network":44,"./SettingsAll":50,"./SocialApi":51,"./UserEvents":57,"./UserOptions":58,"./UserProfile":59}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _SettingsAll = require("./SettingsAll");

var _SettingsAll2 = _interopRequireDefault(_SettingsAll);

var _UserProfile = require("./UserProfile");

var _UserProfile2 = _interopRequireDefault(_UserProfile);

var _UserEvents = require("./UserEvents");

var _UserEvents2 = _interopRequireDefault(_UserEvents);

var _BankCard = require("./BankCard");

var _BankCard2 = _interopRequireDefault(_BankCard);

var _UserOptions = require("./UserOptions");

var _UserOptions2 = _interopRequireDefault(_UserOptions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DISCOUNT_ENABLED = false;

var BackendMock = function (_Laya$EventDispatcher) {
    _inherits(BackendMock, _Laya$EventDispatcher);

    function BackendMock(realBackend, profileStorageProvider) {
        _classCallCheck(this, BackendMock);

        var _this = _possibleConstructorReturn(this, (BackendMock.__proto__ || Object.getPrototypeOf(BackendMock)).call(this));

        _this._resumeCount = 0;
        _this._freeResumeCount = 0;
        _this._optionsObj = new LocalStorageObject("helix.options");
        _this._profileStorageProviderDef = function () {
            return new LocalStorageObject("helix.profile");
        };
        _this._profileStorageProvider = profileStorageProvider;
        //this._profileObj = profileStorage || new LocalStorageObject("helix.profile");
        _this._userOptions = new _UserOptions2.default(_this);
        _this._realBackend = realBackend;
        _this._resumeCostFactor = DISCOUNT_ENABLED ? 0.5 : 1;
        return _this;
    }

    _createClass(BackendMock, [{
        key: "setLoadingProgress",
        value: function setLoadingProgress(value) {}
    }, {
        key: "settingsAllGet",
        value: function settingsAllGet() {
            if (!this._settingsAll) {
                this._settingsAll = new _SettingsAll2.default({
                    moneySoftPerFriendHelp: 10,
                    timeBetweenFriendHelp: 21600,
                    moneySoft4Resume: 1000,
                    moneySoft4Ad: 20,
                    arrayMoneySoft4Resume: [100, 200, 500, 1000, 2000, 5000],
                    chest: {
                        timeOpen: 21600,
                        maxMoneySoft: 100
                    },
                    timeToFreeLife: 10800
                });
            }
            this.event(_Backend2.default.SERVER_SETTINGS_ALL, this._settingsAll);
        }
    }, {
        key: "bankCardsGet",
        value: function bankCardsGet() {
            if (!this._bankCards) {
                this._bankCards = [new _BankCard2.default({ id: 1, name: "com.candygrill.jump.chest1", price: 1, money_soft: 1000, votes: 5, plusPercentage: 0 }), new _BankCard2.default({ id: 2, name: "com.candygrill.jump.chest2", price: 3, money_soft: 3300, votes: 15, plusPercentage: 10 }), new _BankCard2.default({ id: 3, name: "com.candygrill.jump.chest3", price: 10, money_soft: 13000, votes: 50, plusPercentage: 30 })];
            }
            this.event(_Backend2.default.CLIENT_BANK_CARDS, this._bankCards);
        }
    }, {
        key: "profileGet",
        value: function profileGet() {
            if (!this._profile) {
                this._profileObj = this._profileStorageProvider && this._profileStorageProvider() || this._profileStorageProviderDef();
                this._profile = new _UserProfile2.default({
                    id: 1,
                    name: "User",
                    lang: "ru",
                    level: this._profileObj.get('level') || 1,
                    lives: 0,
                    scores: 0,
                    scoresMax: this._profileObj.get('scoresMax') || 0,
                    moneySoft: this._profileObj.get('moneySoft') || 1500,
                    isTester: true
                });
            }
            this._issueProfile();
        }
    }, {
        key: "userEventsGet",
        value: function userEventsGet() {
            if (!this._userEvents) {
                this._userEventData = { events: {
                        Chest: [{ id: "4", params: { money_soft: 60, money_soft_max: 100 }, needConfirm: true, timeRemain: 10 }],
                        Life: [{ id: "3", params: { lives: 1 }, needConfirm: true, timeRemain: 0 }], //10250}]
                        Ad: [{ id: "28", params: { dateShow: "20190129", showBeforeLife: false, showBeforeStart: true }, needConfirm: true, timeRemain: 315358244 }]
                    } };
                this._userEvents = new _UserEvents2.default(this, this._userEventData);
            }
            this.event(_Backend2.default.CLIENT_USER_EVENTS, this._userEventData);
        }
    }, {
        key: "usersGet",
        value: function usersGet(idsSocial) {
            var list = [];
            for (var i in idsSocial) {
                list.push({ idSocial: idsSocial[i], hasApp: 1 });
            }
            this.event(_Backend2.default.CLIENT_USERS_GET, list);
        }
    }, {
        key: "gameStart",
        value: function gameStart() {
            this._resumeCount = 0;
            this._freeResumeCount = 0;
        }
    }, {
        key: "gameWin",
        value: function gameWin(scores) {
            this._profile._data.level++;
            this._profileObj.set('level', this._profile._data.level);
            this._issueProfile();
        }
    }, {
        key: "gameLoose",
        value: function gameLoose(scores) {
            this._profile.scoresMax = Math.max(this._profile.scoresMax, scores);
            this._profileObj.set('scoresMax', this._profile.scoresMax);
            this._issueProfile();
        }
    }, {
        key: "gameResumeFree",
        value: function gameResumeFree() {
            this._freeResumeCount++;
            //this.userEvents.Life._reset(20);
            this.userEvents.Life._reset(1);
        }
    }, {
        key: "gameResumeSoft",
        value: function gameResumeSoft() {
            this._addMoneySoft(-this.resumeCost);
            this._resumeCount++;
            this._issueProfile();
        }
        //gameResumeAds() {
        //    // Nothing to do
        //}

    }, {
        key: "userOptionsGet",
        value: function userOptionsGet() {
            //if (!this._innerUserOptions)
            //this._innerUserOptions = { list:[{key:"resumeState", value:""}] };
            //this._innerUserOptions = { list:[{key:"resumeState", value:JSON.stringify({score:this._profile.scoresMax, isLastGameWasBest:true, result:'LOOSE', floorIndex:10, resumeCount:1, be_resumeCount:1})}] };
            //this._innerUserOptions = { list:[{key:"resumeState", value:JSON.stringify({score:97, isLastGameWasBest:true, result:'WIN', floorIndex:15, resumeCount:1, be_resumeCount:1})}] };
            //this.event(Backend.CLIENT_USER_OPTION_GET_ALL, this._innerUserOptions);
            var optionsObj = this._optionsObj;
            this.event(_Backend2.default.CLIENT_USER_OPTION_GET_ALL, {
                list: this._optionsObj.getKeys().map(function (key) {
                    return { key: key, value: optionsObj.get(key) };
                })
            });
        }
    }, {
        key: "userOptionSet",
        value: function userOptionSet(key, value) {
            //var entry = this._innerUserOptions.list.find(item => item.key == key);
            //if (entry)
            //    entry.value = value;
            this._optionsObj.set(key, value);
        }
    }, {
        key: "friendAsk",
        value: function friendAsk(id) {
            // Stub
        }
    }, {
        key: "friendReplyAll",
        value: function friendReplyAll() {
            // Stub
        }
    }, {
        key: "receiveHelps",
        value: function receiveHelps() {
            // Stub
        }
    }, {
        key: "receiveChest",
        value: function receiveChest() {
            var event = this.userEvents.Chest;
            this._addMoneySoft(event.money_soft);
            event.money_soft = 0;
            event._reset(10);
            this._issueProfile();
            this.userEvents._issueEvent('Chest');
        }
    }, {
        key: "addCoinsForAd",
        value: function addCoinsForAd() {
            this._addMoneySoft(_Backend2.default.COINS_FOR_AD);
            this._issueProfile();
        }
    }, {
        key: "friendScoreUpdate",
        value: function friendScoreUpdate(friendInfos) {
            for (var i = 0; i < friendInfos.length; i++) {
                friendInfos[i].score = i * 10;
            }
        }
    }, {
        key: "validatePurchase",
        value: function validatePurchase(purchase, card) {
            if (!purchase.info.signature) return Promise.resolve(false);
            return this._realBackend.validatePurchase(purchase).then(function (ok) {
                if (ok) {
                    setTimeout(function () {
                        this._addMoneySoft(card.money_soft);
                        this._issueProfile();
                    }.bind(this), 500); // simulate delayed coins add
                    return true;
                }
                return false;
            }.bind(this));
        }
    }, {
        key: "devAddMoney",
        value: function devAddMoney(value) {
            this._addMoneySoft(value);
            this._issueProfile();
        }
    }, {
        key: "devAddToChest",
        value: function devAddToChest(value) {
            var event = this.userEvents.Chest;
            event.money_soft = Math.min(event.money_soft + value, event.money_soft_max);
            this.userEvents._issueEvent('Chest');
        }
    }, {
        key: "devSpeedUpEvent",
        value: function devSpeedUpEvent(id) {
            for (var name in this.userEvents) {
                var event = this.userEvents[name];
                if (event.id == id && typeof event._reset == 'function') {
                    event._reset(0);
                    break;
                }
            }
        }
    }, {
        key: "devSetProgress",
        value: function devSetProgress(level, scores) {
            console.log(level, scores);
            level = Number(level);
            scores = Number(scores);
            if (isNaN(level) || isNaN(scores)) return;
            this.profile._data.level = level;
            this.profile._data.maxScores = scores;
            this._issueProfile();
        }
    }, {
        key: "_issueProfile",
        value: function _issueProfile() {
            this.event(_Backend2.default.CLIENT_PROFILE, this._profile);
        }
    }, {
        key: "_addMoneySoft",
        value: function _addMoneySoft(delta) {
            this.profile._data.moneySoft += delta;
            this._profileObj.set('moneySoft', this.profile._data.moneySoft);
        }
    }, {
        key: "settingsAll",
        get: function get() {
            return this._settingsAll;
        }
    }, {
        key: "profile",
        get: function get() {
            return this._profile;
        }
    }, {
        key: "userEvents",
        get: function get() {
            return this._userEvents;
        }
    }, {
        key: "bankCards",
        get: function get() {
            return this._bankCards;
        }
    }, {
        key: "userOptions",
        get: function get() {
            return this._userOptions;
        }
    }, {
        key: "resumeCount",
        get: function get() {
            return this._resumeCount;
        }
    }, {
        key: "freeResumeCount",
        get: function get() {
            return this._freeResumeCount;
        }
    }, {
        key: "resumeCost",
        get: function get() {
            return Math.round(this._resumeCostFactor * this.resumeCostOld);
        }
    }, {
        key: "resumeCostOld",
        get: function get() {
            return this.settingsAll.getMoneySoft4Resume(this._resumeCount);
        }
    }]);

    return BackendMock;
}(Laya.EventDispatcher);

exports.default = BackendMock;


var localStorage = [];
try {
    localStorage = window.localStorage;
} catch (e) {
    console.warn('window.localStorage is not accessable');
};

var LocalStorageObject = function () {
    function LocalStorageObject(objectName) {
        _classCallCheck(this, LocalStorageObject);

        this._objectName = objectName;
        this._object = this._load();
    }

    _createClass(LocalStorageObject, [{
        key: "getKeys",
        value: function getKeys() {
            var keys = [];
            for (var key in this._object) {
                keys.push(key);
            }return keys;
        }
    }, {
        key: "get",
        value: function get(key) {
            return this._object[key];
        }
    }, {
        key: "set",
        value: function set(key, value) {
            if (value !== this._object[key]) {
                this._object[key] = value;
                this._save();
            }
        }
    }, {
        key: "_load",
        value: function _load() {
            var str = localStorage[this._objectName];
            if (str) {
                try {
                    return JSON.parse(str);
                } catch (e) {}
            }
            return {};
        }
    }, {
        key: "_save",
        value: function _save() {
            console.log('SAVE ' + this._objectName);
            localStorage[this._objectName] = JSON.stringify(this._object);
        }
    }]);

    return LocalStorageObject;
}();

},{"./Backend":6,"./BankCard":8,"./SettingsAll":50,"./UserEvents":57,"./UserOptions":58,"./UserProfile":59}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var BankCard = function () {
    function BankCard(data) {
        _classCallCheck(this, BankCard);

        this._data = data;
        var arr = this.name.split('.');
        this._data.shortName = arr[arr.length - 1];
    }

    _createClass(BankCard, [{
        key: 'id',
        get: function get() {
            return this._data.id;
        }
    }, {
        key: 'name',
        get: function get() {
            return this._data.name;
        }
    }, {
        key: 'shortName',
        get: function get() {
            return this._data.shortName;
        }
    }, {
        key: 'price',
        get: function get() {
            return this._data.price;
        }
    }, {
        key: 'money_soft',
        get: function get() {
            return this._data.money_soft;
        }
    }, {
        key: 'votes',
        get: function get() {
            return this._data.votes;
        }
    }, {
        key: 'ok',
        get: function get() {
            return this._data.ok;
        }
    }, {
        key: 'ya',
        get: function get() {
            return this._data.ya;
        },
        set: function set(value) {
            this._data.ya = value;
        }
    }, {
        key: 'plusPercentage',
        get: function get() {
            return this._data.plusPercentage;
        }
    }]);

    return BankCard;
}();

exports.default = BankCard;

},{}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BankCardAdUI = function (_Laya$Panel) {
    _inherits(BankCardAdUI, _Laya$Panel);

    _createClass(BankCardAdUI, null, [{
        key: "EVENT_CARD_CLICK",
        get: function get() {
            return "CARD_CLICK";
        }
    }]);

    function BankCardAdUI() {
        _classCallCheck(this, BankCardAdUI);

        return _possibleConstructorReturn(this, (BankCardAdUI.__proto__ || Object.getPrototypeOf(BankCardAdUI)).call(this));
    }

    _createClass(BankCardAdUI, [{
        key: "init",
        value: function init(backend) {
            if (_Utils2.default.initProps(this, ['coinValue', 'btnBuy'])) {
                this.btnBuy.init();
                this.btnBuy.on(Laya.Event.CLICK, this, function () {
                    if (!this.btnBuy.disabled) this.event(BankCardAdUI.EVENT_CARD_CLICK);
                });
            }
            if (this.coinValue) this.coinValue.text = backend.settingsAll.moneySoft4Ad;
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_READY_CHANGED, this, this._updateDisabled);
            this._updateDisabled();
        }
    }, {
        key: "_updateDisabled",
        value: function _updateDisabled() {
            this.btnBuy.disabled = !_SocialApi2.default.inst.adsCanShowRewarded;
        }
    }]);

    return BankCardAdUI;
}(Laya.Panel);

exports.default = BankCardAdUI;

},{"./SocialApi":51,"./Utils":61}],10:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BankCardUI = function (_Laya$Panel) {
    _inherits(BankCardUI, _Laya$Panel);

    _createClass(BankCardUI, null, [{
        key: "EVENT_CARD_CLICK",
        get: function get() {
            return "CARD_CLICK";
        }
    }]);

    function BankCardUI() {
        _classCallCheck(this, BankCardUI);

        return _possibleConstructorReturn(this, (BankCardUI.__proto__ || Object.getPrototypeOf(BankCardUI)).call(this));
    }

    _createClass(BankCardUI, [{
        key: "_updateView",
        value: function _updateView() {
            var card = this._card;
            this.coinValue.text = String(card.money_soft);
            this.priceValue.text = _SocialApi2.default.inst.getPrice(card);
            this.currency.text = _SocialApi2.default.inst.getCurrencyString(card);
            //this.promo.visible = SocialApi.isYA;
        }
    }, {
        key: "card",
        get: function get() {
            return this._card;
        },
        set: function set(value) {
            this._card = value;
            if (_Utils2.default.initProps(this, ['coinValue', 'priceValue', 'currency', 'btnBuy', 'promo'])) {
                this.btnBuy.on(Laya.Event.CLICK, this, function () {
                    this.event(BankCardUI.EVENT_CARD_CLICK, this.card);
                });
            }
            this._updateView();
        }
    }]);

    return BankCardUI;
}(Laya.Panel);

exports.default = BankCardUI;

},{"./SocialApi":51,"./Utils":61}],11:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _BankCardUI = require("./BankCardUI");

var _BankCardUI2 = _interopRequireDefault(_BankCardUI);

var _BankCardAdUI = require("./BankCardAdUI");

var _BankCardAdUI2 = _interopRequireDefault(_BankCardAdUI);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _Locale = require("./Locale");

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BankUI = function (_BaseWindow) {
    _inherits(BankUI, _BaseWindow);

    function BankUI() {
        _classCallCheck(this, BankUI);

        return _possibleConstructorReturn(this, (BankUI.__proto__ || Object.getPrototypeOf(BankUI)).call(this));
    }

    _createClass(BankUI, [{
        key: "onInit",
        value: function onInit() {
            _get(BankUI.prototype.__proto__ || Object.getPrototypeOf(BankUI.prototype), "onInit", this).call(this);
            this.devPlus.visible = _Utils2.default.devMode;
            this.devBlock.visible = _Utils2.default.devMode;
            if (this.adsHint) {
                this.adsHint.visible = _SocialApi2.default.inst.adsSupported && _Utils2.default.canUsePurchases;
                if (this.adsHint.visible) {
                    if (_SocialApi2.default.isOK) this.adsHint.text = "Платеж в 25 ОК и больше отключает рекламу.";
                    if (_SocialApi2.default.isYA) this.adsHint.text = ""; // Init later
                }
            }
            if (_Utils2.default.devMode) {
                this.devPlus.on(Laya.Event.CLICK, this, function () {
                    this._backend.devAddMoney(500);
                });
                this.btnSetPorogress.on(Laya.Event.CLICK, this, function () {
                    this._backend.devSetProgress(this.inpLevel.text, this.inpScores.text);
                });
            }
            if (this.list) for (var i = 0; i < this.list.numChildren; i++) {
                var cardView = this.list.getChildAt(i);
                cardView.on(_BankCardUI2.default.EVENT_CARD_CLICK, this, this._onCardClick);
            }
        }
    }, {
        key: "show",
        value: function show() {
            if (_SocialApi2.default.inst.preBankShow()) this.visible = true;
        }
    }, {
        key: "onShow",
        value: function onShow() {
            if (this.userOptions) this.userOptions.updateView();
            Laya.timer.frameLoop(1, this, this._onFrame);
        }
    }, {
        key: "onHide",
        value: function onHide() {
            Laya.timer.clear(this, this._onFrame);
        }
    }, {
        key: "init",
        value: function init(backend) {
            this._backend = backend;
            if (_Utils2.default.devMode) this.userOptions = new DevUserOptions(backend.userOptions, this.devUserOptions);
            if (_SocialApi2.default.isYA && this.adsHint && this.adsHint.visible) {
                var card = this._backend.bankCards[0];
                //if (card) this.adsHint.text = "Платеж в " + card.ya + " Р и больше отключает рекламу.";
                if (card) this.adsHint.text = _Locale2.default.format('L_ADS_OFF_CONDITION', card.ya);
            }
            if (_SocialApi2.default.inst.adsForCoinsSupported) {
                this.adShowItem.init(backend);
                this.adShowItem.on(_BankCardAdUI2.default.EVENT_CARD_CLICK, this, function () {
                    BankUI.showAdForCoins(this._backend);
                });
                // if (!Utils.canUsePurchases) {
                //     this.list.visible = false;
                //     this.back.height = 300;
                // }
            } else {
                this.adShowItem.visible = false;
                this.back.height = 680;
            }
            if (this.list) {
                backend.on(_Backend2.default.CLIENT_BANK_CARDS, this, this._updateView);
                this._updateView();
            }
        }
    }, {
        key: "_onCardClick",
        value: function _onCardClick(card) {
            if (card) {
                //this._pendProfileUpdateOnFocus();
                _SocialApi2.default.inst.showOrderBox(card);
            }
        }
        /*_pendProfileUpdateOnFocus() {
            var backend = this._backend;
            var count = 0;
            var callback = function() {
                if (document.visibilityState == 'visible') {
                    count++;
                    if (count == 1) return;
                    window.removeEventListener('visibilitychange', callback);
                    setTimeout(function() { backend.profileGet(); }, 3000);
                }
            };
            window.addEventListener('visibilitychange', callback);
        }*/

    }, {
        key: "_updateView",
        value: function _updateView() {
            var cards = this._backend.bankCards;
            var count = Math.min(cards.length, this.list.numChildren);
            for (var i = 0; i < count; i++) {
                var cardView = this.list.getChildAt(i);
                cardView.card = cards[i];
            }
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            if (this.adShowItem && this.adShowItem.btnBuy) this._applyAnimScale(this.adShowItem.btnBuy);
        }
    }], [{
        key: "showAdForCoins",
        value: function showAdForCoins(backend, onSuccess) {
            if (_SocialApi2.default.inst.adsCanShowRewarded) {
                var onComplete = null;
                var onSkipped = null;
                var off = function off() {
                    _SocialApi2.default.inst.off(_SocialApi2.default.EVENT_ADS_SHOW_COMPLETE, this, onComplete);
                    _SocialApi2.default.inst.off(_SocialApi2.default.EVENT_ADS_SHOW_STOPPED, this, onSkipped);
                };
                var onComplete = function onComplete() {
                    off();
                    backend.addCoinsForAd();
                    if (onSuccess) onSuccess();
                };
                var onSkipped = function onSkipped() {
                    off();
                };
                _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_COMPLETE, this, onComplete);
                _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_SKIPPED, this, onSkipped);
                _SocialApi2.default.inst.adsShow(true);
            }
        }
    }]);

    return BankUI;
}(_BaseWindow3.default);

exports.default = BankUI;

var DevUserOptions = function () {
    function DevUserOptions(userOptions, view) {
        _classCallCheck(this, DevUserOptions);

        this.userOptions = userOptions;
        this.view = view;
        _Utils2.default.initProps(view, ['key0', 'key1', 'key2', 'key3', 'value0', 'value1', 'value2', 'value3', 'btnApply']);
        this.keys = [view.key0, view.key1, view.key2, view.key3];
        this.values = [view.value0, view.value1, view.value2, view.value3];
        view.btnApply.on(Laya.Event.CLICK, this, this._onApply);
    }

    _createClass(DevUserOptions, [{
        key: "_onApply",
        value: function _onApply() {
            for (var i = 0; i < this.keys.length; i++) {
                var key = this.keys[i].text;
                if (key) this.userOptions.setOption(key, this.values[i].text);
            }
            this.updateView();
        }
    }, {
        key: "updateView",
        value: function updateView() {
            //console.log("OPTIONS UPDATE");
            var idx = 0;
            var options = this.userOptions.options;
            for (var key in options) {
                if (!this.keys[idx]) return;
                this.keys[idx].text = key;
                this.values[idx].text = options[key];
                idx++;
            }
        }
    }]);

    return DevUserOptions;
}();

},{"./Backend":6,"./BankCardAdUI":9,"./BankCardUI":10,"./BaseWindow":12,"./Locale":38,"./SocialApi":51,"./Utils":61}],12:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { set(parent, property, value, receiver); } } else if ("value" in desc && desc.writable) { desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { setter.call(receiver, value); } } return value; };

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Locale = require("./Locale");

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BaseWindow = function (_Laya$Scene) {
    _inherits(BaseWindow, _Laya$Scene);

    _createClass(BaseWindow, null, [{
        key: "EVENT_SHOWN",
        get: function get() {
            return "SHOWN";
        }
    }, {
        key: "EVENT_HIDDEN",
        get: function get() {
            return "HIDDEN";
        }
    }]);

    function BaseWindow() {
        _classCallCheck(this, BaseWindow);

        var _this = _possibleConstructorReturn(this, (BaseWindow.__proto__ || Object.getPrototypeOf(BaseWindow)).call(this));

        _this.once("onViewCreated", _this, _this._onViewCreated);
        return _this;
    }

    _createClass(BaseWindow, [{
        key: "show",
        value: function show() {
            this.visible = true;
        }
    }, {
        key: "hide",
        value: function hide() {
            this.visible = false;
        }
    }, {
        key: "onInit",
        value: function onInit() {
            // TODO : override
        }
    }, {
        key: "onShow",
        value: function onShow() {
            // TODO : override
        }
    }, {
        key: "onHide",
        value: function onHide() {
            // TODO : override
        }
    }, {
        key: "_applyAnimScale",
        value: function _applyAnimScale(target) {
            var t = Laya.timer.currTimer * 0.001;
            var scl = 1 + 0.05 * (1 + Math.sin(2 * Math.PI * t));
            target.scaleX = scl;
            target.scaleY = scl;
        }
    }, {
        key: "_onViewCreated",
        value: function _onViewCreated() {
            if (this.btnClose) this.btnClose.on(Laya.Event.CLICK, this, this.hide);
            this._localize();
            this.onInit();
        }
    }, {
        key: "_localize",
        value: function _localize() {
            for (var key in this) {
                if (key.indexOf('L_') === 0) {
                    var locKey = key.split('$')[0];
                    var locValue = _Locale2.default.text(locKey);
                    if (locValue) this[key].text = locValue;
                } else if (key.indexOf('LIMG_') === 0) {
                    this[key].visible = key.split('$')[1] == _Locale2.default.lang;
                }
            }
        }
    }, {
        key: "visible",
        get: function get() {
            return _get(BaseWindow.prototype.__proto__ || Object.getPrototypeOf(BaseWindow.prototype), "visible", this);
        },
        set: function set(value) {
            if (value != this.visible) {
                _set(BaseWindow.prototype.__proto__ || Object.getPrototypeOf(BaseWindow.prototype), "visible", value, this);
                if (value) {
                    this.onShow();
                    this.event(BaseWindow.EVENT_SHOWN, this);
                } else {
                    this.onHide();
                    this.event(BaseWindow.EVENT_HIDDEN, this);
                }
            }
        }
    }]);

    return BaseWindow;
}(Laya.Scene);

exports.default = BaseWindow;

},{"./Locale":38}],13:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BlotSprite = function (_Laya$MeshSprite3D) {
    _inherits(BlotSprite, _Laya$MeshSprite3D);

    function BlotSprite(mesh, mat, pool) {
        _classCallCheck(this, BlotSprite);

        var _this = _possibleConstructorReturn(this, (BlotSprite.__proto__ || Object.getPrototypeOf(BlotSprite)).call(this, mesh));

        _this._pool = pool;
        if (pool) _this.on(Laya.Event.REMOVED, _this, _this._onBlotSpriteRemoved);
        _this.meshRenderer.sharedMaterial = mat;
        return _this;
    }

    _createClass(BlotSprite, [{
        key: "destroy",
        value: function destroy(destroyChild) {
            if (!this._pool) _get(BlotSprite.prototype.__proto__ || Object.getPrototypeOf(BlotSprite.prototype), "destroy", this).call(this, destroyChild);
        }
    }, {
        key: "_onBlotSpriteRemoved",
        value: function _onBlotSpriteRemoved() {
            if (this._pool) this._pool._return(this);
        }
    }]);

    return BlotSprite;
}(Laya.MeshSprite3D);

exports.default = BlotSprite;

},{}],14:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BlotSprite = require("./BlotSprite");

var _BlotSprite2 = _interopRequireDefault(_BlotSprite);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var MAX_BLOTS = 30;

var BlotSpritePool = function () {
    function BlotSpritePool() {
        _classCallCheck(this, BlotSpritePool);

        this._blots = [];
        this._added = [];
        this._mesh = new Laya.PlaneMesh(1, 1, 1, 1);
        var mat = new Laya.UnlitMaterial();
        this._material = mat;
        mat.albedoIntensity = 1;
        mat.renderMode = Laya.UnlitMaterial.RENDERMODE_TRANSPARENT;
        Laya.Texture2D.load('inkblot.png', new Laya.Handler(this, function (tex) {
            mat.albedoTexture = tex;
        }));
    }

    _createClass(BlotSpritePool, [{
        key: "addTo",
        value: function addTo(parentSprite) {
            if (this._added.length > MAX_BLOTS) {
                this._added[0].parent.removeChild(this._added[0]);
            }
            var blot = this._blots.pop() || new _BlotSprite2.default(this._mesh, this._material, this);
            blot.transform.localPosition = Laya.Vector3.ZERO;
            blot.transform.localScale = Laya.Vector3.ONE;
            blot.transform.localRotation = Laya.Quaternion.DEFAULT;
            this._added.push(blot);
            return parentSprite.addChild(blot);
        }
    }, {
        key: "_return",
        value: function _return(blot) {
            var idx = this._added.indexOf(blot);
            if (idx >= 0) {
                this._added.splice(idx, 1);
                if (blot.parent) blot.parent.removeChild(blot);
                this._blots.push(blot);
            }
        }
    }, {
        key: "color",
        get: function get() {
            return this._material.albedoColor;
        },
        set: function set(value) {
            this._material.albedoColor = value;
        }
    }]);

    return BlotSpritePool;
}();

exports.default = BlotSpritePool;

},{"./BlotSprite":13}],15:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = CSVToArray;
// ref: http://stackoverflow.com/a/1293163/2343
// This will parse a delimited string into an array of
// arrays. The default delimiter is the comma, but this
// can be overriden in the second argument.
function CSVToArray(strData, strDelimiter) {
    // Check to see if the delimiter is defined. If not,
    // then default to comma.
    strDelimiter = strDelimiter || ",";

    // Create a regular expression to parse the CSV values.
    var objPattern = new RegExp(
    // Delimiters.
    "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

    // Quoted fields.
    "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

    // Standard fields.
    "([^\"\\" + strDelimiter + "\\r\\n]*))", "gi");

    // Create an array to hold our data. Give the array
    // a default empty first row.
    var arrData = [[]];

    // Create an array to hold our individual pattern
    // matching groups.
    var arrMatches = null;

    // Keep looping over the regular expression matches
    // until we can no longer find a match.
    while (arrMatches = objPattern.exec(strData)) {

        // Get the delimiter that was found.
        var strMatchedDelimiter = arrMatches[1];

        // Check to see if the given delimiter has a length
        // (is not the start of string) and if it matches
        // field delimiter. If id does not, then we know
        // that this delimiter is a row delimiter.
        if (strMatchedDelimiter.length && strMatchedDelimiter !== strDelimiter) {

            // Since we have reached a new row of data,
            // add an empty row to our data array.
            arrData.push([]);
        }

        var strMatchedValue;

        // Now that we have our delimiter out of the way,
        // let's check to see which kind of value we
        // captured (quoted or unquoted).
        if (arrMatches[2]) {

            // We found a quoted value. When we capture
            // this value, unescape any double quotes.
            strMatchedValue = arrMatches[2].replace(new RegExp("\"\"", "g"), "\"");
        } else {

            // We found a non-quoted value.
            strMatchedValue = arrMatches[3];
        }

        // Now that we have our value string, let's add
        // it to the data array.
        arrData[arrData.length - 1].push(strMatchedValue);
    }

    // Return the parsed data.
    return arrData;
}

},{}],16:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

var _WndMan = require("./WndMan");

var _WndMan2 = _interopRequireDefault(_WndMan);

var _FriendInfo = require("./FriendInfo");

var _FriendInfo2 = _interopRequireDefault(_FriendInfo);

var _FriendsUI = require("./FriendsUI");

var _FriendsUI2 = _interopRequireDefault(_FriendsUI);

var _UserEvents = require("./UserEvents");

var _UserEvents2 = _interopRequireDefault(_UserEvents);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _BankCardAdUI = require("./BankCardAdUI");

var _BankCardAdUI2 = _interopRequireDefault(_BankCardAdUI);

var _BankUI = require("./BankUI");

var _BankUI2 = _interopRequireDefault(_BankUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ChestUI = function (_BaseWindow) {
    _inherits(ChestUI, _BaseWindow);

    _createClass(ChestUI, null, [{
        key: "REQUEST_TEXT",
        get: function get() {
            return "Помоги наполнить сундук с золотом в Прыгуне";
        }
    }]);

    function ChestUI() {
        _classCallCheck(this, ChestUI);

        return _possibleConstructorReturn(this, (ChestUI.__proto__ || Object.getPrototypeOf(ChestUI)).call(this));
    }

    _createClass(ChestUI, [{
        key: "onInit",
        value: function onInit() {
            _get(ChestUI.prototype.__proto__ || Object.getPrototypeOf(ChestUI.prototype), "onInit", this).call(this);
            this.btnRequest.on(Laya.Event.CLICK, this, this._onRequestClick);
            this.btnOpen.on(Laya.Event.CLICK, this, this._onOpenClick);
            this.btnOpen.init();
            this._progressInitialRight = this.progress.right;
            _WndMan2.default.inst.friendsUI.on(_FriendsUI2.default.EVENT_FRIEND_SELECTED, this, this._onFriendSelected);
            this.devPlus.visible = _Utils2.default.devMode;
            this.devSpeedUp.visible = _Utils2.default.devMode;
            if (_Utils2.default.devMode) {
                this.devPlus.on(Laya.Event.CLICK, this, function () {
                    this._backend.devAddToChest(20);
                });
                this.devSpeedUp.on(Laya.Event.CLICK, this, function () {
                    this._backend.devSpeedUpEvent(this._backend.userEvents.Chest.id);
                });
            }
        }
    }, {
        key: "onShow",
        value: function onShow() {
            _get(ChestUI.prototype.__proto__ || Object.getPrototypeOf(ChestUI.prototype), "onShow", this).call(this);
            this.progressTweenValue = 0;
            this._backend.userEvents.on(_UserEvents2.default.EVENT_CHEST, this, this._onChestEvent);
            this._onChestEvent();
            Laya.timer.frameLoop(1, this, this._onFrame);
            this._onFrame();
        }
    }, {
        key: "onHide",
        value: function onHide() {
            _get(ChestUI.prototype.__proto__ || Object.getPrototypeOf(ChestUI.prototype), "onHide", this).call(this);
            if (this._backend) this._backend.userEvents.off(_UserEvents2.default.EVENT_CHEST, this, this._onChestEvent);
            Laya.timer.clearAll(this);
        }
    }, {
        key: "init",
        value: function init(backend) {
            this._backend = backend;
            this._invitedIds = {};
            if (_SocialApi2.default.inst.adsSupported) {
                this.adShowItem.init(backend);
                this.adShowItem.on(_BankCardAdUI2.default.EVENT_CARD_CLICK, this, function () {
                    _BankUI2.default.showAdForCoins(this._backend);
                });
            } else this.adShowItem.visible = false;
        }
    }, {
        key: "_onChestEvent",
        value: function _onChestEvent() {
            var event = this._backend.userEvents.Chest;
            Laya.Tween.to(this, { progressTweenValue: event.money_soft / event.money_soft_max }, 500, Laya.Ease.quadOut);
        }
    }, {
        key: "_onRequestClick",
        value: function _onRequestClick() {
            var _this2 = this;

            // if (SocialApi.isOK)
            //     SocialApi.inst.showShareBox(ChestUI.REQUEST_TEXT, "876935920956"); // https://ok.ru/group/59384228675644/album/59384602689596/876935920956
            // else
            _WndMan2.default.inst.friendsUI.showFriends(_SocialApi2.default.inst.appFriends.filter(function (info) {
                return !_this2._invitedIds[info.id];
            }));
        }
    }, {
        key: "_onFriendSelected",
        value: function _onFriendSelected(info) {
            if (info) {
                _SocialApi2.default.inst.showRequestBox(info.id, ChestUI.REQUEST_TEXT);
                this._backend.friendAsk(info.id);
                this._invitedIds[info.id] = true;
                this._onRequestClick();
            } else {
                _SocialApi2.default.inst.showInviteBox(ChestUI.REQUEST_TEXT);
            }
        }
    }, {
        key: "_onOpenClick",
        value: function _onOpenClick() {
            if (this._canReceiveChest) this._backend.receiveChest();
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            this.openHint.update(this._backend.userEvents.Chest);
            this.btnOpen.disabled = !this._canReceiveChest;
            if (this.adShowItem && this.adShowItem.btnBuy) this._applyAnimScale(this.adShowItem.btnBuy);
        }
    }, {
        key: "progressTweenValue",
        get: function get() {
            return this._progressTween;
        },
        set: function set(value) {
            this._progressTween = value;
            this.progress.right = this._progressInitialRight * (1 - value);
            this.lblProgressValue.text = String(Math.round(value * this._backend.userEvents.Chest.money_soft_max));
        }
    }, {
        key: "_canReceiveChest",
        get: function get() {
            var event = this._backend.userEvents.Chest;
            return event.money_soft > 0 && event.expired;
        }
    }]);

    return ChestUI;
}(_BaseWindow3.default);

exports.default = ChestUI;

},{"./BankCardAdUI":9,"./BankUI":11,"./BaseWindow":12,"./FriendInfo":21,"./FriendsUI":23,"./SocialApi":51,"./UserEvents":57,"./Utils":61,"./WndMan":62}],17:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DevVKScores = function (_Laya$Panel) {
    _inherits(DevVKScores, _Laya$Panel);

    function DevVKScores() {
        _classCallCheck(this, DevVKScores);

        return _possibleConstructorReturn(this, (DevVKScores.__proto__ || Object.getPrototypeOf(DevVKScores)).apply(this, arguments));
    }

    _createClass(DevVKScores, [{
        key: "init",
        value: function init(backend) {
            this._backend = backend;
            _Utils2.default.initProps(this, ['inpScores', 'btnSend', 'btnCancel']);
            this.btnSend.on(Laya.Event.CLICK, this, this._onSendClick);
            this.btnCancel.on(Laya.Event.CLICK, this, this._onCancelClick);
            this._backend.on('client.systemCommands.debug.vkAddAppEvent', this, this._onAddAppEventResponse);
        }
    }, {
        key: "show",
        value: function show(scores) {
            if (_SocialApi2.default.isVK) {
                this.inpScores.text = scores || '0';
                this.visible = true;
            } else _SocialApi2.default.inst.showLeaderboardBox(scores);
        }
    }, {
        key: "_onSendClick",
        value: function _onSendClick() {
            alert("secure.addAppEvent { activity_id: '1', value: '" + this.inpScores.text + "' }");
            this.visible = false;
            this._backend._api('systemCommands.debug.vkAddAppEvent', { activity_id: '1', value: this.inpScores.text });
        }
    }, {
        key: "_onAddAppEventResponse",
        value: function _onAddAppEventResponse(data) {
            alert(data.response);
            this._onCancelClick();
        }
    }, {
        key: "_onCancelClick",
        value: function _onCancelClick() {
            this.visible = false;
            var scores = Number(this.inpScores.text);
            alert("VK.callMethod('showLeaderboardBox', " + scores + ")");
            _SocialApi2.default.inst.showLeaderboardBox(scores);
        }
    }]);

    return DevVKScores;
}(Laya.Panel);

exports.default = DevVKScores;

},{"./Backend":6,"./SocialApi":51,"./Utils":61}],18:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Locale = require('./Locale');

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var EventTimerView = function (_Laya$Panel) {
    _inherits(EventTimerView, _Laya$Panel);

    function EventTimerView() {
        _classCallCheck(this, EventTimerView);

        var _this = _possibleConstructorReturn(this, (EventTimerView.__proto__ || Object.getPrototypeOf(EventTimerView)).call(this));

        _this._lastTimer = 0;
        _this._prefix = _Locale2.default.text('L_TIMER_IN') + ' '; // "ЧЕРЕЗ ";
        return _this;
    }

    _createClass(EventTimerView, [{
        key: 'update',
        value: function update(event) {
            this.visible = !event.expired;
            if (!event.expired && event.secondsRemain != this._lastTimer) {
                this._lastTimer = event.secondsRemain;
                if (!this.lblHintTimer) this.lblHintTimer = this.getChildByName('lblHintTimer');
                this.lblHintTimer.text = this.prefix ? this.prefix + event.timerText : event.timerText;
            }
        }
    }, {
        key: 'prefix',
        get: function get() {
            return this._prefix;
        },
        set: function set(value) {
            this._prefix = value;
        }
    }]);

    return EventTimerView;
}(Laya.Panel);

exports.default = EventTimerView;

},{"./Locale":38}],19:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloatUpHint = function (_Laya$Panel) {
    _inherits(FloatUpHint, _Laya$Panel);

    function FloatUpHint() {
        _classCallCheck(this, FloatUpHint);

        return _possibleConstructorReturn(this, (FloatUpHint.__proto__ || Object.getPrototypeOf(FloatUpHint)).call(this));
    }

    _createClass(FloatUpHint, [{
        key: "init",
        value: function init() {
            if (this._labels) return;
            this._index = 0;
            this._labels = [];
            for (var i = 0; i < this.numChildren; i++) {
                var label = this.getChildAt(i);
                if (label) {
                    label.visible = false;
                    this._labels.push(label);
                }
            }
        }
    }, {
        key: "add",
        value: function add(message) {
            var label = this._labels[this._index];
            label.text = message;
            this._index = (this._index + 1) % this._labels.length;
            label.visible = true;
            Laya.Tween.to(new HintLabel(label), { alpha: 1 }, 500);
        }
    }]);

    return FloatUpHint;
}(Laya.Panel);

exports.default = FloatUpHint;

var HintLabel = function () {
    function HintLabel(label) {
        _classCallCheck(this, HintLabel);

        this._label = label;
        this._alpha = 0;
    }

    _createClass(HintLabel, [{
        key: "alpha",
        get: function get() {
            return this._alpha;
        },
        set: function set(value) {
            this._alpha = value;
            this._label.alpha = Math.sqrt(Math.sqrt(1 - value));
            this._label.visible = value < 1;
            this._label.y = (this._label.parent.height - this._label.height) * (1 - value);
        }
    }]);

    return HintLabel;
}();

},{}],20:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _FriendsListItem = require("./FriendsListItem");

var _FriendsListItem2 = _interopRequireDefault(_FriendsListItem);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FriendDefeatUI = function (_BaseWindow) {
    _inherits(FriendDefeatUI, _BaseWindow);

    function FriendDefeatUI() {
        _classCallCheck(this, FriendDefeatUI);

        return _possibleConstructorReturn(this, (FriendDefeatUI.__proto__ || Object.getPrototypeOf(FriendDefeatUI)).apply(this, arguments));
    }

    _createClass(FriendDefeatUI, [{
        key: "onInit",
        value: function onInit() {
            if (this.list) {
                this._items = [this.item0, this.item1, this.item2];
                for (var i in this._items) {
                    this._items[i].checkInit();
                    this._items[i].on(_FriendsListItem2.default.EVENT_SHARE, this, this._onShareClick);
                }
            } else {
                this.btnShare.on(Laya.Event.CLICK, this, function () {
                    this._onShareClick(this.itemFriend.info);this.hide();
                }.bind(this));
            }
        }
    }, {
        key: "tryShow",
        value: function tryShow(scores, prevScores) {
            var defeated = _SocialApi2.default.inst.appFriends.filter(function (e) {
                return e.score && scores > e.score && (!prevScores || e.score >= prevScores);
            });
            if (!defeated.length) return;
            defeated.sort(function (a, b) {
                return b.score - a.score;
            });
            this._scores = scores;
            this._updateView(defeated);
            _get(FriendDefeatUI.prototype.__proto__ || Object.getPrototypeOf(FriendDefeatUI.prototype), "show", this).call(this);

            this._animTime = 0;
            Laya.timer.frameLoop(1, this, this._onFrame);
        }
    }, {
        key: "hide",
        value: function hide() {
            _get(FriendDefeatUI.prototype.__proto__ || Object.getPrototypeOf(FriendDefeatUI.prototype), "hide", this).call(this);
            Laya.timer.clearAll(this);
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            this._animTime += Laya.timer.delta * 0.001;
            var A = 10;
            var t = 2 * Math.PI * this._animTime;
            this.arrowUp.y = A * (1 + Math.sin(t));
            this.arrowDown.y = A * (1 - Math.sin(t));
        }
    }, {
        key: "_onShareClick",
        value: function _onShareClick(info) {
            console.log(this._scores, info);
            var delta = this._scores - info.score;
            var scoreStr = _Utils2.default.formatPrice(delta, ["очко", "очка", "очков"]);
            //if (SocialApi.isVK)
            _SocialApi2.default.inst.showRequestBox(info.id, "Xа-ха, я тебя обогнал на " + scoreStr);
            //else SocialApi.inst.showShareBox("Xа-ха, я обогнал " + info.name + " на " + scoreStr, SocialApi.PHOTO_NEW_SCORE);
        }
    }, {
        key: "_updateView",
        value: function _updateView(friends) {
            if (this.list) {
                this.lblScore.text = this._scores;
                var visCount = Math.min(friends.length, this._items.length);
                this.lblNFriends.text = friends.length == 1 ? "и обогнал друга" : "и обогнал " + visCount + " друзей";
                this.lblNFriends2.visible = friends.length > this._items.length;
                if (this.lblNFriends2.visible) {
                    var extraCount = friends.length - this._items.length;
                    this.lblNFriends2.text = extraCount == 1 ? "и еще 1 друга" : "и еще " + extraCount + " друзей";
                }
                for (var i = 0; i < this._items.length; i++) {
                    var item = this._items[i];
                    item.visible = i < visCount;
                    if (item.visible) {
                        item.info = friends[i];
                        item.left = item.right = item.centerX = undefined;
                        item.x = item.parent.width * ((i + 0.5) / visCount) - item.width * 0.5;
                    }
                }
            } else {
                _SocialApi2.default.inst.user.score = this._scores;
                this.itemYou.info = _SocialApi2.default.inst.user;
                this.itemFriend.info = friends[0];
            }
        }
    }]);

    return FriendDefeatUI;
}(_BaseWindow3.default);

exports.default = FriendDefeatUI;

},{"./BaseWindow":12,"./FriendsListItem":22,"./SocialApi":51,"./Utils":61}],21:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FriendInfo = function FriendInfo(id, name, avatar) {
    _classCallCheck(this, FriendInfo);

    this.id = id;
    this.name = name;
    this.avatar = avatar;
    this.score = 0;
};

exports.default = FriendInfo;

},{}],22:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _FriendInfo = require("./FriendInfo");

var _FriendInfo2 = _interopRequireDefault(_FriendInfo);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FriendsListItem = function (_Laya$Panel) {
    _inherits(FriendsListItem, _Laya$Panel);

    _createClass(FriendsListItem, null, [{
        key: "EVENT_SHARE",
        get: function get() {
            return "SHARE";
        }
    }]);

    function FriendsListItem() {
        _classCallCheck(this, FriendsListItem);

        return _possibleConstructorReturn(this, (FriendsListItem.__proto__ || Object.getPrototypeOf(FriendsListItem)).call(this));
    }

    _createClass(FriendsListItem, [{
        key: "checkInit",
        value: function checkInit() {
            this._init();
        }
    }, {
        key: "_updateView",
        value: function _updateView() {
            this._init();
            var info = this.info;
            if (this.lblName) this.lblName.visible = !!info;
            if (this.inviteBack) this.inviteBack.visible = !info;
            if (info) {
                if (this.lblName) this.lblName.text = info.name;
                this.avatar.skin = info.avatar;
                if (this.lblScore && !Number.isNaN(Number(info.score))) this.lblScore.text = info.score;
            }
        }
    }, {
        key: "_init",
        value: function _init() {
            if (!this._initialized) {
                this._initialized = true;
                _Utils2.default.initProps(this, ["lblName", "inviteBack", "avatar", "lblScore", "btnShare"]);
                if (this.avatar) {
                    var avatarSize = this.avatar.width;
                    this.avatar.on(Laya.Event.LOADED, this, function () {
                        var ratio = this.avatar.source.width / this.avatar.source.height;
                        if (ratio > 1) {
                            this.avatar.width = avatarSize * ratio;this.avatar.height = avatarSize;
                        } else {
                            this.avatar.width = avatarSize;this.avatar.height = avatarSize / ratio;
                        }
                        this.avatar.mask.x = (this.avatar.width - this.avatar.mask.width) * 0.5;
                    });
                }
                if (this.btnShare) this.on(Laya.Event.CLICK, this, function () {
                    this.event(FriendsListItem.EVENT_SHARE, this.info);
                });
            }
        }
    }, {
        key: "info",
        get: function get() {
            return this._info;
        },
        set: function set(value) {
            this._info = value;
            this._updateView();
        }
    }]);

    return FriendsListItem;
}(Laya.Panel);

exports.default = FriendsListItem;

},{"./FriendInfo":21,"./Utils":61}],23:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FriendsUI = function (_BaseWindow) {
    _inherits(FriendsUI, _BaseWindow);

    _createClass(FriendsUI, null, [{
        key: "EVENT_FRIEND_SELECTED",
        get: function get() {
            return "FRIEND_SELECTED";
        }
    }, {
        key: "COLUMNS",
        get: function get() {
            return 3;
        }
    }, {
        key: "ROWS_MIN",
        get: function get() {
            return 2;
        }
    }, {
        key: "ROWS_MAX",
        get: function get() {
            return 5;
        }
    }]);

    function FriendsUI() {
        _classCallCheck(this, FriendsUI);

        return _possibleConstructorReturn(this, (FriendsUI.__proto__ || Object.getPrototypeOf(FriendsUI)).call(this));
    }

    _createClass(FriendsUI, [{
        key: "onInit",
        value: function onInit() {
            _get(FriendsUI.prototype.__proto__ || Object.getPrototypeOf(FriendsUI.prototype), "onInit", this).call(this);
            this._initialHeight = this.back.height;
            this._itemHeight = this.list.getChildAt(0).height;
            this.pager.visible = false;
            for (var i = 0; i < this.list.numChildren; i++) {
                var item = this.list.getChildAt(i);
                item.on(Laya.Event.CLICK, this, this._onItemClick);
            }
        }
    }, {
        key: "showFriends",
        value: function showFriends(infos) {
            this._infos = infos.slice(0, FriendsUI.COLUMNS * FriendsUI.ROWS_MAX - 1);
            this._updateView();
            this.show();
        }
    }, {
        key: "_onItemClick",
        value: function _onItemClick(e) {
            var item = e.target;
            this.event(FriendsUI.EVENT_FRIEND_SELECTED, item.info);
        }
    }, {
        key: "_updateView",
        value: function _updateView() {
            var infos = this._infos;
            var showCount = Math.min(Math.max(FriendsUI.COLUMNS * FriendsUI.ROWS_MIN, infos.length + 1), FriendsUI.COLUMNS * FriendsUI.ROWS_MAX);
            showCount = Math.ceil(showCount / FriendsUI.COLUMNS) * FriendsUI.COLUMNS;
            this.back.height = this._initialHeight + (showCount / FriendsUI.COLUMNS - 1) * this._itemHeight;
            for (var i = 0; i < this.list.numChildren; i++) {
                var item = this.list.getChildAt(i);
                item.visible = i < showCount;
                if (i < showCount) item.info = infos[i];
            }
        }
    }]);

    return FriendsUI;
}(_BaseWindow3.default);

exports.default = FriendsUI;

},{"./BaseWindow":12}],24:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _HelixGame = require('./HelixGame');

var _HelixGame2 = _interopRequireDefault(_HelixGame);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameProgress = function (_Laya$EventDispatcher) {
    _inherits(GameProgress, _Laya$EventDispatcher);

    _createClass(GameProgress, null, [{
        key: 'EVENT_SCORE_CHANGED',
        get: function get() {
            return 'SCORE_CHANGED';
        }
    }, {
        key: 'EVENT_SCORE_BEST',
        get: function get() {
            return 'SCORE_BEST';
        }
    }, {
        key: 'EVENT_LEVEL_CHANGED',
        get: function get() {
            return 'LEVEL_CHANGED';
        }
        //static get EVENT_COINS_CHANGED() { return 'COINS_CHANGED'; }

    }]);

    function GameProgress() {
        _classCallCheck(this, GameProgress);

        var _this = _possibleConstructorReturn(this, (GameProgress.__proto__ || Object.getPrototypeOf(GameProgress)).call(this));

        _this._state = {
            bestScore: 0,
            bestScorePrev: 0,
            level: 1
        };
        _this.isLastGameWasBest = false;
        _this._curScore = 0;
        _this._coins = 0;
        return _this;
    }

    _createClass(GameProgress, [{
        key: 'attachGame',

        // get coins() { return this._coins; }
        // set coins(value) {
        //     this._coins = value;
        //     this.event(EVENT_COINS_CHANGED, value);
        // }

        value: function attachGame(game) {
            this.detachGame();
            this._game = game;
            game.on(_HelixGame2.default.EVENT_RESULT, this, this._onResult);
            game.on(_HelixGame2.default.EVENT_LEVEL_PASSED, this, this._onLevelPassed);
            game.on(_HelixGame2.default.EVENT_LEVEL_REMOVED, this, this._onLevelRemoved);
            this.isLastGameWasBest = false;
            //this._onResult(game.result);
        }
    }, {
        key: 'detachGame',
        value: function detachGame() {
            if (this._game) {
                if (this._game.result != _HelixGame2.default.RESULT_WIN) this.curScore = 0;
                this._game.off(_HelixGame2.default.EVENT_RESULT, this, this._onResult);
                this._game.off(_HelixGame2.default.EVENT_LEVEL_PASSED, this, this._onLevelPassed);
                this._game.off(_HelixGame2.default.EVENT_LEVEL_REMOVED, this, this._onLevelRemoved);
                this._game = null;
            }
        }
    }, {
        key: '_onResult',
        value: function _onResult(result) {
            this.isLastGameWasBest = false;
            if (result == _HelixGame2.default.RESULT_PLAYING) {
                this.event(GameProgress.EVENT_SCORE_CHANGED, this.curScore);
            } else if (result == _HelixGame2.default.RESULT_WIN) {
                this.state.level++;
                this.event(GameProgress.EVENT_LEVEL_CHANGED, this.state.level);
            } else if (result == _HelixGame2.default.RESULT_LOOSE) {
                if (this.curScore > this.state.bestScore) {
                    this.state.bestScorePrev = this.state.bestScore;
                    this.state.bestScore = this.curScore;
                    this.isLastGameWasBest = true;
                    this.event(GameProgress.EVENT_SCORE_BEST, this.state.bestScore);
                }
            }
        }
    }, {
        key: '_onLevelPassed',
        value: function _onLevelPassed(level) {
            this.curScore += level * this.state.level;
        }
    }, {
        key: '_onLevelRemoved',
        value: function _onLevelRemoved(info) {
            if (info.crashedLevel) {
                this.curScore += info.crashedLevel * this.state.level;
            }
        }
    }, {
        key: 'state',
        get: function get() {
            return this._state;
        }
    }, {
        key: 'game',
        get: function get() {
            return this._game;
        }
    }, {
        key: 'curScore',
        get: function get() {
            return this._curScore;
        },
        set: function set(value) {
            if (value != this._curScore) {
                this._curScore = value;
                this.event(GameProgress.EVENT_SCORE_CHANGED, value);
            }
        }
    }, {
        key: 'bestScore',
        get: function get() {
            return this._state.bestScore;
        },
        set: function set(value) {
            this._state.bestScore = value;
            //if (!this._state.bestScorePrev)
            //    this._state.bestScorePrev = value;
            this.event(GameProgress.EVENT_SCORE_BEST, value);
        }
    }, {
        key: 'bestScorePrev',
        get: function get() {
            return this._state.bestScorePrev;
        },
        set: function set(value) {
            this._state.bestScorePrev = value;
        }
    }, {
        key: 'level',
        get: function get() {
            return this._state.level;
        },
        set: function set(value) {
            this._state.level = value;
            this.event(GameProgress.EVENT_LEVEL_CHANGED, value);
        }
    }]);

    return GameProgress;
}(Laya.EventDispatcher);

exports.default = GameProgress;

},{"./HelixGame":29}],25:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

var _WndMan = require("./WndMan");

var _WndMan2 = _interopRequireDefault(_WndMan);

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameResultUI = function (_BaseWindow) {
    _inherits(GameResultUI, _BaseWindow);

    _createClass(GameResultUI, null, [{
        key: "EVENT_WND_RESULT",
        get: function get() {
            return "WND_RESULT";
        }
    }, {
        key: "WND_RESULT_RESTART",
        get: function get() {
            return "RESTART";
        }
    }, {
        key: "WND_RESULT_RESUME",
        get: function get() {
            return "RESUME";
        }
    }]);

    function GameResultUI() {
        _classCallCheck(this, GameResultUI);

        return _possibleConstructorReturn(this, (GameResultUI.__proto__ || Object.getPrototypeOf(GameResultUI)).call(this));
    }

    _createClass(GameResultUI, [{
        key: "onInit",
        value: function onInit() {
            _get(GameResultUI.prototype.__proto__ || Object.getPrototypeOf(GameResultUI.prototype), "onInit", this).call(this);
            this.btnShare.on(Laya.Event.CLICK, this, this._onShareClick);
            this.btnRestart.on(Laya.Event.CLICK, this, this._onRestartClick);
            this.btnResumeFree.on(Laya.Event.CLICK, this, this._onResumeFreeClick);
            this.btnResumeFree.init(['titleFree', 'titleAds']);
            this.btnResumeSoft.on(Laya.Event.CLICK, this, this._onResumeSoftClick);
            this.btnResumeAds.on(Laya.Event.CLICK, this, this._onResumeAdsClick);
            this.devSpeedUpFree.visible = _Utils2.default.devMode;
            this.devSpeedUpFree.on(Laya.Event.CLICK, this, function () {
                this._backend.devSpeedUpEvent(this._backend.userEvents.Life.id);
            });
            this.devSpeedUpFreeViaAd.visible = _Utils2.default.devMode;
            this.devSpeedUpFreeViaAd.on(Laya.Event.CLICK, this, function () {
                this._backend.devSpeedUpEvent(this._backend.userEvents.Ad.id);
            });
        }
    }, {
        key: "onShow",
        value: function onShow() {
            _get(GameResultUI.prototype.__proto__ || Object.getPrototypeOf(GameResultUI.prototype), "onShow", this).call(this);
            this._adsShown = false;
            this.lblRestart.visible = !this._win;
            this.lblContinue.visible = this._win;
            this.btnResumeAds.visible = false;
            Laya.timer.frameLoop(1, this, this._onFrame);
            this._onFrame();
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_COMPLETE, this, this._onAdsShown);
        }
    }, {
        key: "onHide",
        value: function onHide() {
            _get(GameResultUI.prototype.__proto__ || Object.getPrototypeOf(GameResultUI.prototype), "onHide", this).call(this);
            _SocialApi2.default.inst.off(_SocialApi2.default.EVENT_ADS_SHOW_COMPLETE, this, this._onAdsShown);
            Laya.timer.clearAll(this);
        }
    }, {
        key: "init",
        value: function init(backend) {
            this._backend = backend;
        }
    }, {
        key: "showResult",
        value: function showResult(win, isBest, level, bestScore) {
            this._win = win;
            var best = !win && isBest;
            if (win) this.lblLevelValue.text = level;else this.lblBestValue.text = bestScore;
            this.winView.visible = win;
            this.bestView.visible = best;
            this.btnShare.visible = (win || best) && !_SocialApi2.default.isYA;
            this.btnResumeFree.visible = false;
            if (win) {
                this.btnResumeSoft.visible = false;
            } else {
                this.lblResumeCost.text = String(this._backend.resumeCostOld);
                this.lblResumeCostNew.text = String(this._backend.resumeCost);
                this.discountView.visible = this._backend.resumeCostOld != this._backend.resumeCost;
            }
            this._pendShowRestart(win);
            this.show();
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            if (!this._win) {
                var event = this._backend.userEvents.Life;
                var expired = event.expired;
                this._showFreeButton(expired && this._backend.freeResumeCount == 0 && this._adsCanShow(), !expired, this._adsCanShow());
                this.btnResumeSoft.visible = !expired || !this.btnResumeFree.visible;
                if (!this.btnResumeSoft.visible) {
                    this.btnResumeFree.centerX = 0;this.btnResumeFree.left = undefined;
                } else {
                    this.btnResumeFree.left = 0;this.btnResumeFree.centerX = undefined;
                }
                if (!this.btnResumeFree.visible) {
                    this.btnResumeSoft.centerX = 0;this.btnResumeSoft.left = undefined;
                } else {
                    this.btnResumeSoft.right = 0;this.btnResumeSoft.centerX = undefined;
                }
                this.openHint.update(event);
            }
            this._applyAnimScale(this.btnResumeFree);
        }
    }, {
        key: "_showFreeButton",
        value: function _showFreeButton(visible, disabled, ads) {
            this.btnResumeFree.visible = visible;
            this.btnResumeFree.disabled = disabled;
            this.btnResumeFree.titleFree.visible = !ads;
            this.btnResumeFree.titleAds.visible = ads;
        }
    }, {
        key: "_pendShowRestart",
        value: function _pendShowRestart(immediate) {
            this.btnRestart.visible = immediate;
            if (!immediate) {
                setTimeout(function () {
                    if (this.visible) this.btnRestart.visible = true;
                }.bind(this), 2000);
            }
        }
    }, {
        key: "_onShareClick",
        value: function _onShareClick() {
            if (this.winView.visible) _SocialApi2.default.inst.showShareBox("У меня новый " + this._backend.profile.level + " уровень в Прыгуне!", _SocialApi2.default.PHOTO_NEW_LEVEL);else _SocialApi2.default.inst.showShareBox("Мой новый рекорд " + this._backend.profile.scoresMax + " очков! Попробуй меня обскакать!", _SocialApi2.default.PHOTO_NEW_SCORE);
        }
    }, {
        key: "_onRestartClick",
        value: function _onRestartClick() {
            this._hideWithResult(GameResultUI.WND_RESULT_RESTART);
        }
    }, {
        key: "_onResumeFreeClick",
        value: function _onResumeFreeClick() {
            if (this.btnResumeFree.disabled) return;
            if (this._adsCanShow()) {
                // && this._backend.userEvents.Ad.showBeforeLife) {
                _SocialApi2.default.inst.adsShow(true);
            } else this._doResumeFree();
        }
    }, {
        key: "_onResumeSoftClick",
        value: function _onResumeSoftClick() {
            if (this._backend.profile.moneySoft >= this._backend.resumeCost) {
                this._backend.gameResumeSoft();
                this._hideWithResult(GameResultUI.WND_RESULT_RESUME);
            } else if (_SocialApi2.default.isBankAvailable) _WndMan2.default.inst.bankUI.show();
        }
    }, {
        key: "_onResumeAdsClick",
        value: function _onResumeAdsClick() {
            this.btnResumeAds.visible = false;
            _SocialApi2.default.inst.adsShow();
        }
    }, {
        key: "_onAdsShown",
        value: function _onAdsShown() {
            //alert("Наебалово");
            this._adsShown = true;
            this._doResumeFree();
            //this._onFrame();
            // this._backend.gameResumeAds();
            // this._hideWithResult(GameResultUI.WND_RESULT_RESUME);
        }
    }, {
        key: "_doResumeFree",
        value: function _doResumeFree() {
            if (this._backend.userEvents.Life.expired) {
                this._backend.gameResumeFree();
                this._hideWithResult(GameResultUI.WND_RESULT_RESUME);
            } else this._onFrame();
        }
    }, {
        key: "_hideWithResult",
        value: function _hideWithResult(result) {
            this.hide();
            this.event(GameResultUI.EVENT_WND_RESULT, result);
        }
    }, {
        key: "_adsCanShow",
        value: function _adsCanShow() {
            return _SocialApi2.default.inst.adsCanShowRewarded;
        }
    }]);

    return GameResultUI;
}(_BaseWindow3.default);

exports.default = GameResultUI;

},{"./Backend":6,"./BaseWindow":12,"./SocialApi":51,"./Utils":61,"./WndMan":62}],26:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameProgress = require("./GameProgress");

var _GameProgress2 = _interopRequireDefault(_GameProgress);

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _HelixGame = require("./HelixGame");

var _HelixGame2 = _interopRequireDefault(_HelixGame);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameUI = function (_Laya$Scene) {
    _inherits(GameUI, _Laya$Scene);

    _createClass(GameUI, null, [{
        key: "EVENT_ADD_COINS",
        get: function get() {
            return "ADD_COINS";
        }
    }, {
        key: "EVENT_DEV_NEXT_LEVEL",
        get: function get() {
            return "DEV_NEXT_LEVEL";
        }
    }]);

    function GameUI() {
        _classCallCheck(this, GameUI);

        var _this = _possibleConstructorReturn(this, (GameUI.__proto__ || Object.getPrototypeOf(GameUI)).call(this));

        _this._gp = null;
        _this.on("onViewCreated", _this, _this._onViewCreated);
        return _this;
    }

    _createClass(GameUI, [{
        key: "_onViewCreated",
        value: function _onViewCreated() {
            //if (SocialApi.isYA) { 
            //    this.coinsBlock.visible = false;
            //}
            this._coins = _Utils2.default.createAnimatedCounter(this.coinsValue, 0);
            this.plus.on(Laya.Event.CLICK, this, this._onPlusClick);
            this.devPlus.visible = _Utils2.default.devMode;
            this.devNextLevel.visible = _Utils2.default.devMode;
            if (_Utils2.default.devMode) {
                this.devPlus.on(Laya.Event.CLICK, this, function () {
                    this.backend.devAddMoney(500);
                });
                this.devNextLevel.on(Laya.Event.CLICK, this, function () {
                    this.event(GameUI.EVENT_DEV_NEXT_LEVEL);
                });
            }
            this._paintYellow(this.levelPrev0);
            this._paintYellow(this.progress0);
            this._paintRed(this.levelPrev1);
            this._paintRed(this.progress1);
            this._paintRed(this.levelNext1);
            this.scoreUp.init();
        }
    }, {
        key: "_onLevelChanged",
        value: function _onLevelChanged() {
            this._onProgressUpdate();
            _SocialApi2.default.inst.logLevel(this.gp.state.level);
            _SocialApi2.default.inst.logBestScore(this.gp.state.bestScore);
        }
    }, {
        key: "_onProgressUpdate",
        value: function _onProgressUpdate() {
            this.scoreCurrent.text = this.gp.curScore;
            this.scoreBest.text = Locale.text('L_BEST_SCORE') + ': ' + this.gp.bestScore; //'Лучший: ' + this.gp.bestScore;
            this.levelPrevValue.text = this.gp.state.level;
            this.levelNextValue.text = this.gp.state.level + 1;
            var pgrs = this.gp.game ? this.gp.game.progress : 0;
            this.levelPrev1.alpha = pgrs;
            this.levelNext1.alpha = pgrs < 1 ? 0 : 1;
            this.progress1.alpha = pgrs;
            this.progress1.scaleX = this.progress0.scaleX = pgrs;
            this.scoreBest.visible = this.gp.curScore == 0;
            if (this.gp.curScore == 0) this._lastScore = 1; //this.gp.bestScore;
            else if (this.gp.curScore > this._lastScore) {
                    this._checkPopUpFriend(this.gp.curScore, this._lastScore);
                    this.scoreUp.add('+' + (this.gp.curScore - this._lastScore));
                    this._lastScore = this.gp.curScore;
                }
        }
    }, {
        key: "_checkPopUpFriend",
        value: function _checkPopUpFriend(curScore, prevScore) {
            var info = _SocialApi2.default.inst.appFriends.find(function (f) {
                return f.score && f.score >= prevScore && f.score < curScore;
            });
            if (!info) return;
            this.friendSlot.info = info;
            this.friendSlot.bottom = 0;
            this.friendSlot.alpha = 1;
            this.friendSlot.visible = true;
            Laya.Tween.clearAll(this.friendSlot);
            Laya.Tween.to(this.friendSlot, { bottom: 160 }, 2000, null, new Laya.Handler(this, function () {
                this.friendSlot.visible = false;
            }));
            Laya.Tween.to(this.friendSlot, { alpha: 0 }, 2000, Laya.Ease.quartIn);
        }
    }, {
        key: "_onProfileUpdate",
        value: function _onProfileUpdate() {
            this._coins.value = this.backend.profile.moneySoft;
        }
    }, {
        key: "_onPlusClick",
        value: function _onPlusClick(e) {
            this.event(GameUI.EVENT_ADD_COINS, this);
        }
    }, {
        key: "_paintRed",
        value: function _paintRed(sprite) {
            this._paintSprite(sprite, 255, 0, 0);
        }
    }, {
        key: "_paintYellow",
        value: function _paintYellow(sprite) {
            this._paintSprite(sprite, 160, 160, 0);
        }
    }, {
        key: "_paintSprite",
        value: function _paintSprite(sprite, r, g, b) {
            var cf = new Laya.ColorFilter();
            cf.color(r, g, b);
            cf.adjustBrightness(-100);
            Laya.UIUtils.addFilter(sprite, cf);
        }
    }, {
        key: "gp",
        get: function get() {
            return this._gp;
        },
        set: function set(value) {
            if (this.gp) {
                this.gp.off(_GameProgress2.default.EVENT_SCORE_CHANGED, this, this._onProgressUpdate);
                this.gp.off(_GameProgress2.default.EVENT_SCORE_BEST, this, this._onProgressUpdate);
                this.gp.off(_GameProgress2.default.EVENT_LEVEL_CHANGED, this, this._onLevelChanged);
                //this.gp.off(GameProgress.EVENT_COINS_CHANGED, this, this._onProgressUpdate);
            }
            this._gp = value;
            if (this.gp) {
                this._lastScore = this.gp.curScore;
                this.gp.on(_GameProgress2.default.EVENT_SCORE_CHANGED, this, this._onProgressUpdate);
                this.gp.on(_GameProgress2.default.EVENT_SCORE_BEST, this, this._onProgressUpdate);
                this.gp.on(_GameProgress2.default.EVENT_LEVEL_CHANGED, this, this._onLevelChanged);
                //this.gp.on(GameProgress.EVENT_COINS_CHANGED, this, this._onProgressUpdate);
                this._onProgressUpdate();
            }
        }
    }, {
        key: "backend",
        get: function get() {
            return this._backend;
        },
        set: function set(value) {
            if (this.backend) {
                this.backend.off(_Backend2.default.CLIENT_PROFILE, this, this._onProfileUpdate);
            }
            this._backend = value;
            if (this.backend) {
                this.backend.on(_Backend2.default.CLIENT_PROFILE, this, this._onProfileUpdate);
                this._onProfileUpdate();
                this.friendSlot.visible = false;
            }
        }
    }]);

    return GameUI;
}(Laya.Scene);

exports.default = GameUI;

},{"./Backend":6,"./GameProgress":24,"./HelixGame":29,"./SocialApi":51,"./Utils":61}],27:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _Utils = require('./Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GradientPlaneMesh = function (_Laya$PrimitiveMesh) {
    _inherits(GradientPlaneMesh, _Laya$PrimitiveMesh);

    function GradientPlaneMesh(color0, color1) {
        _classCallCheck(this, GradientPlaneMesh);

        var _this = _possibleConstructorReturn(this, (GradientPlaneMesh.__proto__ || Object.getPrototypeOf(GradientPlaneMesh)).call(this));

        if (typeof color0 == 'string') color0 = _Utils2.default.toColor(color0);
        if (typeof color1 == 'string') color1 = _Utils2.default.toColor(color1);
        var vCount = 4;
        var iCount = 6;
        var vDecl = Laya.VertexPositionNormalColor.vertexDeclaration;
        var vFloatStride = vDecl.vertexStride / 4;
        var verts = new Float32Array(vCount * vFloatStride);
        var inds = new Uint16Array(iCount);
        var vc = 0;
        var ic = 0;
        // Left Top
        verts[vc++] = -1;verts[vc++] = 1;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = color0.r;verts[vc++] = color0.g;verts[vc++] = color0.b;verts[vc++] = color0.a;
        // Right Top
        verts[vc++] = 1;verts[vc++] = 1;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = color0.r;verts[vc++] = color0.g;verts[vc++] = color0.b;verts[vc++] = color0.a;
        // Right Bottom
        verts[vc++] = 1;verts[vc++] = -1;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = color1.r;verts[vc++] = color1.g;verts[vc++] = color1.b;verts[vc++] = color1.a;
        // Left Bottom
        verts[vc++] = -1;verts[vc++] = -1;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = color1.r;verts[vc++] = color1.g;verts[vc++] = color1.b;verts[vc++] = color1.a;
        // 2 Triangles
        inds[ic++] = 0;inds[ic++] = 2;inds[ic++] = 1;
        inds[ic++] = 0;inds[ic++] = 3;inds[ic++] = 2;
        // Apply geometry
        _this.setData(vDecl, verts, inds);
        return _this;
    }

    return GradientPlaneMesh;
}(Laya.PrimitiveMesh);

exports.default = GradientPlaneMesh;

},{"./Utils":61}],28:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _HxGlobals = require("./HxGlobals");

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HelixConfig = function () {
    _createClass(HelixConfig, null, [{
        key: "FLAG_TRAP",
        get: function get() {
            return 1;
        }
    }, {
        key: "FLAG_MOVING",
        get: function get() {
            return 2;
        }
    }, {
        key: "FLAG_NARROW_GROUND",
        get: function get() {
            return 4;
        }
    }, {
        key: "FLAG_WALL",
        get: function get() {
            return 8;
        }
    }]);

    function HelixConfig(config) {
        _classCallCheck(this, HelixConfig);

        this._loadConfig(config);
        this._gatherStats();
    }

    _createClass(HelixConfig, [{
        key: "generateFloors",

        //get moveAngle() { return this._config.moveAngle; }

        value: function generateFloors(level) {
            var floors = [];
            var count = this._getFloorCount(level);
            var clamp = this._getCurveClamp(level);
            var bcfMax = 0.3;
            var bcfRecover = 0.025;
            var bcf = bcfMax * 0.5; // Block count factor
            var prevEmpty = false;
            var wallState = { tries: 0, count: 0, lastIdx: 0 };
            for (var i = 0; i < count; i++) {
                var maxGroup = i > 0 ? _Utils2.default.clamp(this._getLevelCurveValue(i + 1, level), clamp.min, clamp.max) : 0;
                //var groupIdx = Utils.clamp(Math.floor((maxGroup + 1) * Math.random()), 0, this._floorGroups.length)
                var group = this._floorGroups.reduce(function (s, a, idx) {
                    return idx <= maxGroup ? s.concat(a) : s;
                }, []); // this._floorGroups[groupIdx];
                var floor = this._getRandomFloor(group, maxGroup / this._maxGroup, bcf, level, prevEmpty);
                prevEmpty = floor.stats.sumT <= 0;
                //console.log(floor.blockCount, bcf);
                //console.log(floor.raw);
                //console.log(floor.stats.name);
                bcf = Math.min(Math.pow(bcf - bcfRecover, floor.blockCount) + bcfRecover * 3, bcfMax);
                floor = Object.assign({ index: i }, floor);
                if (1 << maxGroup & HelixConfig.FLAG_WALL) this._tryAddWall(floor, wallState);
                var rndAngle = (Math.floor(Math.random() * 360) + Math.floor(Math.random() * 6) * 60) % 360;
                if (floor.stat.length) floor.statStart += rndAngle;
                if (floor.move.length) floor.moveStart += rndAngle;
                floors.push(floor);
            }
            return floors;
        }
    }, {
        key: "logFloors",
        value: function logFloors() {
            //var str = "name\tsum(T)\tmax(G)\tavg(G)\tsum(H)\ttrap\tmoving\tnarrow\twall\tgroup\tsum(T)/avg(G)\t\n";
            var str = "name\tsum(T)\tmax(G)\tavg(G)\tsum(H)\tgroup\tblocks\traw\t\n";
            for (var name in this._floorStats) {
                var stats = this._floorStats[name];
                str += name + "\t";
                str += stats.sumT.toFixed() + "%\t";
                str += stats.maxG.toFixed() + "%\t";
                str += stats.avgG.toFixed() + "%\t";
                str += stats.sumH.toFixed() + "%\t";
                // str += (stats.flags & HelixConfig.FLAG_TRAP ? "1" : "0") + "\t";
                // str += (stats.flags & HelixConfig.FLAG_MOVING ? "1" : "0") + "\t";
                // str += (stats.flags & HelixConfig.FLAG_NARROW_GROUND ? "1" : "0") + "\t";
                // str += (stats.flags & HelixConfig.FLAG_WALL ? "1" : "0") + "\t";
                str += String(stats.group) + "\t";
                str += String(stats.blockCount) + "\t";
                str += stats.raw + "\t";
                //str += (stats.sumT / stats.avgG).toFixed(2) + "\t";
                str += "\n";
            }
            console.log(str);
        }
    }, {
        key: "_loadConfig",
        value: function _loadConfig(config) {
            this._config = config;
            //this._levels = [];
            //for (var i in config.levels) {
            //    this._parseEntry(config.levels[i], this._levels, true);
            //}
            this._moveFreq = config.globals.moveFreq[0];
            this._levelCurve = config.globals.levelCurve || [[0, 0], [1, 4]];
            this._floorCounts = config.globals.progress.floorCount || [40];
            this._curveClamp = config.globals.progress.curveClamp || [[0, 0, 5]];
            this._floors = this._parseFloors(config.floors);
        }
    }, {
        key: "_tryAddWall",
        value: function _tryAddWall(floor, state) {
            var PROB_RISE_GAP = 7;
            var MIN_FLOOR_GAP = 2;
            if (floor.index - state.lastIdx >= MIN_FLOOR_GAP) {
                state.tries++;
                if (Math.random() < Math.sqrt(state.tries / PROB_RISE_GAP)) {
                    var segs = floor.stat.filter(function (s) {
                        return s.type != 'H' && s.size > _HxGlobals2.default.WALL_ANGLE;
                    });
                    if (segs.length == 0) return;
                    var seg = this._randomEntry(segs);
                    floor.wall = { angle: seg.start + Math.round(_HxGlobals2.default.WALL_ANGLE * 0.5 + Math.random() * (seg.size - _HxGlobals2.default.WALL_ANGLE)) };
                    state.tries = 0;
                    state.lastIdx = floor.index;
                    state.count++;
                    //console.log("WALL", floor);
                }
            }
        }
    }, {
        key: "_getRandomFloor",
        value: function _getRandomFloor(floors, maxDifficulty, bcf, level, excludeEmpty) {
            if (excludeEmpty && !floors.find(function (f) {
                return f.stats.sumT > 0;
            })) excludeEmpty = false;
            // weight of floor proportional to percent of fill
            var func = function func(floor) {
                if (excludeEmpty && floor.stats.sumT <= 0) return 0;
                if (floor.stats.sumT * 0.01 > maxDifficulty || floor.stats.level > level) return 0;
                return Math.pow(bcf, Math.min(floor.blockCount, 2) - 1);
            };
            var sum = floors.reduce(function (s, f) {
                return s + func(f);
            }, 0);
            var rnd = Math.random() * sum;
            var cur = 0;
            var floor = null;
            for (var i in floors) {
                floor = floors[i];
                cur += func(floor);
                if (cur >= rnd) break;
            }
            return floor;
        }
    }, {
        key: "_getFloorCount",
        value: function _getFloorCount(level) {
            return this._floorCounts[_Utils2.default.clamp(level - 1, 0, this._floorCounts.length - 1)];
        }
    }, {
        key: "_getLevelCurveValue",
        value: function _getLevelCurveValue(floor, level) {
            var e = this._getLvlArrEntry(this._levelCurve, floor, level);
            return e[1];
        }
    }, {
        key: "_getCurveClamp",
        value: function _getCurveClamp(level) {
            var e = this._getLvlArrEntry(this._curveClamp, level);
            return { min: e[1], max: e[2] };
        }
    }, {
        key: "_getLvlArrEntry",
        value: function _getLvlArrEntry(arr, level, preLevel) {
            var prev = arr[0];
            for (var i = 1; i < arr.length; i++) {
                var entry = arr[i];
                var entry_key = entry[0];
                if ((typeof entry_key === "undefined" ? "undefined" : _typeof(entry_key)) == 'object') {
                    var keys = Object.keys(entry_key);
                    if (preLevel == undefined || !keys.length) continue;
                    var key = keys[0];
                    for (var j = 1; j < keys.length; j++) {
                        if (preLevel < keys[j]) break;
                        key = keys[j];
                    }
                    entry_key = entry_key[key];
                }
                if (level < entry_key) break;
                prev = entry;
            }
            return prev;
        }
    }, {
        key: "_gatherStats",
        value: function _gatherStats() {
            this._floorStats = {};
            this._floorGroups = [];
            this._maxGroup = 4;
            var maxGroup = 0;
            for (var name in this._floors) {
                var floor = this._floors[name];
                var sumT = Math.round((this._sumSectorSize(floor.stat, 'T') + this._sumSectorSize(floor.move, 'T')) / 360 * 100);
                var maxG = Math.round(this._maxSectorSize(floor.stat, 'G', this._maxSectorSize(floor.move, 'G', 0)) / 360 * 100);
                var avgG = Math.round(this._avgSectorSize(floor.stat, floor.move, 'G') / 360 * 100);
                var flags = 0;
                if (sumT > 0) flags |= HelixConfig.FLAG_TRAP;
                if (floor.move.length) flags |= HelixConfig.FLAG_MOVING;
                if (floor.wall) flags |= HelixConfig.FLAG_WALL;
                if (maxG <= 10) flags |= HelixConfig.FLAG_NARROW_GROUND;
                var group = floor.group || this._groupFromFlags(flags);
                this._maxGroup = Math.max(group, this._maxGroup);
                var stats = {
                    name: name,
                    sumT: sumT,
                    maxG: maxG,
                    avgG: avgG,
                    sumH: Math.round(this._sumHSectorSize(floor) / 360 * 100),
                    flags: flags,
                    group: group,
                    level: floor.level,
                    blockCount: floor.blockCount,
                    raw: floor.raw
                };
                this._floorStats[name] = stats;
                floor.stats = stats;
                if (!this._floorGroups[group]) this._floorGroups[group] = [];
                this._floorGroups[group].push(floor);
            }
            for (var i = 0; i <= this._maxGroup; i++) {
                if (!this._floorGroups[i]) this._floorGroups[i] = this._floorGroups[i - 1];
            }
        }
    }, {
        key: "_groupFromFlags",
        value: function _groupFromFlags(flags) {
            for (var i = 7; i >= 0; i--) {
                if (flags & 1 << i) return i + 1;
            }return 0;
        }
    }, {
        key: "_avgSectorSize",
        value: function _avgSectorSize(stat, move, type) {
            var sum = this._sumSectorSize(stat, type) + this._sumSectorSize(move, type);
            var count = this._countSectorSize(stat, type) + this._countSectorSize(move, type);
            return count ? sum / count : 0;
        }
    }, {
        key: "_sumSectorSize",
        value: function _sumSectorSize(sectors, type) {
            return sectors.reduce(function (acc, cur) {
                return cur.type == type ? acc + cur.size : acc;
            }, 0);
        }
    }, {
        key: "_countSectorSize",
        value: function _countSectorSize(sectors, type) {
            return sectors.reduce(function (acc, cur) {
                return cur.type == type ? acc + 1 : acc;
            }, 0);
        }
    }, {
        key: "_maxSectorSize",
        value: function _maxSectorSize(sectors, type, startValue) {

            return sectors.reduce(function (acc, cur) {
                return cur.type == type ? Math.max(acc, cur.size) : acc;
            }, startValue);
        }
    }, {
        key: "_sumHSectorSize",
        value: function _sumHSectorSize(floor) {
            var start = Math.min(floor.statStart, floor.moveStart);
            var stat = floor.stat.length ? floor.stat : [{ type: 'H', start: 0, size: 360 }];
            var move = floor.move.length ? floor.move : [{ type: 'H', start: 0, size: 360 }];
            var i = 0,
                j = 0;
            var sumH = 0,
                sumAll = 0;
            var ss = floor.statStart,
                ms = floor.moveStart;
            while (sumAll < 359) {
                var a = start + sumAll;
                var s = stat[i] && ss + stat[i].start <= a ? stat[i] : { type: 'H', start: a, size: 360 };
                var m = move[j] && ms + move[j].start <= a ? move[j] : { type: 'H', start: a, size: 360 };
                var delta = 0;
                if (ss + s.start + s.size < ms + m.start + m.size) {
                    delta = ss + s.start + s.size - a;i++;
                } else if (ss + s.start + s.size > ms + m.start + m.size) {
                    delta = ms + m.start + m.size;j++;
                } else {
                    delta = ms + m.start + m.size;i++;j++;
                }
                if (sumAll + delta < 360) sumAll += delta;else {
                    delta = 360 - sumAll;sumAll = 360;
                }
                if (s.type == 'H' && m.type == 'H') sumH += delta;
            }
            return sumH;
        }
    }, {
        key: "_parseFloors",
        value: function _parseFloors(rawFloors) {
            var floors = [];
            for (var name in rawFloors) {
                try {
                    floors[name] = this._parseFloor(rawFloors[name], name);
                } catch (e) {
                    console.error(name + ": ", e);
                }
            }
            return floors;
        }
        // Format: {[[n][M](G|T|H)xx[Dxx]][.{[n](T|TE|ET|MT)xx}][.W]} [,Axx]
        // Out: {stat:[<segments>], move:[<segments>], moveAngle:number, moveStart:number, wall:[number(angle),number(angle)]}
        //      <segment>: { type:string(G|T|H), start:number(angle), size:number(angle) }

    }, {
        key: "_parseFloor",
        value: function _parseFloor(rawFloor, name) {
            // Parse floor blocks
            var rawBlocks = [];
            var moveA = 0;
            var wall = null;
            var group = undefined;
            var level = undefined;
            for (var i in rawFloor) {
                var rawBlock = rawFloor[i];
                if (rawBlock[0] == 'A') {
                    moveA = Number(rawBlock.substr(1));
                } else if (_Utils2.default.startsWith(rawBlock, 'C')) {
                    group = Number(rawBlock.substr(1));
                } else if (_Utils2.default.startsWith(rawBlock, 'L')) {
                    level = Number(rawBlock.substr(1));
                } else {
                    var cnt = 1;
                    if (!isNaN(rawBlock[0])) {
                        cnt = Number(rawBlock[0]);rawBlock = rawBlock.substr(1);
                    }
                    for (var j = 0; j < cnt; j++) {
                        rawBlocks.push(this._parseFloorBlock(rawBlock));
                    }
                }
            }
            var blockCount = rawBlocks.length; // Math.min(rawBlocks.length, 3);
            // Calc hole gaps between blocks
            var H_sum = 360 - rawBlocks.reduce(function (sum, cur) {
                return sum + cur.size;
            }, 0);
            // ??? really need this
            // if (H_sum < 0) {
            //     throw new Error("Invalid floor descriptor (blocks sum exceed 360 degrees): ");
            // }
            var H_gap = H_sum / rawBlocks.length;
            // Block placement ('start' value) and separation by static/moving layers
            var staticBlocks = [];
            var moveBlocks = [];
            for (var i = 0, offs = 0; i < rawBlocks.length; i++) {
                var rawBlock = rawBlocks[i];
                rawBlock.start = offs + rawBlock.bias;
                if (rawBlock.M) moveBlocks.push(rawBlock);else {
                    staticBlocks.push(rawBlock);
                    // extract moving internal traps
                    for (var j = 0; j < rawBlock.IT.length;) {
                        var it = rawBlock.IT[j];
                        if (it.M) {
                            rawBlock.IT.splice(j, 1);
                            moveBlocks.push({ type: 'H', start: rawBlock.start, size: rawBlock.size, IT: [it] });
                        } else j++;
                    }
                }
                //if (rawBlock.wall && rawBlock.size > HxGlobals.WALL_ANGLE)
                //    wall = { start: rawBlock.start + HxGlobals.WALL_ANGLE * 0.5, size: rawBlock.size - HxGlobals.WALL_ANGLE };
                rawBlock.M = undefined;
                rawBlock.bias = undefined;
                offs += rawBlock.size + H_gap;
            }
            // Fill layers
            var layers = [];
            var rawLayers = [staticBlocks, moveBlocks];
            for (var l in rawLayers) {
                var rawBlocks = rawLayers[l];
                var layer = [];
                for (var i in rawBlocks) {
                    var rawBlock = rawBlocks[i];
                    var segments = [];
                    for (var j in rawBlock.IT) {
                        var it = rawBlock.IT[j];
                        var start = rawBlock.start;
                        var stride = rawBlock.size / it.C;
                        if (it.C > 1 && it.E != 0) {
                            stride += (stride - it.T) / (it.C - 1);
                        } // Snap to both edges
                        else if (it.E < 0) {} // Nothing to add
                            else if (it.E > 0) {
                                    start += stride - it.T;
                                } else {
                                    start += (stride - it.T) * 0.5;
                                }
                        for (var k = 0; k < it.C; k++, start += stride) {
                            segments.push({ type: 'T', start: start, size: it.T });
                        }
                    }
                    segments.sort(function (a, b) {
                        return a.start - b.start;
                    });
                    this._validateNonOverlapness(segments);
                    this._fillGaps(segments, rawBlock);
                    layer = this._concatSegments(layer, segments);
                }
                layers.push({
                    start: this._normalizeSegments(layer),
                    layer: this._validateSegments(this._mergeSegments(layer))
                });
            }
            var res = {
                stat: layers[0].layer,
                statStart: layers[0].start,
                move: layers[1].layer,
                moveStart: layers[1].start,
                moveAngle: moveA,
                group: group,
                level: level,
                raw: rawFloor.join('_'),
                blockCount: blockCount
            };
            //if (wall) res.wall = wall;
            return res;
        }
    }, {
        key: "_validateNonOverlapness",
        value: function _validateNonOverlapness(segments) {
            for (var i = 0; i < segments.length - 1;) {
                var cur = segments[i];
                var next = segments[i + 1];
                var delta = next.start - (cur.start + cur.size);
                if (delta < 0) {
                    if (delta < _HxGlobals2.default.EPSILON_SEG_SIZE) throw new Error("Segments overlap");
                    cur.size += delta;
                    if (cur.size < _HxGlobals2.default.MIN_SEG_SIZE) {
                        segments.splice(i, 1);
                        continue;
                    }
                }
                i++;
            }
            // var last = segments[segments.length - 1];
            // if (last.start + last.size - HxGlobals.EPSILON_SEG_SIZE > 360)
            //     throw new Error("Segment is out of range [0, 360]");
        }
    }, {
        key: "_fillGaps",
        value: function _fillGaps(segments, block) {
            if (!segments.length) {
                segments.push({ type: block.type, start: block.start, size: block.size });
                return;
            }
            var first = segments[0];
            var preFirst = { type: block.type, start: block.start, size: first.start - block.start };
            if (preFirst.size < _HxGlobals2.default.MIN_SEG_SIZE) {
                first.start -= preFirst.size;first.size += preFirst.size;preFirst.size = 0;
            }
            var last = segments[segments.length - 1];
            var postLast = { type: block.type, start: last.start + last.size, size: block.start + block.size - (last.start + last.size) };
            if (postLast.size < _HxGlobals2.default.MIN_SEG_SIZE) {
                last.size += postLast.size;postLast.size = 0;
            }
            for (var i = 0; i < segments.length;) {
                var cur = segments[i];
                var next = segments[i + 1] || postLast;
                var delta = next.start - (cur.start + cur.size);
                if (delta < _HxGlobals2.default.MIN_SEG_SIZE) {
                    cur.size = next.start - cur.start;
                    i++;
                } else {
                    segments.splice(i + 1, 0, { type: block.type, start: cur.start + cur.size, size: delta });
                    i += 2;
                }
            }
            if (preFirst.size) segments.splice(0, 0, preFirst);
            if (postLast.size) segments.push(postLast);
        }
    }, {
        key: "_concatSegments",
        value: function _concatSegments(list0, list1) {
            if (list0.length == 0) return list1;
            var last0 = list0[list0.length - 1];
            var first1 = list1[0];
            var gapSize = first1.start - (last0.start + last0.size);
            if (gapSize < _HxGlobals2.default.EPSILON_SEG_SIZE) throw new Error("Segments overlap");
            var res = list0;
            if (gapSize < _HxGlobals2.default.MIN_SEG_SIZE) {
                last0.size = first1.start - last0.start;
            } else {
                res.push({ type: 'H', start: last0.start + last0.size, size: gapSize });
            }
            res = res.concat(list1);
            return res;
        }
    }, {
        key: "_normalizeSegments",
        value: function _normalizeSegments(segments) {
            if (!segments.length) return 0;
            var first = segments[0];
            var last = segments[segments.length - 1];
            var offset = first.start;
            for (var i in segments) {
                segments[i].start -= offset;
            }var gapSize = 360 - (last.start + last.size);
            if (gapSize < _HxGlobals2.default.EPSILON_SEG_SIZE) throw new Error("Segment is out of range [0, 360]");
            if (gapSize < _HxGlobals2.default.MIN_SEG_SIZE) last.size = 360 - last.size;else segments.push({ type: 'H', start: last.start + last.size, size: gapSize });
            return offset;
        }
    }, {
        key: "_mergeSegments",
        value: function _mergeSegments(segments) {
            for (var i = 0; i < segments.length - 1; i++) {
                var cur = segments[i];
                var next = segments[i + 1];
                if (cur.type == next.type) {
                    cur.size = next.start - cur.start + next.size;
                    segments.splice(i + 1, 1);
                }
            }
            return segments;
        }
    }, {
        key: "_validateSegments",
        value: function _validateSegments(segments) {
            var a = 0;
            for (var i in segments) {
                var s = segments[i];
                if (s.start + 0.0001 < a || s.size <= 0) throw new Error('Segments validation failed');
                a = s.start + s.size;
            }
            return segments;
        }
        // Format: [[M](G|T|H)xx[Dxx]][.{[n](T|TE|ET|MT)xx}]
        // Out: {M:boolean, type:string(G|T|H), size:number(angle) bias:number(angle), wall:boolean, IT:[{T:number(angle), E:number(-1,0,1), M:boolean, C:number(count)},..]}
        // Comments: IT - internal traps

    }, {
        key: "_parseFloorBlock",
        value: function _parseFloorBlock(rawBlock) {
            var block = { M: false, type: '?', size: 0, bias: 0, IT: [] };
            if (rawBlock[0] == 'M') {
                block.M = true;rawBlock = rawBlock.substr(1);
            }
            var parts = rawBlock.split('.');
            var part = parts[0];
            block.type = part[0];
            if (block.type == 'G' || block.type == 'T' || block.type == 'H') {
                var D_idx = part.indexOf('D');
                if (D_idx > 0) {
                    block.size = Number(part.substr(1, D_idx - 1));block.bias = Number(part.substr(D_idx + 1));
                } else {
                    block.size = Number(part.substr(1));
                }
                if (isNaN(block.size) || isNaN(block.bias)) throw new Error("Invalid floor block format " + rawBlock);
                if (block.type == 'T') return block;
            } else {
                throw new Error("Undefined floor block type " + block.type);
            }
            parts.splice(0, 1);
            for (var i in parts) {
                var part = parts[i];
                var tEntry = { C: 1, E: 0 };
                if (!isNaN(part[0])) {
                    tEntry.C = part[0];part = part.substr(1);
                }
                if (_Utils2.default.startsWith(part, 'ET')) {
                    tEntry.E = 1;part = part.substr(2);
                } else if (_Utils2.default.startsWith(part, 'TE')) {
                    tEntry.E = -1;part = part.substr(2);
                } else if (_Utils2.default.startsWith(part, 'MT')) {
                    tEntry.M = true;part = part.substr(2);
                } else if (_Utils2.default.startsWith(part, 'T')) {
                    part = part.substr(1);
                } else {
                    if (_Utils2.default.startsWith(part, 'W')) block.wall = true;
                    continue;
                }
                tEntry.T = Number(part);
                if (tEntry.T * tEntry.C > block.size) throw new Error("Invalid floor descriptor (traps in block exceed its size)");
                block.IT.push(tEntry);
            }
            return block;
        }
    }, {
        key: "_newG",
        value: function _newG(angle) {
            return this._newSeg(_HxGlobals2.default.SEG_GROUND, angle);
        }
    }, {
        key: "_newT",
        value: function _newT(angle) {
            return this._newSeg(_HxGlobals2.default.SEG_DEATH, angle);
        }
    }, {
        key: "_newH",
        value: function _newH(angle) {
            return this._newSeg(_HxGlobals2.default.SEG_HOLE, angle);
        }
    }, {
        key: "_newSeg",
        value: function _newSeg(type, angle) {
            return { type: type, angle: angle };
        }
    }, {
        key: "_randomEntry",
        value: function _randomEntry(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        //////////////////////////////////////////////
        // Old format
        /*_generateLevel(index) {
            var lvlDesc = this._levels[Math.min(index, this._levels.length - 1)];
            var floors = [];
            for (var i in lvlDesc)
                this._parseEntry(lvlDesc[i], floors, false);
            for (var i in floors) {
                var floorDesc = floors[i];
                var floor = {};
                if (floorDesc.static)
                    floor.static = this._parseEntry(floorDesc.static, [], true)[0];
                if (floorDesc.move)
                    floor.move = this._parseEntry(floorDesc.static, [], true)[0];
                floor.wall = floorDesc.wall;
                floor[i] = floor;
            }
        }
          _parseEntry(entry, toList, isItemArray) {
            if (typeof(entry) == 'string') // prefab reference
                this._parseEntry(this._getPrefab(entry), toList, isItemArray);
            else if (Array.isArray(entry)) { 
                if (isItemArray) toList.push(entry);
                else this._parseEntry(this._randomEntry(entry), toList, isItemArray);
            } else if (entry.list) { // force interpret as list
                var list = typeof(entry.list) == 'string' ? this._config.prefabs[entry.list] : entry.list;
                if (Array.isArray(list)) {
                    for (var i in list)
                        this._parseEntry(list[i], toList, isItemArray);
                }
            } else { // Object
                var keys = Object.keys(entry);
                if (keys.length) {
                    var key = keys[0];
                    var count = Number(key);
                    if (count) { // {<N>:DESC}
                        for (var i = 0; i < count; i++)
                            this._parseEntry(entry[key], toList, isItemArray);
                        return toList;
                    }
                }
                if (!isItemArray)
                    toList.push(entry);
            }
            return toList;
        }
          _getPrefab(name) {
            var prefab = this._config.prefabs[name];
            return Array.isArray(prefab) ? this._randomEntry(prefab) : prefab;
        }*/

    }, {
        key: "moveFreq",
        get: function get() {
            return this._moveFreq || 0.25;
        }
    }]);

    return HelixConfig;
}();

exports.default = HelixConfig;

},{"./HxGlobals":37,"./Utils":61}],29:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _HxGlobals = require('./HxGlobals');

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FETCH_LEVELS = _HxGlobals2.default.FETCH_LEVELS;
var MAX_DELTA_TIME = _HxGlobals2.default.MAX_DELTA_TIME;

var STATE_BOUNCE = 'bounce';
var STATE_FALL = 'fall';

// Math
//const HEIGHT_BOUNCE = HxGlobals.LOGIC_HEIGHT_BOUNCE;    // h
var BOUNCE_PERIOD = 0.72; // HxGlobals.LOGIC_BOUNCE_PERIOD; // t
var HEIGHT_BOUNCE = 0.25; //HxGlobals.LOGIC_ACCELERATION * (BOUNCE_PERIOD * BOUNCE_PERIOD) / 8;
var HEIGHT_LEVEL = _HxGlobals2.default.LOGIC_HEIGHT_LEVEL; // H
var ACCELERATION = 8 * HEIGHT_BOUNCE / (BOUNCE_PERIOD * BOUNCE_PERIOD); // HxGlobals.LOGIC_ACCELERATION;      // a
var FALL_VELOCITY = Math.sqrt(2 * HEIGHT_LEVEL * ACCELERATION); //0.8;
var FALL_ACCEL = 1.75;

////////////////////////////
// Bounce state values
//   bounce velocity:
//      V = sqrt(2 * h * a)
//   bounce period:
//      t = 2 * sqrt(2 * h / a)
//
// Fall state values
//   fall velocity from k-th level:
//      Vk = sqrt(2 * a * H * k + 2 * a * h) = sqrt(2 * a * (H * k + h))
//   fall duration from k-th to (k+1)-th floor:
//      tk = sqrt(2 * H / a) * (sqrt(k + h/H + 1) - sqrt(k + h/H))

var HelixGame = function (_Laya$EventDispatcher) {
    _inherits(HelixGame, _Laya$EventDispatcher);

    _createClass(HelixGame, null, [{
        key: 'EVENT_LEVEL_ADDED',
        get: function get() {
            return 'LEVEL_ADDED';
        }
    }, {
        key: 'EVENT_LEVEL_REMOVED',
        get: function get() {
            return 'LEVEL_REMOVED';
        }
    }, {
        key: 'EVENT_LEVEL_PASSED',
        get: function get() {
            return 'LEVEL_PASSED';
        }
    }, {
        key: 'EVENT_LEVEL_BROKEN',
        get: function get() {
            return 'LEVEL_BROKEN';
        }
    }, {
        key: 'EVENT_LEVEL_RESUMED',
        get: function get() {
            return 'LEVEL_RESUMED';
        }
    }, {
        key: 'EVENT_RESULT',
        get: function get() {
            return 'RESULT';
        }
    }, {
        key: 'EVENT_BALL_BOUNCE',
        get: function get() {
            return 'BALL_BOUNCE';
        }
    }, {
        key: 'RESULT_NOT_STARTED',
        get: function get() {
            return 'NOT_STARTED';
        }
    }, {
        key: 'RESULT_PLAYING',
        get: function get() {
            return 'PLAYING';
        }
    }, {
        key: 'RESULT_WIN',
        get: function get() {
            return 'WIN';
        }
    }, {
        key: 'RESULT_LOOSE',
        get: function get() {
            return 'LOOSE';
        }
    }]);

    function HelixGame(generator, resumeState) {
        _classCallCheck(this, HelixGame);

        var _this = _possibleConstructorReturn(this, (HelixGame.__proto__ || Object.getPrototypeOf(HelixGame)).call(this));

        _this._generator = generator;
        _this._state = {};
        _this._levels = [];
        _this._setBounce();
        _this._shift = 0;
        _this._shiftPrev = 0;
        _this._result = HelixGame.RESULT_NOT_STARTED;
        _this._elapsed = 0;
        _this._resumeCount = 0;
        _this._floorIndex = 0;
        _this._distance = 0;
        if (resumeState) {
            _this._result = resumeState.result;
            _this._floorIndex = resumeState.floorIndex;
            _this._resumeCount = resumeState.resumeCount;
            for (var i = 0; i < _this._floorIndex; i++) {
                generator.next();
            }
        }
        return _this;
    }

    _createClass(HelixGame, [{
        key: 'start',
        value: function start() {
            this._shiftPrev = this._shift;
            if (this.result == HelixGame.RESULT_NOT_STARTED) {
                this._fetch();
                if (this._levels.length) {
                    this._setResult(HelixGame.RESULT_PLAYING);
                    this._initShiftToFirstFloor();
                }
            } else {
                this._fetch();
                if (this._levels.length) this._initShiftToFirstFloor();
            }
        }
    }, {
        key: 'getResumeState',
        value: function getResumeState() {
            return { result: this.result, floorIndex: this.floorIndex, resumeCount: this.resumeCount };
        }
    }, {
        key: 'resume',
        value: function resume() {
            if (this.finished) {
                this._shiftPrev = this._shift;
                this._resumed = true;
                this._resumeCount++;
                if (this._levels[0].segments.wall) this._levels[0].segments.wall = null;
                this._setResult(HelixGame.RESULT_PLAYING);
                this.event(HelixGame.EVENT_LEVEL_RESUMED, this._levels[0]);
            }
        }
    }, {
        key: 'update',
        value: function update(deltaTime) {
            if (this.result != HelixGame.RESULT_PLAYING) return;

            if (this._levels.length == 0) {
                this._setResult(HelixGame.RESULT_WIN);
                return;
            }

            if (deltaTime > MAX_DELTA_TIME) deltaTime = MAX_DELTA_TIME;

            this._elapsed += deltaTime;
            this._updateMoveLevels();

            if (!this.isBrakingBall && this._tryHitWall()) {
                this._updateLevelsPos();
                this._setResult(HelixGame.RESULT_LOOSE);
                return;
            }

            this._shiftPrev = this._shift;

            while (deltaTime > 0 && this.result == HelixGame.RESULT_PLAYING) {
                var nextDelta = this._getNextDeltaTime();
                this._state.totalTime += Math.min(deltaTime, nextDelta);
                if (deltaTime < nextDelta) {
                    this._state.time += deltaTime;
                    break;
                }
                deltaTime -= nextDelta;
                var picked = this._pickFloor();
                var info = this._levels[0];
                if (info && picked && picked.type != _HxGlobals2.default.SEG_HOLE) {
                    var nextBreakFromLevel = _HxGlobals2.default.LOGIC_LEVEL_BREAK_FROM;
                    if (picked.type == _HxGlobals2.default.SEG_WIN) {
                        this._setResult(HelixGame.RESULT_WIN);
                    } else if (this._state.type == STATE_FALL && this.isBrakingBall) {
                        this._levels[0] = null;
                        info.crashedLevel = this._state.level + 1;
                        this.event(HelixGame.EVENT_LEVEL_REMOVED, info);
                        this.event(HelixGame.EVENT_LEVEL_BROKEN, this._state.level);
                        picked.broken = true;
                        //nextBreakFromLevel++;
                    } else if (!this._resumed && picked.type == _HxGlobals2.default.SEG_DEATH) {
                        this._setResult(HelixGame.RESULT_LOOSE);
                    }
                    this._setBounce(0, nextBreakFromLevel);
                    this.event(HelixGame.EVENT_BALL_BOUNCE, picked);
                } else {
                    this._resumed = false;
                    this._dequeueLevel();
                    this._setFall(0, this._state.level + 1);
                    if (info) this.event(HelixGame.EVENT_LEVEL_REMOVED, info);
                    this.event(HelixGame.EVENT_LEVEL_PASSED, this._state.level);
                    this._fetch();
                }
            }
            //if (this._state.type == STATE_FALL)
            this._updateLevelsPos();
        }
    }, {
        key: '_initShiftToFirstFloor',
        value: function _initShiftToFirstFloor() {
            var segments = this._levels[0].segments;
            var seg = segments.stat.find(function (seg) {
                return seg.type == _HxGlobals2.default.SEG_GROUND;
            });
            if (!seg) {
                seg = segments.stat.find(function (seg) {
                    return seg.type == _HxGlobals2.default.SEG_DEATH;
                });
                if (!seg) return;
            }
            this._shift = segments.statStart / 360 + (seg.start + seg.end) * 0.5;
        }
    }, {
        key: '_setBounce',
        value: function _setBounce(time, breakFromLevel) {
            this._state.type = STATE_BOUNCE;
            this._state.time = time || 0;
            this._state.level = 0;
            this._state.breakFromLevel = breakFromLevel || _HxGlobals2.default.LOGIC_LEVEL_BREAK_FROM;
        }
    }, {
        key: '_setFall',
        value: function _setFall(time, level) {
            this._state.type = STATE_FALL;
            this._state.time = time || 0;
            if (level <= 1) this._state.totalTime = 0;
            this._state.level = level || 0;
        }
    }, {
        key: '_dequeueLevel',
        value: function _dequeueLevel() {
            this._floorIndex++;
            var info = this._levels.splice(0, 1);
            this._fetch();
            return info;
        }
    }, {
        key: '_fetch',
        value: function _fetch() {
            if (this._levels.length > 0 && this._levels[this._levels.length - 1].win) {
                return;
            }
            while (this._levels.length < FETCH_LEVELS) {
                var segments = this._generator.next();
                var lvls = this._levels;
                var info = { pos: lvls.length ? lvls[lvls.length - 1].pos + 1 : 0 };
                if (segments) info.segments = segments;else {
                    info.win = true;
                    info.segments = { stat: [{ type: _HxGlobals2.default.SEG_WIN, start: 0, end: 1 }], statStart: 0 };
                }
                lvls.push(info);
                this.event(HelixGame.EVENT_LEVEL_ADDED, info);
                if (info.win) break;
            }
        }
    }, {
        key: '_getNextDeltaTime',
        value: function _getNextDeltaTime() {
            var state = this._state;
            var totalT;
            if (state.type == STATE_BOUNCE) {
                //totalT = 2 * Math.sqrt(2 * HEIGHT_BOUNCE / ACCELERATION);
                totalT = BOUNCE_PERIOD;
                return totalT - state.time;
            } else {
                // state.type == STATE_FALL
                //var h_H = HEIGHT_BOUNCE / HEIGHT_LEVEL;
                //totalT = Math.sqrt(2 * HEIGHT_LEVEL * (state.level + h_H + 1) / ACCELERATION)
                //    - Math.sqrt(2 * HEIGHT_LEVEL * (state.level + h_H) / ACCELERATION);
                //totalT = HEIGHT_LEVEL / FALL_VELOCITY;
                totalT = (Math.sqrt(FALL_VELOCITY * FALL_VELOCITY + 2 * FALL_ACCEL * HEIGHT_LEVEL * state.level) - Math.sqrt(FALL_VELOCITY * FALL_VELOCITY + 2 * FALL_ACCEL * HEIGHT_LEVEL * (state.level - 1))) / FALL_ACCEL;
                //console.log(totalT);
                return totalT - state.time;
            }
        }
    }, {
        key: '_tryHitWall',
        value: function _tryHitWall() {
            var lvl = this._levels[0];
            if (!lvl || this._shift == this._shiftPrev || !lvl.segments.wall) return false;
            var wall = lvl.segments.wall;
            var shiftMin = Math.min(this._shift, this._shiftPrev) - _HxGlobals2.default.WALL_ANGLE / 360;
            var shiftMax = Math.max(this._shift, this._shiftPrev) + _HxGlobals2.default.WALL_ANGLE / 360;
            var shiftWall = wall.pos + lvl.segments.statStart / 360 + (this._shift < this._shiftPrev ? 1 : -1) * _HxGlobals2.default.WALL_ANGLE / 360;
            var d = shiftWall - shiftMin;d -= Math.floor(d);
            if (d >= shiftMax - shiftMin) return false;
            this._shift = shiftMin + d;
            return true;
        }
    }, {
        key: '_pickFloor',
        value: function _pickFloor() {
            var lvl = this._levels[0];
            if (!lvl) return _HxGlobals2.default.SEG_HOLE;
            var segments = lvl.segments;
            //var shift = this._shift - Math.floor(this._shift);
            var statPick = this._pickCircle(segments.stat, -segments.statStart / 360 + this._shift);
            var movePick = this._pickCircle(segments.move, -(segments.moveStart + lvl.moveA) / 360 + this._shift);
            return _HxGlobals2.default.compareSegs(statPick, movePick) >= 0 ? statPick : movePick;
            // if (statPick == HxGlobals.SEG_DEATH || movePick == HxGlobals.SEG_DEATH)
            //     return HxGlobals.SEG_DEATH;
            // for (var i = 0; i < segments.length; i++) {
            //     var seg = segments[i];
            //     if (seg.end >= shift)
            //         return seg.type;
            // }
            // return HxGlobals.SEG_GROUND;
        }
    }, {
        key: '_pickCircle',
        value: function _pickCircle(segments, shift) {
            if (segments) {
                shift = shift - Math.floor(shift);
                for (var i = 0; i < segments.length; i++) {
                    var seg = segments[i];
                    if (seg.end >= shift) return seg; //.type;
                }
            }
            return null; //HxGlobals.SEG_HOLE;
        }
    }, {
        key: '_updateMoveLevels',
        value: function _updateMoveLevels() {
            var lvls = this._levels;
            var startIdx = this._resumed ? 1 : 0;
            for (var i = startIdx; i < lvls.length; i++) {
                var lvl = lvls[i];
                if (lvl && lvl.segments.move) {
                    var s = lvl.segments;
                    lvl.moveA = s.moveAngle * Math.sin(2 * Math.PI * s.moveFreq * this._elapsed);
                }
            }
        }
    }, {
        key: '_updateLevelsPos',
        value: function _updateLevelsPos() {
            var s = this._state;
            var lvls = this._levels;
            if (s.type == STATE_BOUNCE) {
                for (var i = 0; i < lvls.length; i++) {
                    if (lvls[i]) lvls[i].pos = i * HEIGHT_LEVEL;
                }
            } else {
                //var v = Math.sqrt(2 * ACCELERATION * (HEIGHT_LEVEL * s.level + HEIGHT_BOUNCE));
                //var dist = v * s.time + ACCELERATION * s.time * s.time * 0.5;
                var v = Math.sqrt(FALL_VELOCITY * FALL_VELOCITY + 2 * FALL_ACCEL * (s.level - 1) * HEIGHT_LEVEL);
                var dist = v * s.time + FALL_ACCEL * s.time * s.time * 0.5;
                for (var i = 0; i < lvls.length; i++) {
                    if (lvls[i]) lvls[i].pos = (i + 1) * HEIGHT_LEVEL - dist;
                }
                if (lvls[0]) {
                    this._distance = dist + this._floorIndex - 1;
                }
            }
        }
    }, {
        key: '_setResult',
        value: function _setResult(value) {
            this._result = value;
            this.event(HelixGame.EVENT_RESULT, value);
        }
    }, {
        key: 'progress',
        get: function get() {
            if (this.result == HelixGame.RESULT_WIN) return 1;
            return 1 - (this._generator.countLeft + this._levels.length) / this._generator.countTotal;
        }
    }, {
        key: 'finished',
        get: function get() {
            return this.result == HelixGame.RESULT_WIN || this.result == HelixGame.RESULT_LOOSE;
        }
    }, {
        key: 'resumeCount',
        get: function get() {
            return this._resumeCount;
        }
    }, {
        key: 'result',
        get: function get() {
            return this._result;
        }
    }, {
        key: 'shift',
        get: function get() {
            return this._shift;
        },
        set: function set(value) {
            this._shift = value;
        }
    }, {
        key: 'floorIndex',
        get: function get() {
            return this._floorIndex;
        }
    }, {
        key: 'isBrakingBall',
        get: function get() {
            return this._state.level >= this._state.breakFromLevel;
        }
    }, {
        key: 'ballPos',
        get: function get() {
            var s = this._state;
            if (s.type == STATE_BOUNCE) {
                var vel = Math.sqrt(2 * HEIGHT_BOUNCE * ACCELERATION);
                return vel * s.time - ACCELERATION * s.time * s.time * 0.5;
            }
            return 0;
        }
    }, {
        key: 'ballVel',
        get: function get() {
            var s = this._state;
            var vel = Math.sqrt(2 * HEIGHT_BOUNCE * ACCELERATION);
            if (s.type == STATE_BOUNCE) return vel - ACCELERATION * s.time;else return -vel - FALL_ACCEL * s.totalTime;
        }
    }, {
        key: 'ballPosMax',
        get: function get() {
            return HEIGHT_BOUNCE;
        }
    }, {
        key: 'distance',
        get: function get() {
            return this._distance;
        }
    }]);

    return HelixGame;
}(Laya.EventDispatcher);

exports.default = HelixGame;

},{"./HxGlobals":37}],30:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _RingSliceMesh = require("./RingSliceMesh");

var _RingSliceMesh2 = _interopRequireDefault(_RingSliceMesh);

var _RingSliceMeshPool = require("./RingSliceMeshPool");

var _RingSliceMeshPool2 = _interopRequireDefault(_RingSliceMeshPool);

var _GradientPlaneMesh = require("./GradientPlaneMesh");

var _GradientPlaneMesh2 = _interopRequireDefault(_GradientPlaneMesh);

var _TriangleMesh = require("./TriangleMesh");

var _TriangleMesh2 = _interopRequireDefault(_TriangleMesh);

var _MouseCtrl = require("./MouseCtrl");

var _MouseCtrl2 = _interopRequireDefault(_MouseCtrl);

var _HelixGame = require("./HelixGame");

var _HelixGame2 = _interopRequireDefault(_HelixGame);

var _HelixView = require("./HelixView");

var _HelixView2 = _interopRequireDefault(_HelixView);

var _HxGlobals = require("./HxGlobals");

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

var _SoundMan = require("./SoundMan");

var _SoundMan2 = _interopRequireDefault(_SoundMan);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BALL_RADIUS = _HxGlobals2.default.VIEW_BALL_RADIUS;
var FLOOR_THICKNESS = _HxGlobals2.default.VIEW_FLOOR_THICKNESS;
var SECTOR_RADIUS = _HxGlobals2.default.VIEW_SECTOR_RADIUS;
var COLUMN_RADIUS = _HxGlobals2.default.VIEW_COLUMN_RADIUS;

var HelixGameView = function (_Laya$Scene3D) {
    _inherits(HelixGameView, _Laya$Scene3D);

    _createClass(HelixGameView, null, [{
        key: "EVENT_STARTED",
        get: function get() {
            return "STARTED";
        }
    }]);

    function HelixGameView(generator, resumeState, skin, mouseDispatcher, blots, fxs) {
        _classCallCheck(this, HelixGameView);

        var _this = _possibleConstructorReturn(this, (HelixGameView.__proto__ || Object.getPrototypeOf(HelixGameView)).call(this));

        _this._skin = skin;
        blots.color = skin.ballMat.rawColor;

        var scene = _this;
        _this._mouseDispatcher = mouseDispatcher;

        // Camera
        var camera = scene.addChild(new Laya.Camera(0, 0.1, 100));
        camera.transform.translate(new Laya.Vector3(4, 1.3, 0));
        camera.transform.rotate(new Laya.Vector3(-30, 90, 0), true, false);
        camera.fieldOfView = 60;

        // Gradient back
        var back = camera.addChild(new Laya.MeshSprite3D(skin.backMesh));
        back.meshRenderer.sharedMaterial = skin.backMat;
        var backDist = 20;
        back.transform.translate(new Laya.Vector3(0, 0, -backDist));
        back.transform.localRotationEulerY = 180;
        back.transform.localScale = new Laya.Vector3(100, backDist * Math.tan(0.5 * camera.fieldOfView * Math.PI / 180), 1);

        // Light
        var directionLight = scene.addChild(new Laya.DirectionLight());
        directionLight.color = new Laya.Vector3(1, 1, 1);
        var lightDir = new Laya.Vector3(-1, -1.5, 0.5);
        Laya.Vector3.normalize(lightDir, lightDir);
        directionLight.transform.worldMatrix.setForward(lightDir);

        _this._ball = _this.addChild(new Laya.MeshSprite3D(new Laya.SphereMesh(BALL_RADIUS, 12, 16)));
        _this._ball.transform.localPositionX = 0.75;
        _this._ball.meshRenderer.sharedMaterial = skin.ballMat;
        _this._bounceT = 1000;
        _this._ballTrail = _this.addChild(new Laya.MeshSprite3D(new _TriangleMesh2.default(BALL_RADIUS, BALL_RADIUS)));
        _this._ballTrail.meshRenderer.sharedMaterial = skin.ballTrailMat;
        _this._ballTrail.transform.localPositionX = 0.75;
        _this._ballTrail.transform.localScaleY = 0;
        _this._ballTrail.transform.localRotationEulerY = -90;
        _this._ballLastVel = 0;

        _this._generator = generator;
        _this._helixGame = new _HelixGame2.default(generator, resumeState);
        var sceneRoot = scene.addChild(new Laya.Sprite3D());
        _this._rotationRoot = sceneRoot.addChild(new Laya.Sprite3D());
        var column = _this._rotationRoot.addChild(new Laya.MeshSprite3D(new Laya.CylinderMesh(COLUMN_RADIUS, 20, 24)));
        column.meshRenderer.sharedMaterial = skin.poleMat;
        _this._helixView = _this._rotationRoot.addChild(new _HelixView2.default(_this._helixGame, sceneRoot, new _RingSliceMeshPool2.default(SECTOR_RADIUS, COLUMN_RADIUS, FLOOR_THICKNESS), skin, blots));
        _this._helixGame.on(_HelixGame2.default.EVENT_RESULT, _this, _this._onResult);
        _this._helixGame.on(_HelixGame2.default.EVENT_LEVEL_RESUMED, _this, _this._onResume);
        _this._helixGame.on(_HelixGame2.default.EVENT_BALL_BOUNCE, _this, _this._onBallBounce);
        _this._helixGame.on(_HelixGame2.default.EVENT_LEVEL_PASSED, _this, function (lvl) {
            _SoundMan2.default.playBreak(lvl - 1);
        });
        _this._helixGame.on(_HelixGame2.default.EVENT_LEVEL_BROKEN, _this, function () {
            _SoundMan2.default.playCrack();
        });
        _this._helixGame.start();
        if (!resumeState) _this._createMouse();
        _this._setShift(_this._getShift());
        Laya.timer.frameLoop(1, _this, _this._onFrame);

        _this._initFxs(fxs);
        return _this;
    }

    _createClass(HelixGameView, [{
        key: "destroy",
        value: function destroy(destroyChildren) {
            this.fxTrail.active = false;
            if (this._mouseCtrl) this._mouseCtrl.destroy();
            Laya.timer.clear(this, this._onFrame);
            _get(HelixGameView.prototype.__proto__ || Object.getPrototypeOf(HelixGameView.prototype), "destroy", this).call(this, true);
        }
    }, {
        key: "_onResult",
        value: function _onResult(result) {
            if (this.helixGame.finished) this._mouseCtrl.destroy();
            if (result == _HelixGame2.default.RESULT_LOOSE) {
                this.fxFail.transform.localPositionY = this._ball.transform.localPositionY;
                this.fxFail.particleSystem.play();
                _SoundMan2.default.playDeath();
                this._setShift(this._getShift());
            }
        }
    }, {
        key: "_onResume",
        value: function _onResume() {
            this._createMouse();
        }
    }, {
        key: "_getShift",
        value: function _getShift() {
            return -this._helixGame.shift;
        }
    }, {
        key: "_setShift",
        value: function _setShift(shift) {
            this._helixGame.shift = -shift;
            var r = this._rotationRoot.transform.localRotationEuler;
            r.y = 360 * shift;
            this._rotationRoot.transform.localRotationEuler = r;
            //console.log(this._helixGame.shift);
        }
    }, {
        key: "_createMouse",
        value: function _createMouse() {
            this._mouseCtrl = new _MouseCtrl2.default(this._mouseDispatcher, function () {
                return this._getShift();
            }.bind(this), function (ctx) {
                this._checkStarted();
                this._setShift(ctx.startValue + ctx.deltaX * _HxGlobals2.default.INPUT_ROTATE_SENSITIVITY);
                this._helixView.markMoved();
            }.bind(this));
        }
    }, {
        key: "_checkStarted",
        value: function _checkStarted() {
            if (!this._started) {
                this._started = true;
                this.event(HelixGameView.EVENT_STARTED);
            }
        }
    }, {
        key: "_initFxs",
        value: function _initFxs(fxs) {
            this._fxs = fxs;
            var FX_SCALE = 0.1;
            for (var name in fxs) {
                fxs[name].transform.localScale = new Laya.Vector3(FX_SCALE, FX_SCALE, FX_SCALE);
            }
            var underBallPos = new Laya.Vector3(_HxGlobals2.default.VIEW_BALL_XPOS, FLOOR_THICKNESS * 0.5 + _HxGlobals2.default.VIEW_BLOT_YOFFSET * 2, 0);
            this.fxBounce.transform.localPosition = underBallPos;
            this.fxBounce.particleSystem.startColorConstant = this._skin.ballMat.rawColor;
            this.fxFail.transform.localPosition = underBallPos;
            this.fxTrail.transform.localPosition = new Laya.Vector3(_HxGlobals2.default.VIEW_BALL_XPOS, (FLOOR_THICKNESS + BALL_RADIUS) * 0.5, 0);;
            this.fxTrail.active = false;
            this.fxBackground.visualHeight = (this._generator.countTotal + 4) * _HxGlobals2.default.VIEW_LEVEL_HEIGHT;
            this.fxBackground.particleSystem.shape.z = this.fxBackground.visualHeight / FX_SCALE;
            this.fxBackground.particleSystem.emission.emissionRate = 3 * (this.fxBackground.visualHeight / 22);
            this.fxBackground.transform.localPositionX = -3.5;
            this.fxBackground.started = false;
        }
    }, {
        key: "_onBallBounce",
        value: function _onBallBounce(info) {
            this._bounceT = 0;
            this.fxBounce.particleSystem.play();
            //if (!info.broken)
            _SoundMan2.default.playJump();
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            var hxg = this._helixGame;
            var dt = Laya.timer.delta * 0.001;
            hxg.update(dt);
            this._ball.transform.localPositionY = hxg.ballPos * _HxGlobals2.default.VIEW_BOUNCE_HEIGHT_SCALE + (BALL_RADIUS + FLOOR_THICKNESS * 0.5);
            this._ballTrail.transform.localPositionY = this._ball.transform.localPositionY;
            this._ballLastVel = Math.max(-3, hxg.ballVel) * 0.3 + this._ballLastVel * 0.7;
            this._ballTrail.transform.localScaleY = -this._ballLastVel * 3.5;
            var heat = Math.max(0, Math.min(-(hxg.ballVel + 2), 1));
            this._skin.heat = heat;
            if (heat > 0 || this.fxTrail.particleSystem.startColorConstant.w > 0) {
                if (!this.fxTrail.active) {
                    this.fxTrail.particleSystem.play();
                    this.fxTrail.active = true;
                }
                this.fxTrail.particleSystem.startColorConstant = this._skin.ballTrailColor.clone();
            } else this.fxTrail.active = false;
            // Bounce
            if (!hxg.finished) this._bounceT += dt;
            var s = hxg.result == _HelixGame2.default.RESULT_WIN ? 0 : 0.2 * Math.exp(-3 * this._bounceT) * Math.cos(20 * this._bounceT);
            this._ball.transform.localScale = new Laya.Vector3(1 + s, 1 - s, 1 + s);
            this.fxBackground.transform.localPositionY = this.helixGame.distance * _HxGlobals2.default.VIEW_LEVEL_HEIGHT - this.fxBackground.visualHeight * 0.5;
            if (!this.fxBackground.started) {
                this.fxBackground.started = true;
                this.fxBackground.particleSystem.play();
                this.fxBackground.particleSystem._updateParticles(3000);
            }
        }
    }, {
        key: "helixGame",
        get: function get() {
            return this._helixGame;
        }
    }, {
        key: "fxBounce",
        get: function get() {
            return this._fxs[_HxGlobals2.default.FX_NAME_BOUNCE];
        }
    }, {
        key: "fxFail",
        get: function get() {
            return this._fxs[_HxGlobals2.default.FX_NAME_FAIL];
        }
    }, {
        key: "fxTrail",
        get: function get() {
            return this._fxs[_HxGlobals2.default.FX_NAME_TRAIL];
        }
    }, {
        key: "fxBackground",
        get: function get() {
            return this._fxs[_HxGlobals2.default.FX_NAME_BACKGROUND];
        }
    }]);

    return HelixGameView;
}(Laya.Scene3D);

exports.default = HelixGameView;

},{"./GradientPlaneMesh":27,"./HelixGame":29,"./HelixView":35,"./HxGlobals":37,"./MouseCtrl":42,"./RingSliceMesh":47,"./RingSliceMeshPool":48,"./SoundMan":52,"./TriangleMesh":54}],31:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HelixGeneratorBase = function () {
    function HelixGeneratorBase() {
        _classCallCheck(this, HelixGeneratorBase);
    }

    // >>> To override


    _createClass(HelixGeneratorBase, [{
        key: "next",
        value: function next() {
            return null;
        }
        // <<< To override

    }, {
        key: "countTotal",
        get: function get() {
            return 0;
        }
    }, {
        key: "countLeft",
        get: function get() {
            return 0;
        }
    }], [{
        key: "rndInt",
        value: function rndInt(max) {
            return Math.floor(Math.random() * max);
        }
    }, {
        key: "genArray",
        value: function genArray(count, value) {
            return Array.from(new Array(count), function () {
                return value;
            });
        }
    }, {
        key: "shuffle",
        value: function shuffle(arr) {
            for (var i = 0; i < arr.length - 1; i++) {
                var idx = i + HelixGeneratorBase.rndInt(arr.length - i);
                var buf = arr[i];arr[i] = arr[idx];arr[idx] = buf;
            }
            return arr;
        }
    }, {
        key: "groupRepeats",
        value: function groupRepeats(arr) {
            var res = [];
            for (var i = 0; i < arr.length;) {
                var val = arr[i];
                var cnt = 1;
                while (i + cnt < arr.length && arr[i + cnt] == val) {
                    cnt++;
                }res.push({ value: val, count: cnt });
                i += cnt;
            }
            return res;
        }
    }, {
        key: "rotateCircle",
        value: function rotateCircle(circle, angle) {
            var split = angle / 360;
            split -= Math.floor(split);
            var epsilon = 2 / 360;
            if (Math.abs(split) < epsilon || Math.abs(split - 1) < epsilon) return circle;
            var idx = 0;
            for (idx = 0; idx < circle.length; idx++) {
                var s = circle[idx];
                if (s.end - epsilon > split) {
                    if (Math.abs(split - s.start) >= epsilon) {
                        var pre_s = Object.assign({}, s);
                        pre_s.end = s.start = split;
                        circle.splice(idx, null, pre_s);
                        idx++;
                    }
                    break;
                }
            }
            var pre_slice = circle.splice(0, idx);
            circle.push.apply(circle, pre_slice);
            var start = 0;
            for (var i = 0; i < circle.length; i++) {
                var s = circle[i];
                s.end = start + (s.end - s.start);
                s.start = start;
                start = s.end;
            }
            return circle;
        }
    }]);

    return HelixGeneratorBase;
}();

exports.default = HelixGeneratorBase;

},{}],32:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _HelixGeneratorBase2 = require("./HelixGeneratorBase");

var _HelixGeneratorBase3 = _interopRequireDefault(_HelixGeneratorBase2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HelixGeneratorConfigFloors = function (_HelixGeneratorBase) {
    _inherits(HelixGeneratorConfigFloors, _HelixGeneratorBase);

    function HelixGeneratorConfigFloors(floors, moveFreq) {
        _classCallCheck(this, HelixGeneratorConfigFloors);

        var _this = _possibleConstructorReturn(this, (HelixGeneratorConfigFloors.__proto__ || Object.getPrototypeOf(HelixGeneratorConfigFloors)).call(this));

        _this._floors = [];
        for (var i in floors) {
            var floor = floors[i];
            var outFloor = {
                stat: _this._convertSectors(floor.stat),
                statStart: floor.statStart,
                move: _this._convertSectors(floor.move),
                moveStart: floor.moveStart,
                moveAngle: floor.moveAngle * 0.5,
                moveFreq: moveFreq
            };
            if (floor.wall) outFloor.wall = { pos: floor.wall.angle / 360 }; //{ pos: (floor.wall.start + Math.random() * floor.wall.size) / 360 };
            _this._floors.push(outFloor);
        }
        _this._countTotal = _this._floors.length;
        return _this;
    }

    _createClass(HelixGeneratorConfigFloors, [{
        key: "next",
        value: function next() {
            return this._floors.splice(0, 1)[0];
        }
    }, {
        key: "_convertSectors",
        value: function _convertSectors(sectors) {
            var res = [];
            var factor = 1 / 360;
            for (var i in sectors) {
                var s = sectors[i];
                var start = s.start * factor;
                var size = s.size * factor;
                if (size <= 0.5) res.push({ type: s.type, start: start, end: start + size });else {
                    res.push({ type: s.type, start: start, end: start + size * 0.5 });
                    res.push({ type: s.type, start: start + size * 0.5, end: start + size });
                }
            }
            return res;
        }
    }, {
        key: "countTotal",
        get: function get() {
            return this._countTotal;
        }
    }, {
        key: "countLeft",
        get: function get() {
            return this._floors.length;
        }
    }]);

    return HelixGeneratorConfigFloors;
}(_HelixGeneratorBase3.default);

exports.default = HelixGeneratorConfigFloors;

},{"./HelixGeneratorBase":31}],33:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _HelixGeneratorBase2 = require("./HelixGeneratorBase");

var _HelixGeneratorBase3 = _interopRequireDefault(_HelixGeneratorBase2);

var _HxGlobals = require("./HxGlobals");

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HelixGeneratorInfinitRandom = function (_HelixGeneratorBase) {
    _inherits(HelixGeneratorInfinitRandom, _HelixGeneratorBase);

    function HelixGeneratorInfinitRandom(groundC, deathC, holeC) {
        var count = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

        _classCallCheck(this, HelixGeneratorInfinitRandom);

        var _this = _possibleConstructorReturn(this, (HelixGeneratorInfinitRandom.__proto__ || Object.getPrototypeOf(HelixGeneratorInfinitRandom)).call(this));

        _this._groundC = groundC;
        _this._deathC = deathC;
        _this._holeC = holeC;
        _this._count = count ? { total: count, left: count } : null;
        return _this;
    }

    _createClass(HelixGeneratorInfinitRandom, [{
        key: "next",
        value: function next() {
            if (this._count) {
                if (this._count.left == 0) return null;
                this._count.left--;
            }
            var floor = {};
            var arrStat = _HelixGeneratorBase3.default.genArray(this._groundC, _HxGlobals2.default.SEG_GROUND).concat(_HelixGeneratorBase3.default.genArray(this._deathC, _HxGlobals2.default.SEG_DEATH).concat(_HelixGeneratorBase3.default.genArray(this._holeC, _HxGlobals2.default.SEG_HOLE)));
            floor.stat = this._generateCircle(arrStat);
            floor.statStart = 0; //90;
            if (this._count.total > this._count.left + 1) {
                var arrMove = _HelixGeneratorBase3.default.genArray(this._deathC, _HxGlobals2.default.SEG_DEATH).concat(_HelixGeneratorBase3.default.genArray(this._groundC + this._holeC, _HxGlobals2.default.SEG_HOLE));
                floor.move = this._generateCircle(arrMove);
                floor.moveStart = 0; //90;
                floor.moveFreq = 0.25;
                floor.moveAngle = 30;
            }
            return floor;
        }
    }, {
        key: "_generateCircle",
        value: function _generateCircle(arr) {
            _HelixGeneratorBase3.default.shuffle(arr);
            var groups = _HelixGeneratorBase3.default.groupRepeats(arr);
            var reducer = function reducer(acc, val) {
                var len = val.count / acc.sectors;
                var newVal = { type: val.value, start: acc.end, end: acc.end + len };
                acc.end = newVal.end;
                acc.res.push(newVal);
                return acc;
            };
            var res = groups.reduce(reducer, { sectors: arr.length, end: 0, res: [] }).res;
            //res = HelixGeneratorBase.rotateCircle(res, Math.floor(Math.random() * 10) * 36);
            return res;
        }
    }, {
        key: "countTotal",
        get: function get() {
            return this._count ? this._count.total : 10000;
        }
    }, {
        key: "countLeft",
        get: function get() {
            return this._count ? this._count.left : 10000;
        }
    }]);

    return HelixGeneratorInfinitRandom;
}(_HelixGeneratorBase3.default);

exports.default = HelixGeneratorInfinitRandom;

},{"./HelixGeneratorBase":31,"./HxGlobals":37}],34:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GradientPlaneMesh = require("./GradientPlaneMesh");

var _GradientPlaneMesh2 = _interopRequireDefault(_GradientPlaneMesh);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HEAT_COLOR = _Utils2.default.toColor('ff2020');

var HelixSkin = function () {
    function HelixSkin(pole, ball, ground, trap, backTop, backBottom) {
        _classCallCheck(this, HelixSkin);

        this.poleMat = this._createMaterial(pole);
        this._heat = 0;
        this._ballTrailColor = new Laya.Vector4(1, 1, 1, 0.5);
        this.ballMat = this._createMaterial(ball, true);
        this.ballTrailMat = this._createTrailMaterial(ball);
        this.groundMat = this._createMaterial(ground);
        this.trapMat = this._createMaterial(trap);
        this.crashMat = this.ballMat;
        this.backMat = this._createBackMaterial();
        this.backMesh = new _GradientPlaneMesh2.default(backTop, backBottom);
    }

    _createClass(HelixSkin, [{
        key: "_createMaterial",
        value: function _createMaterial(rawColor, heatable) {
            var emission = 0.3;
            var albedo = 0.8;
            var smoothness = 0.2;
            var c = _Utils2.default.toColor(rawColor);
            var mat = new Laya.PBRStandardMaterial();
            mat.rawColor = c;
            mat.enableEmission = true;
            mat.emissionColor = new Laya.Vector4(c.r * emission, c.g * emission, c.b * emission, 1);
            mat.albedoColor = new Laya.Vector4(c.r * albedo, c.g * albedo, c.b * albedo, 1);
            mat.smoothness = smoothness;
            mat.metallic = 0;
            if (heatable) {
                var ballTrailColor = this._ballTrailColor;
                mat.setHeat = function (t) {
                    var t_inv = 1 - t;
                    var r = HEAT_COLOR.r * t + c.r * t_inv,
                        g = HEAT_COLOR.g * t + c.g * t_inv,
                        b = HEAT_COLOR.b * t + c.b * t_inv;
                    mat.emissionColor.x = r * emission;
                    mat.emissionColor.y = g * emission;
                    mat.emissionColor.z = b * emission;
                    mat.albedoColor.x = r * albedo;
                    mat.albedoColor.y = g * albedo;
                    mat.albedoColor.z = b * albedo;
                };
            }
            return mat;
        }
    }, {
        key: "_createBackMaterial",
        value: function _createBackMaterial() {
            var mat = new Laya.EffectMaterial();
            mat.color = new Laya.Vector4(0.5, 0.5, 0.5, 1);
            return mat;
        }
    }, {
        key: "_createTrailMaterial",
        value: function _createTrailMaterial(rawColor) {
            var c = _Utils2.default.toColor(rawColor);
            var mat = new Laya.EffectMaterial();
            mat.renderMode = Laya.EffectMaterial.RENDERMODE_ALPHABLENDED;
            var I = 0.5;
            mat.color = new Laya.Vector4(c.r * I, c.g * I, c.b * I, 0.25);
            mat.setHeat = function (t) {
                var t_inv = 1 - t;
                mat.color.x = (HEAT_COLOR.r * t + c.r * t_inv) * I;
                mat.color.y = (HEAT_COLOR.g * t + c.g * t_inv) * I;
                mat.color.z = (HEAT_COLOR.b * t + c.b * t_inv) * I;
                this.ballTrailColor.x = HEAT_COLOR.r;
                this.ballTrailColor.y = HEAT_COLOR.g;
                this.ballTrailColor.z = HEAT_COLOR.b;
                this.ballTrailColor.w = t * 0.5;
            }.bind(this);
            return mat;
        }
    }, {
        key: "heatColor",
        get: function get() {
            return HEAT_COLOR;
        }
    }, {
        key: "heat",
        get: function get() {
            return this._heat;
        },
        set: function set(value) {
            this._heat = value;
            this.ballMat.setHeat(value);
            this.ballTrailMat.setHeat(value);
        }
    }, {
        key: "ballTrailColor",
        get: function get() {
            return this._ballTrailColor;
        }
    }], [{
        key: "getLevel",
        value: function getLevel(level) {
            var idx = (level - 1) % HelixSkin.all.length;
            return HelixSkin.all[idx];
        }
    }, {
        key: "all",
        get: function get() {
            if (!HelixSkin._all) {
                HelixSkin._all = [new HelixSkin('feeed7', 'fb3c7d', '7e0548', 'ff5e3a', 'f1eec8', 'cc0033'), new HelixSkin('a3faa3', 'e443ff', 'e76f51', 'fff200', 'acfcf8', '0ad9ff'),
                //new HelixSkin('f3ffcc', 'e2276c', '0AD3FF', '0AD3FF', 'A2FAA3', '55D657'),
                new HelixSkin('D5E4E5', '7EFF1C', '69891E', 'F15025', 'EFBDEB', 'A0619B'), new HelixSkin('F7F2F2', 'D1D138', '69891E', 'FFFF35', 'FC7E7E', 'B73535'), new HelixSkin('D7F9F1', 'FF9F1C', 'C9725C', 'FCFC20', 'C7DBD2', '849B91'), new HelixSkin('90FCF9', 'EC0B43', '738E5B', 'A1F458', 'FFD1E1', 'D8477A')];
            }
            return HelixSkin._all;
        }
    }]);

    return HelixSkin;
}();

exports.default = HelixSkin;

},{"./GradientPlaneMesh":27,"./Utils":61}],35:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _HelixGame = require("./HelixGame");

var _HelixGame2 = _interopRequireDefault(_HelixGame);

var _RingSliceMesh = require("./RingSliceMesh");

var _RingSliceMesh2 = _interopRequireDefault(_RingSliceMesh);

var _RingSliceMeshPool = require("./RingSliceMeshPool");

var _RingSliceMeshPool2 = _interopRequireDefault(_RingSliceMeshPool);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _HxGlobals = require("./HxGlobals");

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LEVEL_HEIGHT = _HxGlobals2.default.VIEW_LEVEL_HEIGHT;
var DEBRIS_ACCELERATION = _HxGlobals2.default.DEBRIS_ACCELERATION;
var DEBRIS_VELOCITY = _HxGlobals2.default.DEBRIS_VELOCITY;
var DEBRIS_FALL_DURATION = _HxGlobals2.default.DEBRIS_FALL_DURATION;

var HelixView = function (_Laya$Sprite3D) {
    _inherits(HelixView, _Laya$Sprite3D);

    function HelixView(helix, piecesWorld, meshPool, skin, blots) {
        _classCallCheck(this, HelixView);

        var _this = _possibleConstructorReturn(this, (HelixView.__proto__ || Object.getPrototypeOf(HelixView)).call(this, "HelixView"));

        _this._helix = helix;
        _this._piecesWorld = piecesWorld;
        _this._levels = [];
        _this._meshPool = meshPool;
        _this._skin = skin;
        _this._blots = blots;
        helix.on(_HelixGame2.default.EVENT_LEVEL_ADDED, _this, _this._onLevelAdded);
        helix.on(_HelixGame2.default.EVENT_LEVEL_REMOVED, _this, _this._onLevelRemoved);
        helix.on(_HelixGame2.default.EVENT_LEVEL_RESUMED, _this, _this._onLevelResumed);
        helix.on(_HelixGame2.default.EVENT_RESULT, _this, _this._onResult);
        helix.on(_HelixGame2.default.EVENT_BALL_BOUNCE, _this, _this._onBounce);
        Laya.timer.frameLoop(1, _this, _this._onFrame);
        _this.markMoved();
        return _this;
    }

    _createClass(HelixView, [{
        key: "destroy",
        value: function destroy(destroyChildren) {
            this._helix.off(_HelixGame2.default.EVENT_LEVEL_ADDED, this, this._onLevelAdded);
            this._helix.off(_HelixGame2.default.EVENT_LEVEL_REMOVED, this, this._onLevelRemoved);
            this._helix.off(_HelixGame2.default.EVENT_LEVEL_RESUMED, this, this._onLevelResumed);
            this._helix.off(_HelixGame2.default.EVENT_RESULT, this, this._onResult);
            this._helix.off(_HelixGame2.default.EVENT_BALL_BOUNCE, this, this._onBounce);
            Laya.timer.clear(this, this._onFrame);
            _get(HelixView.prototype.__proto__ || Object.getPrototypeOf(HelixView.prototype), "destroy", this).call(this, destroyChildren);
        }
    }, {
        key: "_onLevelAdded",
        value: function _onLevelAdded(info) {
            var infoView = { info: info }; //, container:new Laya.Sprite3D() };
            if (info.segments.stat) {
                infoView.statContainer = this._addCircle(info.segments.stat, info.segments.statStart, false);
                //infoView.statContainer.transform.localRotationEulerY = -info.segments.statStart;
            }
            if (info.segments.move) {
                infoView.moveContainer = this._addCircle(info.segments.move, info.segments.moveStart, false);
            }
            if (info.segments.wall) {
                infoView.statContainer.addChild(this._createWall(info.segments.wall, info.segments.statStart));
            }
            this._levels.push(infoView);
            this._updateInfoViewPos(infoView);
        }
    }, {
        key: "markMoved",
        value: function markMoved() {
            this._movedCounter = 5;
        }
    }, {
        key: "_addCircle",
        value: function _addCircle(segments, startAngle, bump) {
            var container = new Laya.Sprite3D();
            for (var i = 0; i < segments.length; i++) {
                var seg = segments[i];
                if (seg.type != _HxGlobals2.default.SEG_HOLE) {
                    container.addChild(this._createCircleItem(seg, startAngle, bump));
                }
            }
            this.addChild(container);
            return container;
        }
    }, {
        key: "_createCircleItem",
        value: function _createCircleItem(seg, startAngle, bump) {
            var obj = new Laya.MeshSprite3D(this._meshPool.getMesh(seg.end - seg.start, bump || seg.type == _HxGlobals2.default.SEG_DEATH, seg.type == _HxGlobals2.default.SEG_DEATH));
            obj.transform.localRotationEuler = new Laya.Vector3(0, 360 * seg.end + startAngle, 0);
            obj.impulseDir = this._getRadAngleDir(2 * Math.PI * (seg.start + seg.end) * 0.5 + startAngle * Math.PI / 180);
            if (seg.type == _HxGlobals2.default.SEG_DEATH) obj.meshRenderer.sharedMaterial = this._skin.trapMat;else if (seg.type == _HxGlobals2.default.SEG_WIN) obj.meshRenderer.sharedMaterial = this._skin.ballMat;else obj.meshRenderer.sharedMaterial = this._skin.groundMat;
            obj.seg = seg;
            return obj;
        }
    }, {
        key: "_createWall",
        value: function _createWall(info, startAngle) {
            var obj = new Laya.MeshSprite3D(this._meshPool.getMesh(_HxGlobals2.default.WALL_ANGLE / 360, false, true, _HxGlobals2.default.VIEW_LEVEL_HEIGHT - _HxGlobals2.default.VIEW_FLOOR_THICKNESS));
            obj.transform.localRotationEuler = new Laya.Vector3(0, info.pos * 360 + _HxGlobals2.default.WALL_ANGLE * 0.5 + startAngle, 0);
            obj.transform.localPositionY = _HxGlobals2.default.VIEW_LEVEL_HEIGHT * 0.5; // + HxGlobals.VIEW_FLOOR_THICKNESS;
            obj.impulseDir = this._getRadAngleDir(2 * Math.PI * info.pos + startAngle * Math.PI / 180);
            obj.meshRenderer.sharedMaterial = this._skin.trapMat;
            obj.wall = info;
            console.log(obj.transform.localRotationEuler);
            return obj;
        }
    }, {
        key: "_getRadAngleDir",
        value: function _getRadAngleDir(rad) {
            return new Laya.Vector3(Math.cos(rad), 0, -Math.sin(rad));
        }
    }, {
        key: "_onLevelRemoved",
        value: function _onLevelRemoved(info) {
            var idx = this._levels.findIndex(function (itm) {
                return itm.info == info;
            });
            if (idx < 0) {
                console.error("_onLevelRemoved: level view not found");
                return;
            }
            var infoView = this._levels[idx];
            this._levels.splice(idx, 1);
            this._runRemoveAnimation(infoView.statContainer, info.crashedLevel);
            this._runRemoveAnimation(infoView.moveContainer, info.crashedLevel);
        }
    }, {
        key: "_onLevelResumed",
        value: function _onLevelResumed(info) {
            var view = this._levels.find(function (itm) {
                return itm.info == info;
            });
            this._repaintSegments(view.statContainer, this._skin.trapMat, this._skin.groundMat);
            this._repaintSegments(view.moveContainer, this._skin.trapMat, this._skin.groundMat);
            this._removeWall(view.statContainer);
        }
    }, {
        key: "_repaintSegments",
        value: function _repaintSegments(container, fromMaterial, toMaterail) {
            if (!container) return;
            for (var i = 0; i < container.numChildren; i++) {
                var renderer = container.getChildAt(i).meshRenderer;
                if (renderer.sharedMaterial == fromMaterial) {
                    renderer.sharedMaterial = toMaterail;
                }
            }
        }
    }, {
        key: "_removeWall",
        value: function _removeWall(container) {
            for (var i = 0; i < container.numChildren; i++) {
                var child = container.getChildAt(i);
                if (child.wall) {
                    child.parent.removeChild(child);
                }
            }
        }
    }, {
        key: "_onBounce",
        value: function _onBounce(seg) {
            if (this._movedCounter > 0 && this._levels.length && this._levels[0]) {
                this._movedCounter--;
                var levelView = this._levels[0];
                var segView = this._findSegView(levelView.statContainer, seg) || this._findSegView(levelView.moveContainer, seg);
                if (segView) {
                    var blot = this._blots.addTo(segView);
                    var pos = new Laya.Vector3(_HxGlobals2.default.VIEW_BALL_XPOS, 0, 0);
                    var m = _Utils2.default.fromToTransformMatrix(this._piecesWorld.transform, blot.transform);
                    Laya.Vector3.transformCoordinate(pos, m, pos);
                    pos.y = _HxGlobals2.default.VIEW_FLOOR_THICKNESS * 0.5 + _HxGlobals2.default.VIEW_BLOT_YOFFSET;
                    blot.transform.localPosition = pos;
                    blot.transform.localScale = new Laya.Vector3(0.5, 0.5, 0.5);
                    blot.transform.localRotationEulerY = 360 * Math.random();
                }
            }
        }
    }, {
        key: "_findSegView",
        value: function _findSegView(container, seg) {
            if (container) {
                var count = container.numChildren;
                for (var i = 0; i < count; i++) {
                    var child = container.getChildAt(i);
                    if (child.seg == seg) return child;
                }
            }
            return null;
        }
    }, {
        key: "_onResult",
        value: function _onResult(result) {
            if (result == _HelixGame2.default.RESULT_PLAYING) this._onFrame();
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            var _this2 = this;

            this._levels.forEach(function (info) {
                _this2._updateInfoViewPos(info);
            }, this);
        }
    }, {
        key: "_updateInfoViewPos",
        value: function _updateInfoViewPos(infoView) {
            var y = -infoView.info.pos * LEVEL_HEIGHT;
            if (infoView.statContainer) infoView.statContainer.transform.localPositionY = y;
            if (infoView.moveContainer) {
                infoView.moveContainer.transform.localPositionY = y;
                infoView.moveContainer.transform.localRotationEulerY = infoView.info.moveA;
            }
        }
    }, {
        key: "_runRemoveAnimation",
        value: function _runRemoveAnimation(container, crashedLevel) {
            if (!container) return;
            var world = this._piecesWorld; // this.parent.parent;
            var m = _Utils2.default.fromToTransformMatrix(container.transform, world.transform);
            var count = container.numChildren;
            var pieces = [];
            for (var i = count - 1; i >= 0; i--) {
                var child = container.getChildAt(i);
                // Velocility
                child.vel = child.impulseDir.clone();
                Laya.Vector3.TransformNormal(child.vel, m, child.vel);
                Laya.Vector3.scale(child.vel, DEBRIS_VELOCITY, child.vel);
                child.vel.y = -DEBRIS_VELOCITY * 0.2;
                var v = new Laya.Vector3(child.impulseDir.z, 0, -child.impulseDir.x);
                var rndScale = 0.5;
                v.y += Math.random() * rndScale;v.x += Math.random() * rndScale;v.z += Math.random() * rndScale;
                Laya.Vector3.normalize(v, v);
                child.axis = v;
                Laya.Vector3.TransformNormal(child.axis, m, child.axis);
                // Move sector to world
                _Utils2.default.reparentInplace(child, world);
                if (crashedLevel) child.meshRenderer.material = this._skin.crashMat;
                child.crashDelay = 0.1;
                pieces.push(child);
            }
            var lastInfo = this._levels.length ? this._levels[this._levels.length - 1].info : null;
            Laya.Tween.to(new FallingPieces(container, pieces, lastInfo, 0.8 + Math.random() * 0.5), { time: DEBRIS_FALL_DURATION }, DEBRIS_FALL_DURATION * 1000);
        }
    }]);

    return HelixView;
}(Laya.Sprite3D);

exports.default = HelixView;

var FallingPieces = function () {
    function FallingPieces(container, pieces, refLvl, avel) {
        _classCallCheck(this, FallingPieces);

        this._container = container;
        this._pieces = pieces;
        this._refLvl = refLvl;
        this._avel = avel;
        if (refLvl) this._refLvlPos = refLvl.pos;
        this._time = 0;
        this._q = new Laya.Quaternion();
    }

    _createClass(FallingPieces, [{
        key: "time",
        get: function get() {
            return this._time;
        },
        set: function set(value) {
            var _this3 = this;

            if (this._container.destroyed) return;
            var dt = value - this._time;
            this._time = value;
            var pieces = this._pieces;
            if (!pieces) return;
            var elevationDelta = 0;
            if (this._refLvl) {
                elevationDelta = this._refLvl.pos - this._refLvlPos;
                this._refLvlPos = this._refLvl.pos;
            }
            var bufQ = this._q;
            pieces.forEach(function (piece) {
                piece.crashDelay -= dt;
                if (piece.crashDelay > 0) {
                    piece.transform.localPositionY -= elevationDelta;
                    return;
                }
                var v = piece.transform.localPosition;
                v.x += piece.vel.x * dt;
                v.y += piece.vel.y * dt - elevationDelta;
                v.z += piece.vel.z * dt;
                piece.transform.localPosition = v;
                Laya.Quaternion.createFromAxisAngle(piece.axis, -dt * _this3._avel, bufQ);
                var q = piece.transform.localRotation;
                Laya.Quaternion.multiply(bufQ, q, q);
                piece.transform.localRotation = q;
                piece.vel.y -= DEBRIS_ACCELERATION * dt;
            });
            if (value >= DEBRIS_FALL_DURATION) {
                this._container.destroy();
                pieces.forEach(function (piece) {
                    piece.destroy();
                });
                this._pieces = null;
            }
        }
    }]);

    return FallingPieces;
}();

},{"./HelixGame":29,"./HxGlobals":37,"./RingSliceMesh":47,"./RingSliceMeshPool":48,"./Utils":61}],36:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require('./Utils');

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HxButton = function (_Laya$Panel) {
    _inherits(HxButton, _Laya$Panel);

    function HxButton() {
        _classCallCheck(this, HxButton);

        return _possibleConstructorReturn(this, (HxButton.__proto__ || Object.getPrototypeOf(HxButton)).call(this));
    }

    _createClass(HxButton, [{
        key: 'init',
        value: function init(extraProps) {
            _Utils2.default.initProps(this, ['normalView', 'disabledView'].concat(extraProps || []));
        }
    }, {
        key: 'disabled',
        get: function get() {
            return this._disabled;
        },
        set: function set(value) {
            //super.disabled = value;
            this._disabled = value;
            this.normalView.visible = !value;
            this.disabledView.visible = value;
        }
    }]);

    return HxButton;
}(Laya.Panel);

exports.default = HxButton;

},{"./Utils":61}],37:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HxGlobals = function () {
    function HxGlobals() {
        _classCallCheck(this, HxGlobals);
    }

    _createClass(HxGlobals, null, [{
        key: 'getLoadingPreload',
        value: function getLoadingPreload(pgrs) {
            return pgrs * 0.5;
        }
    }, {
        key: 'getLoadingSocial',
        value: function getLoadingSocial(pgrs) {
            return 0.5 * (1 - pgrs) + 0.6 * pgrs;
        }
    }, {
        key: 'getLoadingScenes',
        value: function getLoadingScenes(pgrs) {
            return 0.6 * (1 - pgrs) + 1.0 * pgrs;
        }

        // View

    }, {
        key: 'compareSegs',


        // static get MATERIAL_BALL() { return createMaterial("ball", 0, 1, 0); }
        // static get MATERIAL_COLUMN() { return createMaterial("column", 1, 1.5, 1.5); }
        // static get MATERIAL_GROUND() { return createMaterial("ground", 0, 0.9, 1); }
        // static get MATERIAL_DEATH() { return createMaterial("death", 1, 1, 0); }
        // static get MATERIAL_CRASHED() { return createMaterial("crashed", 1.5, 0.5, 0.5); }
        // static get MATERIAL_WIN() { return createMaterial("win", 0, 1, 0); }
        // static get MATERIAL_BACK() { return createBackMaterial(); }

        value: function compareSegs(a, b) {
            var map = HxGlobals.segPriorities;
            var diff = (a ? map[a.type] : 0) - (b ? map[b.type] : 0);
            return diff < 0 ? -1 : diff > 0 ? 1 : 0;
        }
    }, {
        key: 'FETCH_LEVELS',
        get: function get() {
            return 6;
        }
    }, {
        key: 'MAX_DELTA_TIME',
        get: function get() {
            return 0.25;
        }

        // Logic values

    }, {
        key: 'LOGIC_HEIGHT_LEVEL',
        get: function get() {
            return 1;
        }
    }, {
        key: 'LOGIC_LEVEL_BREAK_FROM',
        get: function get() {
            return 3;
        }
    }, {
        key: 'MIN_SEG_SIZE',
        get: function get() {
            return 2;
        }
    }, {
        key: 'EPSILON_SEG_SIZE',
        get: function get() {
            return 0.1;
        }
    }, {
        key: 'SEG_HOLE',
        get: function get() {
            return 'H';
        }
    }, {
        key: 'SEG_GROUND',
        get: function get() {
            return 'G';
        }
    }, {
        key: 'SEG_DEATH',
        get: function get() {
            return 'T';
        }
    }, {
        key: 'SEG_WIN',
        get: function get() {
            return 'V';
        }
    }, {
        key: 'WALL_ANGLE',
        get: function get() {
            return 10;
        }
    }, {
        key: 'VIEW_BALL_RADIUS',
        get: function get() {
            return 0.08;
        }
    }, {
        key: 'VIEW_BALL_XPOS',
        get: function get() {
            return (this.VIEW_SECTOR_RADIUS + this.VIEW_COLUMN_RADIUS) * 0.5;
        }
    }, {
        key: 'VIEW_FLOOR_THICKNESS',
        get: function get() {
            return 0.2;
        }
    }, {
        key: 'VIEW_LEVEL_HEIGHT',
        get: function get() {
            return 1.5;
        }
    }, {
        key: 'VIEW_BOUNCE_HEIGHT_SCALE',
        get: function get() {
            return HxGlobals.VIEW_LEVEL_HEIGHT * 1.5;
        }
    }, {
        key: 'VIEW_SECTOR_RADIUS',
        get: function get() {
            return 1.0;
        }
    }, {
        key: 'VIEW_SECTOR_DEATH_BUMP',
        get: function get() {
            return 0.002;
        }
    }, {
        key: 'VIEW_SECTOR_DEATH_RADIUS_BUMP',
        get: function get() {
            return 0.04;
        }
    }, {
        key: 'VIEW_COLUMN_RADIUS',
        get: function get() {
            return 0.45;
        }
    }, {
        key: 'VIEW_SECTOR_SLICES',
        get: function get() {
            return 36;
        }
    }, {
        key: 'VIEW_MIN_SECTOR_SLICES',
        get: function get() {
            return 4;
        }
    }, {
        key: 'VIEW_BLOT_YOFFSET',
        get: function get() {
            return 0.01;
        }
    }, {
        key: 'DEBRIS_ACCELERATION',
        get: function get() {
            return 2.5 * HxGlobals.VIEW_LEVEL_HEIGHT;
        }
    }, {
        key: 'DEBRIS_VELOCITY',
        get: function get() {
            return 2.5;
        }
    }, {
        key: 'DEBRIS_FALL_DURATION',
        get: function get() {
            return 1.5;
        }
    }, {
        key: 'INPUT_ROTATE_SENSITIVITY',
        get: function get() {
            return 1 / 500;
        }
    }, {
        key: 'FX_NAME_BOUNCE',
        get: function get() {
            return "fxBounce";
        }
    }, {
        key: 'FX_NAME_FAIL',
        get: function get() {
            return "fxFail";
        }
    }, {
        key: 'FX_NAME_TRAIL',
        get: function get() {
            return "fxTrail";
        }
    }, {
        key: 'FX_NAME_BACKGROUND',
        get: function get() {
            return "fxBackground";
        }
    }, {
        key: 'segPriorities',
        get: function get() {
            if (!HxGlobals._segPriorities) {
                HxGlobals._segPriorities = {};
                HxGlobals._segPriorities[HxGlobals.SEG_HOLE] = 1;
                HxGlobals._segPriorities[HxGlobals.SEG_GROUND] = 2;
                HxGlobals._segPriorities[HxGlobals.SEG_DEATH] = 3;
                HxGlobals._segPriorities[HxGlobals.SEG_WIN] = 4;
            }
            return HxGlobals._segPriorities;
        }
    }]);

    return HxGlobals;
}();

// var hxMaterials = { };

// function createMaterial(name, r, g, b) {
//     if (hxMaterials[name])
//         return hxMaterials[name];
//     const emission = 0.45;
//     const albedo = 0.4;
//     var mat = new Laya.PBRStandardMaterial();
//     mat.enableEmission = true;
//     mat.emissionColor = new Laya.Vector4(r * emission, g * emission, b * emission, 1);
//     mat.albedoColor = new Laya.Vector4(r * albedo, g * albedo, b * albedo, 1);
//     mat.smoothness = 0.3;
//     hxMaterials[name] = mat;
//     return mat;
// }

// function createBackMaterial() {
//     var name = 'back';
//     if (hxMaterials[name])
//         return hxMaterials[name];
//     var mat = new Laya.EffectMaterial();
//     mat.color = new Laya.Vector4(0.5, 0.5, 0.5, 1);
//     hxMaterials[name] = mat;
//     return mat;
// }


exports.default = HxGlobals;

},{}],38:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _LocaleData = require("./LocaleData");

var _CSVToArray = require("./CSVToArray");

var _CSVToArray2 = _interopRequireDefault(_CSVToArray);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Locale = function () {
    function Locale() {
        _classCallCheck(this, Locale);
    }

    _createClass(Locale, null, [{
        key: "initialize",
        value: function initialize() {
            var lang = GET['lang'] || window.ysdk && window.ysdk.environment['i18n'].lang || 'ru';
            if (['ar', 'de', 'en', 'es', 'fr', 'hi', 'id', 'ru'].indexOf(lang) < 0) lang = ['ru', 'be', 'kz', 'kk', 'ua', 'uk'].indexOf(lang) < 0 ? 'en' : 'ru';
            // if (!lang) {
            //     if (window.ysdk) {
            //         lang = window.ysdk.environment['i18n'].lang;
            //         lang = ['ru', 'be','kz', 'kk', 'ua', 'uk'].indexOf(lang) < 0 ? 'en' : 'ru';
            //     } else {
            //         lang = 'ru';
            //     }
            // }
            window.Locale = Locale;
            this.lang = lang;
            var data = Locale.parseData(_LocaleData.LocaleData);
            this.data = data[lang || 'en'];
        }
    }, {
        key: "text",
        value: function text(key) {
            return this.data[key];
        }
    }, {
        key: "format",
        value: function format(key) {
            var text = this.text(key);
            if (text) {
                for (var i = 1; i < arguments.length; i++) {
                    text = text.replace('{' + (i - 1) + '}', arguments[i]);
                }
            }
            return text;
        }
    }, {
        key: "russionPlural",
        value: function russionPlural(key, value) {
            var str = this.text(key);
            if (!str) return '';
            return this.getRussionPluralSuffix(value, str.split('|'));
        }
    }, {
        key: "getRussionPluralSuffix",
        value: function getRussionPluralSuffix(value, endings) {
            var cent = value % 100;
            var i = void 0;
            if (cent >= 10 && cent <= 20) i = 2;else {
                var dec = cent % 10;
                if (dec == 1) i = 0;else if (dec >= 2 && dec <= 4) i = 1;else i = 2;
            }
            return endings[Math.min(i, endings.length - 1)];
        }
    }, {
        key: "parseData",
        value: function parseData(strData) {
            var rawData = (0, _CSVToArray2.default)(strData);
            var data = {};
            var codes = rawData[0];
            for (var j = 1; j < codes.length; j++) {
                data[codes[j]] = {};
            }console.log(rawData, codes, data);
            for (var i = 1; i < rawData.length; i++) {
                var row = rawData[i];
                for (var _j = 1; _j < row.length; _j++) {
                    data[codes[_j]][row[0]] = row[_j];
                }
            }
            return data;
        }
    }]);

    return Locale;
}();

exports.default = Locale;

},{"./CSVToArray":15,"./LocaleData":39}],39:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var LocaleData = exports.LocaleData = "key,en,ru,de,fr,es,id,hi,ar\nL_CURRENCY_RUB,RUB,\u0420\u0443\u0431\u043B\u0435\u0439,RUB,RUB,RUB,RUB,RUB,RUB\nL_ADS_OFF_CONDITION,\"Any purchase will remove ads.\",\"\u041B\u044E\u0431\u043E\u0439 \u043F\u043B\u0430\u0442\u0435\u0436 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0435\u0442 \u0440\u0435\u043A\u043B\u0430\u043C\u0443.\",\"Bei jedem Kauf werden die Anzeigen entfernt\",\"Tout achat supprimera les pubs\",\"Cualquier compra eliminar\xE1 los anuncios\",\"Pembelian apa pun akan menghapus iklan\",\"\u0915\u094B\u0908 \u0916\u0930\u0940\u0926 \u0935\u093F\u091C\u094D\u091E\u093E\u092A\u0928\u094B\u0902 \u0915\u094B \u0939\u091F\u093E\u090F\u0917\u0940\",\"\u0623\u064A \u0639\u0645\u0644\u064A\u0629 \u0634\u0631\u0627\u0621 \u0633\u062A\u0632\u064A\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062A\"\nL_TIMER_IN,IN,\u0427\u0415\u0420\u0415\u0417,in,dans,en,di,\u092E\u0947\u0902,\u0641\u064A\nL_BEST_SCORE,Best,\u041B\u0443\u0447\u0448\u0438\u0439,Bestes Ergebnis,Meilleur,Mejor,Terbaik,\u0938\u0930\u094D\u0935\u0936\u094D\u0930\u0947\u0937\u094D\u0920,\u0627\u0644\u0623\u0641\u0636\u0644\nL_FREE,Free,\u0411\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E,Gratis,Gratuit,Gratis,Gratis,\u092E\u0941\u092B\u093C\u094D\u0924,\u0645\u062C\u0627\u0646\u064A\nL_FREES,Free,\u0411\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u044B\u0435,Gratis,Pi\xE8ces,Monedas,Koin,\u092E\u0941\u092B\u093C\u094D\u0924,\u0639\u0645\u0644\u0627\u062A \u0645\u062C\nL_COINS,\u0421oins,\u041C\u043E\u043D\u0435\u0442\u044B,M\xFCnzen,gratuites,gratis,gratis,\u0938\u093F\u0915\u094D\u0915\u0947,\u0627\u0646\u064A\u0629\nL_RESTART,RESTART,\u041D\u0410\u0427\u0410\u0422\u042C\\n\u0421\u041D\u0410\u0427\u0410\u041B\u0410,NEU\\nSTARTEN,RECOMMENCER,REINICIAR,MULAI ULANG,\u092B\u093F\u0930 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902,\u0625\u0639\u0627\u062F\u0629\\n\u0627\u0644\u0628\u062F\u0621\nL_CONTINUE,CONTINUE,\u041F\u0420\u041E\u0414\u041E\u041B\u0416\u0418\u0422\u042C,FORTSETZEN,CONTINUER,CONTINUAR,LANJUTKAN,\u091C\u093E\u0930\u0940 \u0930\u0916\u0947\u0902,\u0627\u0633\u062A\u0645\u0631\u0627\u0631\nL_BTN_CONTINUE,Continue,\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C,FORTSETZEN,CONTINUER,CONTINUAR,LANJUTKAN,\u0935\u093F\u091C\u094D\u091E\u093E\u092A\u0928\u094B\u0902 \u0915\u0947,\u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062A\nL_BTN_FOR,for,\u0437\u0430,f\xFCr,pour,para,untuk,\u0932\u093F\u090F, \u0645\u0642\u0627\u0628\u0644\nL_BTN_FOR_ADS,ADS,\u0420\u0415\u041A\u041B\u0410\u041C\u0423,ADS,des pubs,ANUNCIOS,IKLAN,\u091C\u093E\u0930\u0940 \u0930\u0916\u0947\u0902,\u0627\u0633\u062A\u0645\u0631\u0627\u0631\nL_THANX_FOR_PURCHASE,THANK YOU FOR PURCHASE!\\nYOU GOT,\u0421\u041F\u0410\u0421\u0418\u0411\u041E \u0417\u0410 \u041F\u041E\u041A\u0423\u041F\u041A\u0423!\\n\u0412\u0410\u041C \u041D\u0410\u0427\u0418\u0421\u041B\u0415\u041D\u041E,DANKE F\xDCR DEN KAUF!\\nDU HAST,MERCI DE VOTRE ACHAT!\\nVOUS AVEZ,\xA1GRACIAS POR LA COMPRA!\\nTIENES,TERIMA KASIH ATAS PEMBELIAN ANDA!\\nANDA MENDAPATKAN,\u0916\u0930\u0940\u0926 \u0915\u0947 \u0932\u093F\u090F \u0927\u0928\u094D\u092F\u0935\u093E\u0926!\n\u0906\u092A\u0915\u094B \u092A\u094D\u0930\u093E\u092A\u094D\u0924 \u0939\u0941\u090F,\u0646\u0634\u0643\u0631\u0643 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u0627\u0621! \u062D\u0635\u0644\u062A \u0639\u0644\u0649\nL_TUT_ADD_MENU_0,Add the game to the sidebar,\u0414\u043E\u0431\u0430\u0432\u044C \u0438\u0433\u0440\u0443 \u0432 \u043C\u0435\u043D\u044E,Add the game to the sidebar,Add the game to the sidebar,Add the game to the sidebar,Add the game to the sidebar,Add the game to the sidebar,Add the game to the sidebar\nL_TUT_ADD_MENU_1,and keep it at hand!,\u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u043F\u043E\u0442\u0435\u0440\u044F\u0442\u044C!,and keep it at hand!,and keep it at hand!,and keep it at hand!,and keep it at hand!,and keep it at hand!,and keep it at hand!\nL_RUB_SUFFIX,RUB|RUB|RUB,\u0420\u0443\u0431\u043B\u044C|\u0420\u0443\u0431\u043B\u044F|\u0420\u0443\u0431\u043B\u0435\u0439,RUB|RUB|RUB,RUB|RUB|RUB,RUB|RUB|RUB,RUB|RUB|RUB,RUB|RUB|RUB,RUB|RUB|RUB\n";

},{}],40:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameProgress = require("./GameProgress");

var _GameProgress2 = _interopRequireDefault(_GameProgress);

var _GameUI = require("./GameUI");

var _GameUI2 = _interopRequireDefault(_GameUI);

var _GameResultUI = require("./GameResultUI");

var _GameResultUI2 = _interopRequireDefault(_GameResultUI);

var _MenuUI = require("./MenuUI");

var _MenuUI2 = _interopRequireDefault(_MenuUI);

var _BankUI = require("./BankUI");

var _BankUI2 = _interopRequireDefault(_BankUI);

var _ChestUI = require("./ChestUI");

var _ChestUI2 = _interopRequireDefault(_ChestUI);

var _FriendsUI = require("./FriendsUI");

var _FriendsUI2 = _interopRequireDefault(_FriendsUI);

var _HelixGameView = require("./HelixGameView");

var _HelixGameView2 = _interopRequireDefault(_HelixGameView);

var _HelixGame = require("./HelixGame");

var _HelixGame2 = _interopRequireDefault(_HelixGame);

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _BackendMock = require("./BackendMock");

var _BackendMock2 = _interopRequireDefault(_BackendMock);

var _ScenesOpener = require("./ScenesOpener");

var _ScenesOpener2 = _interopRequireDefault(_ScenesOpener);

var _WndMan = require("./WndMan");

var _WndMan2 = _interopRequireDefault(_WndMan);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _UIResizeController = require("./UIResizeController");

var _UIResizeController2 = _interopRequireDefault(_UIResizeController);

var _HelixSkin = require("./HelixSkin");

var _HelixSkin2 = _interopRequireDefault(_HelixSkin);

var _HxGlobals = require("./HxGlobals");

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

var _HelixConfig = require("./HelixConfig");

var _HelixConfig2 = _interopRequireDefault(_HelixConfig);

var _HelixGeneratorInfinitRandom = require("./HelixGeneratorInfinitRandom");

var _HelixGeneratorInfinitRandom2 = _interopRequireDefault(_HelixGeneratorInfinitRandom);

var _HelixGeneratorConfigFloors = require("./HelixGeneratorConfigFloors");

var _HelixGeneratorConfigFloors2 = _interopRequireDefault(_HelixGeneratorConfigFloors);

var _BlotSpritePool = require("./BlotSpritePool");

var _BlotSpritePool2 = _interopRequireDefault(_BlotSpritePool);

var _SoundMan = require("./SoundMan");

var _SoundMan2 = _interopRequireDefault(_SoundMan);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _AdShowPolicy = require("./AdShowPolicy");

var _AdShowPolicy2 = _interopRequireDefault(_AdShowPolicy);

var _Yandex = require("./Yandex");

var _Yandex2 = _interopRequireDefault(_Yandex);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainUI = function (_Laya$Scene) {
    _inherits(MainUI, _Laya$Scene);

    function MainUI() {
        _classCallCheck(this, MainUI);

        var _this = _possibleConstructorReturn(this, (MainUI.__proto__ || Object.getPrototypeOf(MainUI)).call(this));

        _this.gp = new _GameProgress2.default();
        _SoundMan2.default.init();
        _this._createAndStartBackend();
        _WndMan2.default.inst.on(_WndMan2.default.EVENT_WND_CHANGED, _this, _this._onWndChanged);
        _this._resizeController = new _UIResizeController2.default(Laya.Scene.root);
        _this.helixConfig = new _HelixConfig2.default(window.helixConfigData);
        if (_Utils2.default.devMode) window.helixConfig = _this.helixConfig;
        window.addEventListener('focus', function () {
            _Utils2.default.forceUpdateLabels(Laya.Scene.root);
        });
        window.mainUI = _this;
        return _this;
    }

    _createClass(MainUI, [{
        key: "_createAndStartBackend",
        value: function _createAndStartBackend() {
            this.backend = window.userToken && !_Utils2.default.startsWith(window.userToken, '<?=') ? new _Backend2.default(window.userToken) : new _BackendMock2.default(new _Backend2.default('', _Utils2.default.apiUrl, true), function () {
                return _SocialApi2.default.inst.profileStorage;
            });
            this._adShowPolicy = new _AdShowPolicy2.default(this.backend, function () {
                return this.tutorUI.promoShow();
            }.bind(this));
            _SocialApi2.default.inst.once(_SocialApi2.default.EVENT_INITIALIZED, this, function () {
                var reloadApp = function reloadApp() {}; // document.location.reload(); }
                this.backend.on(_Backend2.default.ERROR_INFO_URGENT, null, reloadApp);
                this.backend.on(_Backend2.default.ERROR_EXCEPTION, null, reloadApp);
                this.backend.on(_Backend2.default.ERROR_GAME, this, this._onBackendErrorGame);
                this.backend.once(_Backend2.default.CLIENT_USER_EVENTS, this, this._loadScenes);
                this.backend.settingsAllGet();
                this.backend.bankCardsGet();
                this.backend.profileGet();
                this.backend.userOptionsGet();
                this.backend.userEventsGet();
                this.backend.friendReplyAll();
                this.backend.receiveHelps();
                window.backend = this.backend;
                _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ORDER_RESULT, this, this._onOrderResult);
            }.bind(this));
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_INITIALIZE_PROGRESS, this, function (value) {
                this._showProgress(_HxGlobals2.default.getLoadingSocial(value));
            });
            _SocialApi2.default.inst.initialize(function (friendIds, onComplete) {
                var onUsersGet = function (data) {
                    var ids = data.list.reduce(function (s, itm) {
                        if (itm.hasApp) s.push(itm.idSocial);return s;
                    }, []);
                    onComplete(ids);
                }.bind(this);
                this.backend.once(_Backend2.default.CLIENT_USERS_GET, this, onUsersGet);
                this.backend.usersGet(friendIds);
            }.bind(this), this.backend);
        }
    }, {
        key: "_onOrderResult",
        value: function _onOrderResult(ok) {
            if (ok) {
                var tid = null;
                var curMoney = this.backend.profile.moneySoft;
                window.loadingIndicator.show();
                tid = setInterval(function () {
                    var moneyDelta = this.backend.profile.moneySoft - curMoney;
                    if (moneyDelta > 0) {
                        clearInterval(tid);
                        window.loadingIndicator.hide();
                        _WndMan2.default.inst.orderResultUI.showCoins(moneyDelta);
                    } else this.backend.profileGet();
                }.bind(this), 1500);
                this.backend.profileGet();
            }
        }
    }, {
        key: "_onBackendErrorGame",
        value: function _onBackendErrorGame(data) {
            if (data.code == _Backend2.default.CODE_ERR_RESOURCE_OPERATION) {
                _WndMan2.default.inst.bankUI.show();
            } else {
                console.error("Unhandled game error " + data.code + ": " + data.message);
            }
        }
    }, {
        key: "_loadScenes",
        value: function _loadScenes() {
            this.gp.bestScore = this.backend.profile.scoresMax;
            this.gp.bestScorePrev = this.gp.bestScore;
            this.gp.level = this.backend.profile.level;
            var scenes = [{ url: "fx/scene.ls", onOpened: this._onFxOpened }, { url: "scenes/GameUI.scene", onOpened: this._onGameUIOpened }, { url: "scenes/MenuUI.scene", onOpened: this._onMenuUIOpened }, { url: "scenes/GameResultUI.scene", onOpened: this._addWnd }, { url: "scenes/FriendsUI.scene", onOpened: this._addWnd },
            //{ url: "scenes/FriendDefeatUI.scene", onOpened: this._addWnd },
            { url: "scenes/FriendDefeatUI2.scene", onOpened: this._addWnd }, { url: "scenes/ChestUI.scene", onOpened: this._addWnd }, { url: "scenes/OrderResultUI.scene", onOpened: this._addWnd }, { url: "scenes/TutorUI.scene", onOpened: this._onTutorUIOpened }];
            if (_Utils2.default.canUsePurchases) scenes.push({ url: "scenes/BankUI.scene", onOpened: this._addWnd });else scenes.push({ url: "scenes/BankUIAds.scene", onOpened: this._addWnd });
            this._scenesOpener = new _ScenesOpener2.default(this, scenes);
            this._scenesOpener.once(_ScenesOpener2.default.EVENT_OPENED, this, this._onAllScenesOpened);
            this._scenesOpener.on(_ScenesOpener2.default.EVENT_PROGRESS, this, this._onScenesOpenerProgress);
            this._scenesOpener.open();
        }
    }, {
        key: "_onScenesOpenerProgress",
        value: function _onScenesOpenerProgress(value) {
            this._showProgress(_HxGlobals2.default.getLoadingScenes(value));
        }
    }, {
        key: "_showProgress",
        value: function _showProgress(value) {
            window.loadingIndicator.showProgress(value);
            this.backend.setLoadingProgress(Math.floor(value * 100));
        }
    }, {
        key: "_onAllScenesOpened",
        value: function _onAllScenesOpened(list) {
            this._blots = new _BlotSpritePool2.default();
            //this._newGame();
            //this.gameView.paused = true;

            this.backend.on(_Backend2.default.CLIENT_PROFILE, this, this._onProfile);
            this._onProfile(this.backend.profile);

            this.menuUI.init(this.backend, _SocialApi2.default.GROUP_LINK);
            this.menuUI.on(_MenuUI2.default.EVENT_INVITE, this, function () {
                _SocialApi2.default.inst.showInviteBox(_ChestUI2.default.REQUEST_TEXT);
            });
            this.menuUI.on(_MenuUI2.default.EVENT_RATING, this, function () {
                if (_Utils2.default.devMode) this.tutorUI.devVKScores.show(this.gp.bestScore);else _SocialApi2.default.inst.showLeaderboardBox(this.gp.level);
            }.bind(this));
            this.menuUI.on(_MenuUI2.default.EVENT_CHEST, this, function () {
                _WndMan2.default.inst.chestUI.show();
            });
            this.menuUI.on(_MenuUI2.default.EVENT_SOCIAL_GROUP, this, function () {
                window.open(_SocialApi2.default.GROUP_LINK, '_blank');
            });
            this.menuUI.visible = true;

            _WndMan2.default.inst.gameResultUI.init(this.backend);
            _WndMan2.default.inst.gameResultUI.on(_GameResultUI2.default.EVENT_WND_RESULT, this, this._onGameResultResult);

            _WndMan2.default.inst.chestUI.init(this.backend);
            _WndMan2.default.inst.bankUI.init(this.backend);

            this._scenesOpener.off(_ScenesOpener2.default.EVENT_PROGRESS, this, this._onScenesOpenerProgress);
            window.loadingIndicator.hide();

            this._resizeController.forceUpdate();
            this.gameUI.visible = true;
            this.menuUI.visible = true;

            this._newGame();
            //this.gameView.paused = true;

            _Utils2.default.preloadImages(_SocialApi2.default.inst.appFriends.map(function (f) {
                return f.avatar;
            }));

            _Utils2.default.foreachChildR(Laya.Scene.root, function (child) {
                if (child.name && _Utils2.default.startsWith(child.name, 'btn')) {
                    child.on(Laya.Event.MOUSE_DOWN, null, function () {
                        _SoundMan2.default.playClick();
                    });
                }
            });

            _SocialApi2.default.inst.logLevel(this.gp.state.level);
            _SocialApi2.default.inst.logBestScore(this.gp.state.bestScore);

            window.focus();
        }
    }, {
        key: "_onWndChanged",
        value: function _onWndChanged(wnd) {
            this.menuUI.visible = wnd == null;
            this._fixLabels(wnd);
        }

        // Trial to fix dirty text sprites of labels after some time of playing on Android or switching child webviews in VK app
        // https://devoler.atlassian.net/browse/HLX-27

    }, {
        key: "_fixLabels",
        value: function _fixLabels(wnd) {
            if (wnd) _Utils2.default.forceUpdateLabels(wnd);
            if (this.menuUI.visible) _Utils2.default.forceUpdateLabels(this.menuUI);
            _Utils2.default.forceUpdateLabels(this.gameUI);
        }
    }, {
        key: "_onFxOpened",
        value: function _onFxOpened(fxScene) {
            var list = _Utils2.default.getChildrenOf(fxScene);
            this._fxs = {};
            for (var i in list) {
                var fx = list[i];
                if (fx.particleSystem) {
                    this._fxs[fx.name] = fx;
                    fx.particleSystem.gravityModifier /= 9.81;
                }
            }
        }
    }, {
        key: "_onGameUIOpened",
        value: function _onGameUIOpened(gameUI) {
            this.gameUI = gameUI;
            this.gameUI.gp = this.gp;
            this.gameUI.backend = this.backend;
            gameUI.on(_GameUI2.default.EVENT_ADD_COINS, this, function () {
                _SoundMan2.default.playClick();
                if (_SocialApi2.default.isBankAvailable) _WndMan2.default.inst.bankUI.show();
            }.bind(this));
            gameUI.on(_GameUI2.default.EVENT_DEV_NEXT_LEVEL, this, function () {
                this.backend.gameWin();this._newGame();
            }.bind(this));
            this.gameUI.visible = false;
        }
    }, {
        key: "_onMenuUIOpened",
        value: function _onMenuUIOpened(menuUI) {
            this.menuUI = menuUI;
            this.menuUI.visible = false;
        }
    }, {
        key: "_addWnd",
        value: function _addWnd(wnd) {
            _WndMan2.default.inst.add(wnd);
        }
    }, {
        key: "_onTutorUIOpened",
        value: function _onTutorUIOpened(tutorUI) {
            this.tutorUI = tutorUI;
            this.tutorUI.init(this.backend);
        }

        // _startGame() {
        //     this.menuUI.visible = false;
        //     if (this.gameView && !this.gameView.helixGame.finished)
        //         return;
        //     this._newGame();
        // }

    }, {
        key: "_newGame",
        value: function _newGame() {
            if (this.gameView) {
                this._fxsRemove();
                this.gp.detachGame();
                this.gameView.destroy();
                this.gameView = null;
            }
            var resumeState = this.backend.userOptions.resumeState;
            //var generator = new HelixGeneratorInfinitRandom(6, 1, 3, 40);
            var generator = new _HelixGeneratorConfigFloors2.default(this.helixConfig.generateFloors(this.gp.state.level), this.helixConfig.moveFreq);
            this.gameView = new _HelixGameView2.default(generator, resumeState, _HelixSkin2.default.getLevel(this.gp.state.level), this.gameUI, this._blots, this._fxs);
            Laya.Scene.root.addChildAt(this.gameView, 0);
            this.gp.attachGame(this.gameView.helixGame);
            if (resumeState) {
                this.gp.isLastGameWasBest = resumeState.isLastGameWasBest;
                this.gp.curScore = resumeState.score;
                this.backend._resumeCount = resumeState.be_resumeCount;
                this._showResult();
            }
            this.gameView.helixGame.on(_HelixGame2.default.EVENT_RESULT, this, function (result) {
                var game = this.gameView.helixGame;
                if (game.finished) {
                    var win = game.result == _HelixGame2.default.RESULT_WIN;
                    setTimeout(function () {
                        if (win) this.backend.gameWin(this.gp.curScore);else this.backend.gameLoose(this.gp.curScore);
                        resumeState = game.getResumeState();
                        resumeState.score = this.gp.curScore;
                        resumeState.isLastGameWasBest = this.gp.isLastGameWasBest;
                        resumeState.be_resumeCount = this.backend._resumeCount;
                        this.backend.userOptions.resumeState = resumeState;
                        this._showResult();
                        //WndMan.inst.gameResultUI.showResult(win, this.gp.isLastGameWasBest, this.gp.level, this.gp.bestScore);
                    }.bind(this), 500);
                }
            });
            this.gameView.on(_HelixGameView2.default.EVENT_STARTED, this, function () {
                if (this.gp.curScore == 0) this.backend.gameStart();
                this.menuUI.visible = false;
            });
            this._fxsAddTo(this.gameView);
            this.backend.friendScoreUpdate(_SocialApi2.default.inst.appFriends);
            this._adShowPolicy.onNewGame();
            // if (this.backend.userEvents.Ad.showBeforeStart) {
            //     const SHOW_INTERVAL = 3;
            //     if (this._adsShowCounter === undefined) {
            //         this._adsShowCounter = SHOW_INTERVAL - 1;
            //     } else {
            //         this._adsShowCounter++;
            //         if (this._adsShowCounter >= SHOW_INTERVAL) {
            //             this._adsShowCounter = 0;
            //             SocialApi.inst.adsShow();
            //         }
            //     }
            // }
        }
    }, {
        key: "_showResult",
        value: function _showResult() {
            _WndMan2.default.inst.gameResultUI.showResult(this.gameView.helixGame.result == _HelixGame2.default.RESULT_WIN, this.gp.isLastGameWasBest, this.gp.level, this.gp.bestScore);
        }
    }, {
        key: "_onGameResultResult",
        value: function _onGameResultResult(result) {
            this.backend.userOptions.resumeState = null;
            if (result == _GameResultUI2.default.WND_RESULT_RESUME) {
                this.gameView.helixGame.resume();
                this.menuUI.visible = false;
            } else if (result == _GameResultUI2.default.WND_RESULT_RESTART) {
                var win = this.gameView.helixGame.result == _HelixGame2.default.RESULT_WIN;
                var curScore = this.gp.curScore;
                var prevScore = this.gp.bestScorePrev;
                this._newGame();
                this.menuUI.visible = true;
                if (!win) _WndMan2.default.inst.friendDefeatUI.tryShow(curScore, prevScore);
            }
        }
    }, {
        key: "_fxsRemove",
        value: function _fxsRemove() {
            for (var name in this._fxs) {
                _Utils2.default.removeFromParent(this._fxs[name]);
            }
        }
    }, {
        key: "_fxsAddTo",
        value: function _fxsAddTo(scene) {
            for (var name in this._fxs) {
                window.lastFx = scene.addChild(this._fxs[name]);
            }
        }

        // Backend responces

    }, {
        key: "_onProfile",
        value: function _onProfile(profile) {
            this.gp.state.level = profile.level;
            this.gp.state.bestScore = profile.scoresMax;
        }
    }]);

    return MainUI;
}(Laya.Scene);

exports.default = MainUI;

},{"./AdShowPolicy":5,"./Backend":6,"./BackendMock":7,"./BankUI":11,"./BlotSpritePool":14,"./ChestUI":16,"./FriendsUI":23,"./GameProgress":24,"./GameResultUI":25,"./GameUI":26,"./HelixConfig":28,"./HelixGame":29,"./HelixGameView":30,"./HelixGeneratorConfigFloors":32,"./HelixGeneratorInfinitRandom":33,"./HelixSkin":34,"./HxGlobals":37,"./MenuUI":41,"./ScenesOpener":49,"./SocialApi":51,"./SoundMan":52,"./UIResizeController":56,"./Utils":61,"./WndMan":62,"./Yandex":63}],41:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { set(parent, property, value, receiver); } } else if ("value" in desc && desc.writable) { desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { setter.call(receiver, value); } } return value; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _MainUI = require("./MainUI");

var _MainUI2 = _interopRequireDefault(_MainUI);

var _UserEvents = require("./UserEvents");

var _UserEvents2 = _interopRequireDefault(_UserEvents);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _SoundMan = require("./SoundMan");

var _SoundMan2 = _interopRequireDefault(_SoundMan);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MenuUI = function (_Laya$Scene) {
    _inherits(MenuUI, _Laya$Scene);

    _createClass(MenuUI, null, [{
        key: "EVENT_INVITE",

        // static get STATE_GAME() { return "GAME"; }
        // static get STATE_DEFAULT() { return "DEFAULT"; }
        // static get STATE_BEST_SCORE() { return "BEST_SCORE"; }
        // static get STATE_LEVELUP() { return "LEVELUP"; }

        get: function get() {
            return "INVITE";
        }
    }, {
        key: "EVENT_RATING",
        get: function get() {
            return "RATING";
        }
    }, {
        key: "EVENT_CHEST",
        get: function get() {
            return "CHEST";
        }
    }, {
        key: "EVENT_SOCIAL_GROUP",
        get: function get() {
            return "SOCIAL_GROUP";
        }
        //static get EVENT_ACHIEVS() { return "ACHIEVS"; }

    }]);

    function MenuUI() {
        _classCallCheck(this, MenuUI);

        var _this2 = _possibleConstructorReturn(this, (MenuUI.__proto__ || Object.getPrototypeOf(MenuUI)).call(this));

        _this2.on("onViewCreated", _this2, _this2._onViewCreated);
        return _this2;
    }
    //get state() { return this._state; }


    _createClass(MenuUI, [{
        key: "init",
        value: function init(backend, groupLink) {
            this._backend = backend;
            this._backend.userEvents.on(_UserEvents2.default.EVENT_CHEST, this, this._onChestEvent);
            this._onChestEvent();
            _set(MenuUI.prototype.__proto__ || Object.getPrototypeOf(MenuUI.prototype), "visible", false, this);
            if (_SocialApi2.default.isYA) {
                this.menuBlock.visible = false;
            }
            $("#groupLink").attr("href", groupLink);
            $("#groupLink").click(function () {
                _SoundMan2.default.playClick();
            });
        }
    }, {
        key: "_onViewCreated",
        value: function _onViewCreated() {
            var _this = this;
            this.lblSocialGroup.text = _SocialApi2.default.GROUP_TITLE;
            this.btnInvite.on(Laya.Event.CLICK, this, function () {
                _this.event(MenuUI.EVENT_INVITE);
            });
            this.btnRating.on(Laya.Event.CLICK, this, function () {
                _this.event(MenuUI.EVENT_RATING);
            });
            this.btnChest.on(Laya.Event.CLICK, this, function () {
                _this.event(MenuUI.EVENT_CHEST);
            });
            this.btnChest.prefix = "";
            this.btnSocialGroup.on(Laya.Event.CLICK, this, function () {
                _this.event(MenuUI.EVENT_SOCIAL_GROUP);
            });
            if (_SocialApi2.default.isOK) {
                this.btnRating.visible = false;
                this._buttons = [this.btnInvite, this.btnChest, this.btnSocialGroup];
            } else this._buttons = [this.btnInvite, this.btnRating, this.btnChest, this.btnSocialGroup];
            this.on(Laya.Event.RESIZE, this, this._onResize);
            this._onResize();
        }
    }, {
        key: "_onChestEvent",
        value: function _onChestEvent() {
            var event = this._backend.userEvents.Chest;
            this.lblChestValue.text = String(event.money_soft) + ' / ' + event.money_soft_max;
        }
    }, {
        key: "_onResize",
        value: function _onResize() {
            for (var i = 0; i < this._buttons.length; i++) {
                var button = this._buttons[i];
                button.left = button.right = button.centerX = undefined;
                button.x = this.width * ((i + 0.5) / this._buttons.length) - button.width * 0.5;
            }
        }
    }, {
        key: "_onFrame",
        value: function _onFrame() {
            var event = this._backend.userEvents.Chest;
            this.lblChestValue.visible = event.expired;
            this.lblHintTimer.visible = !event.expired;
            if (!event.expired) this.btnChest.update(event);
        }
    }, {
        key: "visible",
        get: function get() {
            return _get(MenuUI.prototype.__proto__ || Object.getPrototypeOf(MenuUI.prototype), "visible", this);
        },
        set: function set(value) {
            if (value != _get(MenuUI.prototype.__proto__ || Object.getPrototypeOf(MenuUI.prototype), "visible", this)) {
                _set(MenuUI.prototype.__proto__ || Object.getPrototypeOf(MenuUI.prototype), "visible", value, this);
                if (value) {
                    $("#groupLink").show();
                    Laya.timer.frameLoop(1, this, this._onFrame);
                    this._onFrame();
                } else {
                    $("#groupLink").hide();
                    Laya.timer.clearAll(1, this, this._onFrame);
                }
            }
        }
    }]);

    return MenuUI;
}(Laya.Scene);

exports.default = MenuUI;

},{"./MainUI":40,"./SocialApi":51,"./SoundMan":52,"./UserEvents":57}],42:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var MouseCtrl = function () {
    function MouseCtrl(dispatcher, getter, setter) {
        _classCallCheck(this, MouseCtrl);

        this._getter = getter;
        this._setter = setter;
        this._dispatcher = dispatcher;
        this._ctx = {};
        this._dispatcher.on(Laya.Event.MOUSE_DOWN, this, this._OnMouseDown);
        this._dispatcher.on(Laya.Event.MOUSE_UP, this, this._OnMouseUp);
        this._dispatcher.on(Laya.Event.MOUSE_OUT, this, this._OnMouseUp);
    }

    _createClass(MouseCtrl, [{
        key: "destroy",
        value: function destroy() {
            this._OnMouseUp();
            this._dispatcher.off(Laya.Event.MOUSE_DOWN, this, this._OnMouseDown);
            this._dispatcher.off(Laya.Event.MOUSE_UP, this, this._OnMouseUp);
        }
    }, {
        key: "_OnMouseDown",
        value: function _OnMouseDown(e) {
            if (this._isDown) return;
            this._isDown = true;
            this._ctx.startValue = this._getter();
            this._mouseDownX = e.stageX;
            this._mouseDownY = e.stageY;
            this._dispatcher.on(Laya.Event.MOUSE_MOVE, this, this._OnMouseMove);
        }
    }, {
        key: "_OnMouseUp",
        value: function _OnMouseUp(e) {
            this._isDown = false;
            this._dispatcher.off(Laya.Event.MOUSE_MOVE, this, this._OnMouseMove);
        }
    }, {
        key: "_OnMouseMove",
        value: function _OnMouseMove(e) {
            if (!this._isDown) return;
            this._ctx.deltaX = e.stageX - this._mouseDownX;
            this._ctx.deltaY = e.stageY - this._mouseDownY;
            this._setter(this._ctx);
        }
    }]);

    return MouseCtrl;
}();

exports.default = MouseCtrl;

},{}],43:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var NetErrors = function () {
    function NetErrors() {
        _classCallCheck(this, NetErrors);
    }

    _createClass(NetErrors, null, [{
        key: "OK",
        get: function get() {
            return 200;
        }
    }, {
        key: "JSON_PARSE",
        get: function get() {
            return 250;
        }
    }, {
        key: "BAD_REQUEST",
        get: function get() {
            return 400;
        }
    }, {
        key: "UNAUTHORIZED",
        get: function get() {
            return 401;
        }
    }, {
        key: "FORBIDDEN",
        get: function get() {
            return 403;
        }
    }, {
        key: "NOT_FOUND",
        get: function get() {
            return 404;
        }
    }, {
        key: "METHOD_NOT_ALLOWED",
        get: function get() {
            return 405;
        }
    }, {
        key: "INTERNAL_SERVER_ERROR",
        get: function get() {
            return 500;
        }
    }, {
        key: "SERVICE_UNAVAILABLE",
        get: function get() {
            return 503;
        }
    }]);

    return NetErrors;
}();

exports.default = NetErrors;

},{}],44:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _NetErrors = require("./NetErrors");

var _NetErrors2 = _interopRequireDefault(_NetErrors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Network = function () {
    function Network(url) {
        _classCallCheck(this, Network);

        this._url = url;
    }

    _createClass(Network, [{
        key: "post",
        value: function post(data, onSuccess, onFail) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", this._url, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState !== 4) return;
                if (xhr.status === 200) {
                    try {
                        var json = JSON.parse(xhr.responseText);
                        onSuccess(json);
                    } catch (e) {
                        onFail(_NetErrors2.default.JSON_PARSE, e.message);
                    }
                } else {
                    onFail(xhr.status, xhr.statusText);
                }
            };
            var dataStr = JSON.stringify(data);
            xhr.send(dataStr);
        }
    }]);

    return Network;
}();

exports.default = Network;

},{"./NetErrors":43}],45:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BaseWindow2 = require("./BaseWindow");

var _BaseWindow3 = _interopRequireDefault(_BaseWindow2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var OrderResultUI = function (_BaseWindow) {
    _inherits(OrderResultUI, _BaseWindow);

    function OrderResultUI() {
        _classCallCheck(this, OrderResultUI);

        return _possibleConstructorReturn(this, (OrderResultUI.__proto__ || Object.getPrototypeOf(OrderResultUI)).call(this));
    }

    _createClass(OrderResultUI, [{
        key: "showCoins",
        value: function showCoins(value) {
            this.lblValue.text = String(value);
            this.show();
        }
    }]);

    return OrderResultUI;
}(_BaseWindow3.default);

exports.default = OrderResultUI;

},{"./BaseWindow":12}],46:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _SoundMan = require("./SoundMan");

var _SoundMan2 = _interopRequireDefault(_SoundMan);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PromoView = function (_Laya$Panel) {
    _inherits(PromoView, _Laya$Panel);

    function PromoView() {
        _classCallCheck(this, PromoView);

        return _possibleConstructorReturn(this, (PromoView.__proto__ || Object.getPrototypeOf(PromoView)).apply(this, arguments));
    }

    _createClass(PromoView, [{
        key: "init",
        value: function init(linkUrl, target) {
            this._linkUrl = linkUrl;
            //this._target = target;
            _Utils2.default.initProps(this, [
            //'link',
            'close']);
            this.close.on(Laya.Event.CLICK, this, this._onCloseClick);
            // HOTFIX: tracking of native clicks to process correctly window.open(...)
            // var canvas = document.getElementById('layaCanvas');
            // var onClick = function(e) {
            //     if (this._allowClickLink)
            //         laya.events.MouseManager.instance.check(window.stage, e.pageX || e.clientX, e.pageY || e.clientY, this._onLinkClick.bind(this));
            // }.bind(this)
            // canvas.addEventListener('click', onClick);
            // canvas.addEventListener('touchstart', onClick);
            // Create empty callback to make this.link clickable
            //this.link.on(Laya.Event.CLICK, this, function() { });
            $("#raccoonLink").attr("href", linkUrl);
            $("#raccoonLink").attr("target", target);
            $("#raccoonLink").click(function () {
                _SoundMan2.default.playClick();
            });
            this.hide();
        }
    }, {
        key: "show",
        value: function show() {
            if (this.visible) return true;
            if (!this._linkUrl) return false;
            this.visible = true;
            $("#raccoonLink").show();
            //this._allowClickLink = false; setTimeout(function() { this._allowClickLink = true; }.bind(this), 10);
            _SoundMan2.default.lock(this);
            return true;
        }
    }, {
        key: "hide",
        value: function hide() {
            this.visible = false;
            $("#raccoonLink").hide();
            //this._allowClickLink = false;
            _SoundMan2.default.unlock(this);
        }

        // _onLinkClick(sprite) {
        //     if (sprite == this.link)
        //         window.open(this._linkUrl, this._target);
        // }

    }, {
        key: "_onCloseClick",
        value: function _onCloseClick() {
            this.hide();
        }
    }]);

    return PromoView;
}(Laya.Panel);

exports.default = PromoView;

},{"./SoundMan":52,"./Utils":61}],47:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//import { PrimitiveMesh } from laya.d3.resource.models;
//import { VertexPositionNormalTexture } from laya.d3.graphics.Vertex;

var RingSliceMesh = function (_Laya$PrimitiveMesh) {
    _inherits(RingSliceMesh, _Laya$PrimitiveMesh);

    function RingSliceMesh(radius, radiusInner, height, degBegin, degEnd, slices, radiusBump) {
        _classCallCheck(this, RingSliceMesh);

        var _this = _possibleConstructorReturn(this, (RingSliceMesh.__proto__ || Object.getPrototypeOf(RingSliceMesh)).call(this));

        _this._radius = radius;
        _this._radiusInner = radiusInner;
        _this._height = height;
        _this._degBegin = degBegin;
        _this._degEnd = degEnd;
        _this._slices = slices;
        _this._radiusBump = radiusBump ? radiusBump : 0;
        _this._create();
        return _this;
    }

    _createClass(RingSliceMesh, [{
        key: "_getRBump",
        value: function _getRBump(t) {
            return this._radiusBump * 4 * t * (1 - t);
        }
    }, {
        key: "_create",
        value: function _create() {
            var slices = this._slices;
            var vCount = (slices + 1) * 2 + // top cap
            (slices + 1) * 2 + // outer wall
            (slices + 1) * 2 + // inner wall
            (slices + 1) * 2 + // bottom cap
            4 + 4; // 2 side caps
            var iCount = slices * 2 * 3 * 4 + 4 * 3;
            var vDecl = Laya.VertexPositionNormalTexture.vertexDeclaration;
            var vFloatStride = vDecl.vertexStride / 4;
            var verts = new Float32Array(vCount * vFloatStride);
            var inds = new Uint16Array(iCount);
            var vc = 0;
            var degToRad = Math.PI * 2.0 / 360.0;
            var da = (this._degEnd - this._degBegin) / slices * degToRad;
            var from_a = this._degBegin * degToRad;
            var to_a = this._degEnd * degToRad;
            var a = 0.0;
            var halfH = this._height * 0.5;
            var dt = 1 / slices;
            var t = 0.0;
            // Top cap
            a = from_a;
            for (var i = 0; i <= slices; i++, a += da) {
                var cos = Math.cos(a);
                var sin = Math.sin(a);
                var tx = (1 + cos) * 0.5;
                var ty = (1 + sin) * 0.5;
                var r = this._radius + this._getRBump(i / slices);
                // Outer
                verts[vc++] = r * cos;verts[vc++] = halfH;verts[vc++] = r * sin;
                verts[vc++] = 0;verts[vc++] = 1;verts[vc++] = 0;
                verts[vc++] = tx;verts[vc++] = ty;
                // Inner
                verts[vc++] = this._radiusInner * cos;verts[vc++] = halfH;verts[vc++] = this._radiusInner * sin;
                verts[vc++] = 0;verts[vc++] = 1;verts[vc++] = 0;
                verts[vc++] = tx;verts[vc++] = ty;
            }
            // Inner side
            a = from_a;
            t = 0.0;
            for (var i = 0; i <= slices; i++, t += dt, a += da) {
                var cos = Math.cos(a);
                var sin = Math.sin(a);
                var x = this._radiusInner * cos;
                var y = this._radiusInner * sin;
                // Top
                verts[vc++] = x;verts[vc++] = halfH;verts[vc++] = y;
                verts[vc++] = cos;verts[vc++] = 0;verts[vc++] = sin;
                verts[vc++] = t;verts[vc++] = 1;
                // Bottom
                verts[vc++] = x;verts[vc++] = -halfH;verts[vc++] = y;
                verts[vc++] = cos;verts[vc++] = 0;verts[vc++] = sin;
                verts[vc++] = t;verts[vc++] = 0;
            }
            // Outer side
            a = from_a;
            t = 0.0;
            for (var i = 0; i <= slices; i++, t += dt, a += da) {
                var cos = Math.cos(a);
                var sin = Math.sin(a);
                var r = this._radius + this._getRBump(i / slices);
                var x = r * cos;
                var y = r * sin;
                // Bottom
                verts[vc++] = x;verts[vc++] = -halfH;verts[vc++] = y;
                verts[vc++] = cos;verts[vc++] = 0;verts[vc++] = sin;
                verts[vc++] = t;verts[vc++] = 0;
                // Top
                verts[vc++] = x;verts[vc++] = halfH;verts[vc++] = y;
                verts[vc++] = cos;verts[vc++] = 0;verts[vc++] = sin;
                verts[vc++] = t;verts[vc++] = 1;
            }
            // Bottom cap
            a = from_a;
            for (var i = 0; i <= slices; i++, a += da) {
                var cos = Math.cos(a);
                var sin = Math.sin(a);
                var tx = (1 + cos) * 0.5;
                var ty = (1 + sin) * 0.5;
                var r = this._radius + this._getRBump(i / slices);
                // Innter
                verts[vc++] = this._radiusInner * cos;verts[vc++] = -halfH;verts[vc++] = this._radiusInner * sin;
                verts[vc++] = 0;verts[vc++] = -1;verts[vc++] = 0;
                verts[vc++] = tx;verts[vc++] = ty;
                // Outer
                verts[vc++] = r * cos;verts[vc++] = -halfH;verts[vc++] = r * sin;
                verts[vc++] = 0;verts[vc++] = -1;verts[vc++] = 0;
                verts[vc++] = tx;verts[vc++] = ty;
            }
            // Side caps
            {
                var r = this._radius;
                var ri = this._radiusInner;
                // Begin cap
                var cos = Math.cos(from_a);
                var sin = Math.sin(from_a);
                verts[vc++] = r * cos;verts[vc++] = halfH;verts[vc++] = r * sin;
                verts[vc++] = sin;verts[vc++] = 0;verts[vc++] = -cos;
                verts[vc++] = 0;verts[vc++] = 0;
                verts[vc++] = ri * cos;verts[vc++] = halfH;verts[vc++] = ri * sin;
                verts[vc++] = sin;verts[vc++] = 0;verts[vc++] = -cos;
                verts[vc++] = 1;verts[vc++] = 0;
                verts[vc++] = r * cos;verts[vc++] = -halfH;verts[vc++] = r * sin;
                verts[vc++] = sin;verts[vc++] = 0;verts[vc++] = -cos;
                verts[vc++] = 0;verts[vc++] = 1;
                verts[vc++] = ri * cos;verts[vc++] = -halfH;verts[vc++] = ri * sin;
                verts[vc++] = sin;verts[vc++] = 0;verts[vc++] = -cos;
                verts[vc++] = 1;verts[vc++] = 1;
                // End cap
                var cos = Math.cos(to_a);
                var sin = Math.sin(to_a);
                verts[vc++] = ri * cos;verts[vc++] = halfH;verts[vc++] = ri * sin;
                verts[vc++] = -sin;verts[vc++] = 0;verts[vc++] = cos;
                verts[vc++] = 0;verts[vc++] = 0;
                verts[vc++] = r * cos;verts[vc++] = halfH;verts[vc++] = r * sin;
                verts[vc++] = -sin;verts[vc++] = 0;verts[vc++] = cos;
                verts[vc++] = 1;verts[vc++] = 0;
                verts[vc++] = ri * cos;verts[vc++] = -halfH;verts[vc++] = ri * sin;
                verts[vc++] = -sin;verts[vc++] = 0;verts[vc++] = cos;
                verts[vc++] = 0;verts[vc++] = 1;
                verts[vc++] = r * cos;verts[vc++] = -halfH;verts[vc++] = r * sin;
                verts[vc++] = -sin;verts[vc++] = 0;verts[vc++] = cos;
                verts[vc++] = 1;verts[vc++] = 1;
            }
            // Indices
            var ic = 0;
            var iv = 0;
            for (var i = 0; i < 4; i++) {
                // 4 strips - top cap, inner side, bottom cap, outer side
                for (var j = 0; j < slices; j++, iv += 2) {
                    inds[ic++] = iv;inds[ic++] = iv + 3;inds[ic++] = iv + 1;
                    inds[ic++] = iv;inds[ic++] = iv + 2;inds[ic++] = iv + 3;
                }
                iv += 2;
            }
            // Side caps
            {
                var idx = iv; // vCount - 8;
                inds[ic++] = idx;inds[ic++] = idx + 1;inds[ic++] = idx + 3;
                inds[ic++] = idx;inds[ic++] = idx + 3;inds[ic++] = idx + 2;
                idx += 4;
                inds[ic++] = idx;inds[ic++] = idx + 1;inds[ic++] = idx + 3;
                inds[ic++] = idx;inds[ic++] = idx + 3;inds[ic++] = idx + 2;
            }
            // Apply geometry
            this.setData(vDecl, verts, inds);
        }
    }]);

    return RingSliceMesh;
}(Laya.PrimitiveMesh);

exports.default = RingSliceMesh;

},{}],48:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _RingSliceMesh = require('./RingSliceMesh');

var _RingSliceMesh2 = _interopRequireDefault(_RingSliceMesh);

var _HxGlobals = require('./HxGlobals');

var _HxGlobals2 = _interopRequireDefault(_HxGlobals);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RingSliceMeshPool = function () {
    function RingSliceMeshPool(radius, radiusInner, height) {
        _classCallCheck(this, RingSliceMeshPool);

        this._radius = radius;
        this._radiusInner = radiusInner;
        this._height = height;
        this._meshes = [];
    }

    _createClass(RingSliceMeshPool, [{
        key: 'destroy',
        value: function destroy() {
            var meshes = this._meshes;
            for (var i = 0; i < meshes.length; i++) {
                if (meshes[i]) meshes[i].releaseResource();
            }this._meshes = [];
        }
    }, {
        key: 'getMesh',
        value: function getMesh(circlePart, bump, radusBump, height) {
            var key = circlePart.toPrecision(3) + ',' + bump + ',' + radusBump;
            if (height) key += ',' + height;
            var meshes = this._meshes;
            if (!meshes[key]) {
                meshes[key] = this._createMesh(circlePart, bump, radusBump, height);
            }
            return meshes[key];
        }
    }, {
        key: '_createMesh',
        value: function _createMesh(circlePart, bump, radusBump, height) {
            var ratio = circlePart;
            var slices = Math.max(_HxGlobals2.default.VIEW_MIN_SECTOR_SLICES, Math.ceil(_HxGlobals2.default.VIEW_SECTOR_SLICES * ratio));
            var r = this._radius;
            var h = height || _HxGlobals2.default.VIEW_FLOOR_THICKNESS;
            if (bump) {
                r += _HxGlobals2.default.VIEW_SECTOR_DEATH_BUMP;
                h += _HxGlobals2.default.VIEW_SECTOR_DEATH_BUMP;
            }
            return new _RingSliceMesh2.default(r, this._radiusInner, h, 0, ratio * 360, slices, radusBump ? _HxGlobals2.default.VIEW_SECTOR_DEATH_RADIUS_BUMP : 0);
        }
    }]);

    return RingSliceMeshPool;
}();

exports.default = RingSliceMeshPool;

},{"./HxGlobals":37,"./RingSliceMesh":47}],49:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ScenesOpener = function (_Laya$EventDispatcher) {
    _inherits(ScenesOpener, _Laya$EventDispatcher);

    _createClass(ScenesOpener, null, [{
        key: "EVENT_OPENED",
        get: function get() {
            return "PRELOADED";
        }
    }, {
        key: "EVENT_PROGRESS",
        get: function get() {
            return "PROGRESS";
        }
    }]);

    function ScenesOpener(caller, scenes) {
        _classCallCheck(this, ScenesOpener);

        var _this = _possibleConstructorReturn(this, (ScenesOpener.__proto__ || Object.getPrototypeOf(ScenesOpener)).call(this));

        _this._caller = caller;
        _this._scenes = scenes;
        _this._curIndex = -1;
        _this._openedScenes = [];
        return _this;
    }

    _createClass(ScenesOpener, [{
        key: "open",
        value: function open() {
            if (this._curIndex < 0) this._openNext();
        }
    }, {
        key: "_openNext",
        value: function _openNext() {
            this._curIndex++;
            if (this._curIndex >= this._scenes.length) {
                this.event(ScenesOpener.EVENT_PROGRESS, 1);
                this.event(ScenesOpener.EVENT_OPENED, this._openedScenes);
                return;
            }
            var url = this._scenes[this._curIndex].url;
            var handler = new Laya.Handler(this, this._onOpened);
            if (_Utils2.default.endsWith(url, '.ls')) this._loadLayaScene(url, handler);else Laya.Scene.open(url, false, handler);
            this.event(ScenesOpener.EVENT_PROGRESS, this._curIndex / this._scenes.length);
        }
    }, {
        key: "_loadLayaScene",
        value: function _loadLayaScene(url, handler) {
            var loader = new Laya.SceneLoader();
            loader.on(Laya.Event.COMPLETE, null, onLoaded);
            loader.load(url);
            function onLoaded() {
                var scene = Laya.Loader.getRes(url);
                Laya.Scene.root.addChild(scene);
                handler.runWith(scene);
            }
        }
    }, {
        key: "_onOpened",
        value: function _onOpened(scene) {
            this._openedScenes.push(scene);
            this._scenes[this._curIndex].onOpened.call(this._caller, scene);
            this._openNext();
        }
    }]);

    return ScenesOpener;
}(Laya.EventDispatcher);

exports.default = ScenesOpener;

},{"./Utils":61}],50:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SettingsAll = function () {
    function SettingsAll(data) {
        _classCallCheck(this, SettingsAll);

        this._data = data;
    }

    _createClass(SettingsAll, [{
        key: "getMoneySoft4Resume",
        value: function getMoneySoft4Resume(tryIndex) {
            var arr = this._data.arrayMoneySoft4Resume;
            return tryIndex < arr.length ? arr[tryIndex] : arr[arr.length - 1];
        }
    }, {
        key: "moneySoftPerFriendHelp",
        get: function get() {
            return this._data.moneySoftPerFriendHelp;
        }
    }, {
        key: "timeBetweenFriendHelp",
        get: function get() {
            return this._data.timeBetweenFriendHelp;
        }
    }, {
        key: "moneySoft4Resume",
        get: function get() {
            return this._data.moneySoft4Resume;
        }
    }, {
        key: "moneySoft4Ad",
        get: function get() {
            return this._data.moneySoft4Ad;
        }
    }, {
        key: "chest",
        get: function get() {
            return this._data.chest;
        } // example: { timeOpen: 21600, maxMoneySoft: 100 }

    }, {
        key: "timeToFreeLife",
        get: function get() {
            return this._data.timeToFreeLife;
        }
    }]);

    return SettingsAll;
}();

exports.default = SettingsAll;

},{}],51:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _FriendInfo = require("./FriendInfo");

var _FriendInfo2 = _interopRequireDefault(_FriendInfo);

var _Utils = require("./Utils");

var _Utils2 = _interopRequireDefault(_Utils);

var _Yandex = require("./Yandex");

var _Yandex2 = _interopRequireDefault(_Yandex);

var _Locale = require("./Locale");

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SocialApi = function (_Laya$EventDispatcher) {
    _inherits(SocialApi, _Laya$EventDispatcher);

    _createClass(SocialApi, null, [{
        key: "EVENT_INITIALIZED",
        get: function get() {
            return "INITIALIZED";
        }
    }, {
        key: "EVENT_INITIALIZE_PROGRESS",
        get: function get() {
            return "INITIALIZE_PROGRESS";
        }
    }, {
        key: "EVENT_ORDER_RESULT",
        get: function get() {
            return "ORDER_RESULT";
        }
    }, {
        key: "EVENT_ADS_READY_CHANGED",
        get: function get() {
            return "ADS_READY_CHANGED";
        }
    }, {
        key: "EVENT_ADS_SHOW_STARTED",
        get: function get() {
            return "ADS_SHOWN_STARTED";
        }
    }, {
        key: "EVENT_ADS_REQUESTED",
        get: function get() {
            return "ADS_REQUESTED";
        }
    }, {
        key: "EVENT_ADS_NO",
        get: function get() {
            return "ADS_NO";
        }
    }, {
        key: "EVENT_ADS_SHOW_STOPPED",
        get: function get() {
            return "ADS_SHOW_STOPPED";
        }
    }, {
        key: "EVENT_ADS_SHOW_COMPLETE",
        get: function get() {
            return "ADS_SHOW_COMPLETE";
        }
    }, {
        key: "EVENT_ADS_SHOW_SKIPPED",
        get: function get() {
            return "ADS_SHOW_SKIPPED";
        }
    }, {
        key: "EVENT_PAYMENT_RESULT",
        get: function get() {
            return "showPayment";
        }
    }, {
        key: "PROMO_TSAR_GORY",
        get: function get() {
            return true;
        }
    }, {
        key: "GAME_LINK",
        get: function get() {
            var isTsarGory = SocialApi.PROMO_TSAR_GORY;
            if (SocialApi.isOK) return (SocialApi.isMobile ? 'https://m.' : 'https://') + 'ok.ru/app/' + (isTsarGory ? 'tsar-gory' : 'coiny');
            if (SocialApi.isVK) return (SocialApi.isMobile ? 'vk' : 'https') + '://vk.com/' + (isTsarGory ? 'app8023481' : 'raccoin');
            if (SocialApi.isYA && isTsarGory) return 'https://yandex.ru/games/play/182328';
            return "";
        }
    }, {
        key: "GROUP_LINK",
        get: function get() {
            if (SocialApi.inst._isVK) return (SocialApi.inst._isVKMobile ? "vk" : "https") + "://vk.com/club173621551";else if (SocialApi.inst._isOK) {
                if (SocialApi.inst._isOKMobile) return "https://m.ok.ru/group/59384228675644";else return "https://ok.ru/group/59384228675644";
            }
            return "https://www.google.com";
        }
    }, {
        key: "GROUP_TITLE",
        get: function get() {
            if (SocialApi.inst._isVK) return "VK ГРУППА";
            return "ГРУППА";
        }
    }, {
        key: "isBankAvailable",
        get: function get() {
            return true; //!SocialApi.inst._isOK || Utils.devMode;
        }
    }, {
        key: "providerId",
        get: function get() {
            return window.isYandex ? "ya" : SocialApi.inst._isOK ? "ok" : "vk";
        }
    }, {
        key: "isVK",
        get: function get() {
            return SocialApi.inst._isVK;
        }
    }, {
        key: "isOK",
        get: function get() {
            return SocialApi.inst._isOK;
        }
    }, {
        key: "isYA",
        get: function get() {
            return window.isYandex;
        }
    }, {
        key: "isMobile",
        get: function get() {
            var inst = SocialApi.inst;
            return inst._isOKMobile || inst._isVKMobile;
        }
    }, {
        key: "PHOTO_NEW_LEVEL",
        get: function get() {
            return SocialApi.inst._isOK ? "https://jump-vk-api.candygrill.com/ok/common/jumper_new_level.jpg" : "photo-173621551_456239028";
        }
    }, {
        key: "PHOTO_NEW_SCORE",
        get: function get() {
            return SocialApi.inst._isOK ? "https://jump-vk-api.candygrill.com/ok/common/jumper_new_record.jpg" : "photo-173621551_456239029";
        }
    }, {
        key: "isVKBridgeWebView",
        get: function get() {
            return window.vkBridge && window.vkBridge.isWebView && window.vkBridge.isWebView();
        }
    }, {
        key: "isVKBridgeAds",
        get: function get() {
            return SocialApi.isVK && SocialApi.isVKBridgeWebView;
        }
    }]);

    function SocialApi() {
        _classCallCheck(this, SocialApi);

        var _this = _possibleConstructorReturn(this, (SocialApi.__proto__ || Object.getPrototypeOf(SocialApi)).call(this));

        var sp = _Utils2.default.getSearchParam;
        _this._isVK = !!sp('viewer_id');
        _this._isVKMobile = _this._isVK && sp('platform') != "web";
        _this._isOK = !!sp('logged_user_id');
        _this._isOKMobile = _this._isOK && sp('mob') == "true";
        _this._isOKAnon = sp('logged_user_id') === '0';
        _this._vkAdman = null;
        if (_this._isVK && SocialApi.isVKBridgeWebView) {
            window.vkBridge.send("VKWebAppInit", {});
        }
        if (SocialApi.isYA) {
            _this._yaAdReady = true;
        }
        return _this;
    }

    _createClass(SocialApi, [{
        key: "preBankShow",
        value: function preBankShow() {
            // if (this._yandex)
            //     return this._yandex.prePurchase();
            return true;
        }
    }, {
        key: "logTutorComplete",
        value: function logTutorComplete() {
            if (this._yandex) return this._yandex.logTutor();
        }
    }, {
        key: "logLevel",
        value: function logLevel(level) {
            if (this._yandex) this._yandex.logLevel(level);
            this._loggedLevel = level;
        }
    }, {
        key: "logBestScore",
        value: function logBestScore(score) {
            this._loggedBestScore = score;
        }
    }, {
        key: "initialize",
        value: function initialize(appFriendsRequester, purchaseValidator) {
            if (this._initalizing || this.initialized) return;
            this._initalizing = true;
            this._appFriendsRequester = appFriendsRequester;
            if (this._isVK) {
                var users_get_callback = function (data) {
                    this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 0.2);
                    if (!data.response) {
                        alert(JSON.stringify(data));
                        this.user = new _FriendInfo2.default('1', 'Anonimous', '');
                    } else {
                        var obj = data.response[0];
                        this.user = new _FriendInfo2.default(obj.id, obj.first_name, obj.photo_100);
                    }
                    this._requestFriends2();
                }.bind(this);
                VK.init(function () {
                    if (this._isVKMobile) {
                        VK.addCallback('onSettingsBoxDone', function (status) {
                            if (this._settingsCallback) this._settingsCallback(status == 'success');
                        }.bind(this));
                        VK.addCallback('onOrderBoxDone', function (status) {
                            this._issueOrderResult(status == 'success');
                        }.bind(this));
                    } else {
                        VK.addCallback('onSettingsChanged', function (perms) {
                            if (this._settingsCallback) this._settingsCallback((this._settingsPerms & perms) == perms);
                        }.bind(this));
                        VK.addCallback('onSettingsCancel', function (perms) {
                            if (this._settingsCallback) this._settingsCallback(false);
                        }.bind(this));
                        VK.addCallback('onOrderCancel', function () {
                            this._issueOrderResult(false);
                        }.bind(this));
                        VK.addCallback('onOrderSuccess', function () {
                            this._issueOrderResult(true);
                        }.bind(this));
                        VK.addCallback('onOrderFail', function () {
                            this._issueOrderResult(false);
                        }.bind(this));
                    }
                    VK.api('users.get', this._VKArgsFilter({ fields: 'first_name,photo_100' }), users_get_callback);
                }.bind(this), function () {
                    alert('VK.init FAILED');
                }, '5.122');
            } else if (this._isOK) {
                var app_key = _Utils2.default.getSearchParam('application_key');
                var config = {
                    app_id: app_key == 'CBALFOOMEBABABABA' ? 1273846272 : 1273510144,
                    app_key: app_key //'CBAKDJOMEBABABABA'
                };
                var rest = FAPI.REST;
                var getCurrentUserCallback = function (status, data, error) {
                    if (status == 'ok') {
                        this.user = new _FriendInfo2.default(data.uid, data.name, data.pic_2);
                        this.appFriends = [];
                        this.on(SocialApi.EVENT_PAYMENT_RESULT, this, function (data) {
                            if (data) this._issueOrderResult(data.result == 'ok');
                        });
                        window.okCallbackEvents = this;
                        this._callOKREST('friends.getAppUsers', {}, function (status, data, error) {
                            if (error) {
                                this.initialized = true;return;
                            }
                            this._callOKREST('users.getInfo', { uids: data.uids.join(','), fields: 'first_name,pic_2' }, function (status, data, error) {
                                if (!error) {
                                    this.appFriends = data.map(function (e) {
                                        return new _FriendInfo2.default(e.uid, e.first_name, e.pic_2);
                                    });
                                    console.log('users.getInfo', data);
                                }
                                this.initialized = true;
                            }.bind(this));
                        }.bind(this));
                    } else {
                        alert('Unable to retrieve current user ' + FAPI.Util.toString(error));
                    }
                }.bind(this);
                var rParams = FAPI.Util.getRequestParameters();
                FAPI.init(config, function () {
                    if (this._isOKAnon) {
                        this.user = new _FriendInfo2.default('0', 'You', "stubAvatars/7.jpg");
                        this.appFriends = [];
                        window.okCallbackEvents = this;
                        this.initialized = true;
                    } else {
                        FAPI.Client.call({ method: 'users.getCurrentUser', fields: 'UID,NAME,PIC_2' }, getCurrentUserCallback);
                    }
                    if (window.OkMidroll) {
                        this._okMidroll = new OkMidroll(config.app_id, function () {
                            this.event(SocialApi.EVENT_ADS_READY_CHANGED);
                        }.bind(this));
                        NativeAds.inst;
                    }
                }.bind(this), function (error) {
                    alert('FAPI error' + FAPI.Util.toString(error));
                }.bind(this));
            } else {
                this.user = new _FriendInfo2.default(1, "You", "stubAvatars/7.jpg");
                if (SocialApi.isYA) {
                    this.appFriends = [];
                    this._yandex = new _Yandex2.default(purchaseValidator);
                } else {
                    this.appFriends = [new _FriendInfo2.default(1, "Bob", "stubAvatars/1.jpg"), new _FriendInfo2.default(2, "Alice", "stubAvatars/2.jpg"), new _FriendInfo2.default(3, "Vasya", "stubAvatars/3.jpg"), new _FriendInfo2.default(4, "Samanta", "stubAvatars/4.jpg"), new _FriendInfo2.default(5, "Jack", "stubAvatars/5.jpg"), new _FriendInfo2.default(6, "Masha", "stubAvatars/6.jpg"), new _FriendInfo2.default(7, "Matvey", "stubAvatars/7.jpg"), new _FriendInfo2.default(8, "Bella", "stubAvatars/8.jpg")];
                }
                console.log('FREINDS', this.appFriends);
                this.initialized = true;
            }
        }
    }, {
        key: "_request_VK_adman",
        value: function _request_VK_adman(onReply) {
            this.event(SocialApi.EVENT_ADS_REQUESTED);
            window.request_VK_adman(function (adman) {
                // if (Utils.devMode)
                //     alert(adman ? "Has Ads" : "No Ads");
                if (adman) {
                    this._vkAdman = adman;
                    this.event(SocialApi.EVENT_ADS_READY_CHANGED);
                    this._vkAdman.onCompleted(function () {
                        this._vkAdman = null;
                        this.event(SocialApi.EVENT_ADS_READY_CHANGED);
                        this._request_VK_adman();
                        this.event(SocialApi.EVENT_ADS_SHOW_COMPLETE);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                    }.bind(this));
                    this._vkAdman.onSkipped(function () {
                        this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                    }.bind(this));
                } else {
                    this.event(SocialApi.EVENT_ADS_NO);
                }
                if (onReply) onReply();
            }.bind(this));
        }
    }, {
        key: "_callOKREST",
        value: function _callOKREST(method, args, callback) {
            FAPI.Client.call(Object.assign({ method: method }, args), callback);
        }
    }, {
        key: "showInviteBox",
        value: function showInviteBox(message) {
            if (this._isVK) VK.callMethod('showInviteBox');else if (this._isOK) {
                if (this._checkOKAnon()) return;
                FAPI.UI.showInvite(message);
            } else alert(message || "Приходи играть, помоги другу!");
        }
    }, {
        key: "showRequestBox",
        value: function showRequestBox(user_id, message) {
            //, request_key) {
            if (this._isVK) VK.callMethod('showRequestBox', user_id, message, ""); // request_key);
            else if (this._isOK) {
                    if (this._checkOKAnon()) return;
                    FAPI.UI.showNotification(message, null, user_id);
                } else alert("Requst: " + message);
        }
    }, {
        key: "showShareBox",
        value: function showShareBox(message, photo) {
            if (this._isVK) {
                if (this._isVKMobile) {
                    var attachements = ['https://vk.com/jumpyball'];
                    if (photo) attachements.push(photo);
                    VK.callMethod('showShareBox', message, attachements, 'wall');
                } else {
                    alert(message);
                };
            } else if (this._isOK) {
                if (this._checkOKAnon()) return;
                var _attachements = { media: [] };
                _attachements.media.push({ type: "app", text: message, images: [{ url: photo, title: message }], actions: [{ text: "Играть", mark: "Play" }] });
                FAPI.UI.postMediatopic(_attachements, false);
            } else {
                alert(message);
            }
        }
    }, {
        key: "showLeaderboardBox",
        value: function showLeaderboardBox(result) {
            if (this._isVKMobile) {
                VK.callMethod('showLeaderboardBox', result);
            } else if (this._isOK) {
                console.error("Learboard NOT SUPPORTED for OK");
            } else {
                alert('Learboard not available');
            }
        }
    }, {
        key: "getPriceString",
        value: function getPriceString(card) {
            return this.getPrice(card) + ' ' + this.getCurrencyString(card);
        }
    }, {
        key: "getPrice",
        value: function getPrice(card) {
            if (this._isOK) return card.ok.price;
            if (SocialApi.isYA) return card.ya;
            return card.votes;
        }
    }, {
        key: "getCurrencyString",
        value: function getCurrencyString(card) {
            if (this._isOK) return _Utils2.default.getPluralByValue(card.ok.price, ['OK', 'OK', 'OK']);
            //if (SocialApi.isYA) return Locale.russionPlural('L_RUB_SUFFIX', card.ya);// Utils.getPluralByValue(card.ya, ['Рублей', 'Рублей', 'Рублей']);
            if (SocialApi.isYA) return this._yandex.currencyCode; // Utils.getPluralByValue(card.ya, ['Рублей', 'Рублей', 'Рублей']);
            return _Utils2.default.getPluralByValue(card.votes, ['Голос', 'Голоса', 'Голосов']);
        }
    }, {
        key: "showOrderBox",
        value: function showOrderBox(card) {
            if (this._isVK) VK.callMethod('showOrderBox', { type: 'item', item: card.name });else if (this._isOK) {
                if (this._checkOKAnon()) return;
                FAPI.UI.showPayment(card.ok.title, card.ok.title, card.name, card.ok.price, null, null, "ok", "true");
            }if (SocialApi.isYA) {
                if (window.ysdk_player) {
                    this._yandex.purchase(card).then(function (ok) {
                        this._issueOrderResult(ok);
                    }.bind(this));
                } else {
                    ysdk.auth.openAuthDialog().then(function () {
                        location.reload();
                    });
                }
            } else {
                setTimeout(function () {
                    alert('Банка закрыта');
                    this._issueOrderResult(false);
                }.bind(this), 500);
            }
        }
    }, {
        key: "adsShow",
        value: function adsShow(rewardedHint) {
            if (SocialApi.isVKBridgeAds) {
                console.log('[AdsNetworkVKBridge] show');
                this.event(SocialApi.EVENT_ADS_REQUESTED);
                this.event(SocialApi.EVENT_ADS_SHOW_STARTED);
                setTimeout(function () {
                    vkBridge.sendPromise('VKWebAppShowNativeAds', { ad_format: 'reward' }).then(function (data) {
                        console.log('[AdsNetworkVKBridge] show result=' + data.result);
                        if (data.result) this.event(SocialApi.EVENT_ADS_SHOW_COMPLETE);else this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                    }.bind(this)).catch(function (error) {
                        console.log('[AdsNetworkVKBridge] show error=' + error + ' error.message=' + error.message, error);
                        this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                    }.bind(this));
                }.bind(this), 10);
                return;
            }
            if (this._vkAdman) {
                this.event(SocialApi.EVENT_ADS_SHOW_STARTED);
                this._vkAdman.start('preroll');
                return;
            }
            if (SocialApi.isYA) {
                if (!rewardedHint && this._yandex.isAdsPayed()) return;
                var resetAdsReady = function (result, seconds) {
                    this._yaAdReady = false;
                    this.event(SocialApi.EVENT_ADS_READY_CHANGED);
                    if (seconds) {
                        setTimeout(function () {
                            this._yaAdReady = true;
                            this.event(SocialApi.EVENT_ADS_READY_CHANGED);
                        }.bind(this), seconds * 1000);
                    }
                }.bind(this);
                this.event(SocialApi.EVENT_ADS_REQUESTED);
                if (rewardedHint) {
                    var start = new Date().getTime();
                    ysdk.adv.showRewardedVideo({
                        callbacks: {
                            onOpen: function () {
                                console.log('[showRewardedVideo] onOpen(Video)');
                                this.event(SocialApi.EVENT_ADS_SHOW_STARTED);
                            }.bind(this),
                            onRewarded: function () {
                                console.log('[showRewardedVideo] onRewarded');
                                var delayMS = 5000 - (new Date().getTime() - start); // 5 seconds minimum
                                var doResolve = function () {
                                    this._yandex.logAdRewarded();
                                    this.event(SocialApi.EVENT_ADS_SHOW_COMPLETE);
                                    this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                                }.bind(this);
                                if (delayMS > 0) {
                                    console.log('[showRewardedVideo] extra delayMS=' + delayMS);setTimeout(doResolve, delayMS);
                                } else doResolve();
                            }.bind(this),
                            onClose: function () {
                                console.log('[showRewardedVideo] onClose(Video)');
                                this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                                this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                            }.bind(this),
                            onError: function (e) {
                                console.log('[showRewardedVideo] onError(Video)', e);
                                this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                                this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                            }.bind(this)
                        }
                    });
                } else {
                    this.event(SocialApi.EVENT_ADS_SHOW_STARTED);
                    var onAdsClose = function (wasShown) {
                        this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                        if (wasShown) {
                            this._yandex.logAdRewarded();
                            resetAdsReady(false, 181);
                        }
                    }.bind(this);
                    ysdk.adv.showFullscreenAdv({ callbacks: { onClose: onAdsClose, onError: onAdsClose } });
                }
                return;
            }
            if (!rewardedHint && NativeAds.inst.supportedInterstitial) {
                NativeAds.inst.showInterstitial();
                return;
            }
            if (!this.adsCanShow) return;
            // Emulate request
            this.event(SocialApi.EVENT_ADS_REQUESTED);
            this.event(SocialApi.EVENT_ADS_SHOW_STARTED);
            NativeAds.inst.show(function (nativeOk) {
                if (nativeOk) {
                    this.event(SocialApi.EVENT_ADS_SHOW_COMPLETE);
                } else {
                    this._okMidroll.show(function (ok) {
                        if (ok) this.event(SocialApi.EVENT_ADS_SHOW_COMPLETE);else this.event(SocialApi.EVENT_ADS_SHOW_SKIPPED);
                        this.event(SocialApi.EVENT_ADS_SHOW_STOPPED);
                    }.bind(this));
                }
            }.bind(this));
        }
    }, {
        key: "_checkOKAnon",
        value: function _checkOKAnon() {
            if (this._isOKAnon) {
                FAPI.UI.showLoginSuggestion(JSON.stringify({ level: this._loggedLevel, bestScore: this._loggedBestScore }));
            }
            return this._isOKAnon;
        }
    }, {
        key: "_requestFriends",
        value: function _requestFriends() {
            VK.api('friends.getAppUsers', this._VKArgsFilter({}), function (data) {
                this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 0.7);
                if (!data.response) {
                    alert(JSON.stringify(data));
                    return;
                }
                var user_ids = data.response.join(',');
                VK.api('users.get', this._VKArgsFilter({ user_ids: user_ids, fields: 'first_name,photo_100' }), function (data) {
                    this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 1);
                    this.appFriends = [];
                    if (data.response) {
                        for (var i in data.response) {
                            var obj = data.response[i];
                            this.appFriends.push(new _FriendInfo2.default(obj.id, obj.first_name, obj.photo_100));
                        }
                    }
                    this.initialized = true;
                }.bind(this));
            }.bind(this));
        }
    }, {
        key: "_requestFriends2",
        value: function _requestFriends2() {
            VK.api('friends.get', this._VKArgsFilter({ order: 'mobile', count: 100, fields: 'first_name,photo_100' }), function (data) {
                this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 0.7);
                this.appFriends = [];
                if (!data.response) {
                    alert(JSON.stringify(data));
                    this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 1);
                    this.initialized = true;
                } else {
                    this._appFriendsRequester(data.response.items.reduce(function (s, itm) {
                        s.push(itm.id);return s;
                    }, []), function (ids) {
                        this.event(SocialApi.EVENT_INITIALIZE_PROGRESS, 1);
                        for (var i in data.response.items) {
                            var obj = data.response.items[i];
                            if (ids.indexOf(obj.id) != -1) this.appFriends.push(new _FriendInfo2.default(obj.id, obj.first_name, obj.photo_100));
                        }
                        this._request_VK_adman(function () {
                            this.initialized = true;
                        }.bind(this));
                    }.bind(this));
                }
            }.bind(this));
        }
    }, {
        key: "_checkVKPermissions",
        value: function _checkVKPermissions(perms, onComplete) {
            VK.api('account.getAppPermissions', this._VKArgsFilter({}), function (data) {
                if (data.error) onComplete(false);else {
                    if (data.response & perms) onComplete(true);else {
                        this._settingsPerms = perms;
                        this._settingsCallback = function (success) {
                            this._settingsCallback = null;
                            onComplete(success);
                        }.bind(this);
                        VK.callMethod('showSettingsBox', perms);
                    }
                }
            }.bind(this));
        }
    }, {
        key: "_VKArgsFilter",
        value: function _VKArgsFilter(args) {
            if (_Utils2.default.devMode) args.test_mode = 1;
            return args;
        }
    }, {
        key: "_issueOrderResult",
        value: function _issueOrderResult(result) {
            this.event(SocialApi.EVENT_ORDER_RESULT, result);
        }
        // _pendPageReloadOnFocus() {
        //     window.addEventListener('focus', function() { window.location.reload(); });
        // }

    }, {
        key: "initialized",
        get: function get() {
            return this._initialized;
        },
        set: function set(value) {
            if (!this._initialized && value) {
                this._initialized = true;
                this.event(SocialApi.EVENT_INITIALIZED);
            }
        }
    }, {
        key: "profileStorage",
        get: function get() {
            return this._yandex && this._yandex.profileStorage;
        }
    }, {
        key: "adsSupported",
        get: function get() {
            return SocialApi.isVK || SocialApi.isOK || SocialApi.isYA;
        }
    }, {
        key: "adsForCoinsSupported",
        get: function get() {
            return SocialApi.isVK || SocialApi.isOK || SocialApi.isYA;
        }
    }, {
        key: "adsCanShow",
        get: function get() {
            return this.adsSupported && (SocialApi.isYA && this._yaAdReady || this._vkAdman || SocialApi.isVKBridgeAds || this._okMidroll && this._okMidroll.canShow() || NativeAds.inst.ready || NativeAds.inst.supportedInterstitial);
        }
    }, {
        key: "adsCanShowRewarded",
        get: function get() {
            return this.adsCanShow || SocialApi.isYA;
        }
    }], [{
        key: "inst",
        get: function get() {
            if (!SocialApi._inst) window.SocialApi = SocialApi._inst = new SocialApi();
            return SocialApi._inst;
        }
    }]);

    return SocialApi;
}(Laya.EventDispatcher);

exports.default = SocialApi;

var NativeAds = function () {
    _createClass(NativeAds, [{
        key: "supported",
        get: function get() {
            return window.FAPI && FAPI.UI.loadAd && FAPI.UI.showLoadedAd;
        }
    }, {
        key: "supportedInterstitial",
        get: function get() {
            return window.FAPI && !!FAPI.UI.showAd;
        }
    }, {
        key: "ready",
        get: function get() {
            return this._ready;
        }
    }], [{
        key: "inst",
        get: function get() {
            if (!NativeAds._inst) {
                window.NativeAds = NativeAds._inst = new NativeAds();
            }
            return NativeAds._inst;
        }
    }]);

    function NativeAds() {
        _classCallCheck(this, NativeAds);

        console.log('[NativeAds] constructor');
        this._ready = false;
        if (this.supported) {
            SocialApi.inst.on("loadAd", this, this.on_loadAd);
            SocialApi.inst.on("showLoadedAd", this, this.on_showLoadedAd);
            setInterval(function () {
                this._updateAds();
            }.bind(this), 31000); // > 30 seconds
            this._updateAds();
            this._onShowResult = null;
        }
    }

    _createClass(NativeAds, [{
        key: "show",
        value: function show(onComplete) {
            console.log('[NativeAds] show supported=' + !!this.supported + ' ready=' + this._ready);
            if (!this._ready) {
                onComplete(false);
            } else {
                this._onShowResult = function (ok) {
                    console.log('[NativeAds] _onShowResult ok=' + ok);
                    this._onShowResult = null;
                    this._setReady(false);
                    onComplete(ok);
                }.bind(this);
                console.log('[NativeAds] FAPI.UI.showLoadedAd');
                FAPI.UI.showLoadedAd();
            }
        }
    }, {
        key: "showInterstitial",
        value: function showInterstitial() {
            console.log('[NativeAds] showInterstitial: FAPI.UI.showAd');
            FAPI.UI.showAd();
        }
    }, {
        key: "_updateAds",
        value: function _updateAds() {
            if (!this._ready) FAPI.UI.loadAd();
        }
    }, {
        key: "_setReady",
        value: function _setReady(value) {
            if (value != this._ready) {
                this._ready = value;
                SocialApi.inst.event(SocialApi.EVENT_ADS_READY_CHANGED);
            }
        }
    }, {
        key: "on_loadAd",
        value: function on_loadAd(ev) {
            this.logCallback('loadAd', ev);
            if (ev.result == 'ok' && (ev.data == 'ad_prepared' || ev.data == 'ready')) {
                this._setReady(true);
                SocialApi.inst.event(SocialApi.EVENT_ADS_READY_CHANGED);
            }
        }
    }, {
        key: "on_showLoadedAd",
        value: function on_showLoadedAd(ev) {
            this.logCallback('showLoadedAd', ev);
            if (this._onShowResult) this._onShowResult(ev.result == 'ok' && (ev.data == 'ad_shown' || ev.data == 'complete'));
        }
    }, {
        key: "logCallback",
        value: function logCallback(name, ev) {
            console.log('[NativeAds] ' + name + ' result=' + ev.result + ' data=' + ev.data);
        }
    }]);

    return NativeAds;
}();

},{"./FriendInfo":21,"./Locale":38,"./Utils":61,"./Yandex":63}],52:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SoundMan = function () {
    function SoundMan() {
        _classCallCheck(this, SoundMan);
    }

    _createClass(SoundMan, null, [{
        key: "ID_BREAK",
        value: function ID_BREAK(idx) {
            return "break" + (idx + 1);
        }
    }, {
        key: "init",
        value: function init() {
            if (!SoundMan._inited) {
                SoundMan._inited = true;
                SoundMan._enabled = true;
                var ids = [SoundMan.ID_CLICK, SoundMan.ID_DEATH, SoundMan.ID_JUMP, SoundMan.ID_CRACK];
                for (var i = 0; i < SoundMan.BREAK_SOUND_COUNT; i++) {
                    ids.push(SoundMan.ID_BREAK(i));
                }SoundMan._registerIds(ids);
            }
        }
    }, {
        key: "lock",
        value: function lock(obj) {
            if (!this._locks) {
                this._locks = [];
            }
            this._locks.push(obj);
        }
    }, {
        key: "unlock",
        value: function unlock(obj) {
            if (this._locks) {
                var idx = this._locks.indexOf(obj);
                if (idx >= 0) this._locks.splice(idx, 1);
            }
        }
    }, {
        key: "playClick",
        value: function playClick() {
            SoundMan._play(SoundMan.ID_CLICK);
        }
    }, {
        key: "playJump",
        value: function playJump() {
            SoundMan._play(SoundMan.ID_JUMP);
        }
    }, {
        key: "playDeath",
        value: function playDeath() {
            SoundMan._play(SoundMan.ID_DEATH);
        }
    }, {
        key: "playBreak",
        value: function playBreak(idx) {
            SoundMan._play(SoundMan.ID_BREAK(Math.min(idx, SoundMan.BREAK_SOUND_COUNT - 1)));
        }
    }, {
        key: "playCrack",
        value: function playCrack() {
            SoundMan._play(SoundMan.ID_CRACK);
        }
    }, {
        key: "_registerIds",
        value: function _registerIds(ids) {
            for (var i = 0; i < ids.length; i++) {
                createjs.Sound.registerSound(SoundMan._toFilePath(ids[i]), ids[i]);
            }
        }
    }, {
        key: "_toFilePath",
        value: function _toFilePath(id) {
            return SoundMan.FOLDER + id + ".mp3";
        }
    }, {
        key: "_play",
        value: function _play(id) {
            if (document.visibilityState == 'visible' && SoundMan.enabled && (!this._locks || !this._locks.length)) createjs.Sound.play(id);
        }
    }, {
        key: "FOLDER",
        get: function get() {
            return "sound/";
        }
    }, {
        key: "BREAK_SOUND_COUNT",
        get: function get() {
            return 4;
        }
    }, {
        key: "ID_CLICK",
        get: function get() {
            return "click";
        }
    }, {
        key: "ID_DEATH",
        get: function get() {
            return "death";
        }
    }, {
        key: "ID_JUMP",
        get: function get() {
            return "jump";
        }
    }, {
        key: "ID_CRACK",
        get: function get() {
            return "crack";
        }
    }, {
        key: "enabled",
        get: function get() {
            return this._enabled;
        },
        set: function set(value) {
            this._enabled = value;
        }
    }]);

    return SoundMan;
}();

exports.default = SoundMan;

},{}],53:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { set(parent, property, value, receiver); } } else if ("value" in desc && desc.writable) { desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { setter.call(receiver, value); } } return value; };

var _UserOptions = require("./UserOptions");

var _UserOptions2 = _interopRequireDefault(_UserOptions);

var _SoundMan = require("./SoundMan");

var _SoundMan2 = _interopRequireDefault(_SoundMan);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SoundToggle = function (_Laya$CheckBox) {
    _inherits(SoundToggle, _Laya$CheckBox);

    function SoundToggle() {
        _classCallCheck(this, SoundToggle);

        return _possibleConstructorReturn(this, (SoundToggle.__proto__ || Object.getPrototypeOf(SoundToggle)).apply(this, arguments));
    }

    _createClass(SoundToggle, [{
        key: "init",
        value: function init(userOptions) {
            this._userOptions = userOptions;
            this.selected = userOptions.getOption(_UserOptions2.default.SOUND_OFF) != '1';
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_STARTED, this, function () {
                _SoundMan2.default.enabled = false;
            });
            _SocialApi2.default.inst.on(_SocialApi2.default.EVENT_ADS_SHOW_STOPPED, this, function () {
                _SoundMan2.default.enabled = this.get_super_selected();
            });
            this.on(Laya.Event.CHANGE, this, this._onChange);
        }
    }, {
        key: "get_super_selected",
        value: function get_super_selected() {
            return _get(SoundToggle.prototype.__proto__ || Object.getPrototypeOf(SoundToggle.prototype), "selected", this);
        }
    }, {
        key: "_onChange",
        value: function _onChange() {
            this._userOptions.setOption(_UserOptions2.default.SOUND_OFF, _get(SoundToggle.prototype.__proto__ || Object.getPrototypeOf(SoundToggle.prototype), "selected", this) ? '0' : '1');
        }
    }, {
        key: "selected",
        set: function set(value) {
            _set(SoundToggle.prototype.__proto__ || Object.getPrototypeOf(SoundToggle.prototype), "selected", value, this);
            _SoundMan2.default.enabled = value;
        }
    }]);

    return SoundToggle;
}(Laya.CheckBox);

exports.default = SoundToggle;

},{"./SocialApi":51,"./SoundMan":52,"./UserOptions":58}],54:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TriangleMesh = function (_Laya$PrimitiveMesh) {
    _inherits(TriangleMesh, _Laya$PrimitiveMesh);

    function TriangleMesh(width, height) {
        _classCallCheck(this, TriangleMesh);

        var _this = _possibleConstructorReturn(this, (TriangleMesh.__proto__ || Object.getPrototypeOf(TriangleMesh)).call(this));

        var vCount = 3;
        var iCount = 3;
        var vDecl = Laya.VertexPositionNormalTexture.vertexDeclaration;
        var vFloatStride = vDecl.vertexStride / 4;
        var verts = new Float32Array(vCount * vFloatStride);
        var inds = new Uint16Array(iCount);
        var vc = 0;
        var ic = 0;
        // 0
        verts[vc++] = -width * 0.5;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 1;
        verts[vc++] = 0;verts[vc++] = 0;
        // 1
        verts[vc++] = width * 0.5;verts[vc++] = 0;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 1;
        verts[vc++] = 1;verts[vc++] = 0;
        // 2
        verts[vc++] = 0;verts[vc++] = height;verts[vc++] = 0;
        verts[vc++] = 0;verts[vc++] = 0;verts[vc++] = 1;
        verts[vc++] = 0;verts[vc++] = 1;
        // Indicies
        inds[ic++] = 0;inds[ic++] = 1;inds[ic++] = 2;
        _this.setData(vDecl, verts, inds);
        return _this;
    }

    return TriangleMesh;
}(Laya.PrimitiveMesh);

exports.default = TriangleMesh;

},{}],55:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameResultUI = require("./GameResultUI");

var _GameResultUI2 = _interopRequireDefault(_GameResultUI);

var _WndMan = require("./WndMan");

var _WndMan2 = _interopRequireDefault(_WndMan);

var _SocialApi = require("./SocialApi");

var _SocialApi2 = _interopRequireDefault(_SocialApi);

var _BaseWindow = require("./BaseWindow");

var _BaseWindow2 = _interopRequireDefault(_BaseWindow);

var _Locale = require("./Locale");

var _Locale2 = _interopRequireDefault(_Locale);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TutorUI = function (_Laya$Scene) {
    _inherits(TutorUI, _Laya$Scene);

    function TutorUI() {
        _classCallCheck(this, TutorUI);

        return _possibleConstructorReturn(this, (TutorUI.__proto__ || Object.getPrototypeOf(TutorUI)).apply(this, arguments));
    }

    _createClass(TutorUI, [{
        key: "init",
        value: function init(backend) {
            window.tutorUI = this;
            this._backend = backend;
            this._initAddToMenu();
            this.btnSound.init(backend.userOptions);
            this.devVKScores.init(backend);
            if (_SocialApi2.default.GAME_LINK) this.promoView.init(_SocialApi2.default.GAME_LINK + '?utm_source=ad_jumpcross&utm_campaign=banner1', '_blank'); //SocialApi.isOK && SocialApi.isMobile ? '_self' : '_blank');
        }
    }, {
        key: "promoShow",
        value: function promoShow() {
            //if (this._shown) return false;
            //this._shown = true;
            var showCount = Number(this._backend.userOptions.getOption('promo' + this.promoName + 'Count')) || 0;
            if (showCount >= 5) return false;
            var stampCur = Math.floor(new Date().getTime() * 0.001 / 3600 / 24).toString();
            var stampPrev = this._backend.userOptions.getOption('promo' + this.promoName + 'Stamp');
            if (stampCur == stampPrev) return false;
            this._backend.userOptions.setOption('promo' + this.promoName + 'Stamp', stampCur);
            this._backend.userOptions.setOption('promo' + this.promoName + 'Count', showCount + 1);
            return this.promoView.show();
        }
    }, {
        key: "_initAddToMenu",
        value: function _initAddToMenu() {
            if (!_SocialApi2.default.isMobile || this._isComplete(TutorUI.TUTOR_ADD_TO_MENU)) return;
            this._restartGameCount = 0;
            _WndMan2.default.inst.gameResultUI.on(_GameResultUI2.default.EVENT_WND_RESULT, this, function (res) {
                if (res == _GameResultUI2.default.WND_RESULT_RESTART) {
                    this._restartGameCount++;
                    this._tryRun(TutorUI.TUTOR_ADD_TO_MENU);
                }
            });
            _WndMan2.default.inst.friendDefeatUI.on(_BaseWindow2.default.EVENT_HIDDEN, this, this._onFriendDefeatUIHidden);
        }
    }, {
        key: "_onFriendDefeatUIHidden",
        value: function _onFriendDefeatUIHidden() {
            this._tryRun(TutorUI.TUTOR_ADD_TO_MENU);
        }
    }, {
        key: "_tryRun",
        value: function _tryRun(name) {
            setTimeout(function () {
                if (this._isComplete(name)) return;
                if (this._restartGameCount < 2) return;
                if (_WndMan2.default.inst.curWnd) return;
                this[name].visible = true;
                setTimeout(function () {
                    this._hookOnClick();
                }.bind(this), 1000);
            }.bind(this), 0.1);
        }
    }, {
        key: "_isComplete",
        value: function _isComplete(tutor) {
            return this._backend.userOptions.getOption(this._optionKey(tutor)) == TutorUI.COMPLETE_MARK;
        }
    }, {
        key: "_optionKey",
        value: function _optionKey(tutor) {
            return 'tutor.' + tutor;
        }
    }, {
        key: "_hookOnClick",
        value: function _hookOnClick() {
            this.addToMenu.once(Laya.Event.CLICK, this, this._onClickComplete);
            _SocialApi2.default.inst.logTutorComplete();
        }
    }, {
        key: "_onClickComplete",
        value: function _onClickComplete(e) {
            e.target.visible = false;
            var name = e.target.name;
            this._backend.userOptions.setOption(this._optionKey(name), TutorUI.COMPLETE_MARK);
            this.event(TutorUI.EVENT_TUTOR_COMPLETE(name));
        }
    }, {
        key: "promoView",
        get: function get() {
            return _SocialApi2.default.PROMO_TSAR_GORY ? this.promoTsar : this.promoRaccoon;
        }
    }, {
        key: "promoName",
        get: function get() {
            return _SocialApi2.default.PROMO_TSAR_GORY ? 'Tsar' : 'Raccoon';
        }
    }], [{
        key: "EVENT_TUTOR_COMPLETE",
        value: function EVENT_TUTOR_COMPLETE(name) {
            return name + '.' + TutorUI.COMPLETE_MARK;
        }
    }, {
        key: "TUTOR_ADD_TO_MENU",
        get: function get() {
            return "addToMenu";
        }
    }, {
        key: "COMPLETE_MARK",
        get: function get() {
            return "complete";
        }
    }]);

    return TutorUI;
}(Laya.Scene);

exports.default = TutorUI;

},{"./BaseWindow":12,"./GameResultUI":25,"./Locale":38,"./SocialApi":51,"./WndMan":62}],56:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UIResizeController = function () {
    function UIResizeController(root) {
        _classCallCheck(this, UIResizeController);

        this._root = root;
        Laya.stage.on(Laya.Event.RESIZE, this, this._updateSizes);
        Laya.stage.scaleMode = "full";
    }

    _createClass(UIResizeController, [{
        key: "forceUpdate",
        value: function forceUpdate() {
            this._updateSizes();
        }
    }, {
        key: "_updateSizes",
        value: function _updateSizes() {
            var scale = Laya.stage.height / Laya.stage.designHeight;
            var width = Laya.stage.width / scale;
            for (var i = 0; i < this._root.numChildren; i++) {
                var child = this._root.getChildAt(i);
                if (child.__proto__.__className == "laya.display.Scene") {
                    child.scale(scale, scale);
                    child.width = width;
                }
            }
        }
    }]);

    return UIResizeController;
}();

exports.default = UIResizeController;

},{}],57:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

var _UserTimeEvent = require("./UserTimeEvent");

var _UserTimeEvent2 = _interopRequireDefault(_UserTimeEvent);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var UserEvents = function (_Laya$EventDispatcher) {
    _inherits(UserEvents, _Laya$EventDispatcher);

    _createClass(UserEvents, null, [{
        key: "EVENT_CHEST",
        get: function get() {
            return "Chest";
        } // params: {money_soft:0, money_soft_max:100}

    }, {
        key: "EVENT_LIFE",
        get: function get() {
            return "Life";
        } // params: {lives:1,expired:<boolean>}

    }, {
        key: "EVENT_AD",
        get: function get() {
            return "Ad";
        } // params: {dateShow:"20190129", showBeforeLife:false, showBeforeStart:true}

    }]);

    function UserEvents(backend, data) {
        _classCallCheck(this, UserEvents);

        var _this = _possibleConstructorReturn(this, (UserEvents.__proto__ || Object.getPrototypeOf(UserEvents)).call(this));

        _this.backend = backend;
        _this.backend.on(_Backend2.default.CLIENT_USER_EVENTS, _this, _this._onEvents);
        _this._onEvents(data);
        return _this;
    }

    _createClass(UserEvents, [{
        key: "_onEvents",
        value: function _onEvents(data) {
            var events = data.events;
            for (var name in events) {
                this._processEvent(events[name], name);
            }
        }
    }, {
        key: "_processEvent",
        value: function _processEvent(list, name) {
            if (list.length) {
                var data = list[0];
                var evData = 'timeRemain' in data ? new _UserTimeEvent2.default(data) : Object.assign({ id: data.id }, data.params);
                this[name] = evData;
                this._issueEvent(name);
            }
        }
    }, {
        key: "_issueEvent",
        value: function _issueEvent(name) {
            this.event(name, this[name]);
        }
    }]);

    return UserEvents;
}(Laya.EventDispatcher);

exports.default = UserEvents;

},{"./Backend":6,"./UserTimeEvent":60}],58:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Backend = require("./Backend");

var _Backend2 = _interopRequireDefault(_Backend);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UserOptions = function () {
    _createClass(UserOptions, null, [{
        key: "SOUND_OFF",
        get: function get() {
            return "SOUND_OFF";
        }
    }]);

    function UserOptions(backend) {
        _classCallCheck(this, UserOptions);

        this._backend = backend;
        backend.on(_Backend2.default.CLIENT_USER_OPTION_GET_ALL, this, this._onUserOption);
    }

    _createClass(UserOptions, [{
        key: "getOption",
        value: function getOption(name) {
            return this._options[name];
        }
    }, {
        key: "setOption",
        value: function setOption(name, value) {
            if (this._options[name] != value) {
                this._options[name] = value;
                this._backend.userOptionSet(name, value);
            }
        }
    }, {
        key: "_onUserOption",
        value: function _onUserOption(data) {
            this._options = {};
            for (var i in data.list) {
                var e = data.list[i];
                this._options[e.key] = e.value;
            }
        }
    }, {
        key: "options",
        get: function get() {
            return this._options;
        }
    }, {
        key: "resumeState",
        get: function get() {
            var res = this.getOption("resumeState");
            return res ? JSON.parse(res) : null;
        },
        set: function set(value) {
            this.setOption("resumeState", value ? JSON.stringify(value) : "");
        }
    }]);

    return UserOptions;
}();

exports.default = UserOptions;

},{"./Backend":6}],59:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UserProfile = function () {
    function UserProfile(data) {
        _classCallCheck(this, UserProfile);

        this._data = data;
    }

    _createClass(UserProfile, [{
        key: "id",
        get: function get() {
            return this._data.id;
        }
    }, {
        key: "name",
        get: function get() {
            return this._data.name;
        }
    }, {
        key: "lang",
        get: function get() {
            return this._data.lang;
        } // optinal

    }, {
        key: "level",
        get: function get() {
            return this._data.level;
        }
    }, {
        key: "lives",
        get: function get() {
            return this._data.lives;
        } // optinal

    }, {
        key: "scores",
        get: function get() {
            return this._data.scores;
        }
    }, {
        key: "scoresMax",
        get: function get() {
            return this._data.scoresMax;
        },
        set: function set(value) {
            this._data.scoresMax = value;
        }
    }, {
        key: "moneySoft",
        get: function get() {
            return this._data.moneySoft;
        }
    }, {
        key: "isTester",
        get: function get() {
            return this._data.isTester;
        } // optinal

    }]);

    return UserProfile;
}();

exports.default = UserProfile;

},{}],60:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UserTimeEvent = function () {
    function UserTimeEvent(data) {
        _classCallCheck(this, UserTimeEvent);

        Object.assign(this, data.params);
        this.id = data.id;
        this._reset(data.timeRemain);
        //this.expairStamp = Date.now() + data.timeRemain * 1000;
    }

    _createClass(UserTimeEvent, [{
        key: '_reset',
        value: function _reset(timeRemain) {
            this.expairStamp = Date.now() + timeRemain * 1000;
        }
    }, {
        key: '_toTimeDigitStr',
        value: function _toTimeDigitStr(value) {
            value = Math.floor(value);
            return value > 9 ? String(value) : '0' + value;
        }
    }, {
        key: 'secondsRemain',
        get: function get() {
            var now = Date.now();
            return Math.ceil(Math.max(this.expairStamp - now) * 0.001);
        }
    }, {
        key: 'timerText',
        get: function get() {
            var t = this.secondsRemain;
            return this._toTimeDigitStr(t / 3600) + ':' + this._toTimeDigitStr(t / 60 % 60) + ':' + this._toTimeDigitStr(t % 60);
        }
    }, {
        key: 'expired',
        get: function get() {
            return this.secondsRemain <= 0;
        }
    }]);

    return UserTimeEvent;
}();

exports.default = UserTimeEvent;

},{}],61:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _SocialApi = require('./SocialApi');

var _SocialApi2 = _interopRequireDefault(_SocialApi);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Utils = function () {
    function Utils() {
        _classCallCheck(this, Utils);
    }

    _createClass(Utils, null, [{
        key: 'fromToTransformMatrix',
        value: function fromToTransformMatrix(transformFrom, transformTo, outMatrix) {
            if (outMatrix) Laya.Matrix4x4.DEFAULT.cloneTo(outMatrix);else outMatrix = new Laya.Matrix4x4();
            if (transformTo) {
                transformTo.worldMatrix.invert(outMatrix);
                Laya.Matrix4x4.multiply(transformFrom.worldMatrix, outMatrix, outMatrix);
            } else if (transformFrom) transformFrom.cloneTo(outMatrix);
            return outMatrix;
        }
    }, {
        key: 'reparentInplace',
        value: function reparentInplace(child, newParent) {
            var m = Utils.fromToTransformMatrix(child.transform, newParent.transform);
            newParent.addChild(child);
            child.transform.localMatrix = m;
        }
    }, {
        key: 'createAnimatedCounter',
        value: function createAnimatedCounter(label, initValue) {
            return new Counter(label, initValue);
        }
    }, {
        key: 'clamp',
        value: function clamp(value, min, max) {
            return Math.max(min, Math.min(value, max));
        }
    }, {
        key: 'getChildrenOf',
        value: function getChildrenOf(node) {
            var children = [];
            var count = node.numChildren;
            for (var i = 0; i < count; i++) {
                children.push(node.getChildAt(i));
            }return children;
        }
    }, {
        key: 'removeFromParent',
        value: function removeFromParent(node) {
            var parent = node.parent;
            if (parent) parent.removeChild(node);
            return node;
        }
    }, {
        key: 'toColor',
        value: function toColor(str) {
            var c = Laya.ColorUtils.create(str);
            return new Laya.Color(c.arrColor[0], c.arrColor[1], c.arrColor[2], c.arrColor[3]);
        }
    }, {
        key: 'bitCount',
        value: function bitCount(n) {
            n = n - (n >> 1 & 0x55555555);
            n = (n & 0x33333333) + (n >> 2 & 0x33333333);
            return (n + (n >> 4) & 0xF0F0F0F) * 0x1010101 >> 24;
        }
    }, {
        key: 'startsWith',
        value: function startsWith(str, prefix) {
            return str && prefix && str.indexOf(prefix) == 0;
        }
    }, {
        key: 'endsWith',
        value: function endsWith(str, suffix) {
            return str && suffix && str.indexOf(suffix) == str.length - suffix.length;
        }
    }, {
        key: 'getSearchParam',
        value: function getSearchParam(name) {
            if (!Utils._searchParams) {
                var arr = window.location.href.split('?');
                if (arr.length < 2) Utils._searchParams = {};else {
                    arr = arr[1].split('&');
                    Utils._searchParams = arr.reduce(function (s, e) {
                        var pair = e.split('=');s[pair[0]] = pair[1];return s;
                    }, {});
                }
            }
            return Utils._searchParams[name];
        }
    }, {
        key: 'foreachChildR',
        value: function foreachChildR(root, action) {
            for (var i = 0; i < root.numChildren; i++) {
                var child = root.getChildAt(i);
                action(child);
                Utils.foreachChildR(child, action);
            }
        }
    }, {
        key: 'initProps',
        value: function initProps(root, childNames) {
            if (root.__initPropsDone) return false;
            root.__initPropsDone = true;
            Utils._initPropsR(root, root, childNames);
            return true;
        }
    }, {
        key: '_initPropsR',
        value: function _initPropsR(node, root, names) {
            for (var i = 0; i < node.numChildren; i++) {
                var child = node.getChildAt(i);
                if (names.indexOf(child.name) != -1) {
                    root[child.name] = child;
                }
                Utils._initPropsR(child, root, names);
            }
        }
    }, {
        key: 'forceUpdateLabels',
        value: function forceUpdateLabels(root) {
            for (var i = 0; i < root.numChildren; i++) {
                var child = root.getChildAt(i);
                if (child._tf && child._tf.font) child._tf.isChanged = true;else Utils.forceUpdateLabels(child);
            }
        }
    }, {
        key: 'formatPrice',
        value: function formatPrice(value, names) {
            return String(value) + ' ' + Utils.getPluralByValue(value, names);
        }
    }, {
        key: 'getPluralByValue',
        value: function getPluralByValue(value, plurals) {
            var name;
            if (value >= 5 && value <= 20) name = plurals[2];else {
                var digit = value % 10;
                name = digit == 1 ? plurals[0] : digit >= 2 && digit <= 4 ? plurals[1] : plurals[2];
            }
            return name;
        }
    }, {
        key: 'preloadImages',
        value: function preloadImages(urls) {
            for (var i in urls) {
                var url = urls[i];
                if (url && !Laya.Loader.getRes(url)) Laya.loader.load(url, null, null, Laya.Loader.IMAGE, 1, true);
            }
        }
    }, {
        key: 'apiUrl',
        get: function get() {
            if (Utils.devMode) return 'https://jumper-dev.candygrill.com/api-web/v1';
            return 'https://jump-vk-api.candygrill.com/api-web/v1';
        }
    }, {
        key: 'devMode',
        get: function get() {
            if (!("_devMode" in Utils)) {
                //var sp = new URL(document.location.href).searchParams;
                if (_SocialApi2.default.isYA) {
                    return Utils._devMode = document.location.href.indexOf('app-99506') > 0;
                }
                var sp = Utils.getSearchParam;
                var viewer_id = sp('viewer_id');
                var logged_user_id = sp('logged_user_id');
                var app_id = sp('api_id');
                Utils._devMode = Utils.endsWith(document.location.pathname, ".html")
                //|| document.location.href.indexOf("gastel") != -1
                || viewer_id == '78421410' //|| viewer_id == '746830'
                || viewer_id == '1152690' || app_id == '6753472'
                //|| logged_user_id == '443796597909' || logged_user_id == '587022090254' || logged_user_id == '236055280912' || logged_user_id == '590741026578' || logged_user_id == '536885159256';
                || sp('env') == 'dev';
            }
            return Utils._devMode;
        }
    }, {
        key: 'canUsePurchases',
        get: function get() {
            if (_SocialApi2.default.isYA) return true;
            var ua = window.navigator.userAgent || "";
            if (ua.indexOf("iPhone") < 0) return true;
            if (_SocialApi2.default.isVK) return !_SocialApi2.default.isMobile;
            if (_SocialApi2.default.isOK) return ua.indexOf("OkApp") < 0;
            return true;
        }
    }]);

    return Utils;
}();

exports.default = Utils;

var Counter = function () {
    function Counter(label, initValue) {
        _classCallCheck(this, Counter);

        this._label = label;
        if (!initValue) initValue = 0;
        this._value = initValue;
        this.animValue = initValue;
    }

    _createClass(Counter, [{
        key: 'value',
        get: function get() {
            return this._value;
        },
        set: function set(value) {
            this._animValue = this._value;
            this._value = value;
            Laya.Tween.to(this, { animValue: value }, 500);
        }
    }, {
        key: 'animValue',
        get: function get() {
            return this._animValue;
        },
        set: function set(value) {
            this._animValue = value;
            this._label.text = String(Math.ceil(value));
        }
    }]);

    return Counter;
}();

},{"./SocialApi":51}],62:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BaseWindow = require("./BaseWindow");

var _BaseWindow2 = _interopRequireDefault(_BaseWindow);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var WndMan = function (_Laya$EventDispatcher) {
    _inherits(WndMan, _Laya$EventDispatcher);

    _createClass(WndMan, null, [{
        key: "EVENT_WND_CHANGED",
        get: function get() {
            return "WND_CHANGED";
        }
    }, {
        key: "inst",
        get: function get() {
            if (!WndMan._inst) {
                WndMan._inst = new WndMan();
            }
            return WndMan._inst;
        }
    }]);

    function WndMan() {
        _classCallCheck(this, WndMan);

        var _this = _possibleConstructorReturn(this, (WndMan.__proto__ || Object.getPrototypeOf(WndMan)).call(this));

        window.WndMan = _this;
        _this._windows = [];
        _this._stack = [];
        _this._curWnd = null;
        _this._blocker = new Laya.Scene();
        _this._blocker.width = 4000; // Laya.stage.width;
        _this._blocker.height = 4000; // Laya.stage.height;
        _this._blocker.visible = false;
        _this._blocker.alpha = 0.2;
        _this._blocker.on(Laya.Event.RESIZE, _this, _this._onBlockerResize);
        _this._onBlockerResize();
        return _this;
    }

    _createClass(WndMan, [{
        key: "add",
        value: function add(wnd) {
            if (this._windows.indexOf(wnd) < 0) {
                this[wnd.name] = wnd;
                this._windows.push(wnd);
                wnd.hide();
                wnd.on(_BaseWindow2.default.EVENT_SHOWN, this, this._onWindowShown);
                wnd.on(_BaseWindow2.default.EVENT_HIDDEN, this, this._onWindowHidden);
                //wnd.on(Laya.Event.CLICK, wnd, function() { this.hide(); });
                this._updateBlockerPos();
            }
        }
    }, {
        key: "_updateBlockerPos",
        value: function _updateBlockerPos() {
            if (!this._windows.length) return;
            var minIdx = 0;
            for (var i in this._windows) {
                var w = this._windows[i];
                minIdx = Math.min(minIdx, w.parent.getChildIndex(w));
            }
            this._windows[0].parent.addChildAt(this._blocker, minIdx);
        }
    }, {
        key: "_onWindowShown",
        value: function _onWindowShown(wnd) {
            if (this._eventProcessing) return;
            this._eventProcessing = true;
            if (this.curWnd) {
                this._stack.push(this.curWnd);
                this.curWnd.hide();
            }
            this._setCurWnd(wnd);
            this._eventProcessing = false;
            this.event(WndMan.EVENT_WND_CHANGED, this.curWnd);
        }
    }, {
        key: "_onWindowHidden",
        value: function _onWindowHidden(wnd) {
            if (this._eventProcessing) return;
            this._eventProcessing = true;
            if (this._stack.length) {
                this._setCurWnd(this._stack.pop());
                this.curWnd.show();
            } else this._setCurWnd(null);
            this._eventProcessing = false;
            this.event(WndMan.EVENT_WND_CHANGED, this.curWnd);
        }
    }, {
        key: "_setCurWnd",
        value: function _setCurWnd(value) {
            this._curWnd = value;
            this._blocker.visible = value != null;
            // if (this._blocker.visible) {
            //     this._blocker.width = Laya.stage.width;
            //     this._blocker.height = Laya.stage.height;
            // }
        }
    }, {
        key: "_onBlockerResize",
        value: function _onBlockerResize() {
            this._blocker.graphics.clear();
            this._blocker.graphics.drawRect(0, 0, this._blocker.width, this._blocker.height / this._blocker.scaleY, "0xffffff");
        }
    }, {
        key: "curWnd",
        get: function get() {
            return this._curWnd;
        }
    }]);

    return WndMan;
}(Laya.EventDispatcher);

exports.default = WndMan;

},{"./BaseWindow":12}],63:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _YandexProfileStorage = require('./YandexProfileStorage');

var _YandexProfileStorage2 = _interopRequireDefault(_YandexProfileStorage);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ysdk = window.ysdk;
var ysdk_player = window.ysdk_player;
var ysdk_data = window.ysdk_data;
var ym = window.ym;

var localStorage = [];
try {
    localStorage = window.localStorage;
} catch (e) {
    console.warn('window.localStorage is not accessable');
};

var Yandex = function () {

    // static get inst() {
    //     if (!Yandex._inst)
    //         Yandex._inst = new Yandex();
    //     return Yandex._inst;
    // }

    function Yandex(validator) {
        _classCallCheck(this, Yandex);

        this._validator = validator;
        window.Yandex = this;
        this.counter = 70986439;
        if (window.ysdk_player) this.profileStorage = new _YandexProfileStorage2.default(this);
        if (ysdk_data) this.ysdk_data_string = JSON.stringify(ysdk_data);
        this._currencyCode = 'RUB';
        ysdk.getPayments({ signed: true }).then(function (payments) {
            this._payments = payments;
            payments.getCatalog().then(function (catalog) {
                // Search short name in catalog (from full one 'com.candygrill.jump.pack*') and fill its price (card.ya)
                for (var i in validator.bankCards) {
                    var card = validator.bankCards[i];
                    var id = card.name.split('.')[3];
                    var c = catalog.filter(function (c) {
                        return c.id == id;
                    })[0];
                    if (c) {
                        card.ya = Number(c.price.match(/\d+/)[0]);
                        if (c.priceCurrencyCode) this._currencyCode = c.priceCurrencyCode;
                    }
                }
            }.bind(this));
            if (window.ysdk_player) this._processNotConsumed();
        }.bind(this));
        this.logInstall();
    }

    _createClass(Yandex, [{
        key: 'isAdsPayed',
        value: function isAdsPayed() {
            return this._validator.bankCards[0] && this._donated >= this._validator.bankCards[0].ya;
        }
    }, {
        key: 'purchase',
        value: function purchase(card) {
            if (this.prePurchase()) {
                return new Promise(function (resolve) {
                    this._payments.purchase(card.shortName).then(function (purchase) {
                        this._addPurchase(purchase.token, purchase.signature, card);
                        this._validate(purchase, card).then(function (ok) {
                            resolve(ok);
                        });
                        this.logPurchase();
                    }.bind(this));
                }.bind(this));
            } else {
                return Promise.resolve(false);
            }
        }
    }, {
        key: 'prePurchase',
        value: function prePurchase() {
            if (window.ysdk_player) return true;
            ysdk.auth.openAuthDialog().then(function () {
                location.reload();
            });
            return false;
        }
    }, {
        key: 'logInstall',
        value: function logInstall() {
            this._logOnceYM('jmp_install');
        }
    }, {
        key: 'logPurchase',
        value: function logPurchase() {
            this._logYM('jmp_purchase');
        }
    }, {
        key: 'logTutor',
        value: function logTutor() {
            this._logOnceYM('jmp_tutor');
        }
    }, {
        key: 'logLevel',
        value: function logLevel(level) {
            if (this.lastLoglevel == level) return;
            this.lastLoglevel = level;
            ysdk.getLeaderboards().then(function (lb) {
                lb.setLeaderboardScore('level', level);
            });
        }
    }, {
        key: 'logAdRewarded',
        value: function logAdRewarded() {
            this._logYM('jmp_adview');
        }
    }, {
        key: 'getData',
        value: function getData(key) {
            return ysdk_data && ysdk_data[key];
        }
    }, {
        key: 'setData',
        value: function setData(key, value, flush) {
            if (!ysdk_data) return;
            ysdk_data[key] = value;
            var ysdk_data_string = JSON.stringify(ysdk_data);
            if (ysdk_data_string != this.ysdk_data_string) {
                this.ysdk_data_string = ysdk_data_string;
                ysdk_player.setData(ysdk_data, flush);
            }
        }
    }, {
        key: '_processNotConsumed',
        value: function _processNotConsumed() {
            console.log('[Yandex] _processNotConsumed');
            this._payments.getPurchases().then(function (purchases) {
                if (purchases.length) {
                    var lastPromise = null;
                    for (var i in purchases) {
                        lastPromise = this._validate(purchases[i]);
                    }lastPromise.then(function () {
                        this._flushPurchases();
                    }.bind(this));
                }
            }.bind(this));
        }
    }, {
        key: '_validate',
        value: function _validate(purchase, card) {
            return new Promise(function (resolve) {
                if (!card) card = this._getPurchaseCard(purchase.purchaseToken) || this._validator.bankCards[0];
                var sign = purchase.signature || this._getPurchase(purchase.purchaseToken);
                console.log('[Yandex] validate purchase productID=' + purchase.productID + ' purchaseToken=' + purchase.purchaseToken + ' signature=' + sign);
                var purchaseInfo = { paymentType: 'yandex', signature: sign };
                return this._validator.validatePurchase({
                    name: purchase.productID,
                    info: purchaseInfo,
                    hash: purchase.purchaseToken
                }, card).then(function (ok) {
                    this._removePurchase(purchase.purchaseToken);
                    this._payments.consumePurchase(purchase.purchaseToken);
                    if (ok) this._donated += Number(card.ya) || 0;
                    resolve(ok);
                }.bind(this)).catch(function (reason) {
                    console.error('[Yandex] validate', reason);
                    resolve(false);
                }.bind(this));
            }.bind(this));
        }
    }, {
        key: '_getPurchase',
        value: function _getPurchase(token) {
            return this._getPurchases()[token];
        }
    }, {
        key: '_getPurchaseCard',
        value: function _getPurchaseCard(token) {
            var id = this._getPurchases()[token + '_card'];
            return this._validator.bankCards.filter(function (c) {
                return c.id == id;
            })[0] || this._validator.bankCards[0];
        }
    }, {
        key: '_getPurchases',
        value: function _getPurchases() {
            return this.getData('purchases') || {};
        }
    }, {
        key: '_setPurchases',
        value: function _setPurchases(purchases) {
            this.setData('purchases', purchases);
        }
    }, {
        key: '_flushPurchases',
        value: function _flushPurchases() {
            this.setData('purchases', this._getPurchases(), true);
        }
    }, {
        key: '_addPurchase',
        value: function _addPurchase(token, signature, card) {
            var purchases = this._getPurchases();
            purchases[token] = signature;
            purchases[token + '_card'] = card.id;
            this._setPurchases(purchases);
        }
    }, {
        key: '_removePurchase',
        value: function _removePurchase(token) {
            var purchases = this._getPurchases();
            delete purchases[token];
            delete purchases[token + '_card'];
            this._setPurchases(purchases);
        }
    }, {
        key: '_logOnceYM',
        value: function _logOnceYM(goal) {
            var KEY = 'ym_logged_' + goal;
            var localValue = '';
            var logged = localStorage[KEY] || ysdk_data && ysdk_data[KEY];
            if (!logged) this._logYM(goal);
            localStorage[KEY] = 1;
            this.setData(KEY, 1, true);
        }
    }, {
        key: '_logYM',
        value: function _logYM(goal) {
            if (!ym) return;
            console.log('[YandexMetrics] goal reached: ' + goal);
            ym(this.counter, 'reachGoal', goal);
        }
    }, {
        key: 'currencyCode',
        get: function get() {
            return this._currencyCode;
        }
    }, {
        key: '_donated',
        get: function get() {
            return this.profileStorage && this.profileStorage.get('donated') || 0;
        },
        set: function set(value) {
            this.profileStorage && this.profileStorage.set('donated', value);
        }
    }]);

    return Yandex;
}();

exports.default = Yandex;

},{"./YandexProfileStorage":64}],64:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var YandexProfileStorage = function () {
    function YandexProfileStorage(yandex) {
        _classCallCheck(this, YandexProfileStorage);

        this.yandex = yandex;
        this.profile = this.yandex.getData('profile') || {};
    }

    _createClass(YandexProfileStorage, [{
        key: 'get',
        value: function get(key) {
            return this.profile[key];
        }
    }, {
        key: 'set',
        value: function set(key, value) {
            this.profile[key] = value;
            this.yandex.setData('profile', this.profile);
        }
    }]);

    return YandexProfileStorage;
}();

exports.default = YandexProfileStorage;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL0xheWFBaXJJREUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9jb21wL0NvbG9yRmlsdGVyU2V0dGVyLmpzIiwic3JjL2NvbXAvRmlsdGVyU2V0dGVyQmFzZS5qcyIsInNyYy9zY3JpcHQvQWRTaG93UG9saWN5LmpzIiwic3JjL3NjcmlwdC9CYWNrZW5kLmpzIiwic3JjL3NjcmlwdC9CYWNrZW5kTW9jay5qcyIsInNyYy9zY3JpcHQvQmFua0NhcmQuanMiLCJzcmMvc2NyaXB0L0JhbmtDYXJkQWRVSS5qcyIsInNyYy9zY3JpcHQvQmFua0NhcmRVSS5qcyIsInNyYy9zY3JpcHQvQmFua1VJLmpzIiwic3JjL3NjcmlwdC9CYXNlV2luZG93LmpzIiwic3JjL3NjcmlwdC9CbG90U3ByaXRlLmpzIiwic3JjL3NjcmlwdC9CbG90U3ByaXRlUG9vbC5qcyIsInNyYy9zY3JpcHQvQ1NWVG9BcnJheS5qcyIsInNyYy9zY3JpcHQvQ2hlc3RVSS5qcyIsInNyYy9zY3JpcHQvRGV2VktTY29yZXMuanMiLCJzcmMvc2NyaXB0L0V2ZW50VGltZXJWaWV3LmpzIiwic3JjL3NjcmlwdC9GbG9hdFVwSGludC5qcyIsInNyYy9zY3JpcHQvRnJpZW5kRGVmZWF0VUkuanMiLCJzcmMvc2NyaXB0L0ZyaWVuZEluZm8uanMiLCJzcmMvc2NyaXB0L0ZyaWVuZHNMaXN0SXRlbS5qcyIsInNyYy9zY3JpcHQvRnJpZW5kc1VJLmpzIiwic3JjL3NjcmlwdC9HYW1lUHJvZ3Jlc3MuanMiLCJzcmMvc2NyaXB0L0dhbWVSZXN1bHRVSS5qcyIsInNyYy9zY3JpcHQvR2FtZVVJLmpzIiwic3JjL3NjcmlwdC9HcmFkaWVudFBsYW5lTWVzaC5qcyIsInNyYy9zY3JpcHQvSGVsaXhDb25maWcuanMiLCJzcmMvc2NyaXB0L0hlbGl4R2FtZS5qcyIsInNyYy9zY3JpcHQvSGVsaXhHYW1lVmlldy5qcyIsInNyYy9zY3JpcHQvSGVsaXhHZW5lcmF0b3JCYXNlLmpzIiwic3JjL3NjcmlwdC9IZWxpeEdlbmVyYXRvckNvbmZpZ0Zsb29ycy5qcyIsInNyYy9zY3JpcHQvSGVsaXhHZW5lcmF0b3JJbmZpbml0UmFuZG9tLmpzIiwic3JjL3NjcmlwdC9IZWxpeFNraW4uanMiLCJzcmMvc2NyaXB0L0hlbGl4Vmlldy5qcyIsInNyYy9zY3JpcHQvSHhCdXR0b24uanMiLCJzcmMvc2NyaXB0L0h4R2xvYmFscy5qcyIsInNyYy9zY3JpcHQvTG9jYWxlLmpzIiwic3JjL3NjcmlwdC9Mb2NhbGVEYXRhLmpzIiwic3JjL3NjcmlwdC9NYWluVUkuanMiLCJzcmMvc2NyaXB0L01lbnVVSS5qcyIsInNyYy9zY3JpcHQvTW91c2VDdHJsLmpzIiwic3JjL3NjcmlwdC9OZXRFcnJvcnMuanMiLCJzcmMvc2NyaXB0L05ldHdvcmsuanMiLCJzcmMvc2NyaXB0L09yZGVyUmVzdWx0VUkuanMiLCJzcmMvc2NyaXB0L1Byb21vVmlldy5qcyIsInNyYy9zY3JpcHQvUmluZ1NsaWNlTWVzaC5qcyIsInNyYy9zY3JpcHQvUmluZ1NsaWNlTWVzaFBvb2wuanMiLCJzcmMvc2NyaXB0L1NjZW5lc09wZW5lci5qcyIsInNyYy9zY3JpcHQvU2V0dGluZ3NBbGwuanMiLCJzcmMvc2NyaXB0L1NvY2lhbEFwaS5qcyIsInNyYy9zY3JpcHQvU291bmRNYW4uanMiLCJzcmMvc2NyaXB0L1NvdW5kVG9nZ2xlLmpzIiwic3JjL3NjcmlwdC9UcmlhbmdsZU1lc2guanMiLCJzcmMvc2NyaXB0L1R1dG9yVUkuanMiLCJzcmMvc2NyaXB0L1VJUmVzaXplQ29udHJvbGxlci5qcyIsInNyYy9zY3JpcHQvVXNlckV2ZW50cy5qcyIsInNyYy9zY3JpcHQvVXNlck9wdGlvbnMuanMiLCJzcmMvc2NyaXB0L1VzZXJQcm9maWxlLmpzIiwic3JjL3NjcmlwdC9Vc2VyVGltZUV2ZW50LmpzIiwic3JjL3NjcmlwdC9VdGlscy5qcyIsInNyYy9zY3JpcHQvV25kTWFuLmpzIiwic3JjL3NjcmlwdC9ZYW5kZXguanMiLCJzcmMvc2NyaXB0L1lhbmRleFByb2ZpbGVTdG9yYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7cWpCQ1ZBOzs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDQSxnQkFBSSxzQkFBSixFQUEyQixvQkFBM0I7QUFDQSxnQkFBSSx3QkFBSixFQUE2QixzQkFBN0I7QUFDQSxnQkFBSSxvQkFBSixFQUF5QixrQkFBekI7QUFDQSxnQkFBSSxtQkFBSixFQUF3QixpQkFBeEI7QUFDQSxnQkFBSSwwQkFBSixFQUErQix3QkFBL0I7QUFDQSxnQkFBSSwwQkFBSixFQUErQix3QkFBL0I7QUFDQSxnQkFBSSwyQkFBSixFQUFnQyx5QkFBaEM7QUFDQSxnQkFBSSxxQkFBSixFQUEwQixtQkFBMUI7QUFDQSxnQkFBSSx3QkFBSixFQUE2QixzQkFBN0I7QUFDQSxnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixxQkFBNUI7QUFDQSxnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDQSxnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDQSxnQkFBSSx5QkFBSixFQUE4Qix1QkFBOUI7QUFDQSxnQkFBSSxtQkFBSixFQUF3QixpQkFBeEI7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixxQkFBNUI7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LFNBQXhCLEVBQW1DLEtBQW5DLENBQXZCO0FBQW1FOzs7Ozs7a0JBM0l4RSxNOzs7Ozs7Ozs7Ozs7O0lDWEEsb0I7QUFDakIsa0NBQVksTUFBWixFQUFvQjtBQUFBOztBQUNoQixhQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0EsYUFBSyxPQUFMLEdBQWUsS0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixTQUFwQixLQUFrQyxFQUFqRDtBQUNIOzs7OzRCQUNHLEcsRUFBSztBQUFFLG1CQUFPLEtBQUssT0FBTCxDQUFhLEdBQWIsQ0FBUDtBQUEyQjs7OzRCQUNsQyxHLEVBQUssSyxFQUFPO0FBQ1osaUJBQUssT0FBTCxDQUFhLEdBQWIsSUFBb0IsS0FBcEI7QUFDQSxpQkFBSyxNQUFMLENBQVksT0FBWixDQUFvQixTQUFwQixFQUErQixLQUFLLE9BQXBDO0FBQ0g7Ozs7OztrQkFUZ0Isb0IiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBCYW5rVUkgZnJvbSBcIi4vc2NyaXB0L0JhbmtVSVwiXG5pbXBvcnQgQmFua0NhcmRVSSBmcm9tIFwiLi9zY3JpcHQvQmFua0NhcmRVSVwiXG5pbXBvcnQgQmFua0NhcmRBZFVJIGZyb20gXCIuL3NjcmlwdC9CYW5rQ2FyZEFkVUlcIlxuaW1wb3J0IEh4QnV0dG9uIGZyb20gXCIuL3NjcmlwdC9IeEJ1dHRvblwiXG5pbXBvcnQgQ2hlc3RVSSBmcm9tIFwiLi9zY3JpcHQvQ2hlc3RVSVwiXG5pbXBvcnQgRXZlbnRUaW1lclZpZXcgZnJvbSBcIi4vc2NyaXB0L0V2ZW50VGltZXJWaWV3XCJcbmltcG9ydCBGcmllbmREZWZlYXRVSSBmcm9tIFwiLi9zY3JpcHQvRnJpZW5kRGVmZWF0VUlcIlxuaW1wb3J0IEZyaWVuZHNMaXN0SXRlbSBmcm9tIFwiLi9zY3JpcHQvRnJpZW5kc0xpc3RJdGVtXCJcbmltcG9ydCBGcmllbmRzVUkgZnJvbSBcIi4vc2NyaXB0L0ZyaWVuZHNVSVwiXG5pbXBvcnQgR2FtZVJlc3VsdFVJIGZyb20gXCIuL3NjcmlwdC9HYW1lUmVzdWx0VUlcIlxuaW1wb3J0IEdhbWVVSSBmcm9tIFwiLi9zY3JpcHQvR2FtZVVJXCJcbmltcG9ydCBGbG9hdFVwSGludCBmcm9tIFwiLi9zY3JpcHQvRmxvYXRVcEhpbnRcIlxuaW1wb3J0IE1haW5VSSBmcm9tIFwiLi9zY3JpcHQvTWFpblVJXCJcbmltcG9ydCBNZW51VUkgZnJvbSBcIi4vc2NyaXB0L01lbnVVSVwiXG5pbXBvcnQgT3JkZXJSZXN1bHRVSSBmcm9tIFwiLi9zY3JpcHQvT3JkZXJSZXN1bHRVSVwiXG5pbXBvcnQgVHV0b3JVSSBmcm9tIFwiLi9zY3JpcHQvVHV0b3JVSVwiXG5pbXBvcnQgU291bmRUb2dnbGUgZnJvbSBcIi4vc2NyaXB0L1NvdW5kVG9nZ2xlXCJcbmltcG9ydCBEZXZWS1Njb3JlcyBmcm9tIFwiLi9zY3JpcHQvRGV2VktTY29yZXNcIlxuaW1wb3J0IFByb21vVmlldyBmcm9tIFwiLi9zY3JpcHQvUHJvbW9WaWV3XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWcge1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy/ms6jlhoxTY3JpcHTmiJbogIVSdW50aW1l5byV55SoXHJcbiAgICAgICAgbGV0IHJlZyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHRcdHJlZyhcInNjcmlwdC9CYW5rVUkuanNcIixCYW5rVUkpO1xuXHRcdHJlZyhcInNjcmlwdC9CYW5rQ2FyZFVJLmpzXCIsQmFua0NhcmRVSSk7XG5cdFx0cmVnKFwic2NyaXB0L0JhbmtDYXJkQWRVSS5qc1wiLEJhbmtDYXJkQWRVSSk7XG5cdFx0cmVnKFwic2NyaXB0L0h4QnV0dG9uLmpzXCIsSHhCdXR0b24pO1xuXHRcdHJlZyhcInNjcmlwdC9DaGVzdFVJLmpzXCIsQ2hlc3RVSSk7XG5cdFx0cmVnKFwic2NyaXB0L0V2ZW50VGltZXJWaWV3LmpzXCIsRXZlbnRUaW1lclZpZXcpO1xuXHRcdHJlZyhcInNjcmlwdC9GcmllbmREZWZlYXRVSS5qc1wiLEZyaWVuZERlZmVhdFVJKTtcblx0XHRyZWcoXCJzY3JpcHQvRnJpZW5kc0xpc3RJdGVtLmpzXCIsRnJpZW5kc0xpc3RJdGVtKTtcblx0XHRyZWcoXCJzY3JpcHQvRnJpZW5kc1VJLmpzXCIsRnJpZW5kc1VJKTtcblx0XHRyZWcoXCJzY3JpcHQvR2FtZVJlc3VsdFVJLmpzXCIsR2FtZVJlc3VsdFVJKTtcblx0XHRyZWcoXCJzY3JpcHQvR2FtZVVJLmpzXCIsR2FtZVVJKTtcblx0XHRyZWcoXCJzY3JpcHQvRmxvYXRVcEhpbnQuanNcIixGbG9hdFVwSGludCk7XG5cdFx0cmVnKFwic2NyaXB0L01haW5VSS5qc1wiLE1haW5VSSk7XG5cdFx0cmVnKFwic2NyaXB0L01lbnVVSS5qc1wiLE1lbnVVSSk7XG5cdFx0cmVnKFwic2NyaXB0L09yZGVyUmVzdWx0VUkuanNcIixPcmRlclJlc3VsdFVJKTtcblx0XHRyZWcoXCJzY3JpcHQvVHV0b3JVSS5qc1wiLFR1dG9yVUkpO1xuXHRcdHJlZyhcInNjcmlwdC9Tb3VuZFRvZ2dsZS5qc1wiLFNvdW5kVG9nZ2xlKTtcblx0XHRyZWcoXCJzY3JpcHQvRGV2VktTY29yZXMuanNcIixEZXZWS1Njb3Jlcyk7XG5cdFx0cmVnKFwic2NyaXB0L1Byb21vVmlldy5qc1wiLFByb21vVmlldyk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDc1MDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSAxMzM0O1xyXG5HYW1lQ29uZmlnLnNjYWxlTW9kZSA9XCJmdWxsXCI7XHJcbkdhbWVDb25maWcuc2NyZWVuTW9kZSA9IFwibm9uZVwiO1xyXG5HYW1lQ29uZmlnLmFsaWduViA9IFwibWlkZGxlXCI7XHJcbkdhbWVDb25maWcuYWxpZ25IID0gXCJjZW50ZXJcIjtcclxuR2FtZUNvbmZpZy5zdGFydFNjZW5lID0gXCJzY2VuZXMvTWFpblNjZW5lLnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IGZhbHNlO1xyXG5cclxuR2FtZUNvbmZpZy5pbml0KCk7XHJcbiIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IENvbG9yRmlsdGVyU2V0dGVyIGZyb20gXCIuL2NvbXAvQ29sb3JGaWx0ZXJTZXR0ZXJcIjtcclxuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9zY3JpcHQvTG9jYWxlXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0TG9jYWxlLmluaXRpYWxpemUoKTtcclxuXHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduViA9IEdhbWVDb25maWcuYWxpZ25WO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnbkggPSBHYW1lQ29uZmlnLmFsaWduSDtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gIXdpbmRvdy5pc1lhbmRleDtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHRsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cdFx0cmVnKFwibGF5YS5lZmZlY3QuQ29sb3JGaWx0ZXJTZXR0ZXJcIixDb2xvckZpbHRlclNldHRlcik7XHJcblxyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IEZpbHRlclNldHRlckJhc2UgZnJvbSBcIi4vRmlsdGVyU2V0dGVyQmFzZVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xvckZpbHRlclNldHRlciBleHRlbmRzIEZpbHRlclNldHRlckJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9uKExheWEuRXZlbnQuQURERUQsIHRoaXMsIHRoaXMuX29uQWRkZWQpO1xyXG4gICAgICAgIHRoaXMub24oTGF5YS5FdmVudC5SRU1PVkVELCB0aGlzLCB0aGlzLl9vblJlbW92ZWQpO1xyXG5cdFx0dGhpcy5fYnJpZ2h0bmVzcz0wOyAvLyAtMTAwIC0gMTAwXHJcblx0XHR0aGlzLl9jb250cmFzdD0wOyAvLyAtMTAwIC0gMTAwXHJcblx0XHR0aGlzLl9zYXR1cmF0aW9uPTA7IC8vIC0xMDAgLSAxMDBcclxuXHRcdHRoaXMuX2h1ZT0wOyAvLyAtMTgwIC0gMTgwXHJcblx0XHR0aGlzLl9yZWQ9MDsgLy8gMC0yNTVcclxuXHRcdHRoaXMuX2dyZWVuPTA7IC8vIDAtMjU1XHJcblx0XHR0aGlzLl9ibHVlPTA7IC8vIDAtMjU1XHJcblx0XHR0aGlzLl9hbHBoYT0wOyAvLyAwLTI1NVxyXG4gICAgICAgIHRoaXMuX2NvbG9yPW51bGw7IC8vICcjUlJHR0JCJ1xyXG4gICAgfVxyXG4gICAgZ2V0IGFscGhhKCkgeyByZXR1cm4gdGhpcy5fYWxwaGE7IH1cclxuICAgIHNldCBhbHBoYSh2YWx1ZSkgeyB0aGlzLl9hbHBoYSA9IHZhbHVlOyB0aGlzLnBhcmFtQ2hhbmdlZCgpOyB9XHJcbiAgICBnZXQgcmVkKCkgeyByZXR1cm4gdGhpcy5fcmVkOyB9XHJcbiAgICBzZXQgcmVkKHZhbHVlKSB7IHRoaXMuX3JlZCA9IHZhbHVlOyB0aGlzLnBhcmFtQ2hhbmdlZCgpOyB9XHJcbiAgICBnZXQgZ3JlZW4oKSB7IHJldHVybiB0aGlzLl9ncmVlbjsgfVxyXG4gICAgc2V0IGdyZWVuKHZhbHVlKSB7IHRoaXMuX2dyZWVuID0gdmFsdWU7IHRoaXMucGFyYW1DaGFuZ2VkKCk7IH1cclxuICAgIGdldCBibHVlKCkgeyByZXR1cm4gdGhpcy5fYmx1ZTsgfVxyXG4gICAgc2V0IGJsdWUodmFsdWUpIHsgdGhpcy5fYmx1ZSA9IHZhbHVlOyB0aGlzLnBhcmFtQ2hhbmdlZCgpOyB9XHJcbiAgICBnZXQgYnJpZ2h0bmVzcygpIHsgcmV0dXJuIHRoaXMuX2JyaWdodG5lc3M7IH1cclxuICAgIHNldCBicmlnaHRuZXNzKHZhbHVlKSB7IHRoaXMuX2JyaWdodG5lc3MgPSB2YWx1ZTsgdGhpcy5wYXJhbUNoYW5nZWQoKTsgfVxyXG4gICAgZ2V0IGNvbnRyYXN0KCkgeyByZXR1cm4gdGhpcy5fY29udHJhc3Q7IH1cclxuICAgIHNldCBjb250cmFzdCh2YWx1ZSkgeyB0aGlzLl9jb250cmFzdCA9IHZhbHVlOyB0aGlzLnBhcmFtQ2hhbmdlZCgpOyB9XHJcbiAgICBnZXQgaHVlKCkgeyByZXR1cm4gdGhpcy5faHVlOyB9XHJcbiAgICBzZXQgaHVlKHZhbHVlKSB7IHRoaXMuX2h1ZSA9IHZhbHVlOyB0aGlzLnBhcmFtQ2hhbmdlZCgpOyB9XHJcbiAgICBnZXQgc2F0dXJhdGlvbigpIHsgcmV0dXJuIHRoaXMuX3NhdHVyYXRpb247IH1cclxuICAgIHNldCBzYXR1cmF0aW9uKHZhbHVlKSB7IHRoaXMuX3NhdHVyYXRpb24gPSB2YWx1ZTsgdGhpcy5wYXJhbUNoYW5nZWQoKTsgfVxyXG4gICAgZ2V0IGNvbG9yKCkgeyByZXR1cm4gdGhpcy5fY29sb3I7IH1cclxuICAgIHNldCBjb2xvcih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2NvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgdmFyIGNvbG9yMCA9IExheWEuQ29sb3JVdGlscy5jcmVhdGUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX3JlZCA9IGNvbG9yMC5hcnJDb2xvclswXSAqIDI1NTtcclxuICAgICAgICB0aGlzLl9ncmVlbiA9IGNvbG9yMC5hcnJDb2xvclsxXSAqIDI1NTtcclxuICAgICAgICB0aGlzLl9ibHVlID0gY29sb3IwLmFyckNvbG9yWzJdICogMjU1O1xyXG4gICAgICAgIHRoaXMucGFyYW1DaGFuZ2VkKCk7XHJcbiAgICB9XHJcbiAgICBidWlsZEZpbHRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5fZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlci5yZXNldCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIuY29sb3IodGhpcy5yZWQsIHRoaXMuZ3JlZW4sIHRoaXMuYmx1ZSwgdGhpcy5hbHBoYSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlci5hZGp1c3RIdWUodGhpcy5odWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIuYWRqdXN0Q29udHJhc3QodGhpcy5jb250cmFzdCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlci5hZGp1c3RCcmlnaHRuZXNzKHRoaXMuYnJpZ2h0bmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlci5hZGp1c3RTYXR1cmF0aW9uKHRoaXMuc2F0dXJhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLmJ1aWxkRmlsdGVyKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGaWx0ZXJTZXR0ZXJCYXNlIGV4dGVuZHMgTGF5YS5Ob2RlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9maWx0ZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHRhcmdldCgpIHsgcmV0dXJuIHRoaXMuX3RhcmdldDsgfVxyXG4gICAgc2V0IHRhcmdldCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXQpIHtcclxuICAgICAgICAgICAgTGF5YS5VSVV0aWxzLmNsZWFyRmlsdGVyKHRoaXMuX3RhcmdldCwgQ29sb3JGaWx0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl90YXJnZXQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlciA9IG5ldyBMYXlhLkNvbG9yRmlsdGVyKCk7XHJcbiAgICAgICAgICAgIExheWEuVUlVdGlscy5hZGRGaWx0ZXIodGhpcy5fdGFyZ2V0LCB0aGlzLl9maWx0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHBhcmFtQ2hhbmdlZCgpIHtcclxuICAgICAgICBMYXlhLnRpbWVyLmNhbGxMYXRlcih0aGlzLCB0aGlzLmJ1aWxkRmlsdGVyKTtcclxuICAgIH1cclxuICAgIGJ1aWxkRmlsdGVyKCkge1xyXG4gICAgICAgIC8vIEZvciBvdmVycmlkaW5nXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEJhY2tlbmQgZnJvbSBcIi4vQmFja2VuZFwiXHJcbmltcG9ydCBTb2NpYWxBcGkgZnJvbSBcIi4vU29jaWFsQXBpXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkU2hvd1BvbGljeSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFja2VuZCwgcHJvbW9BY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kID0gYmFja2VuZDtcclxuICAgICAgICB0aGlzLl9wcm9tb0FjdGlvbiA9IHByb21vQWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTmV3R2FtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fdHJ5U2tpcEZpcnN0KCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgbGV2ZWwgPSB0aGlzLl9iYWNrZW5kLnByb2ZpbGUubGV2ZWw7XHJcbiAgICAgICAgLy8gaWYgKFNvY2lhbEFwaS5pc1lBKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChsZXZlbCA+IDEpXHJcbiAgICAgICAgLy8gICAgICAgICBTb2NpYWxBcGkuaW5zdC5hZHNTaG93KCk7XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKGxldmVsID49IDMgJiYgdGhpcy5fYmFja2VuZC51c2VyRXZlbnRzLkFkLnNob3dCZWZvcmVTdGFydCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb3VudERvd24tLTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvdW50RG93biA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb3VudERvd24gPSBsZXZlbCA8IDIwID8gMyA6IDI7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3RyeVNob3dQcm9tbygpKVxyXG4gICAgICAgICAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0LmFkc1Nob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeVNob3dQcm9tbygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdHJ5U2tpcEZpcnN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb3VudERvd24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb3VudERvd24gPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX3RyeVNob3dQcm9tbygpIHtcclxuICAgICAgICByZXR1cm4gIVNvY2lhbEFwaS5pc1lBICYmIHRoaXMuX3Byb21vQWN0aW9uICYmIHRoaXMuX3Byb21vQWN0aW9uKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTmV0d29yayBmcm9tIFwiLi9OZXR3b3JrXCJcclxuaW1wb3J0IE5ldEVycm9ycyBmcm9tIFwiLi9OZXRFcnJvcnNcIlxyXG5pbXBvcnQgU2V0dGluZ3NBbGwgZnJvbSBcIi4vU2V0dGluZ3NBbGxcIlxyXG5pbXBvcnQgVXNlclByb2ZpbGUgZnJvbSBcIi4vVXNlclByb2ZpbGVcIlxyXG5pbXBvcnQgVXNlckV2ZW50cyBmcm9tIFwiLi9Vc2VyRXZlbnRzXCJcclxuaW1wb3J0IEJhbmtDYXJkIGZyb20gXCIuL0JhbmtDYXJkXCJcclxuaW1wb3J0IFVzZXJPcHRpb25zIGZyb20gXCIuL1VzZXJPcHRpb25zXCJcclxuaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhY2tlbmQgZXh0ZW5kcyBMYXlhLkV2ZW50RGlzcGF0Y2hlciB7XHJcblxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfU0VUVElOR1NfQUxMKCkgeyByZXR1cm4gXCJzZXR0aW5ncy5nZXRcIjsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfUFJPRklMRSgpIHsgcmV0dXJuIFwidXNlci5wcm9maWxlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VSVkVSX1VTRVJfRVZFTlRTKCkgeyByZXR1cm4gXCJ1c2VyLmV2ZW50c1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9VU0VSU19HRVQoKSB7IHJldHVybiBcInVzZXJzLmdldFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9VU0VSU19QUk9GSUxFKCkgeyByZXR1cm4gXCJ1c2Vycy5wcm9maWxlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VSVkVSX0dBTUVfU1RBUlQoKSB7IHJldHVybiBcImdhbWUuc3RhcnRcIjsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfR0FNRV9TRVRfUFJPR1JFU1MoKSB7IHJldHVybiBcImdhbWUuc2V0UHJvZ3Jlc3NcIjsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfR0FNRV9DT01QTEVURSgpIHsgcmV0dXJuIFwiZ2FtZS5jb21wbGV0ZVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9HQU1FX1JFU1VNRSgpIHsgcmV0dXJuIFwiZ2FtZS5yZXN1bWVcIjsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfRlJJRU5EX0FTSygpIHsgcmV0dXJuIFwiZnJpZW5kcy5hc2tIZWxwXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VSVkVSX0ZSSUVORF9IRUxQKCkgeyByZXR1cm4gXCJmcmllbmRzLmhlbHBcIjsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfRlJJRU5EX0dFVF9BU0soKSB7IHJldHVybiBcImZyaWVuZHMuZ2V0QXNrXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VSVkVSX1JFQ0VJVkVfTElGRSgpIHsgcmV0dXJuICdyZWNlaXZlLmxpZmUnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9SRUNFSVZFX0NIRVNUKCkgeyByZXR1cm4gJ3JlY2VpdmUuY2hlc3QnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9SRUNFSVZFX0hFTFBTKCkgeyByZXR1cm4gJ3VzZXIucmVjZWl2ZUhlbHBzJzsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfQkFOS19DQVJEUygpIHsgcmV0dXJuICdiYW5rLmNhcmRzJzsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfQURfQ0xBSU1fUkVXQVJEKCkgeyByZXR1cm4gJ2FkLmNsYWltUmV3YXJkJzsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfVVNFUl9PUFRJT05fR0VUX0FMTCgpIHsgcmV0dXJuICd1c2VyLm9wdGlvbi5nZXRBbGwnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZFUl9VU0VSX09QVElPTl9TRVQoKSB7IHJldHVybiAndXNlci5vcHRpb24uc2V0JzsgfVxyXG4gICAgc3RhdGljIGdldCBTRVJWRVJfR0FNRV9MT0FESU5HKCkgeyByZXR1cm4gJ3N5c3RlbUNvbW1hbmRzLmdhbWVMb2FkaW5nJzsgfVxyXG4gICAgXHJcbiAgICBzdGF0aWMgZ2V0IENMSUVOVF9TRVRUSU5HU19BTEwoKSB7IHJldHVybiBcImNsaWVudC5zZXR0aW5ncy5hbGxcIjsgfVxyXG4gICAgc3RhdGljIGdldCBDTElFTlRfUFJPRklMRSgpIHsgcmV0dXJuIFwiY2xpZW50LnVzZXIucHJvZmlsZVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENMSUVOVF9VU0VSX0VWRU5UUygpIHsgcmV0dXJuIFwiY2xpZW50LnVzZXIuZXZlbnRzXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgQ0xJRU5UX1VTRVJTX0dFVCgpIHsgcmV0dXJuIFwiY2xpZW50LnVzZXJzLmdldFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENMSUVOVF9VU0VSU19QUk9GSUxFKCkgeyByZXR1cm4gXCJjbGllbnQudXNlcnMucHJvZmlsZVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENMSUVOVF9CQU5LX0NBUkRTKCkgeyByZXR1cm4gJ2NsaWVudC5iYW5rLmNhcmRzJzsgfVxyXG4gICAgc3RhdGljIGdldCBDTElFTlRfRlJJRU5EX0dFVF9BU0soKSB7IHJldHVybiBcImNsaWVudC5mcmllbmRzLmdldEFza1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENMSUVOVF9VU0VSX09QVElPTl9HRVRfQUxMKCkgeyByZXR1cm4gJ2NsaWVudC51c2VyLm9wdGlvbi5nZXRBbGwnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVSUk9SX0lORk9fVVJHRU5UKCkgeyByZXR1cm4gXCJjbGllbnQuZXJyb3IuaW5mb1VyZ2VudFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVSUk9SX0VYQ0VQVElPTigpIHsgcmV0dXJuIFwiY2xpZW50LmVycm9yLmV4Y2VwdGlvblwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVSUk9SX0dBTUUoKSB7IHJldHVybiBcImNsaWVudC5lcnJvci5nYW1lXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVJST1JfTkVUV09SSygpIHsgcmV0dXJuIFwiRVJST1JfTkVUV09SS1wiOyB9XHJcblxyXG4gICAgc3RhdGljIGdldCBDT0RFX0VSUl9VTktOT1dOKCkgeyByZXR1cm4gLTUwMDAwOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENPREVfRVJSX1JFU09VUkNFX09QRVJBVElPTigpIHsgcmV0dXJuIDUwMDsgfVxyXG4gICAgc3RhdGljIGdldCBDT0RFX0VSUl9FVkVOVF9UWVBFKCkgeyByZXR1cm4gNTAxOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENPREVfRVJSX0VWRU5UX1BBUkFNX1RZUEUoKSB7IHJldHVybiA1MDI7IH1cclxuICAgIHN0YXRpYyBnZXQgQ09ERV9FUlJfRVZFTlRfTk9UX0ZPVU5EKCkgeyByZXR1cm4gNTAzOyB9XHJcbiAgICBzdGF0aWMgZ2V0IENPREVfRVJSX1NUQVRFKCkgeyByZXR1cm4gNTA0OyB9XHJcblxyXG4gICAgc3RhdGljIGdldCBDT0lOU19GT1JfQUQoKSB7IHJldHVybiAyMDsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRva2VuLCB1cmwsIGRpc2FibGVBZFN0YXRzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xyXG4gICAgICAgIHRoaXMuX2NtZElkID0gMDtcclxuICAgICAgICB0aGlzLl9uZXR3b3JrID0gbmV3IE5ldHdvcmsodXJsIHx8IFwiL2FwaS13ZWIvdjFcIiwgdG9rZW4pO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLm9uKEJhY2tlbmQuQ0xJRU5UX1NFVFRJTkdTX0FMTCwgdGhpcywgdGhpcy5fb25TZXR0aW5nc0FsbCk7XHJcbiAgICAgICAgdGhpcy5vbihCYWNrZW5kLkNMSUVOVF9QUk9GSUxFLCB0aGlzLCB0aGlzLl9vblByb2ZpbGUpO1xyXG4gICAgICAgIHRoaXMub24oQmFja2VuZC5DTElFTlRfVVNFUl9FVkVOVFMsIHRoaXMsIHRoaXMuX29uVXNlckV2ZW50cyk7XHJcbiAgICAgICAgdGhpcy5vbihCYWNrZW5kLkNMSUVOVF9CQU5LX0NBUkRTLCB0aGlzLCB0aGlzLl9vbkJhbmtDYXJkcyk7XHJcbiAgICAgICAgdGhpcy5vbihCYWNrZW5kLkNMSUVOVF9GUklFTkRfR0VUX0FTSywgdGhpcywgdGhpcy5fb25GcmllbmRHZXRBc2spO1xyXG4gICAgICAgIHRoaXMub24oQmFja2VuZC5DTElFTlRfVVNFUlNfR0VULCB0aGlzLCB0aGlzLl9vblVzZXJzR2V0KTtcclxuICAgICAgICB0aGlzLm9uKEJhY2tlbmQuQ0xJRU5UX1VTRVJfT1BUSU9OX0dFVF9BTEwsIHRoaXMsIHRoaXMuX29uVXNlck9wdGlvbik7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2ZyZWVSZXN1bWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fdXNlck9wdGlvbnMgPSBuZXcgVXNlck9wdGlvbnModGhpcyk7XHJcbiAgICAgICAgaWYgKCFkaXNhYmxlQWRTdGF0cykge1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihTb2NpYWxBcGkuRVZFTlRfQURTX1JFUVVFU1RFRCwgdGhpcywgZnVuY3Rpb24oKSB7IHRoaXMuX3N0YXRBZCh7cmVxdWVzdDoxfSk7IH0pO1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihTb2NpYWxBcGkuRVZFTlRfQURTX05PLCB0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5fc3RhdEFkKHthYnNlbnQ6MX0pOyB9KTtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Qub24oU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUQVJURUQsIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLl9zdGF0QWQoe3J1bjoxfSk7IH0pO1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfQ09NUExFVEUsIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLl9zdGF0QWQoe2NvbXBsZXRlOjF9KTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXNwZW5kZWQoKSB7IHJldHVybiAhdGhpcy5fd29ya2luZzsgfVxyXG4gICAgc3VzcGVuZCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3VzcGVuZCkge1xyXG4gICAgICAgICAgICB0aGlzLl93b3JraW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIExheWEudGltZXIuY2xlYXJBbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN1c3BlbmRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl93b3JraW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRlZCA9IHRoaXMuX2N1cnJlbnQuY29uY2F0KHRoaXMuX3BlbmRlZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLl9vbkZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wZW5kZWQgPSBbXTtcclxuICAgICAgICB0aGlzLnJlc3VtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExvYWRpbmdQcm9ncmVzcyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9HQU1FX0xPQURJTkcsIHtcclxuICAgICAgICAgICAgbG9hZFBlcmNlbnQ6IHZhbHVlLFxyXG4gICAgICAgICAgICBvc1ZlcnNpb246IHdpbmRvdy5uYXZpZ2F0b3IgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IFwiXCIsXHJcbiAgICAgICAgICAgIHdlYmdsRW5hYmxlZDogd2luZG93LklzV2ViR0xTdXBwb3J0ZWQoKSA/ICcxJyA6ICcwJyxcclxuICAgICAgICAgICAgaGFzU29jaWFsQ29ubmVjdDogU29jaWFsQXBpLmluc3QuaW5pdGlhbGl6ZWQgPyAnMScgOiAnMCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByb2ZpbGUoKSB7IHJldHVybiB0aGlzLl9wcm9maWxlOyB9XHJcbiAgICBnZXQgc2V0dGluZ3NBbGwoKSB7IHJldHVybiB0aGlzLl9zZXR0aW5nc0FsbDsgfVxyXG4gICAgZ2V0IHVzZXJFdmVudHMoKSB7IHJldHVybiB0aGlzLl91c2VyRXZlbnRzOyB9XHJcbiAgICBnZXQgYmFua0NhcmRzKCkgeyByZXR1cm4gdGhpcy5fYmFua0NhcmRzOyB9XHJcbiAgICBnZXQgdXNlck9wdGlvbnMoKSB7IHJldHVybiB0aGlzLl91c2VyT3B0aW9uczsgfVxyXG4gICAgZ2V0IHJlc3VtZUNvdW50KCkgeyByZXR1cm4gdGhpcy5fcmVzdW1lQ291bnQ7IH1cclxuICAgIGdldCBmcmVlUmVzdW1lQ291bnQoKSB7IHJldHVybiB0aGlzLl9mcmVlUmVzdW1lQ291bnQ7IH1cclxuICAgIGdldCByZXN1bWVDb3N0KCkgeyByZXR1cm4gdGhpcy5zZXR0aW5nc0FsbC5nZXRNb25leVNvZnQ0UmVzdW1lKHRoaXMuX3Jlc3VtZUNvdW50KTsgfVxyXG4gICAgZ2V0IHJlc3VtZUNvc3RPbGQoKSB7IHJldHVybiB0aGlzLnJlc3VtZUNvc3Q7IH1cclxuXHJcbiAgICAvLyBBUEkgLS0tPlxyXG4gICAgc2V0dGluZ3NBbGxHZXQoKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NBbGwgPSBuZXcgU2V0dGluZ3NBbGwoe1xyXG4gICAgICAgICAgICBtb25leVNvZnRQZXJGcmllbmRIZWxwOiAxMCxcclxuICAgICAgICAgICAgdGltZUJldHdlZW5GcmllbmRIZWxwOiAyMTYwMCxcclxuICAgICAgICAgICAgbW9uZXlTb2Z0NFJlc3VtZTogMTAwMCxcclxuICAgICAgICAgICAgYXJyYXlNb25leVNvZnQ0UmVzdW1lOiBbMTAwLDIwMCw1MDAsMTAwMCwyMDAwLDUwMDBdLFxyXG4gICAgICAgICAgICBjaGVzdDoge1xyXG4gICAgICAgICAgICAgICAgdGltZU9wZW46IDIxNjAwLFxyXG4gICAgICAgICAgICAgICAgbWF4TW9uZXlTb2Z0OiAxMDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGltZVRvRnJlZUxpZmU6IDEwODAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX1NFVFRJTkdTX0FMTCk7XHJcbiAgICB9XHJcbiAgICBiYW5rQ2FyZHNHZXQoKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0JBTktfQ0FSRFMpO1xyXG4gICAgfVxyXG4gICAgcHJvZmlsZUdldCgpIHtcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfUFJPRklMRSk7XHJcbiAgICB9XHJcbiAgICB1c2VyRXZlbnRzR2V0KCkge1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9VU0VSX0VWRU5UUyk7XHJcbiAgICB9XHJcbiAgICB1c2Vyc0dldChpZHNTb2NpYWwpIHtcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfVVNFUlNfR0VULCB7IG5ldDpTb2NpYWxBcGkucHJvdmlkZXJJZCwgaWRzU29jaWFsOiBpZHNTb2NpYWwgfSk7XHJcbiAgICB9XHJcbiAgICBnYW1lU3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fZnJlZVJlc3VtZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLl9yZXN1bWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0dBTUVfU1RBUlQpO1xyXG4gICAgfVxyXG4gICAgZ2FtZVdpbihzY29yZXMpIHtcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfR0FNRV9TRVRfUFJPR1JFU1MsIHsgbGV2ZWxVcDogdHJ1ZSwgc2NvcmVzOiBzY29yZXMgfSk7XHJcbiAgICB9XHJcbiAgICBnYW1lTG9vc2Uoc2NvcmVzKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0dBTUVfU0VUX1BST0dSRVNTLCB7IHNjb3Jlczogc2NvcmVzIH0pO1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9HQU1FX0NPTVBMRVRFLCB7IHNjb3Jlczogc2NvcmVzIH0pO1xyXG4gICAgfVxyXG4gICAgLypnYW1lUmVzdW1lKHVzZVNvZnRNb25leSkge1xyXG4gICAgICAgIGlmICghdXNlU29mdE1vbmV5KVxyXG4gICAgICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfUkVDRUlWRV9MSUZFLCB7IGlkOiB0aGlzLnVzZXJFdmVudHMuTGlmZS5pZCB9KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VtZUNvdW50Kys7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0dBTUVfUkVTVU1FLCB1c2VTb2Z0TW9uZXkgPyB7IHVzZU1vbmV5U29mdDogdHJ1ZSB9IDogeyB1c2VMaWZlOiB0cnVlIH0pO1xyXG4gICAgfSovXHJcbiAgICBnYW1lUmVzdW1lRnJlZSgpIHtcclxuICAgICAgICB0aGlzLl9mcmVlUmVzdW1lQ291bnQrKztcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfUkVDRUlWRV9MSUZFLCB7IGlkOiB0aGlzLnVzZXJFdmVudHMuTGlmZS5pZCB9KTtcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfR0FNRV9SRVNVTUUsIHsgdXNlTGlmZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIGdhbWVSZXN1bWVTb2Z0KCkge1xyXG4gICAgICAgIHRoaXMuX3Jlc3VtZUNvdW50Kys7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0dBTUVfUkVTVU1FLCB7IHVzZU1vbmV5U29mdDogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIC8vZ2FtZVJlc3VtZUFkcygpIHtcclxuICAgIC8vICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9HQU1FX1JFU1VNRSwgeyB1c2VBZHM6IHRydWUgfSk7XHJcbiAgICAvL31cclxuICAgIHVzZXJPcHRpb25zR2V0KCkge1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9VU0VSX09QVElPTl9HRVRfQUxMKTtcclxuICAgIH1cclxuICAgIHVzZXJPcHRpb25TZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9VU0VSX09QVElPTl9TRVQsIHtrZXk6a2V5LCB2YWx1ZTp2YWx1ZX0pO1xyXG4gICAgfVxyXG4gICAgLy8gZnJpZW5kSGVscChpZCkge1xyXG4gICAgLy8gICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9GUklFTkRfSEVMUCwgeyBzb2NpYWxfaWQ6IGlkIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgZnJpZW5kQXNrKGlkKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0ZSSUVORF9BU0ssIHsgc29jaWFsX2lkOiBpZCB9KTtcclxuICAgIH1cclxuICAgIGZyaWVuZFJlcGx5QWxsKCkge1xyXG4gICAgICAgIHRoaXMuX2FwaShCYWNrZW5kLlNFUlZFUl9GUklFTkRfR0VUX0FTSyk7XHJcbiAgICB9XHJcbiAgICByZWNlaXZlSGVscHMoKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX1JFQ0VJVkVfSEVMUFMpO1xyXG4gICAgfVxyXG4gICAgcmVjZWl2ZUNoZXN0KCkge1xyXG4gICAgICAgIC8vdGhpcy5fbW9uZXlCZWZvcmVDaGVzdCA9IHRoaXMucHJvZmlsZS5tb25leVNvZnQ7XHJcbiAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX1JFQ0VJVkVfQ0hFU1QsIHsgaWQ6IHRoaXMudXNlckV2ZW50cy5DaGVzdC5pZCB9KTtcclxuICAgIH1cclxuICAgIGFkZENvaW5zRm9yQWQoKSB7XHJcbiAgICAgICAgLy90aGlzLl9zdGF0QWQoe2NvbXBsZXRlOjF9KTtcclxuICAgICAgICB0aGlzLl9hcGkoQmFja2VuZC5TRVJWRVJfQURfQ0xBSU1fUkVXQVJEKTtcclxuICAgIH1cclxuICAgIGZyaWVuZFNjb3JlVXBkYXRlKGZyaWVuZEluZm9zKSB7XHJcbiAgICAgICAgaWYgKCFmcmllbmRJbmZvcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLm9uY2UoQmFja2VuZC5DTElFTlRfVVNFUlNfR0VULCB0aGlzLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VycyA9IGRhdGEubGlzdDtcclxuICAgICAgICAgICAgdmFyIHNvY1RvRnJpZW5kID0gZnJpZW5kSW5mb3MucmVkdWNlKChzLGUpID0+IHsgc1tlLmlkXSA9IGU7IHJldHVybiBzOyB9LCB7fSk7XHJcbiAgICAgICAgICAgIHZhciBnYW1lVG9Tb2NJZCA9IHVzZXJzLnJlZHVjZSgocyxlKSA9PiB7IHNbZS5pZF09ZS5pZFNvY2lhbDsgcmV0dXJuIHM7IH0sIHt9KTtcclxuICAgICAgICAgICAgdmFyIGxlZnRDb3VudCA9IGZyaWVuZEluZm9zLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIG9uUHJvZmlsZSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJvblByb2ZpbGVcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBzb2NUb0ZyaWVuZFtnYW1lVG9Tb2NJZFtkYXRhLmlkXV0uc2NvcmUgPSBkYXRhLnNjb3Jlc01heDtcclxuICAgICAgICAgICAgICAgIHVzZXJzLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmICghdXNlcnMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2ZmKEJhY2tlbmQuQ0xJRU5UX1VTRVJTX1BST0ZJTEUsIHRoaXMsIG9uUHJvZmlsZSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmICh1c2Vyc1tpXS5pZCkgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX1VTRVJTX1BST0ZJTEUsIHtpZEludGVybmFsOnVzZXJzW2ldLmlkfSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHVzZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHRoaXMub24oQmFja2VuZC5DTElFTlRfVVNFUlNfUFJPRklMRSwgdGhpcywgb25Qcm9maWxlKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudXNlcnNHZXQoZnJpZW5kSW5mb3MubWFwKGUgPT4gZS5pZCkpO1xyXG4gICAgICAgIC8vdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX1VTRVJTX0dFVCwgIGZyaWVuZEluZm9zLm1hcChlID0+IGUuaWQpKTtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlUHVyY2hhc2UocHVyY2hhc2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICB2YXIgb25SZXNwb25zZSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc2ggPT0gcHVyY2hhc2UuaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdjbGllbnQuYmFuay5idXknLCB0aGlzLCBvblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEucmVzdWx0ID09ICdzdWNjZXNzJyB8fCBkYXRhLnJlc3VsdCA9PSAnZHVwbGljYXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vbignY2xpZW50LmJhbmsuYnV5JywgdGhpcywgb25SZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FwaSgnYmFuay5idXknLCBwdXJjaGFzZSk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIF9zdGF0QWQoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2FwaShcInN5c3RlbUNvbW1hbmRzLnN0YXRzLmFkXCIsIGRhdGEpO1xyXG4gICAgfVxyXG4gICAgZGV2QWRkTW9uZXkodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hcGkoXCJzeXN0ZW1Db21tYW5kcy5kZWJ1Zy5zZXRVc2VyUGFyYW1zXCIsIHsgbW9uZXlTb2Z0OiB0aGlzLnByb2ZpbGUubW9uZXlTb2Z0ICsgdmFsdWUgfSk7XHJcbiAgICB9XHJcbiAgICBkZXZBZGRUb0NoZXN0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpKFwic3lzdGVtQ29tbWFuZHMuZGVidWcuYWRkVG9DaGVzdFwiLCB7IG1vbmV5U29mdDogdmFsdWUgfSk7XHJcbiAgICB9XHJcbiAgICBkZXZTcGVlZFVwRXZlbnQoaWQpIHtcclxuICAgICAgICB0aGlzLl9hcGkoXCJzeXN0ZW1Db21tYW5kcy5kZWJ1Zy5jaGFuZ2VUaW1lRXZlbnRcIiwgeyBpZDogaWQsIHRpbWVSZW1haW46IDAgfSk7XHJcbiAgICB9XHJcbiAgICBkZXZTZXRQcm9ncmVzcyhsZXZlbCwgc2NvcmVzKSB7XHJcbiAgICAgICAgbGV2ZWwgPSBOdW1iZXIobGV2ZWwpO1xyXG4gICAgICAgIHNjb3JlcyA9IE51bWJlcihzY29yZXMpO1xyXG4gICAgICAgIGlmIChpc05hTihsZXZlbCkgfHwgaXNOYU4oc2NvcmVzKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2FwaSgnc3lzdGVtQ29tbWFuZHMuZGVidWcuc2V0UHJvZ3Jlc3MnLCB7IGxldmVsOiBNYXRoLm1heCgxLCBsZXZlbCksIHNjb3JlczogMCwgc2NvcmVzTWF4OiBNYXRoLm1heCgwLCBzY29yZXMpIH0pO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpOyB9LCA1MDApO1xyXG4gICAgfVxyXG4gICAgLy8gPC0tLSBBUElcclxuXHJcbiAgICBfYXBpKGNtZCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3BlbmRlZC5wdXNoKHtpZDogKyt0aGlzLl9jbWRJZCwgY21kOmNtZCwgZGF0YTooZGF0YSB8fCB7fSl9KTtcclxuICAgIH1cclxuICAgIF9vbkZyYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50IHx8ICF0aGlzLl9wZW5kZWQubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX3BlbmRlZDtcclxuICAgICAgICB0aGlzLl9wZW5kZWQgPSBbXTtcclxuICAgICAgICB0aGlzLl9uZXR3b3JrLnBvc3Qoe1xyXG4gICAgICAgICAgICB0b2tlbjp0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgdGltZTpuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGNvbW1hbmRzOiB0aGlzLl9jdXJyZW50XHJcbiAgICAgICAgfSwgdGhpcy5fb25TdWNjZXNzLmJpbmQodGhpcyksIHRoaXMuX29uRmFpbC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIF9vblN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5fY3VycmVudDtcclxuICAgICAgICBmb3IgKHZhciBpZCBpbiBkYXRhLmNvbW1hbmRzKSB7XHJcbiAgICAgICAgICAgIHZhciBjbWRQYWNrID0gZGF0YS5jb21tYW5kc1tpZF07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY21kUGFjaylcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NSZXBseShpZCwgY3VycmVudFtpZF0sIGNtZFBhY2tbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudCA9PSB0aGlzLl9jdXJyZW50KVxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIF9vbkZhaWwoY29kZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIC8vdGhpcy5zdXNwZW5kKCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQmFja2VuZDogKCcgKyBjb2RlICsgJykgJyArIG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXZlbnQoQmFja2VuZC5FUlJPUl9ORVRXT1JLLCB7Y29kZTpjb2RlLCBtZXNzYWdlOm1lc3NhZ2V9KTtcclxuICAgIH1cclxuICAgIF9wcm9jZXNzUmVwbHkoaWQsIHJlcXVlc3QsIHJlcGx5KSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXBseSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSByZXBseS5kYXRhO1xyXG4gICAgICAgICAgICBpZiAocmVwbHkuc3RhdHVzICE9ICdvaycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhY2tlbmQ6ICgnICsgZGF0YS5jb2RlICsgJykgJyArIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YS5fcmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQocmVwbHkuY21kLCBkYXRhKTtcclxuICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29uU2V0dGluZ3NBbGwoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzQWxsID0gbmV3IFNldHRpbmdzQWxsKGRhdGEuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgX29uUHJvZmlsZShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZSA9IG5ldyBVc2VyUHJvZmlsZShkYXRhKTtcclxuICAgIH1cclxuICAgIF9vblVzZXJFdmVudHMoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJFdmVudHMgPSBuZXcgVXNlckV2ZW50cyh0aGlzLCBkYXRhKTtcclxuICAgIH1cclxuICAgIF9vbkJhbmtDYXJkcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fYmFua0NhcmRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhLmxpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmFua0NhcmRzLnB1c2gobmV3IEJhbmtDYXJkKGRhdGEubGlzdFtpXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9vbkZyaWVuZEdldEFzayhkYXRhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhLmxpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXBpKEJhY2tlbmQuU0VSVkVSX0ZSSUVORF9IRUxQLCB7IHNvY2lhbF9pZDogZGF0YS5saXN0W2ldIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9vblVzZXJzR2V0KGRhdGEpIHtcclxuICAgICAgICAvLyBOT1RISU5HIFRPRE9cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQmFja2VuZCBmcm9tIFwiLi9CYWNrZW5kXCI7XHJcbmltcG9ydCBTZXR0aW5nc0FsbCBmcm9tIFwiLi9TZXR0aW5nc0FsbFwiXHJcbmltcG9ydCBVc2VyUHJvZmlsZSBmcm9tIFwiLi9Vc2VyUHJvZmlsZVwiXHJcbmltcG9ydCBVc2VyRXZlbnRzIGZyb20gXCIuL1VzZXJFdmVudHNcIlxyXG5pbXBvcnQgQmFua0NhcmQgZnJvbSBcIi4vQmFua0NhcmRcIlxyXG5pbXBvcnQgVXNlck9wdGlvbnMgZnJvbSBcIi4vVXNlck9wdGlvbnNcIlxyXG5cclxuY29uc3QgRElTQ09VTlRfRU5BQkxFRCA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFja2VuZE1vY2sgZXh0ZW5kcyBMYXlhLkV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZWFsQmFja2VuZCwgcHJvZmlsZVN0b3JhZ2VQcm92aWRlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2ZyZWVSZXN1bWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9uc09iaiA9IG5ldyBMb2NhbFN0b3JhZ2VPYmplY3QoXCJoZWxpeC5vcHRpb25zXCIpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdG9yYWdlUHJvdmlkZXJEZWYgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBMb2NhbFN0b3JhZ2VPYmplY3QoXCJoZWxpeC5wcm9maWxlXCIpOyB9O1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdG9yYWdlUHJvdmlkZXIgPSBwcm9maWxlU3RvcmFnZVByb3ZpZGVyO1xyXG4gICAgICAgIC8vdGhpcy5fcHJvZmlsZU9iaiA9IHByb2ZpbGVTdG9yYWdlIHx8IG5ldyBMb2NhbFN0b3JhZ2VPYmplY3QoXCJoZWxpeC5wcm9maWxlXCIpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJPcHRpb25zID0gbmV3IFVzZXJPcHRpb25zKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX3JlYWxCYWNrZW5kID0gcmVhbEJhY2tlbmQ7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lQ29zdEZhY3RvciA9IERJU0NPVU5UX0VOQUJMRUQgPyAwLjUgOiAxO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZXR0aW5nc0FsbCgpIHsgcmV0dXJuIHRoaXMuX3NldHRpbmdzQWxsOyB9XHJcbiAgICBnZXQgcHJvZmlsZSgpIHsgcmV0dXJuIHRoaXMuX3Byb2ZpbGU7IH1cclxuICAgIGdldCB1c2VyRXZlbnRzKCkgeyByZXR1cm4gdGhpcy5fdXNlckV2ZW50czsgfVxyXG4gICAgZ2V0IGJhbmtDYXJkcygpIHsgcmV0dXJuIHRoaXMuX2JhbmtDYXJkczsgfVxyXG4gICAgZ2V0IHVzZXJPcHRpb25zKCkgeyByZXR1cm4gdGhpcy5fdXNlck9wdGlvbnM7IH1cclxuICAgIGdldCByZXN1bWVDb3VudCgpIHsgcmV0dXJuIHRoaXMuX3Jlc3VtZUNvdW50OyB9XHJcbiAgICBnZXQgZnJlZVJlc3VtZUNvdW50KCkgeyByZXR1cm4gdGhpcy5fZnJlZVJlc3VtZUNvdW50OyB9XHJcbiAgICBnZXQgcmVzdW1lQ29zdCgpIHsgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fcmVzdW1lQ29zdEZhY3RvciAqIHRoaXMucmVzdW1lQ29zdE9sZCk7IH1cclxuICAgIGdldCByZXN1bWVDb3N0T2xkKCkgeyByZXR1cm4gdGhpcy5zZXR0aW5nc0FsbC5nZXRNb25leVNvZnQ0UmVzdW1lKHRoaXMuX3Jlc3VtZUNvdW50KTsgfVxyXG5cclxuICAgIHNldExvYWRpbmdQcm9ncmVzcyh2YWx1ZSkgeyB9XHJcblxyXG4gICAgc2V0dGluZ3NBbGxHZXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9zZXR0aW5nc0FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5nc0FsbCA9IG5ldyBTZXR0aW5nc0FsbCh7XHJcbiAgICAgICAgICAgICAgICBtb25leVNvZnRQZXJGcmllbmRIZWxwOiAxMCxcclxuICAgICAgICAgICAgICAgIHRpbWVCZXR3ZWVuRnJpZW5kSGVscDogMjE2MDAsXHJcbiAgICAgICAgICAgICAgICBtb25leVNvZnQ0UmVzdW1lOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgbW9uZXlTb2Z0NEFkOiAyMCxcclxuICAgICAgICAgICAgICAgIGFycmF5TW9uZXlTb2Z0NFJlc3VtZTogWzEwMCwyMDAsNTAwLDEwMDAsMjAwMCw1MDAwXSxcclxuICAgICAgICAgICAgICAgIGNoZXN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZU9wZW46IDIxNjAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heE1vbmV5U29mdDogMTAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZVRvRnJlZUxpZmU6IDEwODAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50KEJhY2tlbmQuU0VSVkVSX1NFVFRJTkdTX0FMTCwgdGhpcy5fc2V0dGluZ3NBbGwpO1xyXG4gICAgfVxyXG4gICAgYmFua0NhcmRzR2V0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fYmFua0NhcmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2JhbmtDYXJkcyA9IFtcclxuICAgICAgICAgICAgICAgIG5ldyBCYW5rQ2FyZCh7aWQ6IDEsbmFtZTogXCJjb20uY2FuZHlncmlsbC5qdW1wLmNoZXN0MVwiLHByaWNlOiAxLG1vbmV5X3NvZnQ6IDEwMDAsdm90ZXM6IDUscGx1c1BlcmNlbnRhZ2U6IDB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBCYW5rQ2FyZCh7aWQ6IDIsbmFtZTogXCJjb20uY2FuZHlncmlsbC5qdW1wLmNoZXN0MlwiLHByaWNlOiAzLG1vbmV5X3NvZnQ6IDMzMDAsdm90ZXM6IDE1LHBsdXNQZXJjZW50YWdlOiAxMH0pLFxyXG4gICAgICAgICAgICAgICAgbmV3IEJhbmtDYXJkKHtpZDogMyxuYW1lOiBcImNvbS5jYW5keWdyaWxsLmp1bXAuY2hlc3QzXCIscHJpY2U6IDEwLG1vbmV5X3NvZnQ6IDEzMDAwLHZvdGVzOiA1MCxwbHVzUGVyY2VudGFnZTogMzB9KSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudChCYWNrZW5kLkNMSUVOVF9CQU5LX0NBUkRTLCB0aGlzLl9iYW5rQ2FyZHMpO1xyXG4gICAgfVxyXG4gICAgcHJvZmlsZUdldCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3Byb2ZpbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZmlsZU9iaiA9IHRoaXMuX3Byb2ZpbGVTdG9yYWdlUHJvdmlkZXIgJiYgdGhpcy5fcHJvZmlsZVN0b3JhZ2VQcm92aWRlcigpIHx8IHRoaXMuX3Byb2ZpbGVTdG9yYWdlUHJvdmlkZXJEZWYoKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZmlsZSA9IG5ldyBVc2VyUHJvZmlsZSh7XHJcbiAgICAgICAgICAgICAgICBpZDogMSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiVXNlclwiLFxyXG4gICAgICAgICAgICAgICAgbGFuZzogXCJydVwiLFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IHRoaXMuX3Byb2ZpbGVPYmouZ2V0KCdsZXZlbCcpIHx8IDEsXHJcbiAgICAgICAgICAgICAgICBsaXZlczogMCxcclxuICAgICAgICAgICAgICAgIHNjb3JlczogMCxcclxuICAgICAgICAgICAgICAgIHNjb3Jlc01heDogdGhpcy5fcHJvZmlsZU9iai5nZXQoJ3Njb3Jlc01heCcpIHx8IDAsXHJcbiAgICAgICAgICAgICAgICBtb25leVNvZnQ6IHRoaXMuX3Byb2ZpbGVPYmouZ2V0KCdtb25leVNvZnQnKSB8fCAxNTAwLFxyXG4gICAgICAgICAgICAgICAgaXNUZXN0ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pc3N1ZVByb2ZpbGUoKTtcclxuICAgIH1cclxuICAgIHVzZXJFdmVudHNHZXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl91c2VyRXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJFdmVudERhdGEgPSB7ZXZlbnRzOntcclxuICAgICAgICAgICAgICAgIENoZXN0Olt7aWQ6XCI0XCIscGFyYW1zOnttb25leV9zb2Z0OjYwLG1vbmV5X3NvZnRfbWF4OjEwMH0sbmVlZENvbmZpcm06dHJ1ZSx0aW1lUmVtYWluOjEwfV0sXHJcbiAgICAgICAgICAgICAgICBMaWZlOlt7aWQ6XCIzXCIscGFyYW1zOntsaXZlczoxfSxuZWVkQ29uZmlybTp0cnVlLHRpbWVSZW1haW46MH1dLCAvLzEwMjUwfV1cclxuICAgICAgICAgICAgICAgIEFkOlt7aWQ6XCIyOFwiLHBhcmFtczp7ZGF0ZVNob3c6XCIyMDE5MDEyOVwiLHNob3dCZWZvcmVMaWZlOmZhbHNlLHNob3dCZWZvcmVTdGFydDp0cnVlfSxuZWVkQ29uZmlybTp0cnVlLHRpbWVSZW1haW46MzE1MzU4MjQ0fV0sXHJcbiAgICAgICAgICAgIH19O1xyXG4gICAgICAgICAgICB0aGlzLl91c2VyRXZlbnRzID0gbmV3IFVzZXJFdmVudHModGhpcywgdGhpcy5fdXNlckV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnQoQmFja2VuZC5DTElFTlRfVVNFUl9FVkVOVFMsIHRoaXMuX3VzZXJFdmVudERhdGEpO1xyXG4gICAgfVxyXG4gICAgdXNlcnNHZXQoaWRzU29jaWFsKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpIGluIGlkc1NvY2lhbCkge1xyXG4gICAgICAgICAgICBsaXN0LnB1c2goe2lkU29jaWFsOiBpZHNTb2NpYWxbaV0sIGhhc0FwcDogMX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50KEJhY2tlbmQuQ0xJRU5UX1VTRVJTX0dFVCwgbGlzdCk7XHJcbiAgICB9XHJcbiAgICBnYW1lU3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2ZyZWVSZXN1bWVDb3VudCA9IDA7XHJcbiAgICB9XHJcbiAgICBnYW1lV2luKHNjb3Jlcykge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGUuX2RhdGEubGV2ZWwrKztcclxuICAgICAgICB0aGlzLl9wcm9maWxlT2JqLnNldCgnbGV2ZWwnLCB0aGlzLl9wcm9maWxlLl9kYXRhLmxldmVsKTtcclxuICAgICAgICB0aGlzLl9pc3N1ZVByb2ZpbGUoKTtcclxuICAgIH1cclxuICAgIGdhbWVMb29zZShzY29yZXMpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlLnNjb3Jlc01heCA9IE1hdGgubWF4KHRoaXMuX3Byb2ZpbGUuc2NvcmVzTWF4LCBzY29yZXMpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPYmouc2V0KCdzY29yZXNNYXgnLCB0aGlzLl9wcm9maWxlLnNjb3Jlc01heCk7XHJcbiAgICAgICAgdGhpcy5faXNzdWVQcm9maWxlKCk7XHJcbiAgICB9XHJcbiAgICBnYW1lUmVzdW1lRnJlZSgpIHtcclxuICAgICAgICB0aGlzLl9mcmVlUmVzdW1lQ291bnQrKztcclxuICAgICAgICAvL3RoaXMudXNlckV2ZW50cy5MaWZlLl9yZXNldCgyMCk7XHJcbiAgICAgICAgdGhpcy51c2VyRXZlbnRzLkxpZmUuX3Jlc2V0KDEpO1xyXG4gICAgfVxyXG4gICAgZ2FtZVJlc3VtZVNvZnQoKSB7XHJcbiAgICAgICAgdGhpcy5fYWRkTW9uZXlTb2Z0KC10aGlzLnJlc3VtZUNvc3QpO1xyXG4gICAgICAgIHRoaXMuX3Jlc3VtZUNvdW50Kys7XHJcbiAgICAgICAgdGhpcy5faXNzdWVQcm9maWxlKCk7XHJcbiAgICB9XHJcbiAgICAvL2dhbWVSZXN1bWVBZHMoKSB7XHJcbiAgICAvLyAgICAvLyBOb3RoaW5nIHRvIGRvXHJcbiAgICAvL31cclxuICAgIHVzZXJPcHRpb25zR2V0KCkge1xyXG4gICAgICAgIC8vaWYgKCF0aGlzLl9pbm5lclVzZXJPcHRpb25zKVxyXG4gICAgICAgICAgICAvL3RoaXMuX2lubmVyVXNlck9wdGlvbnMgPSB7IGxpc3Q6W3trZXk6XCJyZXN1bWVTdGF0ZVwiLCB2YWx1ZTpcIlwifV0gfTtcclxuICAgICAgICAgICAgLy90aGlzLl9pbm5lclVzZXJPcHRpb25zID0geyBsaXN0Olt7a2V5OlwicmVzdW1lU3RhdGVcIiwgdmFsdWU6SlNPTi5zdHJpbmdpZnkoe3Njb3JlOnRoaXMuX3Byb2ZpbGUuc2NvcmVzTWF4LCBpc0xhc3RHYW1lV2FzQmVzdDp0cnVlLCByZXN1bHQ6J0xPT1NFJywgZmxvb3JJbmRleDoxMCwgcmVzdW1lQ291bnQ6MSwgYmVfcmVzdW1lQ291bnQ6MX0pfV0gfTtcclxuICAgICAgICAgICAgLy90aGlzLl9pbm5lclVzZXJPcHRpb25zID0geyBsaXN0Olt7a2V5OlwicmVzdW1lU3RhdGVcIiwgdmFsdWU6SlNPTi5zdHJpbmdpZnkoe3Njb3JlOjk3LCBpc0xhc3RHYW1lV2FzQmVzdDp0cnVlLCByZXN1bHQ6J1dJTicsIGZsb29ySW5kZXg6MTUsIHJlc3VtZUNvdW50OjEsIGJlX3Jlc3VtZUNvdW50OjF9KX1dIH07XHJcbiAgICAgICAgLy90aGlzLmV2ZW50KEJhY2tlbmQuQ0xJRU5UX1VTRVJfT1BUSU9OX0dFVF9BTEwsIHRoaXMuX2lubmVyVXNlck9wdGlvbnMpO1xyXG4gICAgICAgIHZhciBvcHRpb25zT2JqID0gdGhpcy5fb3B0aW9uc09iajtcclxuICAgICAgICB0aGlzLmV2ZW50KEJhY2tlbmQuQ0xJRU5UX1VTRVJfT1BUSU9OX0dFVF9BTEwsIHtcclxuICAgICAgICAgICAgbGlzdDogdGhpcy5fb3B0aW9uc09iai5nZXRLZXlzKCkubWFwKGZ1bmN0aW9uKGtleSkgeyByZXR1cm4ge2tleTprZXksIHZhbHVlOm9wdGlvbnNPYmouZ2V0KGtleSl9IH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB1c2VyT3B0aW9uU2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICAvL3ZhciBlbnRyeSA9IHRoaXMuX2lubmVyVXNlck9wdGlvbnMubGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5rZXkgPT0ga2V5KTtcclxuICAgICAgICAvL2lmIChlbnRyeSlcclxuICAgICAgICAvLyAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnNPYmouc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZnJpZW5kQXNrKGlkKSB7XHJcbiAgICAgICAgLy8gU3R1YlxyXG4gICAgfVxyXG4gICAgZnJpZW5kUmVwbHlBbGwoKSB7XHJcbiAgICAgICAgLy8gU3R1YlxyXG4gICAgfVxyXG4gICAgcmVjZWl2ZUhlbHBzKCkge1xyXG4gICAgICAgIC8vIFN0dWJcclxuICAgIH1cclxuICAgIHJlY2VpdmVDaGVzdCgpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLnVzZXJFdmVudHMuQ2hlc3Q7XHJcbiAgICAgICAgdGhpcy5fYWRkTW9uZXlTb2Z0KGV2ZW50Lm1vbmV5X3NvZnQpO1xyXG4gICAgICAgIGV2ZW50Lm1vbmV5X3NvZnQgPSAwO1xyXG4gICAgICAgIGV2ZW50Ll9yZXNldCgxMCk7XHJcbiAgICAgICAgdGhpcy5faXNzdWVQcm9maWxlKCk7XHJcbiAgICAgICAgdGhpcy51c2VyRXZlbnRzLl9pc3N1ZUV2ZW50KCdDaGVzdCcpO1xyXG4gICAgfVxyXG4gICAgYWRkQ29pbnNGb3JBZCgpIHtcclxuICAgICAgICB0aGlzLl9hZGRNb25leVNvZnQoQmFja2VuZC5DT0lOU19GT1JfQUQpO1xyXG4gICAgICAgIHRoaXMuX2lzc3VlUHJvZmlsZSgpO1xyXG4gICAgfVxyXG4gICAgZnJpZW5kU2NvcmVVcGRhdGUoZnJpZW5kSW5mb3MpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZyaWVuZEluZm9zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBmcmllbmRJbmZvc1tpXS5zY29yZSA9IGkgKiAxMDtcclxuICAgIH1cclxuICAgIHZhbGlkYXRlUHVyY2hhc2UocHVyY2hhc2UsIGNhcmQpIHtcclxuICAgICAgICBpZiAoIXB1cmNoYXNlLmluZm8uc2lnbmF0dXJlKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVhbEJhY2tlbmQudmFsaWRhdGVQdXJjaGFzZShwdXJjaGFzZSkudGhlbihmdW5jdGlvbihvaykge1xyXG4gICAgICAgICAgICBpZiAob2spIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkTW9uZXlTb2Z0KGNhcmQubW9uZXlfc29mdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNzdWVQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIDUwMCk7IC8vIHNpbXVsYXRlIGRlbGF5ZWQgY29pbnMgYWRkXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGRldkFkZE1vbmV5KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYWRkTW9uZXlTb2Z0KHZhbHVlKTtcclxuICAgICAgICB0aGlzLl9pc3N1ZVByb2ZpbGUoKTtcclxuICAgIH1cclxuICAgIGRldkFkZFRvQ2hlc3QodmFsdWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLnVzZXJFdmVudHMuQ2hlc3Q7XHJcbiAgICAgICAgZXZlbnQubW9uZXlfc29mdCA9IE1hdGgubWluKGV2ZW50Lm1vbmV5X3NvZnQgKyB2YWx1ZSwgZXZlbnQubW9uZXlfc29mdF9tYXgpO1xyXG4gICAgICAgIHRoaXMudXNlckV2ZW50cy5faXNzdWVFdmVudCgnQ2hlc3QnKTtcclxuICAgIH1cclxuICAgIGRldlNwZWVkVXBFdmVudChpZCkge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy51c2VyRXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBldmVudCA9IHRoaXMudXNlckV2ZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmlkID09IGlkICYmIHR5cGVvZihldmVudC5fcmVzZXQpID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50Ll9yZXNldCgwKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZXZTZXRQcm9ncmVzcyhsZXZlbCwgc2NvcmVzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cobGV2ZWwsIHNjb3Jlcyk7XHJcbiAgICAgICAgbGV2ZWwgPSBOdW1iZXIobGV2ZWwpO1xyXG4gICAgICAgIHNjb3JlcyA9IE51bWJlcihzY29yZXMpO1xyXG4gICAgICAgIGlmIChpc05hTihsZXZlbCkgfHwgaXNOYU4oc2NvcmVzKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZS5fZGF0YS5sZXZlbCA9IGxldmVsO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZS5fZGF0YS5tYXhTY29yZXMgPSBzY29yZXM7XHJcbiAgICAgICAgdGhpcy5faXNzdWVQcm9maWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzc3VlUHJvZmlsZSgpIHtcclxuICAgICAgICB0aGlzLmV2ZW50KEJhY2tlbmQuQ0xJRU5UX1BST0ZJTEUsIHRoaXMuX3Byb2ZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRNb25leVNvZnQoZGVsdGEpIHtcclxuICAgICAgICB0aGlzLnByb2ZpbGUuX2RhdGEubW9uZXlTb2Z0ICs9IGRlbHRhO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPYmouc2V0KCdtb25leVNvZnQnLCB0aGlzLnByb2ZpbGUuX2RhdGEubW9uZXlTb2Z0KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGxvY2FsU3RvcmFnZSA9IFtdO1xyXG50cnkgeyBsb2NhbFN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlIH1cclxuY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ3dpbmRvdy5sb2NhbFN0b3JhZ2UgaXMgbm90IGFjY2Vzc2FibGUnKSB9O1xyXG5cclxuY2xhc3MgTG9jYWxTdG9yYWdlT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKG9iamVjdE5hbWUpIHtcclxuICAgICAgICB0aGlzLl9vYmplY3ROYW1lID0gb2JqZWN0TmFtZTtcclxuICAgICAgICB0aGlzLl9vYmplY3QgPSB0aGlzLl9sb2FkKCk7XHJcbiAgICB9XHJcbiAgICBnZXRLZXlzKCkge1xyXG4gICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX29iamVjdClcclxuICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9XHJcbiAgICBnZXQoa2V5KSB7IHJldHVybiB0aGlzLl9vYmplY3Rba2V5XTsgfVxyXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX29iamVjdFtrZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29iamVjdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbG9hZCgpIHtcclxuICAgICAgICB2YXIgc3RyID0gbG9jYWxTdG9yYWdlW3RoaXMuX29iamVjdE5hbWVdO1xyXG4gICAgICAgIGlmIChzdHIpIHtcclxuICAgICAgICAgICAgdHJ5IHsgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTsgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIF9zYXZlKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTQVZFICcgKyB0aGlzLl9vYmplY3ROYW1lKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VbdGhpcy5fb2JqZWN0TmFtZV0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9vYmplY3QpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFua0NhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgIGNvbnN0IGFyciA9IHRoaXMubmFtZS5zcGxpdCgnLicpO1xyXG4gICAgICAgIHRoaXMuX2RhdGEuc2hvcnROYW1lID0gYXJyW2Fyci5sZW5ndGggLSAxXTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuaWQ7IH1cclxuICAgIGdldCBuYW1lKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5uYW1lOyB9XHJcbiAgICBnZXQgc2hvcnROYW1lKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5zaG9ydE5hbWU7IH1cclxuICAgIGdldCBwcmljZSgpIHsgcmV0dXJuIHRoaXMuX2RhdGEucHJpY2U7IH1cclxuICAgIGdldCBtb25leV9zb2Z0KCkgeyByZXR1cm4gdGhpcy5fZGF0YS5tb25leV9zb2Z0OyB9XHJcbiAgICBnZXQgdm90ZXMoKSB7IHJldHVybiB0aGlzLl9kYXRhLnZvdGVzOyB9XHJcbiAgICBnZXQgb2soKSB7IHJldHVybiB0aGlzLl9kYXRhLm9rOyB9XHJcbiAgICBnZXQgeWEoKSB7IHJldHVybiB0aGlzLl9kYXRhLnlhOyB9XHJcbiAgICBzZXQgeWEodmFsdWUpIHsgdGhpcy5fZGF0YS55YSA9IHZhbHVlOyB9XHJcbiAgICBnZXQgcGx1c1BlcmNlbnRhZ2UoKSB7IHJldHVybiB0aGlzLl9kYXRhLnBsdXNQZXJjZW50YWdlOyB9XHJcbn0iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5pbXBvcnQgU29jaWFsQXBpIGZyb20gXCIuL1NvY2lhbEFwaVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYW5rQ2FyZEFkVUkgZXh0ZW5kcyBMYXlhLlBhbmVsIHtcclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfQ0FSRF9DTElDSygpIHsgcmV0dXJuIFwiQ0FSRF9DTElDS1wiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuICAgIGluaXQoYmFja2VuZCkge1xyXG4gICAgICAgIGlmIChVdGlscy5pbml0UHJvcHModGhpcywgWydjb2luVmFsdWUnLCAnYnRuQnV5J10pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuQnV5LmluaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5idG5CdXkub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYnRuQnV5LmRpc2FibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoQmFua0NhcmRBZFVJLkVWRU5UX0NBUkRfQ0xJQ0spO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29pblZhbHVlKVxyXG4gICAgICAgICAgICB0aGlzLmNvaW5WYWx1ZS50ZXh0ID0gYmFja2VuZC5zZXR0aW5nc0FsbC5tb25leVNvZnQ0QWQ7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3Qub24oU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VELCB0aGlzLCB0aGlzLl91cGRhdGVEaXNhYmxlZCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlRGlzYWJsZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlRGlzYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5idG5CdXkuZGlzYWJsZWQgPSAhU29jaWFsQXBpLmluc3QuYWRzQ2FuU2hvd1Jld2FyZGVkO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuL1V0aWxzXCJcclxuaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFua0NhcmRVSSBleHRlbmRzIExheWEuUGFuZWwge1xyXG4gICAgc3RhdGljIGdldCBFVkVOVF9DQVJEX0NMSUNLKCkgeyByZXR1cm4gXCJDQVJEX0NMSUNLXCI7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNhcmQoKSB7IHJldHVybiB0aGlzLl9jYXJkOyB9XHJcbiAgICBzZXQgY2FyZCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoVXRpbHMuaW5pdFByb3BzKHRoaXMsIFsnY29pblZhbHVlJywgJ3ByaWNlVmFsdWUnLCAnY3VycmVuY3knLCAnYnRuQnV5JywgJ3Byb21vJ10pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuQnV5Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLmV2ZW50KEJhbmtDYXJkVUkuRVZFTlRfQ0FSRF9DTElDSywgdGhpcy5jYXJkKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlVmlldygpIHtcclxuICAgICAgICB2YXIgY2FyZCA9IHRoaXMuX2NhcmQ7XHJcbiAgICAgICAgdGhpcy5jb2luVmFsdWUudGV4dCA9IFN0cmluZyhjYXJkLm1vbmV5X3NvZnQpO1xyXG4gICAgICAgIHRoaXMucHJpY2VWYWx1ZS50ZXh0ID0gU29jaWFsQXBpLmluc3QuZ2V0UHJpY2UoY2FyZCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW5jeS50ZXh0ID0gU29jaWFsQXBpLmluc3QuZ2V0Q3VycmVuY3lTdHJpbmcoY2FyZCk7XHJcbiAgICAgICAgLy90aGlzLnByb21vLnZpc2libGUgPSBTb2NpYWxBcGkuaXNZQTtcclxuICAgIH1cclxufSIsImltcG9ydCBCYXNlV2luZG93IGZyb20gXCIuL0Jhc2VXaW5kb3dcIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5pbXBvcnQgQmFja2VuZCBmcm9tIFwiLi9CYWNrZW5kXCJcclxuaW1wb3J0IEJhbmtDYXJkVUkgZnJvbSBcIi4vQmFua0NhcmRVSVwiXHJcbmltcG9ydCBCYW5rQ2FyZEFkVUkgZnJvbSBcIi4vQmFua0NhcmRBZFVJXCJcclxuaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIlxyXG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL0xvY2FsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFua1VJIGV4dGVuZHMgQmFzZVdpbmRvdyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG4gICAgb25Jbml0KCkge1xyXG4gICAgICAgIHN1cGVyLm9uSW5pdCgpO1xyXG4gICAgICAgIHRoaXMuZGV2UGx1cy52aXNpYmxlID0gVXRpbHMuZGV2TW9kZTtcclxuICAgICAgICB0aGlzLmRldkJsb2NrLnZpc2libGUgPSBVdGlscy5kZXZNb2RlO1xyXG4gICAgICAgIGlmICh0aGlzLmFkc0hpbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5hZHNIaW50LnZpc2libGUgPSBTb2NpYWxBcGkuaW5zdC5hZHNTdXBwb3J0ZWQgJiYgVXRpbHMuY2FuVXNlUHVyY2hhc2VzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hZHNIaW50LnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChTb2NpYWxBcGkuaXNPSykgdGhpcy5hZHNIaW50LnRleHQgPSBcItCf0LvQsNGC0LXQtiDQsiAyNSDQntCaINC4INCx0L7Qu9GM0YjQtSDQvtGC0LrQu9GO0YfQsNC10YIg0YDQtdC60LvQsNC80YMuXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoU29jaWFsQXBpLmlzWUEpIHRoaXMuYWRzSGludC50ZXh0ID0gXCJcIjsgLy8gSW5pdCBsYXRlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChVdGlscy5kZXZNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2UGx1cy5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5fYmFja2VuZC5kZXZBZGRNb25leSg1MDApOyB9KTtcclxuICAgICAgICAgICAgdGhpcy5idG5TZXRQb3JvZ3Jlc3Mub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IHRoaXMuX2JhY2tlbmQuZGV2U2V0UHJvZ3Jlc3ModGhpcy5pbnBMZXZlbC50ZXh0LCB0aGlzLmlucFNjb3Jlcy50ZXh0KTsgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdClcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmRWaWV3ID0gdGhpcy5saXN0LmdldENoaWxkQXQoaSk7XHJcbiAgICAgICAgICAgICAgICBjYXJkVmlldy5vbihCYW5rQ2FyZFVJLkVWRU5UX0NBUkRfQ0xJQ0ssIHRoaXMsIHRoaXMuX29uQ2FyZENsaWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmluc3QucHJlQmFua1Nob3coKSlcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIG9uU2hvdygpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VyT3B0aW9ucylcclxuICAgICAgICAgICAgdGhpcy51c2VyT3B0aW9ucy51cGRhdGVWaWV3KCk7XHJcbiAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgdGhpcy5fb25GcmFtZSk7XHJcbiAgICB9XHJcbiAgICBvbkhpZGUoKSB7XHJcbiAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLl9vbkZyYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGJhY2tlbmQpIHtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kID0gYmFja2VuZDtcclxuICAgICAgICBpZiAoVXRpbHMuZGV2TW9kZSlcclxuICAgICAgICAgICAgdGhpcy51c2VyT3B0aW9ucyA9IG5ldyBEZXZVc2VyT3B0aW9ucyhiYWNrZW5kLnVzZXJPcHRpb25zLCB0aGlzLmRldlVzZXJPcHRpb25zKTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzWUEgJiYgdGhpcy5hZHNIaW50ICYmIHRoaXMuYWRzSGludC52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXJkID0gdGhpcy5fYmFja2VuZC5iYW5rQ2FyZHNbMF07XHJcbiAgICAgICAgICAgIC8vaWYgKGNhcmQpIHRoaXMuYWRzSGludC50ZXh0ID0gXCLQn9C70LDRgtC10LYg0LIgXCIgKyBjYXJkLnlhICsgXCIg0KAg0Lgg0LHQvtC70YzRiNC1INC+0YLQutC70Y7Rh9Cw0LXRgiDRgNC10LrQu9Cw0LzRgy5cIjtcclxuICAgICAgICAgICAgaWYgKGNhcmQpIHRoaXMuYWRzSGludC50ZXh0ID0gTG9jYWxlLmZvcm1hdCgnTF9BRFNfT0ZGX0NPTkRJVElPTicsIGNhcmQueWEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoU29jaWFsQXBpLmluc3QuYWRzRm9yQ29pbnNTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hZFNob3dJdGVtLmluaXQoYmFja2VuZCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRTaG93SXRlbS5vbihCYW5rQ2FyZEFkVUkuRVZFTlRfQ0FSRF9DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IEJhbmtVSS5zaG93QWRGb3JDb2lucyh0aGlzLl9iYWNrZW5kKTsgfSk7XHJcbiAgICAgICAgICAgIC8vIGlmICghVXRpbHMuY2FuVXNlUHVyY2hhc2VzKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmxpc3QudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5iYWNrLmhlaWdodCA9IDMwMDtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRTaG93SXRlbS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuYmFjay5oZWlnaHQgPSA2ODA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3QpIHtcclxuICAgICAgICAgICAgYmFja2VuZC5vbihCYWNrZW5kLkNMSUVOVF9CQU5LX0NBUkRTLCB0aGlzLCB0aGlzLl91cGRhdGVWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlVmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2hvd0FkRm9yQ29pbnMoYmFja2VuZCwgb25TdWNjZXNzKSB7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pbnN0LmFkc0NhblNob3dSZXdhcmRlZCkge1xyXG4gICAgICAgICAgICB2YXIgb25Db21wbGV0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBvblNraXBwZWQgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgb2ZmID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5vZmYoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX0NPTVBMRVRFLCB0aGlzLCBvbkNvbXBsZXRlKTtcclxuICAgICAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0Lm9mZihTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCwgdGhpcywgb25Ta2lwcGVkKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIG9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG9mZigpO1xyXG4gICAgICAgICAgICAgICAgYmFja2VuZC5hZGRDb2luc0ZvckFkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25TdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzcygpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgb25Ta2lwcGVkID0gZnVuY3Rpb24oKSB7IG9mZigpOyB9XHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0Lm9uKFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSwgdGhpcywgb25Db21wbGV0ZSk7XHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0Lm9uKFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TS0lQUEVELCB0aGlzLCBvblNraXBwZWQpO1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5hZHNTaG93KHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25DYXJkQ2xpY2soY2FyZCkge1xyXG4gICAgICAgIGlmIChjYXJkKSB7XHJcbiAgICAgICAgICAgIC8vdGhpcy5fcGVuZFByb2ZpbGVVcGRhdGVPbkZvY3VzKCk7XHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0LnNob3dPcmRlckJveChjYXJkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKl9wZW5kUHJvZmlsZVVwZGF0ZU9uRm9jdXMoKSB7XHJcbiAgICAgICAgdmFyIGJhY2tlbmQgPSB0aGlzLl9iYWNrZW5kO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ3Zpc2libGUnKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IDEpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgYmFja2VuZC5wcm9maWxlR2V0KCk7IH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGNhbGxiYWNrKTtcclxuICAgIH0qL1xyXG4gICAgX3VwZGF0ZVZpZXcoKSB7XHJcbiAgICAgICAgdmFyIGNhcmRzID0gdGhpcy5fYmFja2VuZC5iYW5rQ2FyZHM7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gTWF0aC5taW4oY2FyZHMubGVuZ3RoLCB0aGlzLmxpc3QubnVtQ2hpbGRyZW4pO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY2FyZFZpZXcgPSB0aGlzLmxpc3QuZ2V0Q2hpbGRBdChpKTtcclxuICAgICAgICAgICAgY2FyZFZpZXcuY2FyZCA9IGNhcmRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9vbkZyYW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFkU2hvd0l0ZW0gJiYgdGhpcy5hZFNob3dJdGVtLmJ0bkJ1eSlcclxuICAgICAgICAgICAgdGhpcy5fYXBwbHlBbmltU2NhbGUodGhpcy5hZFNob3dJdGVtLmJ0bkJ1eSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERldlVzZXJPcHRpb25zIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXJPcHRpb25zLCB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy51c2VyT3B0aW9ucyA9IHVzZXJPcHRpb25zO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgVXRpbHMuaW5pdFByb3BzKHZpZXcsIFsna2V5MCcsJ2tleTEnLCdrZXkyJywna2V5MycsJ3ZhbHVlMCcsJ3ZhbHVlMScsJ3ZhbHVlMicsJ3ZhbHVlMycsJ2J0bkFwcGx5J10pO1xyXG4gICAgICAgIHRoaXMua2V5cyA9IFt2aWV3LmtleTAsIHZpZXcua2V5MSwgdmlldy5rZXkyLCB2aWV3LmtleTNdO1xyXG4gICAgICAgIHRoaXMudmFsdWVzID0gW3ZpZXcudmFsdWUwLCB2aWV3LnZhbHVlMSwgdmlldy52YWx1ZTIsIHZpZXcudmFsdWUzXTtcclxuICAgICAgICB2aWV3LmJ0bkFwcGx5Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uQXBwbHkpO1xyXG4gICAgfVxyXG4gICAgX29uQXBwbHkoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMua2V5c1tpXS50ZXh0O1xyXG4gICAgICAgICAgICBpZiAoa2V5KVxyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyT3B0aW9ucy5zZXRPcHRpb24oa2V5LCB0aGlzLnZhbHVlc1tpXS50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVWaWV3KCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJPUFRJT05TIFVQREFURVwiKTtcclxuICAgICAgICB2YXIgaWR4ID0gMDtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMudXNlck9wdGlvbnMub3B0aW9ucztcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMua2V5c1tpZHhdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmtleXNbaWR4XS50ZXh0ID0ga2V5O1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlc1tpZHhdLnRleHQgPSBvcHRpb25zW2tleV07XHJcbiAgICAgICAgICAgIGlkeCsrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBMb2NhbGUgZnJvbSBcIi4vTG9jYWxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlV2luZG93IGV4dGVuZHMgTGF5YS5TY2VuZSB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX1NIT1dOKCkgeyByZXR1cm4gXCJTSE9XTlwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0hJRERFTigpIHsgcmV0dXJuIFwiSElEREVOXCI7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub25jZShcIm9uVmlld0NyZWF0ZWRcIiwgdGhpcywgdGhpcy5fb25WaWV3Q3JlYXRlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHZpc2libGUoKSB7IHJldHVybiBzdXBlci52aXNpYmxlOyB9XHJcbiAgICBzZXQgdmlzaWJsZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgc3VwZXIudmlzaWJsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KEJhc2VXaW5kb3cuRVZFTlRfU0hPV04sIHRoaXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoQmFzZVdpbmRvdy5FVkVOVF9ISURERU4sIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7IHRoaXMudmlzaWJsZSA9IHRydWU7IH1cclxuICAgIGhpZGUoKSB7IHRoaXMudmlzaWJsZSA9IGZhbHNlOyB9XHJcblxyXG4gICAgb25Jbml0KCkge1xyXG4gICAgICAgIC8vIFRPRE8gOiBvdmVycmlkZVxyXG4gICAgfVxyXG4gICAgb25TaG93KCkge1xyXG4gICAgICAgIC8vIFRPRE8gOiBvdmVycmlkZVxyXG4gICAgfVxyXG4gICAgb25IaWRlKCkge1xyXG4gICAgICAgIC8vIFRPRE8gOiBvdmVycmlkZVxyXG4gICAgfVxyXG5cclxuICAgIF9hcHBseUFuaW1TY2FsZSh0YXJnZXQpIHtcclxuICAgICAgICBjb25zdCB0ID0gTGF5YS50aW1lci5jdXJyVGltZXIgKiAwLjAwMTtcclxuICAgICAgICBjb25zdCBzY2wgPSAxICsgMC4wNSAqICgxICsgTWF0aC5zaW4oMiAqIE1hdGguUEkgKiB0KSk7XHJcbiAgICAgICAgdGFyZ2V0LnNjYWxlWCA9IHNjbDtcclxuICAgICAgICB0YXJnZXQuc2NhbGVZID0gc2NsO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblZpZXdDcmVhdGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmJ0bkNsb3NlKVxyXG4gICAgICAgICAgICB0aGlzLmJ0bkNsb3NlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuaGlkZSk7XHJcbiAgICAgICAgdGhpcy5fbG9jYWxpemUoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9sb2NhbGl6ZSgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZignTF8nKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jS2V5ID0ga2V5LnNwbGl0KCckJylbMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NWYWx1ZSA9IExvY2FsZS50ZXh0KGxvY0tleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXldLnRleHQgPSBsb2NWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkuaW5kZXhPZignTElNR18nKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1trZXldLnZpc2libGUgPSBrZXkuc3BsaXQoJyQnKVsxXSA9PSBMb2NhbGUubGFuZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsb3RTcHJpdGUgZXh0ZW5kcyBMYXlhLk1lc2hTcHJpdGUzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcihtZXNoLCBtYXQsIHBvb2wpIHtcclxuICAgICAgICBzdXBlcihtZXNoKTtcclxuICAgICAgICB0aGlzLl9wb29sID0gcG9vbDtcclxuICAgICAgICBpZiAocG9vbClcclxuICAgICAgICAgICAgdGhpcy5vbihMYXlhLkV2ZW50LlJFTU9WRUQsIHRoaXMsIHRoaXMuX29uQmxvdFNwcml0ZVJlbW92ZWQpO1xyXG4gICAgICAgIHRoaXMubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gbWF0O1xyXG4gICAgfVxyXG4gICAgZGVzdHJveShkZXN0cm95Q2hpbGQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3Bvb2wpIHN1cGVyLmRlc3Ryb3koZGVzdHJveUNoaWxkKTtcclxuICAgIH1cclxuICAgIF9vbkJsb3RTcHJpdGVSZW1vdmVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sKSB0aGlzLl9wb29sLl9yZXR1cm4odGhpcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQmxvdFNwcml0ZSBmcm9tIFwiLi9CbG90U3ByaXRlXCJcclxuXHJcbmNvbnN0IE1BWF9CTE9UUyA9IDMwO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvdFNwcml0ZVBvb2wge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fYmxvdHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9hZGRlZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX21lc2ggPSBuZXcgTGF5YS5QbGFuZU1lc2goMSwgMSwgMSwgMSk7XHJcbiAgICAgICAgdmFyIG1hdCA9IG5ldyBMYXlhLlVubGl0TWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLl9tYXRlcmlhbCA9IG1hdDtcclxuICAgICAgICBtYXQuYWxiZWRvSW50ZW5zaXR5ID0gMTtcclxuICAgICAgICBtYXQucmVuZGVyTW9kZSA9IExheWEuVW5saXRNYXRlcmlhbC5SRU5ERVJNT0RFX1RSQU5TUEFSRU5UO1xyXG4gICAgICAgIExheWEuVGV4dHVyZTJELmxvYWQoJ2lua2Jsb3QucG5nJywgbmV3IExheWEuSGFuZGxlcih0aGlzLCBmdW5jdGlvbih0ZXgpIHtcclxuICAgICAgICAgICAgbWF0LmFsYmVkb1RleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbG9yKCkgeyByZXR1cm4gdGhpcy5fbWF0ZXJpYWwuYWxiZWRvQ29sb3I7IH1cclxuICAgIHNldCBjb2xvcih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX21hdGVyaWFsLmFsYmVkb0NvbG9yID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhZGRUbyhwYXJlbnRTcHJpdGUpIHtcclxuICAgICAgICBpZiAodGhpcy5fYWRkZWQubGVuZ3RoID4gTUFYX0JMT1RTKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZGVkWzBdLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLl9hZGRlZFswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBibG90ID0gdGhpcy5fYmxvdHMucG9wKCkgfHwgbmV3IEJsb3RTcHJpdGUodGhpcy5fbWVzaCwgdGhpcy5fbWF0ZXJpYWwsIHRoaXMpO1xyXG4gICAgICAgIGJsb3QudHJhbnNmb3JtLmxvY2FsUG9zaXRpb24gPSBMYXlhLlZlY3RvcjMuWkVSTztcclxuICAgICAgICBibG90LnRyYW5zZm9ybS5sb2NhbFNjYWxlID0gTGF5YS5WZWN0b3IzLk9ORTtcclxuICAgICAgICBibG90LnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uID0gTGF5YS5RdWF0ZXJuaW9uLkRFRkFVTFQ7XHJcbiAgICAgICAgdGhpcy5fYWRkZWQucHVzaChibG90KTtcclxuICAgICAgICByZXR1cm4gcGFyZW50U3ByaXRlLmFkZENoaWxkKGJsb3QpO1xyXG4gICAgfVxyXG4gICAgX3JldHVybihibG90KSB7XHJcbiAgICAgICAgdmFyIGlkeCA9IHRoaXMuX2FkZGVkLmluZGV4T2YoYmxvdCk7XHJcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZGVkLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICBpZiAoYmxvdC5wYXJlbnQpXHJcbiAgICAgICAgICAgICAgICBibG90LnBhcmVudC5yZW1vdmVDaGlsZChibG90KTtcclxuICAgICAgICAgICAgdGhpcy5fYmxvdHMucHVzaChibG90KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLyByZWY6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEyOTMxNjMvMjM0M1xyXG4vLyBUaGlzIHdpbGwgcGFyc2UgYSBkZWxpbWl0ZWQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2ZcclxuLy8gYXJyYXlzLiBUaGUgZGVmYXVsdCBkZWxpbWl0ZXIgaXMgdGhlIGNvbW1hLCBidXQgdGhpc1xyXG4vLyBjYW4gYmUgb3ZlcnJpZGVuIGluIHRoZSBzZWNvbmQgYXJndW1lbnQuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENTVlRvQXJyYXkoc3RyRGF0YSwgc3RyRGVsaW1pdGVyKSB7XHJcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGRlbGltaXRlciBpcyBkZWZpbmVkLiBJZiBub3QsXHJcbiAgICAvLyB0aGVuIGRlZmF1bHQgdG8gY29tbWEuXHJcbiAgICBzdHJEZWxpbWl0ZXIgPSAoc3RyRGVsaW1pdGVyIHx8IFwiLFwiKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gcGFyc2UgdGhlIENTViB2YWx1ZXMuXHJcbiAgICB2YXIgb2JqUGF0dGVybiA9IG5ldyBSZWdFeHAoXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICAvLyBEZWxpbWl0ZXJzLlxyXG4gICAgICAgICAgICBcIihcXFxcXCIgKyBzdHJEZWxpbWl0ZXIgKyBcInxcXFxccj9cXFxcbnxcXFxccnxeKVwiICtcclxuXHJcbiAgICAgICAgICAgIC8vIFF1b3RlZCBmaWVsZHMuXHJcbiAgICAgICAgICAgIFwiKD86XFxcIihbXlxcXCJdKig/OlxcXCJcXFwiW15cXFwiXSopKilcXFwifFwiICtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0YW5kYXJkIGZpZWxkcy5cclxuICAgICAgICAgICAgXCIoW15cXFwiXFxcXFwiICsgc3RyRGVsaW1pdGVyICsgXCJcXFxcclxcXFxuXSopKVwiXHJcbiAgICAgICAgKSxcclxuICAgICAgICBcImdpXCJcclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAvLyBDcmVhdGUgYW4gYXJyYXkgdG8gaG9sZCBvdXIgZGF0YS4gR2l2ZSB0aGUgYXJyYXlcclxuICAgIC8vIGEgZGVmYXVsdCBlbXB0eSBmaXJzdCByb3cuXHJcbiAgICB2YXIgYXJyRGF0YSA9IFtbXV07XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IHRvIGhvbGQgb3VyIGluZGl2aWR1YWwgcGF0dGVyblxyXG4gICAgLy8gbWF0Y2hpbmcgZ3JvdXBzLlxyXG4gICAgdmFyIGFyck1hdGNoZXMgPSBudWxsO1xyXG5cclxuXHJcbiAgICAvLyBLZWVwIGxvb3Bpbmcgb3ZlciB0aGUgcmVndWxhciBleHByZXNzaW9uIG1hdGNoZXNcclxuICAgIC8vIHVudGlsIHdlIGNhbiBubyBsb25nZXIgZmluZCBhIG1hdGNoLlxyXG4gICAgd2hpbGUgKGFyck1hdGNoZXMgPSBvYmpQYXR0ZXJuLmV4ZWMoIHN0ckRhdGEgKSl7XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgZGVsaW1pdGVyIHRoYXQgd2FzIGZvdW5kLlxyXG4gICAgICAgIHZhciBzdHJNYXRjaGVkRGVsaW1pdGVyID0gYXJyTWF0Y2hlc1sgMSBdO1xyXG5cclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGdpdmVuIGRlbGltaXRlciBoYXMgYSBsZW5ndGhcclxuICAgICAgICAvLyAoaXMgbm90IHRoZSBzdGFydCBvZiBzdHJpbmcpIGFuZCBpZiBpdCBtYXRjaGVzXHJcbiAgICAgICAgLy8gZmllbGQgZGVsaW1pdGVyLiBJZiBpZCBkb2VzIG5vdCwgdGhlbiB3ZSBrbm93XHJcbiAgICAgICAgLy8gdGhhdCB0aGlzIGRlbGltaXRlciBpcyBhIHJvdyBkZWxpbWl0ZXIuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzdHJNYXRjaGVkRGVsaW1pdGVyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICBzdHJNYXRjaGVkRGVsaW1pdGVyICE9PSBzdHJEZWxpbWl0ZXJcclxuICAgICAgICAgICAgKXtcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIGhhdmUgcmVhY2hlZCBhIG5ldyByb3cgb2YgZGF0YSxcclxuICAgICAgICAgICAgLy8gYWRkIGFuIGVtcHR5IHJvdyB0byBvdXIgZGF0YSBhcnJheS5cclxuICAgICAgICAgICAgYXJyRGF0YS5wdXNoKCBbXSApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdHJNYXRjaGVkVmFsdWU7XHJcblxyXG4gICAgICAgIC8vIE5vdyB0aGF0IHdlIGhhdmUgb3VyIGRlbGltaXRlciBvdXQgb2YgdGhlIHdheSxcclxuICAgICAgICAvLyBsZXQncyBjaGVjayB0byBzZWUgd2hpY2gga2luZCBvZiB2YWx1ZSB3ZVxyXG4gICAgICAgIC8vIGNhcHR1cmVkIChxdW90ZWQgb3IgdW5xdW90ZWQpLlxyXG4gICAgICAgIGlmIChhcnJNYXRjaGVzWyAyIF0pe1xyXG5cclxuICAgICAgICAgICAgLy8gV2UgZm91bmQgYSBxdW90ZWQgdmFsdWUuIFdoZW4gd2UgY2FwdHVyZVxyXG4gICAgICAgICAgICAvLyB0aGlzIHZhbHVlLCB1bmVzY2FwZSBhbnkgZG91YmxlIHF1b3Rlcy5cclxuICAgICAgICAgICAgc3RyTWF0Y2hlZFZhbHVlID0gYXJyTWF0Y2hlc1sgMiBdLnJlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKCBcIlxcXCJcXFwiXCIsIFwiZ1wiICksXHJcbiAgICAgICAgICAgICAgICBcIlxcXCJcIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGZvdW5kIGEgbm9uLXF1b3RlZCB2YWx1ZS5cclxuICAgICAgICAgICAgc3RyTWF0Y2hlZFZhbHVlID0gYXJyTWF0Y2hlc1sgMyBdO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBOb3cgdGhhdCB3ZSBoYXZlIG91ciB2YWx1ZSBzdHJpbmcsIGxldCdzIGFkZFxyXG4gICAgICAgIC8vIGl0IHRvIHRoZSBkYXRhIGFycmF5LlxyXG4gICAgICAgIGFyckRhdGFbIGFyckRhdGEubGVuZ3RoIC0gMSBdLnB1c2goIHN0ck1hdGNoZWRWYWx1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgcGFyc2VkIGRhdGEuXHJcbiAgICByZXR1cm4oIGFyckRhdGEgKTtcclxufVxyXG4iLCJpbXBvcnQgQmFzZVdpbmRvdyBmcm9tIFwiLi9CYXNlV2luZG93XCJcclxuaW1wb3J0IFduZE1hbiBmcm9tIFwiLi9XbmRNYW5cIlxyXG5pbXBvcnQgRnJpZW5kSW5mbyBmcm9tIFwiLi9GcmllbmRJbmZvXCJcclxuaW1wb3J0IEZyaWVuZHNVSSBmcm9tIFwiLi9GcmllbmRzVUlcIlxyXG5pbXBvcnQgVXNlckV2ZW50cyBmcm9tIFwiLi9Vc2VyRXZlbnRzXCJcclxuaW1wb3J0IFV0aWxzIGZyb20gXCIuL1V0aWxzXCJcclxuaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIlxyXG5pbXBvcnQgQmFua0NhcmRBZFVJIGZyb20gXCIuL0JhbmtDYXJkQWRVSVwiXHJcbmltcG9ydCBCYW5rVUkgZnJvbSBcIi4vQmFua1VJXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZXN0VUkgZXh0ZW5kcyBCYXNlV2luZG93IHtcclxuICAgIHN0YXRpYyBnZXQgUkVRVUVTVF9URVhUKCkgeyByZXR1cm4gXCLQn9C+0LzQvtCz0Lgg0L3QsNC/0L7Qu9C90LjRgtGMINGB0YPQvdC00YPQuiDRgSDQt9C+0LvQvtGC0L7QvCDQsiDQn9GA0YvQs9GD0L3QtVwiOyB9XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICBvbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIub25Jbml0KCk7XHJcbiAgICAgICAgdGhpcy5idG5SZXF1ZXN0Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uUmVxdWVzdENsaWNrKTtcclxuICAgICAgICB0aGlzLmJ0bk9wZW4ub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5fb25PcGVuQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuYnRuT3Blbi5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NJbml0aWFsUmlnaHQgPSB0aGlzLnByb2dyZXNzLnJpZ2h0O1xyXG4gICAgICAgIFduZE1hbi5pbnN0LmZyaWVuZHNVSS5vbihGcmllbmRzVUkuRVZFTlRfRlJJRU5EX1NFTEVDVEVELCB0aGlzLCB0aGlzLl9vbkZyaWVuZFNlbGVjdGVkKTtcclxuICAgICAgICB0aGlzLmRldlBsdXMudmlzaWJsZSA9IFV0aWxzLmRldk1vZGU7XHJcbiAgICAgICAgdGhpcy5kZXZTcGVlZFVwLnZpc2libGUgPSBVdGlscy5kZXZNb2RlO1xyXG4gICAgICAgIGlmIChVdGlscy5kZXZNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2UGx1cy5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5fYmFja2VuZC5kZXZBZGRUb0NoZXN0KDIwKTsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2U3BlZWRVcC5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5fYmFja2VuZC5kZXZTcGVlZFVwRXZlbnQodGhpcy5fYmFja2VuZC51c2VyRXZlbnRzLkNoZXN0LmlkKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TaG93KCkge1xyXG4gICAgICAgIHN1cGVyLm9uU2hvdygpO1xyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUd2VlblZhbHVlID0gMDtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kLnVzZXJFdmVudHMub24oVXNlckV2ZW50cy5FVkVOVF9DSEVTVCwgdGhpcywgdGhpcy5fb25DaGVzdEV2ZW50KTtcclxuICAgICAgICB0aGlzLl9vbkNoZXN0RXZlbnQoKTtcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLl9vbkZyYW1lKTtcclxuICAgICAgICB0aGlzLl9vbkZyYW1lKCk7XHJcbiAgICB9XHJcbiAgICBvbkhpZGUoKSB7XHJcbiAgICAgICAgc3VwZXIub25IaWRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2JhY2tlbmQpXHJcbiAgICAgICAgICAgIHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5vZmYoVXNlckV2ZW50cy5FVkVOVF9DSEVTVCwgdGhpcywgdGhpcy5fb25DaGVzdEV2ZW50KTtcclxuICAgICAgICBMYXlhLnRpbWVyLmNsZWFyQWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoYmFja2VuZCkge1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSBiYWNrZW5kO1xyXG4gICAgICAgIHRoaXMuX2ludml0ZWRJZHMgPSB7fTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmluc3QuYWRzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRTaG93SXRlbS5pbml0KGJhY2tlbmQpO1xyXG4gICAgICAgICAgICB0aGlzLmFkU2hvd0l0ZW0ub24oQmFua0NhcmRBZFVJLkVWRU5UX0NBUkRfQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyBCYW5rVUkuc2hvd0FkRm9yQ29pbnModGhpcy5fYmFja2VuZCk7IH0pO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmFkU2hvd0l0ZW0udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHByb2dyZXNzVHdlZW5WYWx1ZSgpIHsgcmV0dXJuIHRoaXMuX3Byb2dyZXNzVHdlZW47IH1cclxuICAgIHNldCBwcm9ncmVzc1R3ZWVuVmFsdWUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9wcm9ncmVzc1R3ZWVuID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5yaWdodCA9IHRoaXMuX3Byb2dyZXNzSW5pdGlhbFJpZ2h0ICogKDEgLSB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sYmxQcm9ncmVzc1ZhbHVlLnRleHQgPSBTdHJpbmcoTWF0aC5yb3VuZCh2YWx1ZSAqIHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5DaGVzdC5tb25leV9zb2Z0X21heCkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkNoZXN0RXZlbnQoKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5fYmFja2VuZC51c2VyRXZlbnRzLkNoZXN0O1xyXG4gICAgICAgIExheWEuVHdlZW4udG8odGhpcywgeyBwcm9ncmVzc1R3ZWVuVmFsdWU6IGV2ZW50Lm1vbmV5X3NvZnQgLyBldmVudC5tb25leV9zb2Z0X21heH0sIDUwMCwgTGF5YS5FYXNlLnF1YWRPdXQpO1xyXG4gICAgfVxyXG4gICAgX29uUmVxdWVzdENsaWNrKCkge1xyXG4gICAgICAgIC8vIGlmIChTb2NpYWxBcGkuaXNPSylcclxuICAgICAgICAvLyAgICAgU29jaWFsQXBpLmluc3Quc2hvd1NoYXJlQm94KENoZXN0VUkuUkVRVUVTVF9URVhULCBcIjg3NjkzNTkyMDk1NlwiKTsgLy8gaHR0cHM6Ly9vay5ydS9ncm91cC81OTM4NDIyODY3NTY0NC9hbGJ1bS81OTM4NDYwMjY4OTU5Ni84NzY5MzU5MjA5NTZcclxuICAgICAgICAvLyBlbHNlXHJcbiAgICAgICAgICAgIFduZE1hbi5pbnN0LmZyaWVuZHNVSS5zaG93RnJpZW5kcyhTb2NpYWxBcGkuaW5zdC5hcHBGcmllbmRzLmZpbHRlcihpbmZvID0+ICF0aGlzLl9pbnZpdGVkSWRzW2luZm8uaWRdKSk7XHJcbiAgICB9XHJcbiAgICBfb25GcmllbmRTZWxlY3RlZChpbmZvKSB7XHJcbiAgICAgICAgaWYgKGluZm8pIHtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Quc2hvd1JlcXVlc3RCb3goaW5mby5pZCwgQ2hlc3RVSS5SRVFVRVNUX1RFWFQpO1xyXG4gICAgICAgICAgICB0aGlzLl9iYWNrZW5kLmZyaWVuZEFzayhpbmZvLmlkKTtcclxuICAgICAgICAgICAgdGhpcy5faW52aXRlZElkc1tpbmZvLmlkXSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdENsaWNrKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Quc2hvd0ludml0ZUJveChDaGVzdFVJLlJFUVVFU1RfVEVYVCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29uT3BlbkNsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW5SZWNlaXZlQ2hlc3QpXHJcbiAgICAgICAgICAgIHRoaXMuX2JhY2tlbmQucmVjZWl2ZUNoZXN0KCk7XHJcbiAgICB9XHJcbiAgICBfb25GcmFtZSgpIHtcclxuICAgICAgICB0aGlzLm9wZW5IaW50LnVwZGF0ZSh0aGlzLl9iYWNrZW5kLnVzZXJFdmVudHMuQ2hlc3QpO1xyXG4gICAgICAgIHRoaXMuYnRuT3Blbi5kaXNhYmxlZCA9ICF0aGlzLl9jYW5SZWNlaXZlQ2hlc3Q7XHJcbiAgICAgICAgaWYgKHRoaXMuYWRTaG93SXRlbSAmJiB0aGlzLmFkU2hvd0l0ZW0uYnRuQnV5KVxyXG4gICAgICAgICAgICB0aGlzLl9hcHBseUFuaW1TY2FsZSh0aGlzLmFkU2hvd0l0ZW0uYnRuQnV5KTtcclxuICAgIH1cclxuICAgIGdldCBfY2FuUmVjZWl2ZUNoZXN0KCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5DaGVzdDtcclxuICAgICAgICByZXR1cm4gZXZlbnQubW9uZXlfc29mdCA+IDAgJiYgZXZlbnQuZXhwaXJlZDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5pbXBvcnQgU29jaWFsQXBpIGZyb20gXCIuL1NvY2lhbEFwaVwiXHJcbmltcG9ydCBCYWNrZW5kIGZyb20gXCIuL0JhY2tlbmRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGV2VktTY29yZXMgZXh0ZW5kcyBMYXlhLlBhbmVsIHtcclxuICAgIGluaXQoYmFja2VuZCkge1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSBiYWNrZW5kO1xyXG4gICAgICAgIFV0aWxzLmluaXRQcm9wcyh0aGlzLCBbJ2lucFNjb3JlcycsICdidG5TZW5kJywgJ2J0bkNhbmNlbCddKTtcclxuICAgICAgICB0aGlzLmJ0blNlbmQub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5fb25TZW5kQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuYnRuQ2FuY2VsLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uQ2FuY2VsQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQub24oJ2NsaWVudC5zeXN0ZW1Db21tYW5kcy5kZWJ1Zy52a0FkZEFwcEV2ZW50JywgdGhpcywgdGhpcy5fb25BZGRBcHBFdmVudFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHNob3coc2NvcmVzKSB7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1ZLKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wU2NvcmVzLnRleHQgPSBzY29yZXMgfHwgJzAnO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5zaG93TGVhZGVyYm9hcmRCb3goc2NvcmVzKTtcclxuICAgIH1cclxuICAgIF9vblNlbmRDbGljaygpIHtcclxuICAgICAgICBhbGVydChcInNlY3VyZS5hZGRBcHBFdmVudCB7IGFjdGl2aXR5X2lkOiAnMScsIHZhbHVlOiAnXCIgKyB0aGlzLmlucFNjb3Jlcy50ZXh0ICsgXCInIH1cIilcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kLl9hcGkoJ3N5c3RlbUNvbW1hbmRzLmRlYnVnLnZrQWRkQXBwRXZlbnQnLCB7IGFjdGl2aXR5X2lkOiAnMScsIHZhbHVlOiB0aGlzLmlucFNjb3Jlcy50ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgX29uQWRkQXBwRXZlbnRSZXNwb25zZShkYXRhKSB7XHJcbiAgICAgICAgYWxlcnQoZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgICAgdGhpcy5fb25DYW5jZWxDbGljaygpO1xyXG4gICAgfVxyXG4gICAgX29uQ2FuY2VsQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHNjb3JlcyA9IE51bWJlcih0aGlzLmlucFNjb3Jlcy50ZXh0KTtcclxuICAgICAgICBhbGVydChcIlZLLmNhbGxNZXRob2QoJ3Nob3dMZWFkZXJib2FyZEJveCcsIFwiICsgc2NvcmVzICsgXCIpXCIpO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0LnNob3dMZWFkZXJib2FyZEJveChzY29yZXMpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9Mb2NhbGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50VGltZXJWaWV3IGV4dGVuZHMgTGF5YS5QYW5lbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2xhc3RUaW1lciA9IDA7XHJcbiAgICAgICAgdGhpcy5fcHJlZml4ID0gTG9jYWxlLnRleHQoJ0xfVElNRVJfSU4nKSArICcgJzsvLyBcItCn0JXQoNCV0JcgXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByZWZpeCgpIHsgcmV0dXJuIHRoaXMuX3ByZWZpeDsgfVxyXG4gICAgc2V0IHByZWZpeCh2YWx1ZSkgeyB0aGlzLl9wcmVmaXggPSB2YWx1ZTsgfVxyXG5cclxuICAgIHVwZGF0ZShldmVudCkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9ICFldmVudC5leHBpcmVkO1xyXG4gICAgICAgIGlmICghZXZlbnQuZXhwaXJlZCAmJiBldmVudC5zZWNvbmRzUmVtYWluICE9IHRoaXMuX2xhc3RUaW1lcikge1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0VGltZXIgPSBldmVudC5zZWNvbmRzUmVtYWluO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGJsSGludFRpbWVyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYmxIaW50VGltZXIgPSB0aGlzLmdldENoaWxkQnlOYW1lKCdsYmxIaW50VGltZXInKTtcclxuICAgICAgICAgICAgdGhpcy5sYmxIaW50VGltZXIudGV4dCA9IHRoaXMucHJlZml4ID8gdGhpcy5wcmVmaXggKyBldmVudC50aW1lclRleHQgOiBldmVudC50aW1lclRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvYXRVcEhpbnQgZXh0ZW5kcyBMYXlhLlBhbmVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9sYWJlbHMpIHJldHVybjtcclxuICAgICAgICB0aGlzLl9pbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5fbGFiZWxzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm51bUNoaWxkcmVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gdGhpcy5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICBpZiAobGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVscy5wdXNoKGxhYmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZChtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIGxhYmVsID0gdGhpcy5fbGFiZWxzW3RoaXMuX2luZGV4XTtcclxuICAgICAgICBsYWJlbC50ZXh0ID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLl9pbmRleCA9ICh0aGlzLl9pbmRleCArIDEpICUgdGhpcy5fbGFiZWxzLmxlbmd0aDtcclxuICAgICAgICBsYWJlbC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICBMYXlhLlR3ZWVuLnRvKG5ldyBIaW50TGFiZWwobGFiZWwpLCB7IGFscGhhOiAxIH0sIDUwMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEhpbnRMYWJlbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihsYWJlbCkge1xyXG4gICAgICAgIHRoaXMuX2xhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgdGhpcy5fYWxwaGEgPSAwO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFscGhhKCkgeyByZXR1cm4gdGhpcy5fYWxwaGE7IH1cclxuICAgIHNldCBhbHBoYSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FscGhhID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fbGFiZWwuYWxwaGEgPSBNYXRoLnNxcnQoTWF0aC5zcXJ0KDEgLSB2YWx1ZSkpO1xyXG4gICAgICAgIHRoaXMuX2xhYmVsLnZpc2libGUgPSB2YWx1ZSA8IDE7XHJcbiAgICAgICAgdGhpcy5fbGFiZWwueSA9ICh0aGlzLl9sYWJlbC5wYXJlbnQuaGVpZ2h0IC0gdGhpcy5fbGFiZWwuaGVpZ2h0KSAqICgxIC0gdmFsdWUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEJhc2VXaW5kb3cgZnJvbSBcIi4vQmFzZVdpbmRvd1wiXHJcbmltcG9ydCBTb2NpYWxBcGkgZnJvbSBcIi4vU29jaWFsQXBpXCJcclxuaW1wb3J0IEZyaWVuZHNMaXN0SXRlbSBmcm9tIFwiLi9GcmllbmRzTGlzdEl0ZW1cIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJpZW5kRGVmZWF0VUkgZXh0ZW5kcyBCYXNlV2luZG93IHtcclxuICAgIG9uSW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0gW3RoaXMuaXRlbTAsIHRoaXMuaXRlbTEsIHRoaXMuaXRlbTJdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuX2l0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pdGVtc1tpXS5jaGVja0luaXQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2l0ZW1zW2ldLm9uKEZyaWVuZHNMaXN0SXRlbS5FVkVOVF9TSEFSRSwgdGhpcywgdGhpcy5fb25TaGFyZUNsaWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuU2hhcmUub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IHRoaXMuX29uU2hhcmVDbGljayh0aGlzLml0ZW1GcmllbmQuaW5mbyk7IHRoaXMuaGlkZSgpOyB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRyeVNob3coc2NvcmVzLCBwcmV2U2NvcmVzKSB7XHJcbiAgICAgICAgdmFyIGRlZmVhdGVkID0gU29jaWFsQXBpLmluc3QuYXBwRnJpZW5kcy5maWx0ZXIoZSA9PiBlLnNjb3JlICYmIHNjb3JlcyA+IGUuc2NvcmUgJiYgKCFwcmV2U2NvcmVzIHx8IGUuc2NvcmUgPj0gcHJldlNjb3JlcykpO1xyXG4gICAgICAgIGlmICghZGVmZWF0ZWQubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZGVmZWF0ZWQuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpO1xyXG4gICAgICAgIHRoaXMuX3Njb3JlcyA9IHNjb3JlcztcclxuICAgICAgICB0aGlzLl91cGRhdGVWaWV3KGRlZmVhdGVkKTtcclxuICAgICAgICBzdXBlci5zaG93KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FuaW1UaW1lID0gMDtcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLl9vbkZyYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHN1cGVyLmhpZGUoKTtcclxuICAgICAgICBMYXlhLnRpbWVyLmNsZWFyQWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkZyYW1lKCkge1xyXG4gICAgICAgIHRoaXMuX2FuaW1UaW1lICs9IExheWEudGltZXIuZGVsdGEgKiAwLjAwMTtcclxuICAgICAgICBsZXQgQSA9IDEwO1xyXG4gICAgICAgIGxldCB0ID0gMiAqIE1hdGguUEkgKiB0aGlzLl9hbmltVGltZTtcclxuICAgICAgICB0aGlzLmFycm93VXAueSA9IEEgKiAoMSArIE1hdGguc2luKHQpKTtcclxuICAgICAgICB0aGlzLmFycm93RG93bi55ID0gQSAqICgxIC0gTWF0aC5zaW4odCkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblNoYXJlQ2xpY2soaW5mbykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3Njb3JlcywgaW5mbyk7XHJcbiAgICAgICAgdmFyIGRlbHRhID0gKHRoaXMuX3Njb3JlcyAtIGluZm8uc2NvcmUpO1xyXG4gICAgICAgIHZhciBzY29yZVN0ciA9IFV0aWxzLmZvcm1hdFByaWNlKGRlbHRhLCBbXCLQvtGH0LrQvlwiLCBcItC+0YfQutCwXCIsIFwi0L7Rh9C60L7QslwiXSk7XHJcbiAgICAgICAgLy9pZiAoU29jaWFsQXBpLmlzVkspXHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0LnNob3dSZXF1ZXN0Qm94KGluZm8uaWQsIFwiWNCwLdGF0LAsINGPINGC0LXQsdGPINC+0LHQvtCz0L3QsNC7INC90LAgXCIgKyBzY29yZVN0cik7XHJcbiAgICAgICAgLy9lbHNlIFNvY2lhbEFwaS5pbnN0LnNob3dTaGFyZUJveChcIljQsC3RhdCwLCDRjyDQvtCx0L7Qs9C90LDQuyBcIiArIGluZm8ubmFtZSArIFwiINC90LAgXCIgKyBzY29yZVN0ciwgU29jaWFsQXBpLlBIT1RPX05FV19TQ09SRSk7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlVmlldyhmcmllbmRzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdCkge1xyXG4gICAgICAgICAgICB0aGlzLmxibFNjb3JlLnRleHQgPSB0aGlzLl9zY29yZXM7XHJcbiAgICAgICAgICAgIHZhciB2aXNDb3VudCA9IE1hdGgubWluKGZyaWVuZHMubGVuZ3RoLCB0aGlzLl9pdGVtcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB0aGlzLmxibE5GcmllbmRzLnRleHQgPSBmcmllbmRzLmxlbmd0aCA9PSAxID8gXCLQuCDQvtCx0L7Qs9C90LDQuyDQtNGA0YPQs9CwXCIgOiBcItC4INC+0LHQvtCz0L3QsNC7IFwiICsgdmlzQ291bnQgKyBcIiDQtNGA0YPQt9C10LlcIjtcclxuICAgICAgICAgICAgdGhpcy5sYmxORnJpZW5kczIudmlzaWJsZSA9IGZyaWVuZHMubGVuZ3RoID4gdGhpcy5faXRlbXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYmxORnJpZW5kczIudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4dHJhQ291bnQgPSBmcmllbmRzLmxlbmd0aCAtIHRoaXMuX2l0ZW1zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMubGJsTkZyaWVuZHMyLnRleHQgPSBleHRyYUNvdW50ID09IDEgPyBcItC4INC10YnQtSAxINC00YDRg9Cz0LBcIiA6IFwi0Lgg0LXRidC1IFwiICsgZXh0cmFDb3VudCArIFwiINC00YDRg9C30LXQuVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5faXRlbXNbaV07XHJcbiAgICAgICAgICAgICAgICBpdGVtLnZpc2libGUgPSBpIDwgdmlzQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pbmZvID0gZnJpZW5kc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmxlZnQgPSBpdGVtLnJpZ2h0ID0gaXRlbS5jZW50ZXJYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ueCA9IGl0ZW0ucGFyZW50LndpZHRoICogKChpICsgMC41KSAvIHZpc0NvdW50KSAtIGl0ZW0ud2lkdGggKiAwLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC51c2VyLnNjb3JlID0gdGhpcy5fc2NvcmVzO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1Zb3UuaW5mbyA9IFNvY2lhbEFwaS5pbnN0LnVzZXI7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbUZyaWVuZC5pbmZvID0gZnJpZW5kc1swXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGcmllbmRJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlkLCBuYW1lLCBhdmF0YXIpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmF2YXRhciA9IGF2YXRhcjtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIH1cclxufSIsImltcG9ydCBGcmllbmRJbmZvIGZyb20gXCIuL0ZyaWVuZEluZm9cIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJpZW5kc0xpc3RJdGVtIGV4dGVuZHMgTGF5YS5QYW5lbCB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX1NIQVJFKCkgeyByZXR1cm4gXCJTSEFSRVwiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbmZvKCkgeyByZXR1cm4gdGhpcy5faW5mbzsgfVxyXG4gICAgc2V0IGluZm8odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9pbmZvID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlVmlldygpO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVWaWV3KCkge1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgICAgICB2YXIgaW5mbyA9IHRoaXMuaW5mbztcclxuICAgICAgICBpZiAodGhpcy5sYmxOYW1lKVxyXG4gICAgICAgICAgICB0aGlzLmxibE5hbWUudmlzaWJsZSA9ICEhaW5mbztcclxuICAgICAgICBpZiAodGhpcy5pbnZpdGVCYWNrKVxyXG4gICAgICAgICAgICB0aGlzLmludml0ZUJhY2sudmlzaWJsZSA9ICFpbmZvO1xyXG4gICAgICAgIGlmIChpbmZvKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxibE5hbWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxibE5hbWUudGV4dCA9IGluZm8ubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5hdmF0YXIuc2tpbiA9IGluZm8uYXZhdGFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYmxTY29yZSAmJiAhTnVtYmVyLmlzTmFOKE51bWJlcihpbmZvLnNjb3JlKSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxibFNjb3JlLnRleHQgPSBpbmZvLnNjb3JlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaW5pdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgVXRpbHMuaW5pdFByb3BzKHRoaXMsIFtcImxibE5hbWVcIiwgXCJpbnZpdGVCYWNrXCIsIFwiYXZhdGFyXCIsIFwibGJsU2NvcmVcIiwgXCJidG5TaGFyZVwiXSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF2YXRhcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF2YXRhclNpemUgPSB0aGlzLmF2YXRhci53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXZhdGFyLm9uKExheWEuRXZlbnQuTE9BREVELCB0aGlzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSB0aGlzLmF2YXRhci5zb3VyY2Uud2lkdGggLyB0aGlzLmF2YXRhci5zb3VyY2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXRpbyA+IDEpIHsgdGhpcy5hdmF0YXIud2lkdGggPSBhdmF0YXJTaXplICogcmF0aW87IHRoaXMuYXZhdGFyLmhlaWdodCA9IGF2YXRhclNpemU7IH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHsgdGhpcy5hdmF0YXIud2lkdGggPSBhdmF0YXJTaXplOyB0aGlzLmF2YXRhci5oZWlnaHQgPSBhdmF0YXJTaXplIC8gcmF0aW87IH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF2YXRhci5tYXNrLnggPSAodGhpcy5hdmF0YXIud2lkdGggLSB0aGlzLmF2YXRhci5tYXNrLndpZHRoKSAqIDAuNTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ0blNoYXJlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5ldmVudChGcmllbmRzTGlzdEl0ZW0uRVZFTlRfU0hBUkUsIHRoaXMuaW5mbyk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBCYXNlV2luZG93IGZyb20gXCIuL0Jhc2VXaW5kb3dcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJpZW5kc1VJIGV4dGVuZHMgQmFzZVdpbmRvdyB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0ZSSUVORF9TRUxFQ1RFRCgpIHsgcmV0dXJuIFwiRlJJRU5EX1NFTEVDVEVEXCI7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IENPTFVNTlMoKSB7IHJldHVybiAzOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFJPV1NfTUlOKCkgeyByZXR1cm4gMjsgfVxyXG4gICAgc3RhdGljIGdldCBST1dTX01BWCgpIHsgcmV0dXJuIDU7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG4gICAgb25Jbml0KCkge1xyXG4gICAgICAgIHN1cGVyLm9uSW5pdCgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxIZWlnaHQgPSB0aGlzLmJhY2suaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuX2l0ZW1IZWlnaHQgPSB0aGlzLmxpc3QuZ2V0Q2hpbGRBdCgwKS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5wYWdlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMubGlzdC5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICBpdGVtLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uSXRlbUNsaWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG93RnJpZW5kcyhpbmZvcykge1xyXG4gICAgICAgIHRoaXMuX2luZm9zID0gaW5mb3Muc2xpY2UoMCwgRnJpZW5kc1VJLkNPTFVNTlMgKiBGcmllbmRzVUkuUk9XU19NQVggLSAxKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVWaWV3KCk7XHJcbiAgICAgICAgdGhpcy5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSXRlbUNsaWNrKGUpIHtcclxuICAgICAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuZXZlbnQoRnJpZW5kc1VJLkVWRU5UX0ZSSUVORF9TRUxFQ1RFRCwgaXRlbS5pbmZvKTtcclxuICAgIH1cclxuICAgIF91cGRhdGVWaWV3KCkge1xyXG4gICAgICAgIHZhciBpbmZvcyA9IHRoaXMuX2luZm9zO1xyXG4gICAgICAgIHZhciBzaG93Q291bnQgPSBNYXRoLm1pbihNYXRoLm1heChGcmllbmRzVUkuQ09MVU1OUyAqIEZyaWVuZHNVSS5ST1dTX01JTiwgaW5mb3MubGVuZ3RoICsgMSksIEZyaWVuZHNVSS5DT0xVTU5TICogRnJpZW5kc1VJLlJPV1NfTUFYKTtcclxuICAgICAgICBzaG93Q291bnQgPSBNYXRoLmNlaWwoc2hvd0NvdW50IC8gRnJpZW5kc1VJLkNPTFVNTlMpICogRnJpZW5kc1VJLkNPTFVNTlM7XHJcbiAgICAgICAgdGhpcy5iYWNrLmhlaWdodCA9IHRoaXMuX2luaXRpYWxIZWlnaHQgKyAoc2hvd0NvdW50IC8gRnJpZW5kc1VJLkNPTFVNTlMgLSAxKSAqIHRoaXMuX2l0ZW1IZWlnaHQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMubGlzdC5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICBpdGVtLnZpc2libGUgPSBpIDwgc2hvd0NvdW50O1xyXG4gICAgICAgICAgICBpZiAoaSA8IHNob3dDb3VudClcclxuICAgICAgICAgICAgICAgIGl0ZW0uaW5mbyA9IGluZm9zW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgSGVsaXhHYW1lIGZyb20gXCIuL0hlbGl4R2FtZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVByb2dyZXNzIGV4dGVuZHMgTGF5YS5FdmVudERpc3BhdGNoZXIge1xyXG4gICAgc3RhdGljIGdldCBFVkVOVF9TQ09SRV9DSEFOR0VEKCkgeyByZXR1cm4gJ1NDT1JFX0NIQU5HRUQnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX1NDT1JFX0JFU1QoKSB7IHJldHVybiAnU0NPUkVfQkVTVCc7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfTEVWRUxfQ0hBTkdFRCgpIHsgcmV0dXJuICdMRVZFTF9DSEFOR0VEJzsgfVxyXG4gICAgLy9zdGF0aWMgZ2V0IEVWRU5UX0NPSU5TX0NIQU5HRUQoKSB7IHJldHVybiAnQ09JTlNfQ0hBTkdFRCc7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlID0ge1xyXG4gICAgICAgICAgICBiZXN0U2NvcmU6IDAsXHJcbiAgICAgICAgICAgIGJlc3RTY29yZVByZXY6IDAsXHJcbiAgICAgICAgICAgIGxldmVsOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pc0xhc3RHYW1lV2FzQmVzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2N1clNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLl9jb2lucyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN0YXRlKCkgeyByZXR1cm4gdGhpcy5fc3RhdGU7IH1cclxuICAgIGdldCBnYW1lKCkgeyByZXR1cm4gdGhpcy5fZ2FtZTsgfVxyXG4gICAgLy8gZ2V0IGNvaW5zKCkgeyByZXR1cm4gdGhpcy5fY29pbnM7IH1cclxuICAgIC8vIHNldCBjb2lucyh2YWx1ZSkge1xyXG4gICAgLy8gICAgIHRoaXMuX2NvaW5zID0gdmFsdWU7XHJcbiAgICAvLyAgICAgdGhpcy5ldmVudChFVkVOVF9DT0lOU19DSEFOR0VELCB2YWx1ZSk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgYXR0YWNoR2FtZShnYW1lKSB7XHJcbiAgICAgICAgdGhpcy5kZXRhY2hHYW1lKCk7XHJcbiAgICAgICAgdGhpcy5fZ2FtZSA9IGdhbWU7XHJcbiAgICAgICAgZ2FtZS5vbihIZWxpeEdhbWUuRVZFTlRfUkVTVUxULCB0aGlzLCB0aGlzLl9vblJlc3VsdCk7XHJcbiAgICAgICAgZ2FtZS5vbihIZWxpeEdhbWUuRVZFTlRfTEVWRUxfUEFTU0VELCB0aGlzLCB0aGlzLl9vbkxldmVsUGFzc2VkKTtcclxuICAgICAgICBnYW1lLm9uKEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9SRU1PVkVELCB0aGlzLCB0aGlzLl9vbkxldmVsUmVtb3ZlZCk7XHJcbiAgICAgICAgdGhpcy5pc0xhc3RHYW1lV2FzQmVzdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vdGhpcy5fb25SZXN1bHQoZ2FtZS5yZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoR2FtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZ2FtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZ2FtZS5yZXN1bHQgIT0gSGVsaXhHYW1lLlJFU1VMVF9XSU4pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clNjb3JlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZS5vZmYoSGVsaXhHYW1lLkVWRU5UX1JFU1VMVCwgdGhpcywgdGhpcy5fb25SZXN1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lLm9mZihIZWxpeEdhbWUuRVZFTlRfTEVWRUxfUEFTU0VELCB0aGlzLCB0aGlzLl9vbkxldmVsUGFzc2VkKTtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZS5vZmYoSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1JFTU9WRUQsIHRoaXMsIHRoaXMuX29uTGV2ZWxSZW1vdmVkKTtcclxuICAgICAgICAgICAgdGhpcy5fZ2FtZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGN1clNjb3JlKCkgeyByZXR1cm4gdGhpcy5fY3VyU2NvcmU7IH1cclxuICAgIHNldCBjdXJTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLl9jdXJTY29yZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJTY29yZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50KEdhbWVQcm9ncmVzcy5FVkVOVF9TQ09SRV9DSEFOR0VELCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGJlc3RTY29yZSgpIHsgcmV0dXJuIHRoaXMuX3N0YXRlLmJlc3RTY29yZTsgfVxyXG4gICAgc2V0IGJlc3RTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlLmJlc3RTY29yZSA9IHZhbHVlO1xyXG4gICAgICAgIC8vaWYgKCF0aGlzLl9zdGF0ZS5iZXN0U2NvcmVQcmV2KVxyXG4gICAgICAgIC8vICAgIHRoaXMuX3N0YXRlLmJlc3RTY29yZVByZXYgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmV2ZW50KEdhbWVQcm9ncmVzcy5FVkVOVF9TQ09SRV9CRVNULCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYmVzdFNjb3JlUHJldigpIHsgcmV0dXJuIHRoaXMuX3N0YXRlLmJlc3RTY29yZVByZXY7IH1cclxuICAgIHNldCBiZXN0U2NvcmVQcmV2KHZhbHVlKSB7IHRoaXMuX3N0YXRlLmJlc3RTY29yZVByZXYgPSB2YWx1ZTsgfVxyXG4gICAgZ2V0IGxldmVsKCkgeyByZXR1cm4gdGhpcy5fc3RhdGUubGV2ZWw7IH1cclxuICAgIHNldCBsZXZlbCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlLmxldmVsID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5ldmVudChHYW1lUHJvZ3Jlc3MuRVZFTlRfTEVWRUxfQ0hBTkdFRCwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlc3VsdChyZXN1bHQpIHtcclxuICAgICAgICB0aGlzLmlzTGFzdEdhbWVXYXNCZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBIZWxpeEdhbWUuUkVTVUxUX1BMQVlJTkcpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChHYW1lUHJvZ3Jlc3MuRVZFTlRfU0NPUkVfQ0hBTkdFRCwgdGhpcy5jdXJTY29yZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9XSU4pIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5sZXZlbCsrO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50KEdhbWVQcm9ncmVzcy5FVkVOVF9MRVZFTF9DSEFOR0VELCB0aGlzLnN0YXRlLmxldmVsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PSBIZWxpeEdhbWUuUkVTVUxUX0xPT1NFKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1clNjb3JlID4gdGhpcy5zdGF0ZS5iZXN0U2NvcmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuYmVzdFNjb3JlUHJldiA9IHRoaXMuc3RhdGUuYmVzdFNjb3JlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5iZXN0U2NvcmUgPSB0aGlzLmN1clNjb3JlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xhc3RHYW1lV2FzQmVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KEdhbWVQcm9ncmVzcy5FVkVOVF9TQ09SRV9CRVNULCB0aGlzLnN0YXRlLmJlc3RTY29yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfb25MZXZlbFBhc3NlZChsZXZlbCkge1xyXG4gICAgICAgIHRoaXMuY3VyU2NvcmUgKz0gbGV2ZWwgKiB0aGlzLnN0YXRlLmxldmVsO1xyXG4gICAgfVxyXG4gICAgX29uTGV2ZWxSZW1vdmVkKGluZm8pIHtcclxuICAgICAgICBpZiAoaW5mby5jcmFzaGVkTGV2ZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJTY29yZSArPSBpbmZvLmNyYXNoZWRMZXZlbCAqIHRoaXMuc3RhdGUubGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEJhc2VXaW5kb3cgZnJvbSBcIi4vQmFzZVdpbmRvd1wiXHJcbmltcG9ydCBXbmRNYW4gZnJvbSBcIi4vV25kTWFuXCJcclxuaW1wb3J0IEJhY2tlbmQgZnJvbSBcIi4vQmFja2VuZFwiO1xyXG5pbXBvcnQgU29jaWFsQXBpIGZyb20gXCIuL1NvY2lhbEFwaVwiO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVSZXN1bHRVSSBleHRlbmRzIEJhc2VXaW5kb3cge1xyXG4gICAgc3RhdGljIGdldCBFVkVOVF9XTkRfUkVTVUxUKCkgeyByZXR1cm4gXCJXTkRfUkVTVUxUXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgV05EX1JFU1VMVF9SRVNUQVJUKCkgeyByZXR1cm4gXCJSRVNUQVJUXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgV05EX1JFU1VMVF9SRVNVTUUoKSB7IHJldHVybiBcIlJFU1VNRVwiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuICAgIG9uSW5pdCgpIHtcclxuICAgICAgICBzdXBlci5vbkluaXQoKTtcclxuICAgICAgICB0aGlzLmJ0blNoYXJlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uU2hhcmVDbGljayk7XHJcbiAgICAgICAgdGhpcy5idG5SZXN0YXJ0Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uUmVzdGFydENsaWNrKTtcclxuICAgICAgICB0aGlzLmJ0blJlc3VtZUZyZWUub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5fb25SZXN1bWVGcmVlQ2xpY2spO1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdW1lRnJlZS5pbml0KFsndGl0bGVGcmVlJywgJ3RpdGxlQWRzJ10pO1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdW1lU29mdC5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLl9vblJlc3VtZVNvZnRDbGljayk7XHJcbiAgICAgICAgdGhpcy5idG5SZXN1bWVBZHMub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5fb25SZXN1bWVBZHNDbGljayk7XHJcbiAgICAgICAgdGhpcy5kZXZTcGVlZFVwRnJlZS52aXNpYmxlID0gVXRpbHMuZGV2TW9kZTtcclxuICAgICAgICB0aGlzLmRldlNwZWVkVXBGcmVlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLl9iYWNrZW5kLmRldlNwZWVkVXBFdmVudCh0aGlzLl9iYWNrZW5kLnVzZXJFdmVudHMuTGlmZS5pZCk7IH0pO1xyXG4gICAgICAgIHRoaXMuZGV2U3BlZWRVcEZyZWVWaWFBZC52aXNpYmxlID0gVXRpbHMuZGV2TW9kZTtcclxuICAgICAgICB0aGlzLmRldlNwZWVkVXBGcmVlVmlhQWQub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IHRoaXMuX2JhY2tlbmQuZGV2U3BlZWRVcEV2ZW50KHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5BZC5pZCk7IH0pO1xyXG4gICAgfVxyXG4gICAgb25TaG93KCkge1xyXG4gICAgICAgIHN1cGVyLm9uU2hvdygpO1xyXG4gICAgICAgIHRoaXMuX2Fkc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYmxSZXN0YXJ0LnZpc2libGUgPSAhdGhpcy5fd2luO1xyXG4gICAgICAgIHRoaXMubGJsQ29udGludWUudmlzaWJsZSA9IHRoaXMuX3dpbjtcclxuICAgICAgICB0aGlzLmJ0blJlc3VtZUFkcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgdGhpcy5fb25GcmFtZSk7XHJcbiAgICAgICAgdGhpcy5fb25GcmFtZSgpO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0Lm9uKFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSwgdGhpcywgdGhpcy5fb25BZHNTaG93bik7XHJcbiAgICB9XHJcbiAgICBvbkhpZGUoKSB7XHJcbiAgICAgICAgc3VwZXIub25IaWRlKCk7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3Qub2ZmKFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSwgdGhpcywgdGhpcy5fb25BZHNTaG93bik7XHJcbiAgICAgICAgTGF5YS50aW1lci5jbGVhckFsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGJhY2tlbmQpIHtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kID0gYmFja2VuZDtcclxuICAgIH1cclxuICAgIHNob3dSZXN1bHQod2luLCBpc0Jlc3QsIGxldmVsLCBiZXN0U2NvcmUpIHtcclxuICAgICAgICB0aGlzLl93aW4gPSB3aW47XHJcbiAgICAgICAgdmFyIGJlc3QgPSAhd2luICYmIGlzQmVzdDtcclxuICAgICAgICBpZiAod2luKSB0aGlzLmxibExldmVsVmFsdWUudGV4dCA9IGxldmVsO1xyXG4gICAgICAgIGVsc2UgdGhpcy5sYmxCZXN0VmFsdWUudGV4dCA9IGJlc3RTY29yZTtcclxuICAgICAgICB0aGlzLndpblZpZXcudmlzaWJsZSA9IHdpbjtcclxuICAgICAgICB0aGlzLmJlc3RWaWV3LnZpc2libGUgPSBiZXN0O1xyXG4gICAgICAgIHRoaXMuYnRuU2hhcmUudmlzaWJsZSA9ICh3aW4gfHwgYmVzdCkgJiYgIVNvY2lhbEFwaS5pc1lBO1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdW1lRnJlZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHdpbikgeyB0aGlzLmJ0blJlc3VtZVNvZnQudmlzaWJsZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGJsUmVzdW1lQ29zdC50ZXh0ID0gU3RyaW5nKHRoaXMuX2JhY2tlbmQucmVzdW1lQ29zdE9sZCk7XHJcbiAgICAgICAgICAgIHRoaXMubGJsUmVzdW1lQ29zdE5ldy50ZXh0ID0gU3RyaW5nKHRoaXMuX2JhY2tlbmQucmVzdW1lQ29zdCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzY291bnRWaWV3LnZpc2libGUgPSB0aGlzLl9iYWNrZW5kLnJlc3VtZUNvc3RPbGQgIT0gdGhpcy5fYmFja2VuZC5yZXN1bWVDb3N0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9wZW5kU2hvd1Jlc3RhcnQod2luKTtcclxuICAgICAgICB0aGlzLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25GcmFtZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3dpbikge1xyXG4gICAgICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLl9iYWNrZW5kLnVzZXJFdmVudHMuTGlmZTtcclxuICAgICAgICAgICAgdmFyIGV4cGlyZWQgPSBldmVudC5leHBpcmVkOyBcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0ZyZWVCdXR0b24oXHJcbiAgICAgICAgICAgICAgICBleHBpcmVkICYmIHRoaXMuX2JhY2tlbmQuZnJlZVJlc3VtZUNvdW50ID09IDAgJiYgdGhpcy5fYWRzQ2FuU2hvdygpLFxyXG4gICAgICAgICAgICAgICAgIWV4cGlyZWQsIHRoaXMuX2Fkc0NhblNob3coKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuUmVzdW1lU29mdC52aXNpYmxlID0gKCFleHBpcmVkIHx8ICF0aGlzLmJ0blJlc3VtZUZyZWUudmlzaWJsZSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5idG5SZXN1bWVTb2Z0LnZpc2libGUpIHsgdGhpcy5idG5SZXN1bWVGcmVlLmNlbnRlclggPSAwOyB0aGlzLmJ0blJlc3VtZUZyZWUubGVmdCA9IHVuZGVmaW5lZDsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdGhpcy5idG5SZXN1bWVGcmVlLmxlZnQgPSAwOyB0aGlzLmJ0blJlc3VtZUZyZWUuY2VudGVyWCA9IHVuZGVmaW5lZDsgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYnRuUmVzdW1lRnJlZS52aXNpYmxlKSB7IHRoaXMuYnRuUmVzdW1lU29mdC5jZW50ZXJYID0gMDsgdGhpcy5idG5SZXN1bWVTb2Z0LmxlZnQgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICAgICAgZWxzZSB7IHRoaXMuYnRuUmVzdW1lU29mdC5yaWdodCA9IDA7IHRoaXMuYnRuUmVzdW1lU29mdC5jZW50ZXJYID0gdW5kZWZpbmVkOyB9XHJcbiAgICAgICAgICAgIHRoaXMub3BlbkhpbnQudXBkYXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYXBwbHlBbmltU2NhbGUodGhpcy5idG5SZXN1bWVGcmVlKTtcclxuICAgIH1cclxuICAgIF9zaG93RnJlZUJ1dHRvbih2aXNpYmxlLCBkaXNhYmxlZCwgYWRzKSB7XHJcbiAgICAgICAgdGhpcy5idG5SZXN1bWVGcmVlLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdW1lRnJlZS5kaXNhYmxlZCA9IGRpc2FibGVkO1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdW1lRnJlZS50aXRsZUZyZWUudmlzaWJsZSA9ICFhZHM7XHJcbiAgICAgICAgdGhpcy5idG5SZXN1bWVGcmVlLnRpdGxlQWRzLnZpc2libGUgPSBhZHM7XHJcbiAgICB9XHJcbiAgICBfcGVuZFNob3dSZXN0YXJ0KGltbWVkaWF0ZSkge1xyXG4gICAgICAgIHRoaXMuYnRuUmVzdGFydC52aXNpYmxlID0gaW1tZWRpYXRlO1xyXG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuUmVzdGFydC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfb25TaGFyZUNsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpblZpZXcudmlzaWJsZSlcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Quc2hvd1NoYXJlQm94KFwi0KMg0LzQtdC90Y8g0L3QvtCy0YvQuSBcIiArIHRoaXMuX2JhY2tlbmQucHJvZmlsZS5sZXZlbCArIFwiINGD0YDQvtCy0LXQvdGMINCyINCf0YDRi9Cz0YPQvdC1IVwiLCBTb2NpYWxBcGkuUEhPVE9fTkVXX0xFVkVMKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0LnNob3dTaGFyZUJveChcItCc0L7QuSDQvdC+0LLRi9C5INGA0LXQutC+0YDQtCBcIiArIHRoaXMuX2JhY2tlbmQucHJvZmlsZS5zY29yZXNNYXggKyBcIiDQvtGH0LrQvtCyISDQn9C+0L/RgNC+0LHRg9C5INC80LXQvdGPINC+0LHRgdC60LDQutCw0YLRjCFcIiwgU29jaWFsQXBpLlBIT1RPX05FV19TQ09SRSk7XHJcbiAgICB9XHJcbiAgICBfb25SZXN0YXJ0Q2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5faGlkZVdpdGhSZXN1bHQoR2FtZVJlc3VsdFVJLldORF9SRVNVTFRfUkVTVEFSVCk7XHJcbiAgICB9XHJcbiAgICBfb25SZXN1bWVGcmVlQ2xpY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYnRuUmVzdW1lRnJlZS5kaXNhYmxlZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLl9hZHNDYW5TaG93KCkpIHsgLy8gJiYgdGhpcy5fYmFja2VuZC51c2VyRXZlbnRzLkFkLnNob3dCZWZvcmVMaWZlKSB7XHJcbiAgICAgICAgICAgIFNvY2lhbEFwaS5pbnN0LmFkc1Nob3codHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuX2RvUmVzdW1lRnJlZSgpO1xyXG4gICAgfVxyXG4gICAgX29uUmVzdW1lU29mdENsaWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9iYWNrZW5kLnByb2ZpbGUubW9uZXlTb2Z0ID49IHRoaXMuX2JhY2tlbmQucmVzdW1lQ29zdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9iYWNrZW5kLmdhbWVSZXN1bWVTb2Z0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVXaXRoUmVzdWx0KEdhbWVSZXN1bHRVSS5XTkRfUkVTVUxUX1JFU1VNRSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChTb2NpYWxBcGkuaXNCYW5rQXZhaWxhYmxlKVxyXG4gICAgICAgICAgICBXbmRNYW4uaW5zdC5iYW5rVUkuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgX29uUmVzdW1lQWRzQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5idG5SZXN1bWVBZHMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0LmFkc1Nob3coKTtcclxuICAgIH1cclxuICAgIF9vbkFkc1Nob3duKCkge1xyXG4gICAgICAgIC8vYWxlcnQoXCLQndCw0LXQsdCw0LvQvtCy0L5cIik7XHJcbiAgICAgICAgdGhpcy5fYWRzU2hvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2RvUmVzdW1lRnJlZSgpO1xyXG4gICAgICAgIC8vdGhpcy5fb25GcmFtZSgpO1xyXG4gICAgICAgIC8vIHRoaXMuX2JhY2tlbmQuZ2FtZVJlc3VtZUFkcygpO1xyXG4gICAgICAgIC8vIHRoaXMuX2hpZGVXaXRoUmVzdWx0KEdhbWVSZXN1bHRVSS5XTkRfUkVTVUxUX1JFU1VNRSk7XHJcbiAgICB9XHJcbiAgICBfZG9SZXN1bWVGcmVlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9iYWNrZW5kLnVzZXJFdmVudHMuTGlmZS5leHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2JhY2tlbmQuZ2FtZVJlc3VtZUZyZWUoKTtcclxuICAgICAgICAgICAgdGhpcy5faGlkZVdpdGhSZXN1bHQoR2FtZVJlc3VsdFVJLldORF9SRVNVTFRfUkVTVU1FKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgdGhpcy5fb25GcmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlV2l0aFJlc3VsdChyZXN1bHQpIHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmV2ZW50KEdhbWVSZXN1bHRVSS5FVkVOVF9XTkRfUkVTVUxULCByZXN1bHQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZHNDYW5TaG93KCkge1xyXG4gICAgICAgIHJldHVybiBTb2NpYWxBcGkuaW5zdC5hZHNDYW5TaG93UmV3YXJkZWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEdhbWVQcm9ncmVzcyBmcm9tIFwiLi9HYW1lUHJvZ3Jlc3NcIlxyXG5pbXBvcnQgQmFja2VuZCBmcm9tIFwiLi9CYWNrZW5kXCJcclxuaW1wb3J0IFV0aWxzIGZyb20gXCIuL1V0aWxzXCJcclxuaW1wb3J0IEhlbGl4R2FtZSBmcm9tIFwiLi9IZWxpeEdhbWVcIlxyXG5pbXBvcnQgU29jaWFsQXBpIGZyb20gXCIuL1NvY2lhbEFwaVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVVJIGV4dGVuZHMgTGF5YS5TY2VuZSB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FERF9DT0lOUygpIHsgcmV0dXJuIFwiQUREX0NPSU5TXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfREVWX05FWFRfTEVWRUwoKSB7IHJldHVybiBcIkRFVl9ORVhUX0xFVkVMXCI7IH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2dwID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uKFwib25WaWV3Q3JlYXRlZFwiLCB0aGlzLCB0aGlzLl9vblZpZXdDcmVhdGVkKTtcclxuICAgIH1cclxuICAgIGdldCBncCgpIHsgcmV0dXJuIHRoaXMuX2dwOyB9XHJcbiAgICBzZXQgZ3AodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5ncCkge1xyXG4gICAgICAgICAgICB0aGlzLmdwLm9mZihHYW1lUHJvZ3Jlc3MuRVZFTlRfU0NPUkVfQ0hBTkdFRCwgdGhpcywgdGhpcy5fb25Qcm9ncmVzc1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3Aub2ZmKEdhbWVQcm9ncmVzcy5FVkVOVF9TQ09SRV9CRVNULCB0aGlzLCB0aGlzLl9vblByb2dyZXNzVXBkYXRlKTtcclxuICAgICAgICAgICAgdGhpcy5ncC5vZmYoR2FtZVByb2dyZXNzLkVWRU5UX0xFVkVMX0NIQU5HRUQsIHRoaXMsIHRoaXMuX29uTGV2ZWxDaGFuZ2VkKTtcclxuICAgICAgICAgICAgLy90aGlzLmdwLm9mZihHYW1lUHJvZ3Jlc3MuRVZFTlRfQ09JTlNfQ0hBTkdFRCwgdGhpcywgdGhpcy5fb25Qcm9ncmVzc1VwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2dwID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3ApIHtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdFNjb3JlID0gdGhpcy5ncC5jdXJTY29yZTtcclxuICAgICAgICAgICAgdGhpcy5ncC5vbihHYW1lUHJvZ3Jlc3MuRVZFTlRfU0NPUkVfQ0hBTkdFRCwgdGhpcywgdGhpcy5fb25Qcm9ncmVzc1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3Aub24oR2FtZVByb2dyZXNzLkVWRU5UX1NDT1JFX0JFU1QsIHRoaXMsIHRoaXMuX29uUHJvZ3Jlc3NVcGRhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLmdwLm9uKEdhbWVQcm9ncmVzcy5FVkVOVF9MRVZFTF9DSEFOR0VELCB0aGlzLCB0aGlzLl9vbkxldmVsQ2hhbmdlZCk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5ncC5vbihHYW1lUHJvZ3Jlc3MuRVZFTlRfQ09JTlNfQ0hBTkdFRCwgdGhpcywgdGhpcy5fb25Qcm9ncmVzc1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uUHJvZ3Jlc3NVcGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYmFja2VuZCgpIHsgcmV0dXJuIHRoaXMuX2JhY2tlbmQ7IH1cclxuICAgIHNldCBiYWNrZW5kKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2VuZCkge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQub2ZmKEJhY2tlbmQuQ0xJRU5UX1BST0ZJTEUsIHRoaXMsIHRoaXMuX29uUHJvZmlsZVVwZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5iYWNrZW5kKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5vbihCYWNrZW5kLkNMSUVOVF9QUk9GSUxFLCB0aGlzLCB0aGlzLl9vblByb2ZpbGVVcGRhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLl9vblByb2ZpbGVVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5mcmllbmRTbG90LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfb25WaWV3Q3JlYXRlZCgpIHtcclxuICAgICAgICAvL2lmIChTb2NpYWxBcGkuaXNZQSkgeyBcclxuICAgICAgICAvLyAgICB0aGlzLmNvaW5zQmxvY2sudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIHRoaXMuX2NvaW5zID0gVXRpbHMuY3JlYXRlQW5pbWF0ZWRDb3VudGVyKHRoaXMuY29pbnNWYWx1ZSwgMCk7XHJcbiAgICAgICAgdGhpcy5wbHVzLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuX29uUGx1c0NsaWNrKTtcclxuICAgICAgICB0aGlzLmRldlBsdXMudmlzaWJsZSA9IFV0aWxzLmRldk1vZGU7XHJcbiAgICAgICAgdGhpcy5kZXZOZXh0TGV2ZWwudmlzaWJsZSA9IFV0aWxzLmRldk1vZGU7XHJcbiAgICAgICAgaWYgKFV0aWxzLmRldk1vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXZQbHVzLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLmJhY2tlbmQuZGV2QWRkTW9uZXkoNTAwKTsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2TmV4dExldmVsLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyB0aGlzLmV2ZW50KEdhbWVVSS5FVkVOVF9ERVZfTkVYVF9MRVZFTCk7IH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3BhaW50WWVsbG93KHRoaXMubGV2ZWxQcmV2MCk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRZZWxsb3codGhpcy5wcm9ncmVzczApO1xyXG4gICAgICAgIHRoaXMuX3BhaW50UmVkKHRoaXMubGV2ZWxQcmV2MSk7XHJcbiAgICAgICAgdGhpcy5fcGFpbnRSZWQodGhpcy5wcm9ncmVzczEpO1xyXG4gICAgICAgIHRoaXMuX3BhaW50UmVkKHRoaXMubGV2ZWxOZXh0MSk7XHJcbiAgICAgICAgdGhpcy5zY29yZVVwLmluaXQoKTtcclxuICAgIH1cclxuICAgIF9vbkxldmVsQ2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLl9vblByb2dyZXNzVXBkYXRlKCk7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3QubG9nTGV2ZWwodGhpcy5ncC5zdGF0ZS5sZXZlbCk7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3QubG9nQmVzdFNjb3JlKHRoaXMuZ3Auc3RhdGUuYmVzdFNjb3JlKTtcclxuICAgIH1cclxuICAgIF9vblByb2dyZXNzVXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmVDdXJyZW50LnRleHQgPSB0aGlzLmdwLmN1clNjb3JlO1xyXG4gICAgICAgIHRoaXMuc2NvcmVCZXN0LnRleHQgPSBMb2NhbGUudGV4dCgnTF9CRVNUX1NDT1JFJykgKyAnOiAnICsgdGhpcy5ncC5iZXN0U2NvcmU7Ly8n0JvRg9GH0YjQuNC5OiAnICsgdGhpcy5ncC5iZXN0U2NvcmU7XHJcbiAgICAgICAgdGhpcy5sZXZlbFByZXZWYWx1ZS50ZXh0ID0gdGhpcy5ncC5zdGF0ZS5sZXZlbDtcclxuICAgICAgICB0aGlzLmxldmVsTmV4dFZhbHVlLnRleHQgPSB0aGlzLmdwLnN0YXRlLmxldmVsICsgMTtcclxuICAgICAgICB2YXIgcGdycyA9IHRoaXMuZ3AuZ2FtZSA/IHRoaXMuZ3AuZ2FtZS5wcm9ncmVzcyA6IDA7XHJcbiAgICAgICAgdGhpcy5sZXZlbFByZXYxLmFscGhhID0gcGdycztcclxuICAgICAgICB0aGlzLmxldmVsTmV4dDEuYWxwaGEgPSBwZ3JzIDwgMSA/IDAgOiAxO1xyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3MxLmFscGhhID0gcGdycztcclxuICAgICAgICB0aGlzLnByb2dyZXNzMS5zY2FsZVggPSB0aGlzLnByb2dyZXNzMC5zY2FsZVggPSBwZ3JzO1xyXG4gICAgICAgIHRoaXMuc2NvcmVCZXN0LnZpc2libGUgPSB0aGlzLmdwLmN1clNjb3JlID09IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3AuY3VyU2NvcmUgPT0gMClcclxuICAgICAgICAgICAgdGhpcy5fbGFzdFNjb3JlID0gMTsvL3RoaXMuZ3AuYmVzdFNjb3JlO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ3AuY3VyU2NvcmUgPiB0aGlzLl9sYXN0U2NvcmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tQb3BVcEZyaWVuZCh0aGlzLmdwLmN1clNjb3JlLCB0aGlzLl9sYXN0U2NvcmUpO1xyXG4gICAgICAgICAgICB0aGlzLnNjb3JlVXAuYWRkKCcrJyArICh0aGlzLmdwLmN1clNjb3JlIC0gdGhpcy5fbGFzdFNjb3JlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RTY29yZSA9IHRoaXMuZ3AuY3VyU2NvcmU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2NoZWNrUG9wVXBGcmllbmQoY3VyU2NvcmUsIHByZXZTY29yZSkge1xyXG4gICAgICAgIHZhciBpbmZvID0gU29jaWFsQXBpLmluc3QuYXBwRnJpZW5kcy5maW5kKGYgPT4gZi5zY29yZSAmJiBmLnNjb3JlID49IHByZXZTY29yZSAmJiBmLnNjb3JlIDwgY3VyU2NvcmUpO1xyXG4gICAgICAgIGlmICghaW5mbykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZnJpZW5kU2xvdC5pbmZvID0gaW5mbztcclxuICAgICAgICB0aGlzLmZyaWVuZFNsb3QuYm90dG9tID0gMDtcclxuICAgICAgICB0aGlzLmZyaWVuZFNsb3QuYWxwaGEgPSAxO1xyXG4gICAgICAgIHRoaXMuZnJpZW5kU2xvdC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICBMYXlhLlR3ZWVuLmNsZWFyQWxsKHRoaXMuZnJpZW5kU2xvdCk7XHJcbiAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLmZyaWVuZFNsb3QsIHtib3R0b206MTYwfSwgMjAwMCwgbnVsbCwgbmV3IExheWEuSGFuZGxlcih0aGlzLCBmdW5jdGlvbigpIHsgdGhpcy5mcmllbmRTbG90LnZpc2libGUgPSBmYWxzZTsgfSkpO1xyXG4gICAgICAgIExheWEuVHdlZW4udG8odGhpcy5mcmllbmRTbG90LCB7YWxwaGE6MH0sIDIwMDAsIExheWEuRWFzZS5xdWFydEluKTtcclxuICAgIH1cclxuICAgIF9vblByb2ZpbGVVcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5fY29pbnMudmFsdWUgPSB0aGlzLmJhY2tlbmQucHJvZmlsZS5tb25leVNvZnQ7XHJcbiAgICB9XHJcbiAgICBfb25QbHVzQ2xpY2soZSkge1xyXG4gICAgICAgIHRoaXMuZXZlbnQoR2FtZVVJLkVWRU5UX0FERF9DT0lOUywgdGhpcyk7XHJcbiAgICB9XHJcbiAgICBfcGFpbnRSZWQoc3ByaXRlKSB7IHRoaXMuX3BhaW50U3ByaXRlKHNwcml0ZSwgMjU1LCAwLCAwKTsgfVxyXG4gICAgX3BhaW50WWVsbG93KHNwcml0ZSkgeyB0aGlzLl9wYWludFNwcml0ZShzcHJpdGUsIDE2MCwgMTYwLCAwKTsgfVxyXG4gICAgX3BhaW50U3ByaXRlKHNwcml0ZSwgcixnLGIpIHtcclxuICAgICAgICB2YXIgY2YgPSBuZXcgTGF5YS5Db2xvckZpbHRlcigpO1xyXG4gICAgICAgIGNmLmNvbG9yKHIsIGcsIGIpO1xyXG4gICAgICAgIGNmLmFkanVzdEJyaWdodG5lc3MoLTEwMCk7XHJcbiAgICAgICAgTGF5YS5VSVV0aWxzLmFkZEZpbHRlcihzcHJpdGUsIGNmKTtcclxuICAgIH1cclxufSIsImltcG9ydCBVdGlscyBmcm9tIFwiLi9VdGlsc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmFkaWVudFBsYW5lTWVzaCBleHRlbmRzIExheWEuUHJpbWl0aXZlTWVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb2xvcjAsIGNvbG9yMSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZihjb2xvcjApID09ICdzdHJpbmcnKSBjb2xvcjAgPSBVdGlscy50b0NvbG9yKGNvbG9yMCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZihjb2xvcjEpID09ICdzdHJpbmcnKSBjb2xvcjEgPSBVdGlscy50b0NvbG9yKGNvbG9yMSk7XHJcbiAgICAgICAgdmFyIHZDb3VudCA9IDQ7XHJcbiAgICAgICAgdmFyIGlDb3VudCA9IDY7XHJcbiAgICAgICAgdmFyIHZEZWNsID0gTGF5YS5WZXJ0ZXhQb3NpdGlvbk5vcm1hbENvbG9yLnZlcnRleERlY2xhcmF0aW9uO1xyXG4gICAgICAgIHZhciB2RmxvYXRTdHJpZGUgPSB2RGVjbC52ZXJ0ZXhTdHJpZGUgLyA0O1xyXG4gICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBGbG9hdDMyQXJyYXkodkNvdW50ICogdkZsb2F0U3RyaWRlKTtcclxuICAgICAgICB2YXIgaW5kcyA9IG5ldyBVaW50MTZBcnJheShpQ291bnQpO1xyXG4gICAgICAgIHZhciB2YyA9IDA7XHJcbiAgICAgICAgdmFyIGljID0gMDtcclxuICAgICAgICAvLyBMZWZ0IFRvcFxyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gLTE7IHZlcnRzW3ZjKytdID0gMTsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDA7XHJcbiAgICAgICAgdmVydHNbdmMrK10gPSBjb2xvcjAucjsgdmVydHNbdmMrK10gPSBjb2xvcjAuZzsgdmVydHNbdmMrK10gPSBjb2xvcjAuYjsgdmVydHNbdmMrK10gPSBjb2xvcjAuYTtcclxuICAgICAgICAvLyBSaWdodCBUb3BcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gMTsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDA7XHJcbiAgICAgICAgdmVydHNbdmMrK10gPSBjb2xvcjAucjsgdmVydHNbdmMrK10gPSBjb2xvcjAuZzsgdmVydHNbdmMrK10gPSBjb2xvcjAuYjsgdmVydHNbdmMrK10gPSBjb2xvcjAuYTtcclxuICAgICAgICAvLyBSaWdodCBCb3R0b21cclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gLTE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gY29sb3IxLnI7IHZlcnRzW3ZjKytdID0gY29sb3IxLmc7IHZlcnRzW3ZjKytdID0gY29sb3IxLmI7IHZlcnRzW3ZjKytdID0gY29sb3IxLmE7XHJcbiAgICAgICAgLy8gTGVmdCBCb3R0b21cclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IC0xOyB2ZXJ0c1t2YysrXSA9IC0xOyB2ZXJ0c1t2YysrXSA9IDA7XHJcbiAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IGNvbG9yMS5yOyB2ZXJ0c1t2YysrXSA9IGNvbG9yMS5nOyB2ZXJ0c1t2YysrXSA9IGNvbG9yMS5iOyB2ZXJ0c1t2YysrXSA9IGNvbG9yMS5hO1xyXG4gICAgICAgIC8vIDIgVHJpYW5nbGVzXHJcbiAgICAgICAgaW5kc1tpYysrXSA9IDA7IGluZHNbaWMrK10gPSAyOyBpbmRzW2ljKytdID0gMTtcclxuICAgICAgICBpbmRzW2ljKytdID0gMDsgaW5kc1tpYysrXSA9IDM7IGluZHNbaWMrK10gPSAyO1xyXG4gICAgICAgIC8vIEFwcGx5IGdlb21ldHJ5XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHZEZWNsLCB2ZXJ0cywgaW5kcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSHhHbG9iYWxzIGZyb20gXCIuL0h4R2xvYmFsc1wiXHJcbmltcG9ydCBVdGlscyBmcm9tIFwiLi9VdGlsc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxpeENvbmZpZyB7XHJcbiAgICBzdGF0aWMgZ2V0IEZMQUdfVFJBUCgpIHsgcmV0dXJuIDE7IH1cclxuICAgIHN0YXRpYyBnZXQgRkxBR19NT1ZJTkcoKSB7IHJldHVybiAyOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEZMQUdfTkFSUk9XX0dST1VORCgpIHsgcmV0dXJuIDQ7IH1cclxuICAgIHN0YXRpYyBnZXQgRkxBR19XQUxMKCkgeyByZXR1cm4gODsgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuX2xvYWRDb25maWcoY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9nYXRoZXJTdGF0cygpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1vdmVGcmVxKCkgeyByZXR1cm4gdGhpcy5fbW92ZUZyZXEgfHwgMC4yNTsgfVxyXG4gICAgLy9nZXQgbW92ZUFuZ2xlKCkgeyByZXR1cm4gdGhpcy5fY29uZmlnLm1vdmVBbmdsZTsgfVxyXG5cclxuICAgIGdlbmVyYXRlRmxvb3JzKGxldmVsKSB7XHJcbiAgICAgICAgdmFyIGZsb29ycyA9IFtdO1xyXG4gICAgICAgIHZhciBjb3VudCA9IHRoaXMuX2dldEZsb29yQ291bnQobGV2ZWwpO1xyXG4gICAgICAgIHZhciBjbGFtcCA9IHRoaXMuX2dldEN1cnZlQ2xhbXAobGV2ZWwpO1xyXG4gICAgICAgIHZhciBiY2ZNYXggPSAwLjM7XHJcbiAgICAgICAgdmFyIGJjZlJlY292ZXIgPSAwLjAyNTtcclxuICAgICAgICB2YXIgYmNmID0gYmNmTWF4ICogMC41OyAvLyBCbG9jayBjb3VudCBmYWN0b3JcclxuICAgICAgICB2YXIgcHJldkVtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHdhbGxTdGF0ZSA9IHsgdHJpZXM6MCwgY291bnQ6MCwgbGFzdElkeDowIH07XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXhHcm91cCA9IGkgPiAwID8gVXRpbHMuY2xhbXAodGhpcy5fZ2V0TGV2ZWxDdXJ2ZVZhbHVlKGkgKyAxLCBsZXZlbCksIGNsYW1wLm1pbiwgY2xhbXAubWF4KSA6IDA7XHJcbiAgICAgICAgICAgIC8vdmFyIGdyb3VwSWR4ID0gVXRpbHMuY2xhbXAoTWF0aC5mbG9vcigobWF4R3JvdXAgKyAxKSAqIE1hdGgucmFuZG9tKCkpLCAwLCB0aGlzLl9mbG9vckdyb3Vwcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IHRoaXMuX2Zsb29yR3JvdXBzLnJlZHVjZSgocywgYSwgaWR4KSA9PiBpZHggPD0gbWF4R3JvdXAgPyBzLmNvbmNhdChhKSA6IHMsIFtdKTsgLy8gdGhpcy5fZmxvb3JHcm91cHNbZ3JvdXBJZHhdO1xyXG4gICAgICAgICAgICB2YXIgZmxvb3IgPSB0aGlzLl9nZXRSYW5kb21GbG9vcihncm91cCwgbWF4R3JvdXAgLyB0aGlzLl9tYXhHcm91cCwgYmNmLCBsZXZlbCwgcHJldkVtcHR5KTtcclxuICAgICAgICAgICAgcHJldkVtcHR5ID0gZmxvb3Iuc3RhdHMuc3VtVCA8PSAwO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZsb29yLmJsb2NrQ291bnQsIGJjZik7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmxvb3IucmF3KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmbG9vci5zdGF0cy5uYW1lKTtcclxuICAgICAgICAgICAgYmNmID0gTWF0aC5taW4oTWF0aC5wb3coYmNmIC0gYmNmUmVjb3ZlciwgZmxvb3IuYmxvY2tDb3VudCkgKyBiY2ZSZWNvdmVyICogMywgYmNmTWF4KTtcclxuICAgICAgICAgICAgZmxvb3IgPSBPYmplY3QuYXNzaWduKHtpbmRleDppfSwgZmxvb3IpO1xyXG4gICAgICAgICAgICBpZiAoKDEgPDwgbWF4R3JvdXApICYgSGVsaXhDb25maWcuRkxBR19XQUxMKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5QWRkV2FsbChmbG9vciwgd2FsbFN0YXRlKTtcclxuICAgICAgICAgICAgdmFyIHJuZEFuZ2xlID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2MCkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KSAqIDYwKSAlIDM2MDtcclxuICAgICAgICAgICAgaWYgKGZsb29yLnN0YXQubGVuZ3RoKSBmbG9vci5zdGF0U3RhcnQgKz0gcm5kQW5nbGU7XHJcbiAgICAgICAgICAgIGlmIChmbG9vci5tb3ZlLmxlbmd0aCkgZmxvb3IubW92ZVN0YXJ0ICs9IHJuZEFuZ2xlO1xyXG4gICAgICAgICAgICBmbG9vcnMucHVzaChmbG9vcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbG9vcnM7XHJcbiAgICB9XHJcbiAgICBsb2dGbG9vcnMoKSB7XHJcbiAgICAgICAgLy92YXIgc3RyID0gXCJuYW1lXFx0c3VtKFQpXFx0bWF4KEcpXFx0YXZnKEcpXFx0c3VtKEgpXFx0dHJhcFxcdG1vdmluZ1xcdG5hcnJvd1xcdHdhbGxcXHRncm91cFxcdHN1bShUKS9hdmcoRylcXHRcXG5cIjtcclxuICAgICAgICB2YXIgc3RyID0gXCJuYW1lXFx0c3VtKFQpXFx0bWF4KEcpXFx0YXZnKEcpXFx0c3VtKEgpXFx0Z3JvdXBcXHRibG9ja3NcXHRyYXdcXHRcXG5cIjtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2Zsb29yU3RhdHMpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXRzID0gdGhpcy5fZmxvb3JTdGF0c1tuYW1lXTtcclxuICAgICAgICAgICAgc3RyICs9IG5hbWUgKyBcIlxcdFwiO1xyXG4gICAgICAgICAgICBzdHIgKz0gc3RhdHMuc3VtVC50b0ZpeGVkKCkgKyBcIiVcXHRcIjtcclxuICAgICAgICAgICAgc3RyICs9IHN0YXRzLm1heEcudG9GaXhlZCgpICsgXCIlXFx0XCI7XHJcbiAgICAgICAgICAgIHN0ciArPSBzdGF0cy5hdmdHLnRvRml4ZWQoKSArIFwiJVxcdFwiO1xyXG4gICAgICAgICAgICBzdHIgKz0gc3RhdHMuc3VtSC50b0ZpeGVkKCkgKyBcIiVcXHRcIjtcclxuICAgICAgICAgICAgLy8gc3RyICs9IChzdGF0cy5mbGFncyAmIEhlbGl4Q29uZmlnLkZMQUdfVFJBUCA/IFwiMVwiIDogXCIwXCIpICsgXCJcXHRcIjtcclxuICAgICAgICAgICAgLy8gc3RyICs9IChzdGF0cy5mbGFncyAmIEhlbGl4Q29uZmlnLkZMQUdfTU9WSU5HID8gXCIxXCIgOiBcIjBcIikgKyBcIlxcdFwiO1xyXG4gICAgICAgICAgICAvLyBzdHIgKz0gKHN0YXRzLmZsYWdzICYgSGVsaXhDb25maWcuRkxBR19OQVJST1dfR1JPVU5EID8gXCIxXCIgOiBcIjBcIikgKyBcIlxcdFwiO1xyXG4gICAgICAgICAgICAvLyBzdHIgKz0gKHN0YXRzLmZsYWdzICYgSGVsaXhDb25maWcuRkxBR19XQUxMID8gXCIxXCIgOiBcIjBcIikgKyBcIlxcdFwiO1xyXG4gICAgICAgICAgICBzdHIgKz0gU3RyaW5nKHN0YXRzLmdyb3VwKSArIFwiXFx0XCI7XHJcbiAgICAgICAgICAgIHN0ciArPSBTdHJpbmcoc3RhdHMuYmxvY2tDb3VudCkgKyBcIlxcdFwiO1xyXG4gICAgICAgICAgICBzdHIgKz0gc3RhdHMucmF3ICsgXCJcXHRcIjtcclxuICAgICAgICAgICAgLy9zdHIgKz0gKHN0YXRzLnN1bVQgLyBzdGF0cy5hdmdHKS50b0ZpeGVkKDIpICsgXCJcXHRcIjtcclxuICAgICAgICAgICAgc3RyICs9IFwiXFxuXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiAgICB9XHJcblxyXG4gICAgX2xvYWRDb25maWcoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIC8vdGhpcy5fbGV2ZWxzID0gW107XHJcbiAgICAgICAgLy9mb3IgKHZhciBpIGluIGNvbmZpZy5sZXZlbHMpIHtcclxuICAgICAgICAvLyAgICB0aGlzLl9wYXJzZUVudHJ5KGNvbmZpZy5sZXZlbHNbaV0sIHRoaXMuX2xldmVscywgdHJ1ZSk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgdGhpcy5fbW92ZUZyZXEgPSBjb25maWcuZ2xvYmFscy5tb3ZlRnJlcVswXTtcclxuICAgICAgICB0aGlzLl9sZXZlbEN1cnZlID0gY29uZmlnLmdsb2JhbHMubGV2ZWxDdXJ2ZSB8fCBbWzAsIDBdLCBbMSwgNF1dO1xyXG4gICAgICAgIHRoaXMuX2Zsb29yQ291bnRzID0gY29uZmlnLmdsb2JhbHMucHJvZ3Jlc3MuZmxvb3JDb3VudCB8fCBbNDBdO1xyXG4gICAgICAgIHRoaXMuX2N1cnZlQ2xhbXAgPSBjb25maWcuZ2xvYmFscy5wcm9ncmVzcy5jdXJ2ZUNsYW1wIHx8IFtbMCwgMCwgNV1dO1xyXG4gICAgICAgIHRoaXMuX2Zsb29ycyA9IHRoaXMuX3BhcnNlRmxvb3JzKGNvbmZpZy5mbG9vcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIF90cnlBZGRXYWxsKGZsb29yLCBzdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IFBST0JfUklTRV9HQVAgPSA3O1xyXG4gICAgICAgIGNvbnN0IE1JTl9GTE9PUl9HQVAgPSAyO1xyXG4gICAgICAgIGlmICgoZmxvb3IuaW5kZXggLSBzdGF0ZS5sYXN0SWR4KSA+PSBNSU5fRkxPT1JfR0FQKSB7XHJcbiAgICAgICAgICAgIHN0YXRlLnRyaWVzKys7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgTWF0aC5zcXJ0KHN0YXRlLnRyaWVzIC8gUFJPQl9SSVNFX0dBUCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWdzID0gZmxvb3Iuc3RhdC5maWx0ZXIocyA9PiBzLnR5cGUgIT0gJ0gnICYmIHMuc2l6ZSA+IEh4R2xvYmFscy5XQUxMX0FOR0xFKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdzLmxlbmd0aCA9PSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VnID0gdGhpcy5fcmFuZG9tRW50cnkoc2Vncyk7XHJcbiAgICAgICAgICAgICAgICBmbG9vci53YWxsID0geyBhbmdsZTogc2VnLnN0YXJ0ICsgTWF0aC5yb3VuZChIeEdsb2JhbHMuV0FMTF9BTkdMRSAqIDAuNSArIE1hdGgucmFuZG9tKCkgKiAoc2VnLnNpemUgLSBIeEdsb2JhbHMuV0FMTF9BTkdMRSkpIH07XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS50cmllcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5sYXN0SWR4ID0gZmxvb3IuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5jb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIldBTExcIiwgZmxvb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2dldFJhbmRvbUZsb29yKGZsb29ycywgbWF4RGlmZmljdWx0eSwgYmNmLCBsZXZlbCwgZXhjbHVkZUVtcHR5KSB7XHJcbiAgICAgICAgaWYgKGV4Y2x1ZGVFbXB0eSAmJiAhZmxvb3JzLmZpbmQoZiA9PiBmLnN0YXRzLnN1bVQgPiAwKSlcclxuICAgICAgICAgICAgZXhjbHVkZUVtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gd2VpZ2h0IG9mIGZsb29yIHByb3BvcnRpb25hbCB0byBwZXJjZW50IG9mIGZpbGxcclxuICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uKGZsb29yKSB7XHJcbiAgICAgICAgICAgIGlmIChleGNsdWRlRW1wdHkgJiYgZmxvb3Iuc3RhdHMuc3VtVCA8PSAwKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKGZsb29yLnN0YXRzLnN1bVQgKiAwLjAxID4gbWF4RGlmZmljdWx0eSB8fCBmbG9vci5zdGF0cy5sZXZlbCA+IGxldmVsKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KGJjZiwgTWF0aC5taW4oZmxvb3IuYmxvY2tDb3VudCwgMikgLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN1bSA9IGZsb29ycy5yZWR1Y2UoKHMsIGYpID0+IHMgKyBmdW5jKGYpLCAwKTtcclxuICAgICAgICB2YXIgcm5kID0gTWF0aC5yYW5kb20oKSAqIHN1bTtcclxuICAgICAgICB2YXIgY3VyID0gMDtcclxuICAgICAgICB2YXIgZmxvb3IgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gZmxvb3JzKSB7XHJcbiAgICAgICAgICAgIGZsb29yID0gZmxvb3JzW2ldO1xyXG4gICAgICAgICAgICBjdXIgKz0gZnVuYyhmbG9vcik7XHJcbiAgICAgICAgICAgIGlmIChjdXIgPj0gcm5kKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbG9vcjtcclxuICAgIH1cclxuICAgIF9nZXRGbG9vckNvdW50KGxldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zsb29yQ291bnRzW1V0aWxzLmNsYW1wKGxldmVsIC0gMSwgMCwgdGhpcy5fZmxvb3JDb3VudHMubGVuZ3RoIC0gMSldO1xyXG4gICAgfVxyXG4gICAgX2dldExldmVsQ3VydmVWYWx1ZShmbG9vciwgbGV2ZWwpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuX2dldEx2bEFyckVudHJ5KHRoaXMuX2xldmVsQ3VydmUsIGZsb29yLCBsZXZlbCk7XHJcbiAgICAgICAgcmV0dXJuIGVbMV07XHJcbiAgICB9XHJcbiAgICBfZ2V0Q3VydmVDbGFtcChsZXZlbCkge1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5fZ2V0THZsQXJyRW50cnkodGhpcy5fY3VydmVDbGFtcCwgbGV2ZWwpO1xyXG4gICAgICAgIHJldHVybiB7IG1pbjplWzFdLCBtYXg6ZVsyXSB9O1xyXG4gICAgfVxyXG4gICAgX2dldEx2bEFyckVudHJ5KGFyciwgbGV2ZWwsIHByZUxldmVsKSB7XHJcbiAgICAgICAgdmFyIHByZXYgPSBhcnJbMF07XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gYXJyW2ldO1xyXG4gICAgICAgICAgICB2YXIgZW50cnlfa2V5ID0gZW50cnlbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZW50cnlfa2V5KSA9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhlbnRyeV9rZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZUxldmVsID09IHVuZGVmaW5lZCB8fCAha2V5cy5sZW5ndGgpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbMF07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJlTGV2ZWwgPCBrZXlzW2pdKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBrZXlzW2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZW50cnlfa2V5ID0gZW50cnlfa2V5W2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxldmVsIDwgZW50cnlfa2V5KSBicmVhaztcclxuICAgICAgICAgICAgcHJldiA9IGVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJldjtcclxuICAgIH1cclxuXHJcbiAgICBfZ2F0aGVyU3RhdHMoKSB7XHJcbiAgICAgICAgdGhpcy5fZmxvb3JTdGF0cyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2Zsb29yR3JvdXBzID0gW107XHJcbiAgICAgICAgdGhpcy5fbWF4R3JvdXAgPSA0O1xyXG4gICAgICAgIHZhciBtYXhHcm91cCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl9mbG9vcnMpIHtcclxuICAgICAgICAgICAgdmFyIGZsb29yID0gdGhpcy5fZmxvb3JzW25hbWVdO1xyXG4gICAgICAgICAgICB2YXIgc3VtVCA9IE1hdGgucm91bmQoKHRoaXMuX3N1bVNlY3RvclNpemUoZmxvb3Iuc3RhdCwgJ1QnKSArIHRoaXMuX3N1bVNlY3RvclNpemUoZmxvb3IubW92ZSwgJ1QnKSkgLyAzNjAgKiAxMDApO1xyXG4gICAgICAgICAgICB2YXIgbWF4RyA9IE1hdGgucm91bmQodGhpcy5fbWF4U2VjdG9yU2l6ZShmbG9vci5zdGF0LCAnRycsIHRoaXMuX21heFNlY3RvclNpemUoZmxvb3IubW92ZSwgJ0cnLCAwKSApIC8gMzYwICogMTAwKTtcclxuICAgICAgICAgICAgdmFyIGF2Z0cgPSBNYXRoLnJvdW5kKHRoaXMuX2F2Z1NlY3RvclNpemUoZmxvb3Iuc3RhdCwgZmxvb3IubW92ZSwgJ0cnKSAvIDM2MCAqIDEwMCk7XHJcbiAgICAgICAgICAgIHZhciBmbGFncyA9IDA7XHJcbiAgICAgICAgICAgIGlmIChzdW1UID4gMCkgZmxhZ3MgfD0gSGVsaXhDb25maWcuRkxBR19UUkFQO1xyXG4gICAgICAgICAgICBpZiAoZmxvb3IubW92ZS5sZW5ndGgpIGZsYWdzIHw9IEhlbGl4Q29uZmlnLkZMQUdfTU9WSU5HO1xyXG4gICAgICAgICAgICBpZiAoZmxvb3Iud2FsbCkgZmxhZ3MgfD0gSGVsaXhDb25maWcuRkxBR19XQUxMO1xyXG4gICAgICAgICAgICBpZiAobWF4RyA8PSAxMCkgZmxhZ3MgfD0gSGVsaXhDb25maWcuRkxBR19OQVJST1dfR1JPVU5EO1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBmbG9vci5ncm91cCB8fCB0aGlzLl9ncm91cEZyb21GbGFncyhmbGFncyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21heEdyb3VwID0gTWF0aC5tYXgoZ3JvdXAsIHRoaXMuX21heEdyb3VwKTtcclxuICAgICAgICAgICAgdmFyIHN0YXRzID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICAgIHN1bVQ6IHN1bVQsXHJcbiAgICAgICAgICAgICAgICBtYXhHOiBtYXhHLFxyXG4gICAgICAgICAgICAgICAgYXZnRzogYXZnRyxcclxuICAgICAgICAgICAgICAgIHN1bUg6IE1hdGgucm91bmQoKHRoaXMuX3N1bUhTZWN0b3JTaXplKGZsb29yKSAvIDM2MCAqIDEwMCkpLFxyXG4gICAgICAgICAgICAgICAgZmxhZ3M6IGZsYWdzLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IGZsb29yLmxldmVsLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tDb3VudDogZmxvb3IuYmxvY2tDb3VudCxcclxuICAgICAgICAgICAgICAgIHJhdzogZmxvb3IucmF3LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9mbG9vclN0YXRzW25hbWVdID0gc3RhdHM7XHJcbiAgICAgICAgICAgIGZsb29yLnN0YXRzID0gc3RhdHM7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZmxvb3JHcm91cHNbZ3JvdXBdKSB0aGlzLl9mbG9vckdyb3Vwc1tncm91cF0gPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fZmxvb3JHcm91cHNbZ3JvdXBdLnB1c2goZmxvb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSB0aGlzLl9tYXhHcm91cDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Zsb29yR3JvdXBzW2ldKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZmxvb3JHcm91cHNbaV0gPSB0aGlzLl9mbG9vckdyb3Vwc1tpIC0gMV07XHJcbiAgICB9XHJcbiAgICBfZ3JvdXBGcm9tRmxhZ3MoZmxhZ3MpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gNzsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIGlmIChmbGFncyAmICgxIDw8IGkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgKyAxO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgX2F2Z1NlY3RvclNpemUoc3RhdCwgbW92ZSwgdHlwZSkge1xyXG4gICAgICAgIHZhciBzdW0gPSAodGhpcy5fc3VtU2VjdG9yU2l6ZShzdGF0LCB0eXBlKSArIHRoaXMuX3N1bVNlY3RvclNpemUobW92ZSwgdHlwZSkpO1xyXG4gICAgICAgIHZhciBjb3VudCA9ICh0aGlzLl9jb3VudFNlY3RvclNpemUoc3RhdCwgdHlwZSkgKyB0aGlzLl9jb3VudFNlY3RvclNpemUobW92ZSwgdHlwZSkpO1xyXG4gICAgICAgIHJldHVybiBjb3VudCA/IHN1bSAvIGNvdW50IDogMDtcclxuICAgIH1cclxuICAgIF9zdW1TZWN0b3JTaXplKHNlY3RvcnMsIHR5cGUpIHtcclxuICAgICAgICByZXR1cm4gc2VjdG9ycy5yZWR1Y2UoKGFjYywgY3VyKSA9PiBjdXIudHlwZSA9PSB0eXBlID8gYWNjICsgY3VyLnNpemUgOiBhY2MsIDApO1xyXG4gICAgfVxyXG4gICAgX2NvdW50U2VjdG9yU2l6ZShzZWN0b3JzLCB0eXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlY3RvcnMucmVkdWNlKChhY2MsIGN1cikgPT4gY3VyLnR5cGUgPT0gdHlwZSA/IGFjYyArIDEgOiBhY2MsIDApO1xyXG4gICAgfVxyXG4gICAgX21heFNlY3RvclNpemUoc2VjdG9ycywgdHlwZSwgc3RhcnRWYWx1ZSkge1xyXG5cclxuICAgICAgICByZXR1cm4gc2VjdG9ycy5yZWR1Y2UoKGFjYywgY3VyKSA9PiBjdXIudHlwZSA9PSB0eXBlID8gTWF0aC5tYXgoYWNjLCBjdXIuc2l6ZSkgOiBhY2MsIHN0YXJ0VmFsdWUpO1xyXG4gICAgfVxyXG4gICAgX3N1bUhTZWN0b3JTaXplKGZsb29yKSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5taW4oZmxvb3Iuc3RhdFN0YXJ0LCBmbG9vci5tb3ZlU3RhcnQpO1xyXG4gICAgICAgIHZhciBzdGF0ID0gZmxvb3Iuc3RhdC5sZW5ndGggPyBmbG9vci5zdGF0IDogW3sgdHlwZTogJ0gnLCBzdGFydDogMCwgc2l6ZTogMzYwIH1dO1xyXG4gICAgICAgIHZhciBtb3ZlID0gZmxvb3IubW92ZS5sZW5ndGggPyBmbG9vci5tb3ZlIDogW3sgdHlwZTogJ0gnLCBzdGFydDogMCwgc2l6ZTogMzYwIH1dO1xyXG4gICAgICAgIHZhciBpID0gMCwgaiA9IDA7XHJcbiAgICAgICAgdmFyIHN1bUggPSAwLCBzdW1BbGwgPSAwO1xyXG4gICAgICAgIHZhciBzcyA9IGZsb29yLnN0YXRTdGFydCwgbXMgPSBmbG9vci5tb3ZlU3RhcnQ7XHJcbiAgICAgICAgd2hpbGUgKHN1bUFsbCA8IDM1OSkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IChzdGFydCArIHN1bUFsbCk7XHJcbiAgICAgICAgICAgIHZhciBzID0gc3RhdFtpXSAmJiAoc3MgKyBzdGF0W2ldLnN0YXJ0IDw9IGEpID8gc3RhdFtpXSA6IHsgdHlwZTogJ0gnLCBzdGFydDogYSwgc2l6ZTogMzYwIH07XHJcbiAgICAgICAgICAgIHZhciBtID0gbW92ZVtqXSAmJiAobXMgKyBtb3ZlW2pdLnN0YXJ0IDw9IGEpID8gbW92ZVtqXSA6IHsgdHlwZTogJ0gnLCBzdGFydDogYSwgc2l6ZTogMzYwIH07XHJcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIGlmIChzcyArIHMuc3RhcnQgKyBzLnNpemUgPCBtcyArIG0uc3RhcnQgKyBtLnNpemUpIHsgZGVsdGEgPSBzcyArIHMuc3RhcnQgKyBzLnNpemUgLSBhOyBpKys7IH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc3MgKyBzLnN0YXJ0ICsgcy5zaXplID4gbXMgKyBtLnN0YXJ0ICsgbS5zaXplKSB7IGRlbHRhID0gbXMgKyBtLnN0YXJ0ICsgbS5zaXplOyBqKys7IH1cclxuICAgICAgICAgICAgZWxzZSB7IGRlbHRhID0gbXMgKyBtLnN0YXJ0ICsgbS5zaXplOyBpKys7IGorKzsgfVxyXG4gICAgICAgICAgICBpZiAoc3VtQWxsICsgZGVsdGEgPCAzNjApIHN1bUFsbCArPSBkZWx0YTtcclxuICAgICAgICAgICAgZWxzZSB7IGRlbHRhID0gMzYwIC0gc3VtQWxsOyBzdW1BbGwgPSAzNjA7IH1cclxuICAgICAgICAgICAgaWYgKHMudHlwZSA9PSAnSCcgJiYgbS50eXBlID09ICdIJykgc3VtSCArPSBkZWx0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1bUg7XHJcbiAgICB9XHJcblxyXG4gICAgX3BhcnNlRmxvb3JzKHJhd0Zsb29ycykge1xyXG4gICAgICAgIHZhciBmbG9vcnMgPSBbXVxyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcmF3Rmxvb3JzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBmbG9vcnNbbmFtZV0gPSB0aGlzLl9wYXJzZUZsb29yKHJhd0Zsb29yc1tuYW1lXSwgbmFtZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobmFtZSArIFwiOiBcIiwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZsb29ycztcclxuICAgIH1cclxuICAgIC8vIEZvcm1hdDoge1tbbl1bTV0oR3xUfEgpeHhbRHh4XV1bLntbbl0oVHxURXxFVHxNVCl4eH1dWy5XXX0gWyxBeHhdXHJcbiAgICAvLyBPdXQ6IHtzdGF0Ols8c2VnbWVudHM+XSwgbW92ZTpbPHNlZ21lbnRzPl0sIG1vdmVBbmdsZTpudW1iZXIsIG1vdmVTdGFydDpudW1iZXIsIHdhbGw6W251bWJlcihhbmdsZSksbnVtYmVyKGFuZ2xlKV19XHJcbiAgICAvLyAgICAgIDxzZWdtZW50PjogeyB0eXBlOnN0cmluZyhHfFR8SCksIHN0YXJ0Om51bWJlcihhbmdsZSksIHNpemU6bnVtYmVyKGFuZ2xlKSB9XHJcbiAgICBfcGFyc2VGbG9vcihyYXdGbG9vciwgbmFtZSkge1xyXG4gICAgICAgIC8vIFBhcnNlIGZsb29yIGJsb2Nrc1xyXG4gICAgICAgIHZhciByYXdCbG9ja3MgPSBbXTtcclxuICAgICAgICB2YXIgbW92ZUEgPSAwO1xyXG4gICAgICAgIHZhciB3YWxsID0gbnVsbDtcclxuICAgICAgICB2YXIgZ3JvdXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdmFyIGxldmVsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gcmF3Rmxvb3IpIHtcclxuICAgICAgICAgICAgdmFyIHJhd0Jsb2NrID0gcmF3Rmxvb3JbaV07XHJcbiAgICAgICAgICAgIGlmIChyYXdCbG9ja1swXSA9PSAnQScpIHsgbW92ZUEgPSBOdW1iZXIocmF3QmxvY2suc3Vic3RyKDEpKTsgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChVdGlscy5zdGFydHNXaXRoKHJhd0Jsb2NrLCAnQycpKSB7IGdyb3VwID0gTnVtYmVyKHJhd0Jsb2NrLnN1YnN0cigxKSk7IH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoVXRpbHMuc3RhcnRzV2l0aChyYXdCbG9jaywgJ0wnKSkgeyBsZXZlbCA9IE51bWJlcihyYXdCbG9jay5zdWJzdHIoMSkpOyB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHJhd0Jsb2NrWzBdKSkgeyBjbnQgPSBOdW1iZXIocmF3QmxvY2tbMF0pOyByYXdCbG9jayA9IHJhd0Jsb2NrLnN1YnN0cigxKTsgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjbnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICByYXdCbG9ja3MucHVzaCh0aGlzLl9wYXJzZUZsb29yQmxvY2socmF3QmxvY2spKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmxvY2tDb3VudCA9IHJhd0Jsb2Nrcy5sZW5ndGg7Ly8gTWF0aC5taW4ocmF3QmxvY2tzLmxlbmd0aCwgMyk7XHJcbiAgICAgICAgLy8gQ2FsYyBob2xlIGdhcHMgYmV0d2VlbiBibG9ja3NcclxuICAgICAgICB2YXIgSF9zdW0gPSAzNjAgLSByYXdCbG9ja3MucmVkdWNlKChzdW0sIGN1cikgPT4gc3VtICsgY3VyLnNpemUsIDApO1xyXG4gICAgICAgIC8vID8/PyByZWFsbHkgbmVlZCB0aGlzXHJcbiAgICAgICAgLy8gaWYgKEhfc3VtIDwgMCkge1xyXG4gICAgICAgIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZsb29yIGRlc2NyaXB0b3IgKGJsb2NrcyBzdW0gZXhjZWVkIDM2MCBkZWdyZWVzKTogXCIpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB2YXIgSF9nYXAgPSBIX3N1bSAvIHJhd0Jsb2Nrcy5sZW5ndGg7XHJcbiAgICAgICAgLy8gQmxvY2sgcGxhY2VtZW50ICgnc3RhcnQnIHZhbHVlKSBhbmQgc2VwYXJhdGlvbiBieSBzdGF0aWMvbW92aW5nIGxheWVyc1xyXG4gICAgICAgIHZhciBzdGF0aWNCbG9ja3MgPSBbXTtcclxuICAgICAgICB2YXIgbW92ZUJsb2NrcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvZmZzID0gMDsgaSA8IHJhd0Jsb2Nrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmF3QmxvY2sgPSByYXdCbG9ja3NbaV07XHJcbiAgICAgICAgICAgIHJhd0Jsb2NrLnN0YXJ0ID0gb2ZmcyArIHJhd0Jsb2NrLmJpYXM7XHJcbiAgICAgICAgICAgIGlmIChyYXdCbG9jay5NKSBtb3ZlQmxvY2tzLnB1c2gocmF3QmxvY2spO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0YXRpY0Jsb2Nrcy5wdXNoKHJhd0Jsb2NrKTtcclxuICAgICAgICAgICAgICAgIC8vIGV4dHJhY3QgbW92aW5nIGludGVybmFsIHRyYXBzXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJhd0Jsb2NrLklULmxlbmd0aDspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXQgPSByYXdCbG9jay5JVFtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXQuTSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdCbG9jay5JVC5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVCbG9ja3MucHVzaCh7dHlwZTonSCcsIHN0YXJ0OnJhd0Jsb2NrLnN0YXJ0LCBzaXplOnJhd0Jsb2NrLnNpemUsIElUOltpdF19KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vaWYgKHJhd0Jsb2NrLndhbGwgJiYgcmF3QmxvY2suc2l6ZSA+IEh4R2xvYmFscy5XQUxMX0FOR0xFKVxyXG4gICAgICAgICAgICAvLyAgICB3YWxsID0geyBzdGFydDogcmF3QmxvY2suc3RhcnQgKyBIeEdsb2JhbHMuV0FMTF9BTkdMRSAqIDAuNSwgc2l6ZTogcmF3QmxvY2suc2l6ZSAtIEh4R2xvYmFscy5XQUxMX0FOR0xFIH07XHJcbiAgICAgICAgICAgIHJhd0Jsb2NrLk0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJhd0Jsb2NrLmJpYXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIG9mZnMgKz0gcmF3QmxvY2suc2l6ZSArIEhfZ2FwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGaWxsIGxheWVyc1xyXG4gICAgICAgIHZhciBsYXllcnMgPSBbXTtcclxuICAgICAgICB2YXIgcmF3TGF5ZXJzID0gW3N0YXRpY0Jsb2NrcywgbW92ZUJsb2Nrc107XHJcbiAgICAgICAgZm9yICh2YXIgbCBpbiByYXdMYXllcnMpIHtcclxuICAgICAgICAgICAgdmFyIHJhd0Jsb2NrcyA9IHJhd0xheWVyc1tsXTtcclxuICAgICAgICAgICAgdmFyIGxheWVyID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmF3QmxvY2tzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmF3QmxvY2sgPSByYXdCbG9ja3NbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gcmF3QmxvY2suSVQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXQgPSByYXdCbG9jay5JVFtqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSByYXdCbG9jay5zdGFydDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyaWRlID0gcmF3QmxvY2suc2l6ZSAvIGl0LkM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0LkMgPiAxICYmIGl0LkUgIT0gMCkgeyBzdHJpZGUgKz0gKHN0cmlkZSAtIGl0LlQpIC8gKGl0LkMgLSAxKTsgfSAvLyBTbmFwIHRvIGJvdGggZWRnZXNcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdC5FIDwgMCkgeyB9IC8vIE5vdGhpbmcgdG8gYWRkXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXQuRSA+IDApIHsgc3RhcnQgKz0gc3RyaWRlIC0gaXQuVDsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgeyBzdGFydCArPSAoc3RyaWRlIC0gaXQuVCkgKiAwLjU7IH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGl0LkM7IGsrKywgc3RhcnQgKz0gc3RyaWRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50cy5wdXNoKHsgdHlwZTonVCcsIHN0YXJ0OiBzdGFydCwgc2l6ZTogaXQuVCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlTm9uT3ZlcmxhcG5lc3Moc2VnbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZmlsbEdhcHMoc2VnbWVudHMsIHJhd0Jsb2NrKTtcclxuICAgICAgICAgICAgICAgIGxheWVyID0gdGhpcy5fY29uY2F0U2VnbWVudHMobGF5ZXIsIHNlZ21lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXllcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogdGhpcy5fbm9ybWFsaXplU2VnbWVudHMobGF5ZXIpLFxyXG4gICAgICAgICAgICAgICAgbGF5ZXI6IHRoaXMuX3ZhbGlkYXRlU2VnbWVudHModGhpcy5fbWVyZ2VTZWdtZW50cyhsYXllcikpLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlcyA9IHtcclxuICAgICAgICAgICAgc3RhdDogbGF5ZXJzWzBdLmxheWVyLFxyXG4gICAgICAgICAgICBzdGF0U3RhcnQ6IGxheWVyc1swXS5zdGFydCxcclxuICAgICAgICAgICAgbW92ZTogbGF5ZXJzWzFdLmxheWVyLFxyXG4gICAgICAgICAgICBtb3ZlU3RhcnQ6IGxheWVyc1sxXS5zdGFydCxcclxuICAgICAgICAgICAgbW92ZUFuZ2xlOiBtb3ZlQSxcclxuICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLFxyXG4gICAgICAgICAgICBsZXZlbDogbGV2ZWwsXHJcbiAgICAgICAgICAgIHJhdzogcmF3Rmxvb3Iuam9pbignXycpLFxyXG4gICAgICAgICAgICBibG9ja0NvdW50OiBibG9ja0NvdW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy9pZiAod2FsbCkgcmVzLndhbGwgPSB3YWxsO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICBfdmFsaWRhdGVOb25PdmVybGFwbmVzcyhzZWdtZW50cykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoIC0gMTspIHtcclxuICAgICAgICAgICAgdmFyIGN1ciA9IHNlZ21lbnRzW2ldO1xyXG4gICAgICAgICAgICB2YXIgbmV4dCA9IHNlZ21lbnRzW2kgKyAxXTtcclxuICAgICAgICAgICAgdmFyIGRlbHRhID0gbmV4dC5zdGFydCAtIChjdXIuc3RhcnQgKyBjdXIuc2l6ZSk7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWx0YSA8IEh4R2xvYmFscy5FUFNJTE9OX1NFR19TSVpFKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlZ21lbnRzIG92ZXJsYXBcIik7XHJcbiAgICAgICAgICAgICAgICBjdXIuc2l6ZSArPSBkZWx0YTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXIuc2l6ZSA8IEh4R2xvYmFscy5NSU5fU0VHX1NJWkUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB2YXIgbGFzdCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIC8vIGlmIChsYXN0LnN0YXJ0ICsgbGFzdC5zaXplIC0gSHhHbG9iYWxzLkVQU0lMT05fU0VHX1NJWkUgPiAzNjApXHJcbiAgICAgICAgLy8gICAgIHRocm93IG5ldyBFcnJvcihcIlNlZ21lbnQgaXMgb3V0IG9mIHJhbmdlIFswLCAzNjBdXCIpO1xyXG4gICAgfVxyXG4gICAgX2ZpbGxHYXBzKHNlZ21lbnRzLCBibG9jaykge1xyXG4gICAgICAgIGlmICghc2VnbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goeyB0eXBlOiBibG9jay50eXBlLCBzdGFydDogYmxvY2suc3RhcnQsIHNpemU6IGJsb2NrLnNpemUgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpcnN0ID0gc2VnbWVudHNbMF07XHJcbiAgICAgICAgdmFyIHByZUZpcnN0ID0geyB0eXBlOiBibG9jay50eXBlLCBzdGFydDogYmxvY2suc3RhcnQsIHNpemU6IGZpcnN0LnN0YXJ0IC0gYmxvY2suc3RhcnQgfTtcclxuICAgICAgICBpZiAocHJlRmlyc3Quc2l6ZSA8IEh4R2xvYmFscy5NSU5fU0VHX1NJWkUpIHsgZmlyc3Quc3RhcnQgLT0gcHJlRmlyc3Quc2l6ZTsgZmlyc3Quc2l6ZSArPSBwcmVGaXJzdC5zaXplOyBwcmVGaXJzdC5zaXplID0gMDsgfVxyXG4gICAgICAgIHZhciBsYXN0ID0gc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgdmFyIHBvc3RMYXN0ID0geyB0eXBlOiBibG9jay50eXBlLCBzdGFydDogbGFzdC5zdGFydCArIGxhc3Quc2l6ZSwgc2l6ZTogYmxvY2suc3RhcnQgKyBibG9jay5zaXplIC0gKGxhc3Quc3RhcnQgKyBsYXN0LnNpemUpIH07XHJcbiAgICAgICAgaWYgKHBvc3RMYXN0LnNpemUgPCBIeEdsb2JhbHMuTUlOX1NFR19TSVpFKSB7IGxhc3Quc2l6ZSArPSBwb3N0TGFzdC5zaXplOyBwb3N0TGFzdC5zaXplID0gMDsgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgY3VyID0gc2VnbWVudHNbaV07XHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gc2VnbWVudHNbaSArIDFdIHx8IHBvc3RMYXN0O1xyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBuZXh0LnN0YXJ0IC0gKGN1ci5zdGFydCArIGN1ci5zaXplKTtcclxuICAgICAgICAgICAgaWYgKGRlbHRhIDwgSHhHbG9iYWxzLk1JTl9TRUdfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgY3VyLnNpemUgPSBuZXh0LnN0YXJ0IC0gY3VyLnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudHMuc3BsaWNlKGkgKyAxLCAwLCB7IHR5cGU6IGJsb2NrLnR5cGUsIHN0YXJ0OiBjdXIuc3RhcnQgKyBjdXIuc2l6ZSwgc2l6ZTogZGVsdGEgfSk7XHJcbiAgICAgICAgICAgICAgICBpICs9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZUZpcnN0LnNpemUpIHNlZ21lbnRzLnNwbGljZSgwLCAwLCBwcmVGaXJzdCk7XHJcbiAgICAgICAgaWYgKHBvc3RMYXN0LnNpemUpIHNlZ21lbnRzLnB1c2gocG9zdExhc3QpO1xyXG4gICAgfVxyXG4gICAgX2NvbmNhdFNlZ21lbnRzKGxpc3QwLCBsaXN0MSkge1xyXG4gICAgICAgIGlmIChsaXN0MC5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3QxO1xyXG4gICAgICAgIHZhciBsYXN0MCA9IGxpc3QwW2xpc3QwLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHZhciBmaXJzdDEgPSBsaXN0MVswXTtcclxuICAgICAgICB2YXIgZ2FwU2l6ZSA9IGZpcnN0MS5zdGFydCAtIChsYXN0MC5zdGFydCArIGxhc3QwLnNpemUpO1xyXG4gICAgICAgIGlmIChnYXBTaXplIDwgSHhHbG9iYWxzLkVQU0lMT05fU0VHX1NJWkUpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlZ21lbnRzIG92ZXJsYXBcIik7XHJcbiAgICAgICAgdmFyIHJlcyA9IGxpc3QwO1xyXG4gICAgICAgIGlmIChnYXBTaXplIDwgSHhHbG9iYWxzLk1JTl9TRUdfU0laRSkge1xyXG4gICAgICAgICAgICBsYXN0MC5zaXplID0gZmlyc3QxLnN0YXJ0IC0gbGFzdDAuc3RhcnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnB1c2goeyB0eXBlOidIJywgc3RhcnQ6IGxhc3QwLnN0YXJ0ICsgbGFzdDAuc2l6ZSwgc2l6ZTogZ2FwU2l6ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChsaXN0MSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIF9ub3JtYWxpemVTZWdtZW50cyhzZWdtZW50cykge1xyXG4gICAgICAgIGlmICghc2VnbWVudHMubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB2YXIgZmlyc3QgPSBzZWdtZW50c1swXTtcclxuICAgICAgICB2YXIgbGFzdCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSBmaXJzdC5zdGFydDtcclxuICAgICAgICBmb3IgKHZhciBpIGluIHNlZ21lbnRzKVxyXG4gICAgICAgICAgICBzZWdtZW50c1tpXS5zdGFydCAtPSBvZmZzZXQ7XHJcbiAgICAgICAgdmFyIGdhcFNpemUgPSAzNjAgLSAobGFzdC5zdGFydCArIGxhc3Quc2l6ZSk7XHJcbiAgICAgICAgaWYgKGdhcFNpemUgPCBIeEdsb2JhbHMuRVBTSUxPTl9TRUdfU0laRSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VnbWVudCBpcyBvdXQgb2YgcmFuZ2UgWzAsIDM2MF1cIik7XHJcbiAgICAgICAgaWYgKGdhcFNpemUgPCBIeEdsb2JhbHMuTUlOX1NFR19TSVpFKVxyXG4gICAgICAgICAgICBsYXN0LnNpemUgPSAzNjAgLSBsYXN0LnNpemU7IFxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgc2VnbWVudHMucHVzaCh7IHR5cGU6J0gnLCBzdGFydDogbGFzdC5zdGFydCArIGxhc3Quc2l6ZSwgc2l6ZTogZ2FwU2l6ZSB9KTtcclxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xyXG4gICAgfVxyXG4gICAgX21lcmdlU2VnbWVudHMoc2VnbWVudHMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY3VyID0gc2VnbWVudHNbaV07XHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gc2VnbWVudHNbaSArIDFdO1xyXG4gICAgICAgICAgICBpZiAoY3VyLnR5cGUgPT0gbmV4dC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXIuc2l6ZSA9IG5leHQuc3RhcnQgLSBjdXIuc3RhcnQgKyBuZXh0LnNpemU7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50cy5zcGxpY2UoaSArIDEsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWdtZW50cztcclxuICAgIH1cclxuICAgIF92YWxpZGF0ZVNlZ21lbnRzKHNlZ21lbnRzKSB7XHJcbiAgICAgICAgdmFyIGEgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gc2VnbWVudHMpIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBzZWdtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHMuc3RhcnQgKyAwLjAwMDEgPCBhIHx8IHMuc2l6ZSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWdtZW50cyB2YWxpZGF0aW9uIGZhaWxlZCcpO1xyXG4gICAgICAgICAgICBhID0gcy5zdGFydCArIHMuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlZ21lbnRzO1xyXG4gICAgfVxyXG4gICAgLy8gRm9ybWF0OiBbW01dKEd8VHxIKXh4W0R4eF1dWy57W25dKFR8VEV8RVR8TVQpeHh9XVxyXG4gICAgLy8gT3V0OiB7TTpib29sZWFuLCB0eXBlOnN0cmluZyhHfFR8SCksIHNpemU6bnVtYmVyKGFuZ2xlKSBiaWFzOm51bWJlcihhbmdsZSksIHdhbGw6Ym9vbGVhbiwgSVQ6W3tUOm51bWJlcihhbmdsZSksIEU6bnVtYmVyKC0xLDAsMSksIE06Ym9vbGVhbiwgQzpudW1iZXIoY291bnQpfSwuLl19XHJcbiAgICAvLyBDb21tZW50czogSVQgLSBpbnRlcm5hbCB0cmFwc1xyXG4gICAgX3BhcnNlRmxvb3JCbG9jayhyYXdCbG9jaykge1xyXG4gICAgICAgIHZhciBibG9jayA9IHsgTTogZmFsc2UsIHR5cGU6Jz8nLCBzaXplOjAsIGJpYXM6MCwgSVQ6W10gfTtcclxuICAgICAgICBpZiAocmF3QmxvY2tbMF0gPT0gJ00nKSB7IGJsb2NrLk0gPSB0cnVlOyByYXdCbG9jayA9IHJhd0Jsb2NrLnN1YnN0cigxKTsgfVxyXG4gICAgICAgIHZhciBwYXJ0cyA9IHJhd0Jsb2NrLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1swXTtcclxuICAgICAgICBibG9jay50eXBlID0gcGFydFswXTtcclxuICAgICAgICBpZiAoYmxvY2sudHlwZSA9PSAnRycgfHwgYmxvY2sudHlwZSA9PSAnVCcgfHwgYmxvY2sudHlwZSA9PSAnSCcpIHtcclxuICAgICAgICAgICAgdmFyIERfaWR4ID0gcGFydC5pbmRleE9mKCdEJyk7XHJcbiAgICAgICAgICAgIGlmIChEX2lkeCA+IDApIHsgYmxvY2suc2l6ZSA9IE51bWJlcihwYXJ0LnN1YnN0cigxLCBEX2lkeCAtIDEpKTsgYmxvY2suYmlhcyA9IE51bWJlcihwYXJ0LnN1YnN0cihEX2lkeCArIDEpKTsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgYmxvY2suc2l6ZSA9IE51bWJlcihwYXJ0LnN1YnN0cigxKSk7IH1cclxuICAgICAgICAgICAgaWYgKGlzTmFOKGJsb2NrLnNpemUpIHx8IGlzTmFOKGJsb2NrLmJpYXMpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBmbG9vciBibG9jayBmb3JtYXQgXCIgKyByYXdCbG9jayk7XHJcbiAgICAgICAgICAgIGlmIChibG9jay50eXBlID09ICdUJylcclxuICAgICAgICAgICAgICAgIHJldHVybiBibG9jaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmRlZmluZWQgZmxvb3IgYmxvY2sgdHlwZSBcIiArIGJsb2NrLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJ0cy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJ0cykge1xyXG4gICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldO1xyXG4gICAgICAgICAgICB2YXIgdEVudHJ5ID0geyBDOiAxLCBFOiAwIH07XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4ocGFydFswXSkpIHsgdEVudHJ5LkMgPSBwYXJ0WzBdOyBwYXJ0ID0gcGFydC5zdWJzdHIoMSk7IH1cclxuICAgICAgICAgICAgaWYgKFV0aWxzLnN0YXJ0c1dpdGgocGFydCwgJ0VUJykpIHsgdEVudHJ5LkUgPSAxOyBwYXJ0ID0gcGFydC5zdWJzdHIoMik7IH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoVXRpbHMuc3RhcnRzV2l0aChwYXJ0LCAnVEUnKSkgeyB0RW50cnkuRSA9IC0xOyBwYXJ0ID0gcGFydC5zdWJzdHIoMik7IH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoVXRpbHMuc3RhcnRzV2l0aChwYXJ0LCAnTVQnKSkgeyB0RW50cnkuTSA9IHRydWU7IHBhcnQgPSBwYXJ0LnN1YnN0cigyKTsgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChVdGlscy5zdGFydHNXaXRoKHBhcnQsICdUJykpIHsgcGFydCA9IHBhcnQuc3Vic3RyKDEpOyB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKFV0aWxzLnN0YXJ0c1dpdGgocGFydCwgJ1cnKSkgYmxvY2sud2FsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0RW50cnkuVCA9IE51bWJlcihwYXJ0KTtcclxuICAgICAgICAgICAgaWYgKHRFbnRyeS5UICogdEVudHJ5LkMgPiBibG9jay5zaXplKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBmbG9vciBkZXNjcmlwdG9yICh0cmFwcyBpbiBibG9jayBleGNlZWQgaXRzIHNpemUpXCIpO1xyXG4gICAgICAgICAgICBibG9jay5JVC5wdXNoKHRFbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBibG9jaztcclxuICAgIH1cclxuICAgIF9uZXdHKGFuZ2xlKSB7IHJldHVybiB0aGlzLl9uZXdTZWcoSHhHbG9iYWxzLlNFR19HUk9VTkQsIGFuZ2xlKTsgfVxyXG4gICAgX25ld1QoYW5nbGUpIHsgcmV0dXJuIHRoaXMuX25ld1NlZyhIeEdsb2JhbHMuU0VHX0RFQVRILCBhbmdsZSk7IH1cclxuICAgIF9uZXdIKGFuZ2xlKSB7IHJldHVybiB0aGlzLl9uZXdTZWcoSHhHbG9iYWxzLlNFR19IT0xFLCBhbmdsZSk7IH1cclxuICAgIF9uZXdTZWcodHlwZSwgYW5nbGUpIHsgcmV0dXJuIHt0eXBlOnR5cGUsIGFuZ2xlOmFuZ2xlfTsgfVxyXG5cclxuICAgIF9yYW5kb21FbnRyeShhcnIpIHsgcmV0dXJuIGFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnIubGVuZ3RoKV07IH1cclxuICAgIFxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gT2xkIGZvcm1hdFxyXG4gICAgLypfZ2VuZXJhdGVMZXZlbChpbmRleCkge1xyXG4gICAgICAgIHZhciBsdmxEZXNjID0gdGhpcy5fbGV2ZWxzW01hdGgubWluKGluZGV4LCB0aGlzLl9sZXZlbHMubGVuZ3RoIC0gMSldO1xyXG4gICAgICAgIHZhciBmbG9vcnMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpIGluIGx2bERlc2MpXHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlRW50cnkobHZsRGVzY1tpXSwgZmxvb3JzLCBmYWxzZSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiBmbG9vcnMpIHtcclxuICAgICAgICAgICAgdmFyIGZsb29yRGVzYyA9IGZsb29yc1tpXTtcclxuICAgICAgICAgICAgdmFyIGZsb29yID0ge307XHJcbiAgICAgICAgICAgIGlmIChmbG9vckRlc2Muc3RhdGljKVxyXG4gICAgICAgICAgICAgICAgZmxvb3Iuc3RhdGljID0gdGhpcy5fcGFyc2VFbnRyeShmbG9vckRlc2Muc3RhdGljLCBbXSwgdHJ1ZSlbMF07XHJcbiAgICAgICAgICAgIGlmIChmbG9vckRlc2MubW92ZSlcclxuICAgICAgICAgICAgICAgIGZsb29yLm1vdmUgPSB0aGlzLl9wYXJzZUVudHJ5KGZsb29yRGVzYy5zdGF0aWMsIFtdLCB0cnVlKVswXTtcclxuICAgICAgICAgICAgZmxvb3Iud2FsbCA9IGZsb29yRGVzYy53YWxsO1xyXG4gICAgICAgICAgICBmbG9vcltpXSA9IGZsb29yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcGFyc2VFbnRyeShlbnRyeSwgdG9MaXN0LCBpc0l0ZW1BcnJheSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YoZW50cnkpID09ICdzdHJpbmcnKSAvLyBwcmVmYWIgcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlRW50cnkodGhpcy5fZ2V0UHJlZmFiKGVudHJ5KSwgdG9MaXN0LCBpc0l0ZW1BcnJheSk7XHJcbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbnRyeSkpIHsgXHJcbiAgICAgICAgICAgIGlmIChpc0l0ZW1BcnJheSkgdG9MaXN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuX3BhcnNlRW50cnkodGhpcy5fcmFuZG9tRW50cnkoZW50cnkpLCB0b0xpc3QsIGlzSXRlbUFycmF5KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5Lmxpc3QpIHsgLy8gZm9yY2UgaW50ZXJwcmV0IGFzIGxpc3RcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSB0eXBlb2YoZW50cnkubGlzdCkgPT0gJ3N0cmluZycgPyB0aGlzLl9jb25maWcucHJlZmFic1tlbnRyeS5saXN0XSA6IGVudHJ5Lmxpc3Q7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VFbnRyeShsaXN0W2ldLCB0b0xpc3QsIGlzSXRlbUFycmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIE9iamVjdFxyXG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGVudHJ5KTtcclxuICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1swXTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IE51bWJlcihrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7IC8vIHs8Tj46REVTQ31cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlRW50cnkoZW50cnlba2V5XSwgdG9MaXN0LCBpc0l0ZW1BcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvTGlzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzSXRlbUFycmF5KVxyXG4gICAgICAgICAgICAgICAgdG9MaXN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9MaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRQcmVmYWIobmFtZSkge1xyXG4gICAgICAgIHZhciBwcmVmYWIgPSB0aGlzLl9jb25maWcucHJlZmFic1tuYW1lXTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShwcmVmYWIpID8gdGhpcy5fcmFuZG9tRW50cnkocHJlZmFiKSA6IHByZWZhYjtcclxuICAgIH0qL1xyXG59IiwiaW1wb3J0IEh4R2xvYmFscyBmcm9tIFwiLi9IeEdsb2JhbHNcIjtcclxuXHJcbmNvbnN0IEZFVENIX0xFVkVMUyA9IEh4R2xvYmFscy5GRVRDSF9MRVZFTFM7XHJcbmNvbnN0IE1BWF9ERUxUQV9USU1FID0gSHhHbG9iYWxzLk1BWF9ERUxUQV9USU1FO1xyXG5cclxuY29uc3QgU1RBVEVfQk9VTkNFID0gJ2JvdW5jZSc7XHJcbmNvbnN0IFNUQVRFX0ZBTEwgPSAnZmFsbCc7XHJcblxyXG4vLyBNYXRoXHJcbi8vY29uc3QgSEVJR0hUX0JPVU5DRSA9IEh4R2xvYmFscy5MT0dJQ19IRUlHSFRfQk9VTkNFOyAgICAvLyBoXHJcbmNvbnN0IEJPVU5DRV9QRVJJT0QgPSAwLjcyOyAvLyBIeEdsb2JhbHMuTE9HSUNfQk9VTkNFX1BFUklPRDsgLy8gdFxyXG5jb25zdCBIRUlHSFRfQk9VTkNFID0gMC4yNTsgLy9IeEdsb2JhbHMuTE9HSUNfQUNDRUxFUkFUSU9OICogKEJPVU5DRV9QRVJJT0QgKiBCT1VOQ0VfUEVSSU9EKSAvIDg7XHJcbmNvbnN0IEhFSUdIVF9MRVZFTCA9IEh4R2xvYmFscy5MT0dJQ19IRUlHSFRfTEVWRUw7ICAgICAgLy8gSFxyXG5jb25zdCBBQ0NFTEVSQVRJT04gPSA4ICogSEVJR0hUX0JPVU5DRSAvIChCT1VOQ0VfUEVSSU9EICogQk9VTkNFX1BFUklPRCk7IC8vIEh4R2xvYmFscy5MT0dJQ19BQ0NFTEVSQVRJT047ICAgICAgLy8gYVxyXG5jb25zdCBGQUxMX1ZFTE9DSVRZID0gTWF0aC5zcXJ0KDIgKiBIRUlHSFRfTEVWRUwgKiBBQ0NFTEVSQVRJT04pOy8vMC44O1xyXG5jb25zdCBGQUxMX0FDQ0VMID0gMS43NTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gQm91bmNlIHN0YXRlIHZhbHVlc1xyXG4vLyAgIGJvdW5jZSB2ZWxvY2l0eTpcclxuLy8gICAgICBWID0gc3FydCgyICogaCAqIGEpXHJcbi8vICAgYm91bmNlIHBlcmlvZDpcclxuLy8gICAgICB0ID0gMiAqIHNxcnQoMiAqIGggLyBhKVxyXG4vL1xyXG4vLyBGYWxsIHN0YXRlIHZhbHVlc1xyXG4vLyAgIGZhbGwgdmVsb2NpdHkgZnJvbSBrLXRoIGxldmVsOlxyXG4vLyAgICAgIFZrID0gc3FydCgyICogYSAqIEggKiBrICsgMiAqIGEgKiBoKSA9IHNxcnQoMiAqIGEgKiAoSCAqIGsgKyBoKSlcclxuLy8gICBmYWxsIGR1cmF0aW9uIGZyb20gay10aCB0byAoaysxKS10aCBmbG9vcjpcclxuLy8gICAgICB0ayA9IHNxcnQoMiAqIEggLyBhKSAqIChzcXJ0KGsgKyBoL0ggKyAxKSAtIHNxcnQoayArIGgvSCkpXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxpeEdhbWUgZXh0ZW5kcyBMYXlhLkV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0xFVkVMX0FEREVEKCkgeyByZXR1cm4gJ0xFVkVMX0FEREVEJzsgfVxyXG4gICAgc3RhdGljIGdldCBFVkVOVF9MRVZFTF9SRU1PVkVEKCkgeyByZXR1cm4gJ0xFVkVMX1JFTU9WRUQnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0xFVkVMX1BBU1NFRCgpIHsgcmV0dXJuICdMRVZFTF9QQVNTRUQnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0xFVkVMX0JST0tFTigpIHsgcmV0dXJuICdMRVZFTF9CUk9LRU4nOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0xFVkVMX1JFU1VNRUQoKSB7IHJldHVybiAnTEVWRUxfUkVTVU1FRCc7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfUkVTVUxUKCkgeyByZXR1cm4gJ1JFU1VMVCc7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfQkFMTF9CT1VOQ0UoKSB7IHJldHVybiAnQkFMTF9CT1VOQ0UnOyB9XHJcblxyXG4gICAgc3RhdGljIGdldCBSRVNVTFRfTk9UX1NUQVJURUQoKSB7IHJldHVybiAnTk9UX1NUQVJURUQnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFJFU1VMVF9QTEFZSU5HKCkgeyByZXR1cm4gJ1BMQVlJTkcnOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFJFU1VMVF9XSU4oKSB7IHJldHVybiAnV0lOJzsgfVxyXG4gICAgc3RhdGljIGdldCBSRVNVTFRfTE9PU0UoKSB7IHJldHVybiAnTE9PU0UnOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2VuZXJhdG9yLCByZXN1bWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlID0geyB9O1xyXG4gICAgICAgIHRoaXMuX2xldmVscyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3NldEJvdW5jZSgpO1xyXG4gICAgICAgIHRoaXMuX3NoaWZ0ID0gMDtcclxuICAgICAgICB0aGlzLl9zaGlmdFByZXYgPSAwO1xyXG4gICAgICAgIHRoaXMuX3Jlc3VsdCA9IEhlbGl4R2FtZS5SRVNVTFRfTk9UX1NUQVJURUQ7XHJcbiAgICAgICAgdGhpcy5fZWxhcHNlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2Zsb29ySW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlID0gMDtcclxuICAgICAgICBpZiAocmVzdW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzdWx0ID0gcmVzdW1lU3RhdGUucmVzdWx0O1xyXG4gICAgICAgICAgICB0aGlzLl9mbG9vckluZGV4ID0gcmVzdW1lU3RhdGUuZmxvb3JJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQgPSByZXN1bWVTdGF0ZS5yZXN1bWVDb3VudDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9mbG9vckluZGV4OyBpKyspXHJcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IubmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBwcm9ncmVzcygpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9XSU4pXHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIHJldHVybiAgMSAtICh0aGlzLl9nZW5lcmF0b3IuY291bnRMZWZ0ICsgdGhpcy5fbGV2ZWxzLmxlbmd0aCkgLyB0aGlzLl9nZW5lcmF0b3IuY291bnRUb3RhbDtcclxuICAgIH1cclxuICAgIGdldCBmaW5pc2hlZCgpIHsgcmV0dXJuIHRoaXMucmVzdWx0ID09IEhlbGl4R2FtZS5SRVNVTFRfV0lOIHx8IHRoaXMucmVzdWx0ID09IEhlbGl4R2FtZS5SRVNVTFRfTE9PU0U7IH1cclxuICAgIGdldCByZXN1bWVDb3VudCgpIHsgcmV0dXJuIHRoaXMuX3Jlc3VtZUNvdW50OyB9XHJcbiAgICBnZXQgcmVzdWx0KCkgeyByZXR1cm4gdGhpcy5fcmVzdWx0OyB9XHJcbiAgICBnZXQgc2hpZnQoKSB7IHJldHVybiB0aGlzLl9zaGlmdDsgfVxyXG4gICAgc2V0IHNoaWZ0KHZhbHVlKSB7IHRoaXMuX3NoaWZ0ID0gdmFsdWU7IH1cclxuICAgIGdldCBmbG9vckluZGV4KCkgeyByZXR1cm4gdGhpcy5fZmxvb3JJbmRleDsgfVxyXG4gICAgZ2V0IGlzQnJha2luZ0JhbGwoKSB7IHJldHVybiB0aGlzLl9zdGF0ZS5sZXZlbCA+PSB0aGlzLl9zdGF0ZS5icmVha0Zyb21MZXZlbDsgfVxyXG4gICAgZ2V0IGJhbGxQb3MoKSB7XHJcbiAgICAgICAgdmFyIHMgPSB0aGlzLl9zdGF0ZTtcclxuICAgICAgICBpZiAocy50eXBlID09IFNUQVRFX0JPVU5DRSkge1xyXG4gICAgICAgICAgICB2YXIgdmVsID0gTWF0aC5zcXJ0KDIgKiBIRUlHSFRfQk9VTkNFICogQUNDRUxFUkFUSU9OKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZlbCAqIHMudGltZSAtIEFDQ0VMRVJBVElPTiAqIHMudGltZSAqIHMudGltZSAqIDAuNTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBnZXQgYmFsbFZlbCgpIHtcclxuICAgICAgICB2YXIgcyA9IHRoaXMuX3N0YXRlO1xyXG4gICAgICAgIHZhciB2ZWwgPSBNYXRoLnNxcnQoMiAqIEhFSUdIVF9CT1VOQ0UgKiBBQ0NFTEVSQVRJT04pO1xyXG4gICAgICAgIGlmIChzLnR5cGUgPT0gU1RBVEVfQk9VTkNFKSByZXR1cm4gdmVsIC0gQUNDRUxFUkFUSU9OICogcy50aW1lO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIC12ZWwgLSBGQUxMX0FDQ0VMICogcy50b3RhbFRpbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgYmFsbFBvc01heCgpIHsgcmV0dXJuIEhFSUdIVF9CT1VOQ0U7IH1cclxuICAgIGdldCBkaXN0YW5jZSgpIHsgcmV0dXJuIHRoaXMuX2Rpc3RhbmNlOyB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLl9zaGlmdFByZXYgPSB0aGlzLl9zaGlmdDtcclxuICAgICAgICBpZiAodGhpcy5yZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9OT1RfU1RBUlRFRCkge1xyXG4gICAgICAgICAgICB0aGlzLl9mZXRjaCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGV2ZWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0UmVzdWx0KEhlbGl4R2FtZS5SRVNVTFRfUExBWUlORyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0U2hpZnRUb0ZpcnN0Rmxvb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZldGNoKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9sZXZlbHMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdFNoaWZ0VG9GaXJzdEZsb29yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzdW1lU3RhdGUoKSB7IHJldHVybiB7IHJlc3VsdDp0aGlzLnJlc3VsdCwgZmxvb3JJbmRleDp0aGlzLmZsb29ySW5kZXgsIHJlc3VtZUNvdW50OnRoaXMucmVzdW1lQ291bnQgfTsgfVxyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NoaWZ0UHJldiA9IHRoaXMuX3NoaWZ0O1xyXG4gICAgICAgICAgICB0aGlzLl9yZXN1bWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fcmVzdW1lQ291bnQrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xldmVsc1swXS5zZWdtZW50cy53YWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGV2ZWxzWzBdLnNlZ21lbnRzLndhbGwgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZXN1bHQoSGVsaXhHYW1lLlJFU1VMVF9QTEFZSU5HKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChIZWxpeEdhbWUuRVZFTlRfTEVWRUxfUkVTVU1FRCwgdGhpcy5fbGV2ZWxzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZGVsdGFUaW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0ICE9IEhlbGl4R2FtZS5SRVNVTFRfUExBWUlORylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbGV2ZWxzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldFJlc3VsdChIZWxpeEdhbWUuUkVTVUxUX1dJTik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZWx0YVRpbWUgPiBNQVhfREVMVEFfVElNRSlcclxuICAgICAgICAgICAgZGVsdGFUaW1lID0gTUFYX0RFTFRBX1RJTUU7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsYXBzZWQgKz0gZGVsdGFUaW1lO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZU1vdmVMZXZlbHMoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQnJha2luZ0JhbGwgJiYgdGhpcy5fdHJ5SGl0V2FsbCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxldmVsc1BvcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZXN1bHQoSGVsaXhHYW1lLlJFU1VMVF9MT09TRSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NoaWZ0UHJldiA9IHRoaXMuX3NoaWZ0O1xyXG5cclxuICAgICAgICB3aGlsZSAoZGVsdGFUaW1lID4gMCAmJiB0aGlzLnJlc3VsdCA9PSBIZWxpeEdhbWUuUkVTVUxUX1BMQVlJTkcpIHtcclxuICAgICAgICAgICAgdmFyIG5leHREZWx0YSA9IHRoaXMuX2dldE5leHREZWx0YVRpbWUoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGUudG90YWxUaW1lICs9IE1hdGgubWluKGRlbHRhVGltZSwgbmV4dERlbHRhKTtcclxuICAgICAgICAgICAgaWYgKGRlbHRhVGltZSA8IG5leHREZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdGUudGltZSArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWx0YVRpbWUgLT0gbmV4dERlbHRhO1xyXG4gICAgICAgICAgICB2YXIgcGlja2VkID0gdGhpcy5fcGlja0Zsb29yKCk7XHJcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5fbGV2ZWxzWzBdO1xyXG4gICAgICAgICAgICBpZiAoaW5mbyAmJiBwaWNrZWQgJiYgcGlja2VkLnR5cGUgIT0gSHhHbG9iYWxzLlNFR19IT0xFKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dEJyZWFrRnJvbUxldmVsID0gSHhHbG9iYWxzLkxPR0lDX0xFVkVMX0JSRUFLX0ZST007XHJcbiAgICAgICAgICAgICAgICBpZiAocGlja2VkLnR5cGUgPT0gSHhHbG9iYWxzLlNFR19XSU4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXN1bHQoSGVsaXhHYW1lLlJFU1VMVF9XSU4pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZS50eXBlID09IFNUQVRFX0ZBTEwgJiYgdGhpcy5pc0JyYWtpbmdCYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGV2ZWxzWzBdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvLmNyYXNoZWRMZXZlbCA9IHRoaXMuX3N0YXRlLmxldmVsICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9SRU1PVkVELCBpbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9CUk9LRU4sIHRoaXMuX3N0YXRlLmxldmVsKVxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlZC5icm9rZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbmV4dEJyZWFrRnJvbUxldmVsKys7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9yZXN1bWVkICYmIHBpY2tlZC50eXBlID09IEh4R2xvYmFscy5TRUdfREVBVEgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXN1bHQoSGVsaXhHYW1lLlJFU1VMVF9MT09TRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRCb3VuY2UoMCwgbmV4dEJyZWFrRnJvbUxldmVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoSGVsaXhHYW1lLkVWRU5UX0JBTExfQk9VTkNFLCBwaWNrZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzdW1lZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVxdWV1ZUxldmVsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRGYWxsKDAsIHRoaXMuX3N0YXRlLmxldmVsICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5mbylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9SRU1PVkVELCBpbmZvKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1BBU1NFRCwgdGhpcy5fc3RhdGUubGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZmV0Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2lmICh0aGlzLl9zdGF0ZS50eXBlID09IFNUQVRFX0ZBTEwpXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxldmVsc1BvcygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0U2hpZnRUb0ZpcnN0Rmxvb3IoKSB7XHJcbiAgICAgICAgdmFyIHNlZ21lbnRzID0gdGhpcy5fbGV2ZWxzWzBdLnNlZ21lbnRzO1xyXG4gICAgICAgIHZhciBzZWcgPSBzZWdtZW50cy5zdGF0LmZpbmQoKHNlZykgPT4gc2VnLnR5cGUgPT0gSHhHbG9iYWxzLlNFR19HUk9VTkQpO1xyXG4gICAgICAgIGlmICghc2VnKSB7XHJcbiAgICAgICAgICAgIHNlZyA9IHNlZ21lbnRzLnN0YXQuZmluZCgoc2VnKSA9PiBzZWcudHlwZSA9PSBIeEdsb2JhbHMuU0VHX0RFQVRIKTtcclxuICAgICAgICAgICAgaWYgKCFzZWcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NoaWZ0ID0gc2VnbWVudHMuc3RhdFN0YXJ0IC8gMzYwICsgKHNlZy5zdGFydCArIHNlZy5lbmQpICogMC41O1xyXG4gICAgfVxyXG4gICAgX3NldEJvdW5jZSh0aW1lLCBicmVha0Zyb21MZXZlbCkge1xyXG4gICAgICAgIHRoaXMuX3N0YXRlLnR5cGUgPSBTVEFURV9CT1VOQ0U7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUudGltZSA9IHRpbWUgfHwgMDtcclxuICAgICAgICB0aGlzLl9zdGF0ZS5sZXZlbCA9IDA7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUuYnJlYWtGcm9tTGV2ZWwgPSBicmVha0Zyb21MZXZlbCB8fCBIeEdsb2JhbHMuTE9HSUNfTEVWRUxfQlJFQUtfRlJPTTtcclxuICAgIH1cclxuICAgIF9zZXRGYWxsKHRpbWUsIGxldmVsKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUudHlwZSA9IFNUQVRFX0ZBTEw7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUudGltZSA9IHRpbWUgfHwgMDtcclxuICAgICAgICBpZiAobGV2ZWwgPD0gMSlcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGUudG90YWxUaW1lID0gMDtcclxuICAgICAgICB0aGlzLl9zdGF0ZS5sZXZlbCA9IGxldmVsIHx8IDA7XHJcbiAgICB9XHJcbiAgICBfZGVxdWV1ZUxldmVsKCkge1xyXG4gICAgICAgIHRoaXMuX2Zsb29ySW5kZXgrKztcclxuICAgICAgICB2YXIgaW5mbyA9IHRoaXMuX2xldmVscy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgdGhpcy5fZmV0Y2goKTtcclxuICAgICAgICByZXR1cm4gaW5mbztcclxuICAgIH1cclxuICAgIF9mZXRjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGV2ZWxzLmxlbmd0aCA+IDAgJiYgdGhpcy5fbGV2ZWxzW3RoaXMuX2xldmVscy5sZW5ndGggLSAxXS53aW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodGhpcy5fbGV2ZWxzLmxlbmd0aCA8IEZFVENIX0xFVkVMUykge1xyXG4gICAgICAgICAgICB2YXIgc2VnbWVudHMgPSB0aGlzLl9nZW5lcmF0b3IubmV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgbHZscyA9IHRoaXMuX2xldmVscztcclxuICAgICAgICAgICAgdmFyIGluZm8gPSB7IHBvczogbHZscy5sZW5ndGggPyBsdmxzW2x2bHMubGVuZ3RoLTFdLnBvcyArIDEgOiAwIH07XHJcbiAgICAgICAgICAgIGlmIChzZWdtZW50cylcclxuICAgICAgICAgICAgICAgIGluZm8uc2VnbWVudHMgPSBzZWdtZW50cztcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmZvLndpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbmZvLnNlZ21lbnRzID0geyBzdGF0OiBbeyB0eXBlOiBIeEdsb2JhbHMuU0VHX1dJTiwgc3RhcnQ6IDAsIGVuZDogMSB9XSwgc3RhdFN0YXJ0OiAwIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbHZscy5wdXNoKGluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50KEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9BRERFRCwgaW5mbyk7XHJcbiAgICAgICAgICAgIGlmIChpbmZvLndpbilcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9nZXROZXh0RGVsdGFUaW1lKCkge1xyXG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlO1xyXG4gICAgICAgIHZhciB0b3RhbFQ7XHJcbiAgICAgICAgaWYgKHN0YXRlLnR5cGUgPT0gU1RBVEVfQk9VTkNFKSB7XHJcbiAgICAgICAgICAgIC8vdG90YWxUID0gMiAqIE1hdGguc3FydCgyICogSEVJR0hUX0JPVU5DRSAvIEFDQ0VMRVJBVElPTik7XHJcbiAgICAgICAgICAgIHRvdGFsVCA9IEJPVU5DRV9QRVJJT0Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbFQgLSBzdGF0ZS50aW1lO1xyXG4gICAgICAgIH0gZWxzZSB7IC8vIHN0YXRlLnR5cGUgPT0gU1RBVEVfRkFMTFxyXG4gICAgICAgICAgICAvL3ZhciBoX0ggPSBIRUlHSFRfQk9VTkNFIC8gSEVJR0hUX0xFVkVMO1xyXG4gICAgICAgICAgICAvL3RvdGFsVCA9IE1hdGguc3FydCgyICogSEVJR0hUX0xFVkVMICogKHN0YXRlLmxldmVsICsgaF9IICsgMSkgLyBBQ0NFTEVSQVRJT04pXHJcbiAgICAgICAgICAgIC8vICAgIC0gTWF0aC5zcXJ0KDIgKiBIRUlHSFRfTEVWRUwgKiAoc3RhdGUubGV2ZWwgKyBoX0gpIC8gQUNDRUxFUkFUSU9OKTtcclxuICAgICAgICAgICAgLy90b3RhbFQgPSBIRUlHSFRfTEVWRUwgLyBGQUxMX1ZFTE9DSVRZO1xyXG4gICAgICAgICAgICB0b3RhbFQgPSAoTWF0aC5zcXJ0KEZBTExfVkVMT0NJVFkgKiBGQUxMX1ZFTE9DSVRZICsgMiAqIEZBTExfQUNDRUwgKiBIRUlHSFRfTEVWRUwgKiBzdGF0ZS5sZXZlbClcclxuICAgICAgICAgICAgICAgIC0gTWF0aC5zcXJ0KEZBTExfVkVMT0NJVFkgKiBGQUxMX1ZFTE9DSVRZICsgMiAqIEZBTExfQUNDRUwgKiBIRUlHSFRfTEVWRUwgKiAoc3RhdGUubGV2ZWwgLSAxKSkpIC8gRkFMTF9BQ0NFTDtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0b3RhbFQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdG90YWxUIC0gc3RhdGUudGltZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfdHJ5SGl0V2FsbCgpIHtcclxuICAgICAgICB2YXIgbHZsID0gdGhpcy5fbGV2ZWxzWzBdO1xyXG4gICAgICAgIGlmICghbHZsIHx8IHRoaXMuX3NoaWZ0ID09IHRoaXMuX3NoaWZ0UHJldiB8fCAhbHZsLnNlZ21lbnRzLndhbGwpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB2YXIgd2FsbCA9IGx2bC5zZWdtZW50cy53YWxsO1xyXG4gICAgICAgIHZhciBzaGlmdE1pbiA9IE1hdGgubWluKHRoaXMuX3NoaWZ0LCB0aGlzLl9zaGlmdFByZXYpIC0gSHhHbG9iYWxzLldBTExfQU5HTEUgLyAzNjA7XHJcbiAgICAgICAgdmFyIHNoaWZ0TWF4ID0gTWF0aC5tYXgodGhpcy5fc2hpZnQsIHRoaXMuX3NoaWZ0UHJldikgKyBIeEdsb2JhbHMuV0FMTF9BTkdMRSAvIDM2MDtcclxuICAgICAgICB2YXIgc2hpZnRXYWxsID0gd2FsbC5wb3MgKyBsdmwuc2VnbWVudHMuc3RhdFN0YXJ0IC8gMzYwICsgKHRoaXMuX3NoaWZ0IDwgdGhpcy5fc2hpZnRQcmV2ID8gMSA6IC0xKSAqIEh4R2xvYmFscy5XQUxMX0FOR0xFIC8gMzYwO1xyXG4gICAgICAgIHZhciBkID0gc2hpZnRXYWxsIC0gc2hpZnRNaW47IGQgLT0gTWF0aC5mbG9vcihkKTtcclxuICAgICAgICBpZiAoZCA+PSBzaGlmdE1heCAtIHNoaWZ0TWluKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2hpZnQgPSBzaGlmdE1pbiArIGQ7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBfcGlja0Zsb29yKCkge1xyXG4gICAgICAgIHZhciBsdmwgPSB0aGlzLl9sZXZlbHNbMF07XHJcbiAgICAgICAgaWYgKCFsdmwpIHJldHVybiBIeEdsb2JhbHMuU0VHX0hPTEU7XHJcbiAgICAgICAgdmFyIHNlZ21lbnRzID0gbHZsLnNlZ21lbnRzO1xyXG4gICAgICAgIC8vdmFyIHNoaWZ0ID0gdGhpcy5fc2hpZnQgLSBNYXRoLmZsb29yKHRoaXMuX3NoaWZ0KTtcclxuICAgICAgICB2YXIgc3RhdFBpY2sgPSB0aGlzLl9waWNrQ2lyY2xlKHNlZ21lbnRzLnN0YXQsIC1zZWdtZW50cy5zdGF0U3RhcnQgLyAzNjAgKyB0aGlzLl9zaGlmdCk7XHJcbiAgICAgICAgdmFyIG1vdmVQaWNrID0gdGhpcy5fcGlja0NpcmNsZShzZWdtZW50cy5tb3ZlLCAtKHNlZ21lbnRzLm1vdmVTdGFydCArIGx2bC5tb3ZlQSkgLyAzNjAgKyB0aGlzLl9zaGlmdCk7XHJcbiAgICAgICAgcmV0dXJuIEh4R2xvYmFscy5jb21wYXJlU2VncyhzdGF0UGljaywgbW92ZVBpY2spID49IDAgPyBzdGF0UGljayA6IG1vdmVQaWNrO1xyXG4gICAgICAgIC8vIGlmIChzdGF0UGljayA9PSBIeEdsb2JhbHMuU0VHX0RFQVRIIHx8IG1vdmVQaWNrID09IEh4R2xvYmFscy5TRUdfREVBVEgpXHJcbiAgICAgICAgLy8gICAgIHJldHVybiBIeEdsb2JhbHMuU0VHX0RFQVRIO1xyXG4gICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgdmFyIHNlZyA9IHNlZ21lbnRzW2ldO1xyXG4gICAgICAgIC8vICAgICBpZiAoc2VnLmVuZCA+PSBzaGlmdClcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBzZWcudHlwZTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gcmV0dXJuIEh4R2xvYmFscy5TRUdfR1JPVU5EO1xyXG4gICAgfVxyXG4gICAgX3BpY2tDaXJjbGUoc2VnbWVudHMsIHNoaWZ0KSB7XHJcbiAgICAgICAgaWYgKHNlZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIHNoaWZ0ID0gc2hpZnQgLSBNYXRoLmZsb29yKHNoaWZ0KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlZyA9IHNlZ21lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlZy5lbmQgPj0gc2hpZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlZzsvLy50eXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsOy8vSHhHbG9iYWxzLlNFR19IT0xFO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZU1vdmVMZXZlbHMoKSB7XHJcbiAgICAgICAgdmFyIGx2bHMgPSB0aGlzLl9sZXZlbHM7XHJcbiAgICAgICAgdmFyIHN0YXJ0SWR4ID0gdGhpcy5fcmVzdW1lZCA/IDEgOiAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBzdGFydElkeDsgaSA8IGx2bHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGx2bCA9IGx2bHNbaV07XHJcbiAgICAgICAgICAgIGlmIChsdmwgJiYgbHZsLnNlZ21lbnRzLm1vdmUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbHZsLnNlZ21lbnRzO1xyXG4gICAgICAgICAgICAgICAgbHZsLm1vdmVBID0gcy5tb3ZlQW5nbGUgKiBNYXRoLnNpbigyICogTWF0aC5QSSAqIHMubW92ZUZyZXEgKiB0aGlzLl9lbGFwc2VkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF91cGRhdGVMZXZlbHNQb3MoKSB7XHJcbiAgICAgICAgdmFyIHMgPSB0aGlzLl9zdGF0ZTtcclxuICAgICAgICB2YXIgbHZscyA9IHRoaXMuX2xldmVscztcclxuICAgICAgICBpZiAocy50eXBlID09IFNUQVRFX0JPVU5DRSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGx2bHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChsdmxzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIGx2bHNbaV0ucG9zID0gaSAqIEhFSUdIVF9MRVZFTDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vdmFyIHYgPSBNYXRoLnNxcnQoMiAqIEFDQ0VMRVJBVElPTiAqIChIRUlHSFRfTEVWRUwgKiBzLmxldmVsICsgSEVJR0hUX0JPVU5DRSkpO1xyXG4gICAgICAgICAgICAvL3ZhciBkaXN0ID0gdiAqIHMudGltZSArIEFDQ0VMRVJBVElPTiAqIHMudGltZSAqIHMudGltZSAqIDAuNTtcclxuICAgICAgICAgICAgdmFyIHYgPSBNYXRoLnNxcnQoRkFMTF9WRUxPQ0lUWSAqIEZBTExfVkVMT0NJVFkgKyAyICogRkFMTF9BQ0NFTCAqIChzLmxldmVsIC0gMSkgKiBIRUlHSFRfTEVWRUwpO1xyXG4gICAgICAgICAgICB2YXIgZGlzdCA9IHYgKiBzLnRpbWUgKyBGQUxMX0FDQ0VMICogcy50aW1lICogcy50aW1lICogMC41O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGx2bHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChsdmxzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIGx2bHNbaV0ucG9zID0gKGkgKyAxKSAqIEhFSUdIVF9MRVZFTCAtIGRpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGx2bHNbMF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3RhbmNlID0gZGlzdCArIHRoaXMuX2Zsb29ySW5kZXggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldFJlc3VsdCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3Jlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuZXZlbnQoSGVsaXhHYW1lLkVWRU5UX1JFU1VMVCwgdmFsdWUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFJpbmdTbGljZU1lc2ggZnJvbSBcIi4vUmluZ1NsaWNlTWVzaFwiXHJcbmltcG9ydCBSaW5nU2xpY2VNZXNoUG9vbCBmcm9tIFwiLi9SaW5nU2xpY2VNZXNoUG9vbFwiXHJcbmltcG9ydCBHcmFkaWVudFBsYW5lTWVzaCBmcm9tIFwiLi9HcmFkaWVudFBsYW5lTWVzaFwiXHJcbmltcG9ydCBUcmlhbmdsZU1lc2ggZnJvbSBcIi4vVHJpYW5nbGVNZXNoXCJcclxuaW1wb3J0IE1vdXNlQ3RybCBmcm9tIFwiLi9Nb3VzZUN0cmxcIlxyXG5pbXBvcnQgSGVsaXhHYW1lIGZyb20gXCIuL0hlbGl4R2FtZVwiXHJcbmltcG9ydCBIZWxpeFZpZXcgZnJvbSBcIi4vSGVsaXhWaWV3XCJcclxuaW1wb3J0IEh4R2xvYmFscyBmcm9tIFwiLi9IeEdsb2JhbHNcIlxyXG5pbXBvcnQgU291bmRNYW4gZnJvbSBcIi4vU291bmRNYW5cIlxyXG5cclxuY29uc3QgQkFMTF9SQURJVVMgPSBIeEdsb2JhbHMuVklFV19CQUxMX1JBRElVUztcclxuY29uc3QgRkxPT1JfVEhJQ0tORVNTID0gSHhHbG9iYWxzLlZJRVdfRkxPT1JfVEhJQ0tORVNTO1xyXG5jb25zdCBTRUNUT1JfUkFESVVTID0gSHhHbG9iYWxzLlZJRVdfU0VDVE9SX1JBRElVUztcclxuY29uc3QgQ09MVU1OX1JBRElVUyA9IEh4R2xvYmFscy5WSUVXX0NPTFVNTl9SQURJVVM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxpeEdhbWVWaWV3IGV4dGVuZHMgTGF5YS5TY2VuZTNEIHtcclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfU1RBUlRFRCgpIHsgcmV0dXJuIFwiU1RBUlRFRFwiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2VuZXJhdG9yLCByZXN1bWVTdGF0ZSwgc2tpbiwgbW91c2VEaXNwYXRjaGVyLCBibG90cywgZnhzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2tpbiA9IHNraW47XHJcbiAgICAgICAgYmxvdHMuY29sb3IgPSBza2luLmJhbGxNYXQucmF3Q29sb3I7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHNjZW5lID0gdGhpcztcclxuICAgICAgICB0aGlzLl9tb3VzZURpc3BhdGNoZXIgPSBtb3VzZURpc3BhdGNoZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2FtZXJhXHJcbiAgICAgICAgdmFyIGNhbWVyYSA9IChzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5DYW1lcmEoMCwgMC4xLCAxMDApKSk7XHJcbiAgICAgICAgY2FtZXJhLnRyYW5zZm9ybS50cmFuc2xhdGUobmV3IExheWEuVmVjdG9yMyg0LCAxLjMsIDApKTtcclxuICAgICAgICBjYW1lcmEudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKC0zMCwgOTAsIDApLCB0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgY2FtZXJhLmZpZWxkT2ZWaWV3ID0gNjA7XHJcblxyXG4gICAgICAgIC8vIEdyYWRpZW50IGJhY2tcclxuICAgICAgICB2YXIgYmFjayA9IGNhbWVyYS5hZGRDaGlsZChuZXcgTGF5YS5NZXNoU3ByaXRlM0Qoc2tpbi5iYWNrTWVzaCkpO1xyXG4gICAgICAgIGJhY2subWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gc2tpbi5iYWNrTWF0O1xyXG4gICAgICAgIHZhciBiYWNrRGlzdCA9IDIwO1xyXG4gICAgICAgIGJhY2sudHJhbnNmb3JtLnRyYW5zbGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIC1iYWNrRGlzdCkpO1xyXG4gICAgICAgIGJhY2sudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgPSAxODA7XHJcbiAgICAgICAgYmFjay50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IG5ldyBMYXlhLlZlY3RvcjMoMTAwLCBiYWNrRGlzdCAqIE1hdGgudGFuKDAuNSAqIGNhbWVyYS5maWVsZE9mVmlldyAqIE1hdGguUEkgLyAxODApLCAxKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaWdodFxyXG4gICAgICAgIHZhciBkaXJlY3Rpb25MaWdodCA9IHNjZW5lLmFkZENoaWxkKG5ldyBMYXlhLkRpcmVjdGlvbkxpZ2h0KCkpO1xyXG4gICAgICAgIGRpcmVjdGlvbkxpZ2h0LmNvbG9yID0gbmV3IExheWEuVmVjdG9yMygxLCAxLCAxKTtcclxuICAgICAgICB2YXIgbGlnaHREaXIgPSBuZXcgTGF5YS5WZWN0b3IzKC0xLCAtMS41LCAwLjUpO1xyXG4gICAgICAgIExheWEuVmVjdG9yMy5ub3JtYWxpemUobGlnaHREaXIsIGxpZ2h0RGlyKTtcclxuICAgICAgICBkaXJlY3Rpb25MaWdodC50cmFuc2Zvcm0ud29ybGRNYXRyaXguc2V0Rm9yd2FyZChsaWdodERpcik7XHJcblxyXG4gICAgICAgIHRoaXMuX2JhbGwgPSB0aGlzLmFkZENoaWxkKG5ldyBMYXlhLk1lc2hTcHJpdGUzRChuZXcgTGF5YS5TcGhlcmVNZXNoKEJBTExfUkFESVVTLCAxMiwgMTYpKSk7XHJcbiAgICAgICAgdGhpcy5fYmFsbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggPSAwLjc1O1xyXG4gICAgICAgIHRoaXMuX2JhbGwubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gc2tpbi5iYWxsTWF0O1xyXG4gICAgICAgIHRoaXMuX2JvdW5jZVQgPSAxMDAwO1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbCA9IHRoaXMuYWRkQ2hpbGQobmV3IExheWEuTWVzaFNwcml0ZTNEKG5ldyBUcmlhbmdsZU1lc2goQkFMTF9SQURJVVMsIEJBTExfUkFESVVTKSkpXHJcbiAgICAgICAgdGhpcy5fYmFsbFRyYWlsLm1lc2hSZW5kZXJlci5zaGFyZWRNYXRlcmlhbCA9IHNraW4uYmFsbFRyYWlsTWF0O1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggPSAwLjc1O1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbC50cmFuc2Zvcm0ubG9jYWxTY2FsZVkgPSAwO1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbC50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyWSA9IC05MDtcclxuICAgICAgICB0aGlzLl9iYWxsTGFzdFZlbCA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuX2dlbmVyYXRvciA9IGdlbmVyYXRvcjtcclxuICAgICAgICB0aGlzLl9oZWxpeEdhbWUgPSBuZXcgSGVsaXhHYW1lKGdlbmVyYXRvciwgcmVzdW1lU3RhdGUpO1xyXG4gICAgICAgIHZhciBzY2VuZVJvb3QgPSBzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5TcHJpdGUzRCgpKTtcclxuICAgICAgICB0aGlzLl9yb3RhdGlvblJvb3QgPSBzY2VuZVJvb3QuYWRkQ2hpbGQobmV3IExheWEuU3ByaXRlM0QoKSk7XHJcbiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuX3JvdGF0aW9uUm9vdC5hZGRDaGlsZChuZXcgTGF5YS5NZXNoU3ByaXRlM0QobmV3IExheWEuQ3lsaW5kZXJNZXNoKENPTFVNTl9SQURJVVMsIDIwLCAyNCkpKTtcclxuICAgICAgICBjb2x1bW4ubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gc2tpbi5wb2xlTWF0O1xyXG4gICAgICAgIHRoaXMuX2hlbGl4VmlldyA9IHRoaXMuX3JvdGF0aW9uUm9vdC5hZGRDaGlsZChcclxuICAgICAgICAgICAgbmV3IEhlbGl4Vmlldyh0aGlzLl9oZWxpeEdhbWUsIHNjZW5lUm9vdCxcclxuICAgICAgICAgICAgICAgIG5ldyBSaW5nU2xpY2VNZXNoUG9vbChTRUNUT1JfUkFESVVTLCBDT0xVTU5fUkFESVVTLCBGTE9PUl9USElDS05FU1MpLCBza2luLCBibG90cykpO1xyXG4gICAgICAgIHRoaXMuX2hlbGl4R2FtZS5vbihIZWxpeEdhbWUuRVZFTlRfUkVTVUxULCB0aGlzLCB0aGlzLl9vblJlc3VsdCk7XHJcbiAgICAgICAgdGhpcy5faGVsaXhHYW1lLm9uKEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9SRVNVTUVELCB0aGlzLCB0aGlzLl9vblJlc3VtZSk7XHJcbiAgICAgICAgdGhpcy5faGVsaXhHYW1lLm9uKEhlbGl4R2FtZS5FVkVOVF9CQUxMX0JPVU5DRSwgdGhpcywgdGhpcy5fb25CYWxsQm91bmNlKTtcclxuICAgICAgICB0aGlzLl9oZWxpeEdhbWUub24oSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1BBU1NFRCwgdGhpcywgZnVuY3Rpb24obHZsKSB7IFNvdW5kTWFuLnBsYXlCcmVhayhsdmwgLSAxKTsgfSk7XHJcbiAgICAgICAgdGhpcy5faGVsaXhHYW1lLm9uKEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9CUk9LRU4sIHRoaXMsIGZ1bmN0aW9uKCkgeyBTb3VuZE1hbi5wbGF5Q3JhY2soKTsgfSk7XHJcbiAgICAgICAgdGhpcy5faGVsaXhHYW1lLnN0YXJ0KCk7XHJcbiAgICAgICAgaWYgKCFyZXN1bWVTdGF0ZSlcclxuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTW91c2UoKTtcclxuICAgICAgICB0aGlzLl9zZXRTaGlmdCh0aGlzLl9nZXRTaGlmdCgpKTtcclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCB0aGlzLl9vbkZyYW1lKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5pdEZ4cyhmeHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoZWxpeEdhbWUoKSB7IHJldHVybiB0aGlzLl9oZWxpeEdhbWU7IH1cclxuXHJcbiAgICBkZXN0cm95KGRlc3Ryb3lDaGlsZHJlbikge1xyXG4gICAgICAgIHRoaXMuZnhUcmFpbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fbW91c2VDdHJsKVxyXG4gICAgICAgICAgICB0aGlzLl9tb3VzZUN0cmwuZGVzdHJveSgpO1xyXG4gICAgICAgIExheWEudGltZXIuY2xlYXIodGhpcywgdGhpcy5fb25GcmFtZSk7XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZnhCb3VuY2UoKSB7IHJldHVybiB0aGlzLl9meHNbSHhHbG9iYWxzLkZYX05BTUVfQk9VTkNFXTsgfVxyXG4gICAgZ2V0IGZ4RmFpbCgpIHsgcmV0dXJuIHRoaXMuX2Z4c1tIeEdsb2JhbHMuRlhfTkFNRV9GQUlMXTsgfVxyXG4gICAgZ2V0IGZ4VHJhaWwoKSB7IHJldHVybiB0aGlzLl9meHNbSHhHbG9iYWxzLkZYX05BTUVfVFJBSUxdOyB9XHJcbiAgICBnZXQgZnhCYWNrZ3JvdW5kKCkgeyByZXR1cm4gdGhpcy5fZnhzW0h4R2xvYmFscy5GWF9OQU1FX0JBQ0tHUk9VTkRdOyB9XHJcblxyXG4gICAgX29uUmVzdWx0KHJlc3VsdCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlbGl4R2FtZS5maW5pc2hlZClcclxuICAgICAgICAgICB0aGlzLl9tb3VzZUN0cmwuZGVzdHJveSgpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9MT09TRSkge1xyXG4gICAgICAgICAgICB0aGlzLmZ4RmFpbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgPSB0aGlzLl9iYWxsLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWTtcclxuICAgICAgICAgICAgdGhpcy5meEZhaWwucGFydGljbGVTeXN0ZW0ucGxheSgpO1xyXG4gICAgICAgICAgICBTb3VuZE1hbi5wbGF5RGVhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0U2hpZnQodGhpcy5fZ2V0U2hpZnQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29uUmVzdW1lKCkge1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZU1vdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFNoaWZ0KCkgeyByZXR1cm4gLXRoaXMuX2hlbGl4R2FtZS5zaGlmdDsgfVxyXG4gICAgX3NldFNoaWZ0KHNoaWZ0KSB7XHJcbiAgICAgICAgdGhpcy5faGVsaXhHYW1lLnNoaWZ0ID0gLXNoaWZ0O1xyXG4gICAgICAgIHZhciByID0gdGhpcy5fcm90YXRpb25Sb290LnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXI7XHJcbiAgICAgICAgci55ID0gMzYwICogc2hpZnQ7XHJcbiAgICAgICAgdGhpcy5fcm90YXRpb25Sb290LnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSByO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5faGVsaXhHYW1lLnNoaWZ0KTtcclxuICAgIH1cclxuICAgIF9jcmVhdGVNb3VzZSgpIHtcclxuICAgICAgICB0aGlzLl9tb3VzZUN0cmwgPSBuZXcgTW91c2VDdHJsKHRoaXMuX21vdXNlRGlzcGF0Y2hlciwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRTaGlmdCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSwgZnVuY3Rpb24oY3R4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrU3RhcnRlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRTaGlmdChjdHguc3RhcnRWYWx1ZSArIGN0eC5kZWx0YVggKiBIeEdsb2JhbHMuSU5QVVRfUk9UQVRFX1NFTlNJVElWSVRZKTtcclxuICAgICAgICAgICAgdGhpcy5faGVsaXhWaWV3Lm1hcmtNb3ZlZCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBfY2hlY2tTdGFydGVkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fc3RhcnRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChIZWxpeEdhbWVWaWV3LkVWRU5UX1NUQVJURUQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaW5pdEZ4cyhmeHMpIHtcclxuICAgICAgICB0aGlzLl9meHMgPSBmeHM7XHJcbiAgICAgICAgY29uc3QgRlhfU0NBTEUgPSAwLjE7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBmeHMpIHtcclxuICAgICAgICAgICAgZnhzW25hbWVdLnRyYW5zZm9ybS5sb2NhbFNjYWxlID0gbmV3IExheWEuVmVjdG9yMyhGWF9TQ0FMRSwgRlhfU0NBTEUsIEZYX1NDQUxFKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVuZGVyQmFsbFBvcyA9IG5ldyBMYXlhLlZlY3RvcjMoSHhHbG9iYWxzLlZJRVdfQkFMTF9YUE9TLCBGTE9PUl9USElDS05FU1MgKiAwLjUgKyBIeEdsb2JhbHMuVklFV19CTE9UX1lPRkZTRVQgKiAyLCAwKTtcclxuICAgICAgICB0aGlzLmZ4Qm91bmNlLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gdW5kZXJCYWxsUG9zO1xyXG4gICAgICAgIHRoaXMuZnhCb3VuY2UucGFydGljbGVTeXN0ZW0uc3RhcnRDb2xvckNvbnN0YW50ID0gdGhpcy5fc2tpbi5iYWxsTWF0LnJhd0NvbG9yO1xyXG4gICAgICAgIHRoaXMuZnhGYWlsLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gdW5kZXJCYWxsUG9zO1xyXG4gICAgICAgIHRoaXMuZnhUcmFpbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IG5ldyBMYXlhLlZlY3RvcjMoSHhHbG9iYWxzLlZJRVdfQkFMTF9YUE9TLCAoRkxPT1JfVEhJQ0tORVNTICsgQkFMTF9SQURJVVMpICogMC41LCAwKTs7XHJcbiAgICAgICAgdGhpcy5meFRyYWlsLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZnhCYWNrZ3JvdW5kLnZpc3VhbEhlaWdodCA9ICh0aGlzLl9nZW5lcmF0b3IuY291bnRUb3RhbCArIDQpICogSHhHbG9iYWxzLlZJRVdfTEVWRUxfSEVJR0hUO1xyXG4gICAgICAgIHRoaXMuZnhCYWNrZ3JvdW5kLnBhcnRpY2xlU3lzdGVtLnNoYXBlLnogPSB0aGlzLmZ4QmFja2dyb3VuZC52aXN1YWxIZWlnaHQgLyBGWF9TQ0FMRTtcclxuICAgICAgICB0aGlzLmZ4QmFja2dyb3VuZC5wYXJ0aWNsZVN5c3RlbS5lbWlzc2lvbi5lbWlzc2lvblJhdGUgPSAzICogKHRoaXMuZnhCYWNrZ3JvdW5kLnZpc3VhbEhlaWdodCAvIDIyKTtcclxuICAgICAgICB0aGlzLmZ4QmFja2dyb3VuZC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblggPSAtMy41O1xyXG4gICAgICAgIHRoaXMuZnhCYWNrZ3JvdW5kLnN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfb25CYWxsQm91bmNlKGluZm8pIHtcclxuICAgICAgICB0aGlzLl9ib3VuY2VUID0gMDtcclxuICAgICAgICB0aGlzLmZ4Qm91bmNlLnBhcnRpY2xlU3lzdGVtLnBsYXkoKTtcclxuICAgICAgICAvL2lmICghaW5mby5icm9rZW4pXHJcbiAgICAgICAgICAgIFNvdW5kTWFuLnBsYXlKdW1wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRnJhbWUoKSB7XHJcbiAgICAgICAgdmFyIGh4ZyA9IHRoaXMuX2hlbGl4R2FtZTtcclxuICAgICAgICB2YXIgZHQgPSBMYXlhLnRpbWVyLmRlbHRhICogMC4wMDE7XHJcbiAgICAgICAgaHhnLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgdGhpcy5fYmFsbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgPVxyXG4gICAgICAgICAgICBoeGcuYmFsbFBvcyAqIEh4R2xvYmFscy5WSUVXX0JPVU5DRV9IRUlHSFRfU0NBTEUgKyAoQkFMTF9SQURJVVMgKyBGTE9PUl9USElDS05FU1MgKiAwLjUpO1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbC50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgPSB0aGlzLl9iYWxsLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWTtcclxuICAgICAgICB0aGlzLl9iYWxsTGFzdFZlbCA9IE1hdGgubWF4KC0zLCBoeGcuYmFsbFZlbCkgKiAwLjMgKyB0aGlzLl9iYWxsTGFzdFZlbCAqIDAuNztcclxuICAgICAgICB0aGlzLl9iYWxsVHJhaWwudHJhbnNmb3JtLmxvY2FsU2NhbGVZID0gLXRoaXMuX2JhbGxMYXN0VmVsICogMy41O1xyXG4gICAgICAgIHZhciBoZWF0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oLShoeGcuYmFsbFZlbCArIDIpLCAxKSk7XHJcbiAgICAgICAgdGhpcy5fc2tpbi5oZWF0ID0gaGVhdDtcclxuICAgICAgICBpZiAoaGVhdCA+IDAgfHwgdGhpcy5meFRyYWlsLnBhcnRpY2xlU3lzdGVtLnN0YXJ0Q29sb3JDb25zdGFudC53ID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZnhUcmFpbC5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnhUcmFpbC5wYXJ0aWNsZVN5c3RlbS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZ4VHJhaWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZ4VHJhaWwucGFydGljbGVTeXN0ZW0uc3RhcnRDb2xvckNvbnN0YW50ID0gdGhpcy5fc2tpbi5iYWxsVHJhaWxDb2xvci5jbG9uZSgpO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmZ4VHJhaWwuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQm91bmNlXHJcbiAgICAgICAgaWYgKCFoeGcuZmluaXNoZWQpXHJcbiAgICAgICAgICAgIHRoaXMuX2JvdW5jZVQgKz0gZHQ7XHJcbiAgICAgICAgdmFyIHMgPSBoeGcucmVzdWx0ID09IEhlbGl4R2FtZS5SRVNVTFRfV0lOID8gMCA6IDAuMiAqIE1hdGguZXhwKC0zICogdGhpcy5fYm91bmNlVCkgKiBNYXRoLmNvcygyMCAqIHRoaXMuX2JvdW5jZVQpO1xyXG4gICAgICAgIHRoaXMuX2JhbGwudHJhbnNmb3JtLmxvY2FsU2NhbGUgPSBuZXcgTGF5YS5WZWN0b3IzKDEgKyBzLCAxIC0gcywgMSArIHMpO1xyXG4gICAgICAgIHRoaXMuZnhCYWNrZ3JvdW5kLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSA9IHRoaXMuaGVsaXhHYW1lLmRpc3RhbmNlICogSHhHbG9iYWxzLlZJRVdfTEVWRUxfSEVJR0hUIC0gdGhpcy5meEJhY2tncm91bmQudmlzdWFsSGVpZ2h0ICogMC41O1xyXG4gICAgICAgIGlmICghdGhpcy5meEJhY2tncm91bmQuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZ4QmFja2dyb3VuZC5zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5meEJhY2tncm91bmQucGFydGljbGVTeXN0ZW0ucGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLmZ4QmFja2dyb3VuZC5wYXJ0aWNsZVN5c3RlbS5fdXBkYXRlUGFydGljbGVzKDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbGl4R2VuZXJhdG9yQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gPj4+IFRvIG92ZXJyaWRlXHJcbiAgICBnZXQgY291bnRUb3RhbCgpIHsgcmV0dXJuIDA7IH1cclxuICAgIGdldCBjb3VudExlZnQoKSB7IHJldHVybiAwOyB9XHJcbiAgICBuZXh0KCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gPDw8IFRvIG92ZXJyaWRlXHJcblxyXG4gICAgc3RhdGljIHJuZEludChtYXgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuQXJyYXkoY291bnQsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IEFycmF5KGNvdW50KSwoKT0+dmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzaHVmZmxlKGFycikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gaSArIEhlbGl4R2VuZXJhdG9yQmFzZS5ybmRJbnQoYXJyLmxlbmd0aCAtIGkpO1xyXG4gICAgICAgICAgICB2YXIgYnVmID0gYXJyW2ldOyBhcnJbaV0gPSBhcnJbaWR4XTsgYXJyW2lkeF0gPSBidWY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdyb3VwUmVwZWF0cyhhcnIpIHtcclxuICAgICAgICB2YXIgcmVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gYXJyW2ldO1xyXG4gICAgICAgICAgICB2YXIgY250ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKGkgKyBjbnQgPCBhcnIubGVuZ3RoICYmIGFycltpICsgY250XSA9PSB2YWwpXHJcbiAgICAgICAgICAgICAgICBjbnQrKztcclxuICAgICAgICAgICAgcmVzLnB1c2goe3ZhbHVlOnZhbCxjb3VudDpjbnR9KTsgICAgICBcclxuICAgICAgICAgICAgaSArPSBjbnQ7ICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcm90YXRlQ2lyY2xlKGNpcmNsZSwgYW5nbGUpIHtcclxuICAgICAgICB2YXIgc3BsaXQgPSBhbmdsZSAvIDM2MDtcclxuICAgICAgICBzcGxpdCAtPSBNYXRoLmZsb29yKHNwbGl0KTtcclxuICAgICAgICB2YXIgZXBzaWxvbiA9IDIvMzYwO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhzcGxpdCkgPCBlcHNpbG9uIHx8IE1hdGguYWJzKHNwbGl0IC0gMSkgPCBlcHNpbG9uKVxyXG4gICAgICAgICAgICByZXR1cm4gY2lyY2xlO1xyXG4gICAgICAgIHZhciBpZHggPSAwO1xyXG4gICAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgY2lyY2xlLmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBjaXJjbGVbaWR4XTtcclxuICAgICAgICAgICAgaWYgKHMuZW5kIC0gZXBzaWxvbiA+IHNwbGl0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoc3BsaXQgLSBzLnN0YXJ0KSA+PSBlcHNpbG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZV9zID0gT2JqZWN0LmFzc2lnbih7fSwgcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlX3MuZW5kID0gcy5zdGFydCA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNpcmNsZS5zcGxpY2UoaWR4LCBudWxsLCBwcmVfcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWR4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJlX3NsaWNlID0gY2lyY2xlLnNwbGljZSgwLCBpZHgpO1xyXG4gICAgICAgIGNpcmNsZS5wdXNoLmFwcGx5KGNpcmNsZSwgcHJlX3NsaWNlKTtcclxuICAgICAgICB2YXIgc3RhcnQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2lyY2xlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gY2lyY2xlW2ldO1xyXG4gICAgICAgICAgICBzLmVuZCA9IHN0YXJ0ICsgKHMuZW5kIC0gcy5zdGFydCk7XHJcbiAgICAgICAgICAgIHMuc3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgc3RhcnQgPSBzLmVuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNpcmNsZTtcclxuICAgIH1cclxufSIsImltcG9ydCBIZWxpeEdlbmVyYXRvckJhc2UgZnJvbSBcIi4vSGVsaXhHZW5lcmF0b3JCYXNlXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbGl4R2VuZXJhdG9yQ29uZmlnRmxvb3JzIGV4dGVuZHMgSGVsaXhHZW5lcmF0b3JCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGZsb29ycywgbW92ZUZyZXEpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2Zsb29ycyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gZmxvb3JzKSB7XHJcbiAgICAgICAgICAgIHZhciBmbG9vciA9IGZsb29yc1tpXTtcclxuICAgICAgICAgICAgdmFyIG91dEZsb29yID0ge1xyXG4gICAgICAgICAgICAgICAgc3RhdDogdGhpcy5fY29udmVydFNlY3RvcnMoZmxvb3Iuc3RhdCksXHJcbiAgICAgICAgICAgICAgICBzdGF0U3RhcnQ6IGZsb29yLnN0YXRTdGFydCxcclxuICAgICAgICAgICAgICAgIG1vdmU6IHRoaXMuX2NvbnZlcnRTZWN0b3JzKGZsb29yLm1vdmUpLFxyXG4gICAgICAgICAgICAgICAgbW92ZVN0YXJ0OiBmbG9vci5tb3ZlU3RhcnQsXHJcbiAgICAgICAgICAgICAgICBtb3ZlQW5nbGU6IGZsb29yLm1vdmVBbmdsZSAqIDAuNSxcclxuICAgICAgICAgICAgICAgIG1vdmVGcmVxOiBtb3ZlRnJlcSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKGZsb29yLndhbGwpXHJcbiAgICAgICAgICAgICAgICBvdXRGbG9vci53YWxsID0geyBwb3M6IGZsb29yLndhbGwuYW5nbGUgLyAzNjAgfTsvL3sgcG9zOiAoZmxvb3Iud2FsbC5zdGFydCArIE1hdGgucmFuZG9tKCkgKiBmbG9vci53YWxsLnNpemUpIC8gMzYwIH07XHJcbiAgICAgICAgICAgIHRoaXMuX2Zsb29ycy5wdXNoKG91dEZsb29yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY291bnRUb3RhbCA9IHRoaXMuX2Zsb29ycy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvdW50VG90YWwoKSB7IHJldHVybiB0aGlzLl9jb3VudFRvdGFsOyB9XHJcbiAgICBnZXQgY291bnRMZWZ0KCkgeyByZXR1cm4gdGhpcy5fZmxvb3JzLmxlbmd0aDsgfVxyXG4gICAgbmV4dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmxvb3JzLnNwbGljZSgwLCAxKVswXTtcclxuICAgIH1cclxuXHJcbiAgICBfY29udmVydFNlY3RvcnMoc2VjdG9ycykge1xyXG4gICAgICAgIHZhciByZXMgPSBbXTtcclxuICAgICAgICB2YXIgZmFjdG9yID0gMSAvIDM2MDtcclxuICAgICAgICBmb3IgKHZhciBpIGluIHNlY3RvcnMpIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBzZWN0b3JzW2ldO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBzLnN0YXJ0ICogZmFjdG9yO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHMuc2l6ZSAqIGZhY3RvcjtcclxuICAgICAgICAgICAgaWYgKHNpemUgPD0gMC41KVxyXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goeyB0eXBlOiBzLnR5cGUsIHN0YXJ0OiBzdGFydCwgZW5kOiBzdGFydCArIHNpemUgfSk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goeyB0eXBlOiBzLnR5cGUsIHN0YXJ0OiBzdGFydCwgZW5kOiBzdGFydCArIHNpemUgKiAwLjUgfSk7XHJcbiAgICAgICAgICAgICAgICByZXMucHVzaCh7IHR5cGU6IHMudHlwZSwgc3RhcnQ6IHN0YXJ0ICsgc2l6ZSAqIDAuNSwgZW5kOiBzdGFydCArIHNpemUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxufSIsImltcG9ydCBIZWxpeEdlbmVyYXRvckJhc2UgZnJvbSBcIi4vSGVsaXhHZW5lcmF0b3JCYXNlXCI7XHJcbmltcG9ydCBIeEdsb2JhbHMgZnJvbSBcIi4vSHhHbG9iYWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxpeEdlbmVyYXRvckluZmluaXRSYW5kb20gZXh0ZW5kcyBIZWxpeEdlbmVyYXRvckJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoZ3JvdW5kQywgZGVhdGhDLCBob2xlQywgY291bnQgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9ncm91bmRDID0gZ3JvdW5kQztcclxuICAgICAgICB0aGlzLl9kZWF0aEMgPSBkZWF0aEM7XHJcbiAgICAgICAgdGhpcy5faG9sZUMgPSBob2xlQztcclxuICAgICAgICB0aGlzLl9jb3VudCA9IGNvdW50ID8geyB0b3RhbDpjb3VudCwgbGVmdDogY291bnQgfSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQgY291bnRUb3RhbCgpIHsgcmV0dXJuIHRoaXMuX2NvdW50ID8gdGhpcy5fY291bnQudG90YWwgOiAxMDAwMDsgfVxyXG4gICAgZ2V0IGNvdW50TGVmdCgpIHsgcmV0dXJuIHRoaXMuX2NvdW50ID8gdGhpcy5fY291bnQubGVmdCA6IDEwMDAwOyB9XHJcbiAgICBuZXh0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb3VudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY291bnQubGVmdCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvdW50LmxlZnQtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZsb29yID0ge307XHJcbiAgICAgICAgdmFyIGFyclN0YXQgPSBIZWxpeEdlbmVyYXRvckJhc2UuZ2VuQXJyYXkodGhpcy5fZ3JvdW5kQywgSHhHbG9iYWxzLlNFR19HUk9VTkQpLmNvbmNhdChcclxuICAgICAgICAgICAgSGVsaXhHZW5lcmF0b3JCYXNlLmdlbkFycmF5KHRoaXMuX2RlYXRoQywgSHhHbG9iYWxzLlNFR19ERUFUSCkuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgSGVsaXhHZW5lcmF0b3JCYXNlLmdlbkFycmF5KHRoaXMuX2hvbGVDLCBIeEdsb2JhbHMuU0VHX0hPTEUpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICAgIGZsb29yLnN0YXQgPSB0aGlzLl9nZW5lcmF0ZUNpcmNsZShhcnJTdGF0KTtcclxuICAgICAgICBmbG9vci5zdGF0U3RhcnQgPSAwOy8vOTA7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvdW50LnRvdGFsID4gdGhpcy5fY291bnQubGVmdCArIDEpIHtcclxuICAgICAgICAgICAgdmFyIGFyck1vdmUgPSBIZWxpeEdlbmVyYXRvckJhc2UuZ2VuQXJyYXkodGhpcy5fZGVhdGhDLCBIeEdsb2JhbHMuU0VHX0RFQVRIKS5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICBIZWxpeEdlbmVyYXRvckJhc2UuZ2VuQXJyYXkodGhpcy5fZ3JvdW5kQyArIHRoaXMuX2hvbGVDLCBIeEdsb2JhbHMuU0VHX0hPTEUpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGZsb29yLm1vdmUgPSB0aGlzLl9nZW5lcmF0ZUNpcmNsZShhcnJNb3ZlKTtcclxuICAgICAgICAgICAgZmxvb3IubW92ZVN0YXJ0ID0gMDsgLy85MDtcclxuICAgICAgICAgICAgZmxvb3IubW92ZUZyZXEgPSAwLjI1O1xyXG4gICAgICAgICAgICBmbG9vci5tb3ZlQW5nbGUgPSAzMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZsb29yO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZW5lcmF0ZUNpcmNsZShhcnIpIHtcclxuICAgICAgICBIZWxpeEdlbmVyYXRvckJhc2Uuc2h1ZmZsZShhcnIpO1xyXG4gICAgICAgIHZhciBncm91cHMgPSBIZWxpeEdlbmVyYXRvckJhc2UuZ3JvdXBSZXBlYXRzKGFycik7XHJcbiAgICAgICAgdmFyIHJlZHVjZXIgPSBmdW5jdGlvbihhY2MsIHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgbGVuID0gdmFsLmNvdW50IC8gYWNjLnNlY3RvcnM7XHJcbiAgICAgICAgICAgIHZhciBuZXdWYWwgPSB7IHR5cGU6dmFsLnZhbHVlLCBzdGFydDphY2MuZW5kLCBlbmQ6IGFjYy5lbmQgKyBsZW4gfTtcclxuICAgICAgICAgICAgYWNjLmVuZCA9IG5ld1ZhbC5lbmQ7XHJcbiAgICAgICAgICAgIGFjYy5yZXMucHVzaChuZXdWYWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHJlcyA9IGdyb3Vwcy5yZWR1Y2UocmVkdWNlciwgeyBzZWN0b3JzOmFyci5sZW5ndGgsIGVuZDowLCByZXM6W10gfSkucmVzO1xyXG4gICAgICAgIC8vcmVzID0gSGVsaXhHZW5lcmF0b3JCYXNlLnJvdGF0ZUNpcmNsZShyZXMsIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSAqIDM2KTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgR3JhZGllbnRQbGFuZU1lc2ggZnJvbSBcIi4vR3JhZGllbnRQbGFuZU1lc2hcIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5cclxuY29uc3QgSEVBVF9DT0xPUiA9IFV0aWxzLnRvQ29sb3IoJ2ZmMjAyMCcpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVsaXhTa2luIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvbGUsIGJhbGwsIGdyb3VuZCwgdHJhcCwgYmFja1RvcCwgYmFja0JvdHRvbSkge1xyXG4gICAgICAgIHRoaXMucG9sZU1hdCA9IHRoaXMuX2NyZWF0ZU1hdGVyaWFsKHBvbGUpO1xyXG4gICAgICAgIHRoaXMuX2hlYXQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2JhbGxUcmFpbENvbG9yID0gbmV3IExheWEuVmVjdG9yNCgxLCAxLCAxLCAwLjUpO1xyXG4gICAgICAgIHRoaXMuYmFsbE1hdCA9IHRoaXMuX2NyZWF0ZU1hdGVyaWFsKGJhbGwsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuYmFsbFRyYWlsTWF0ID0gdGhpcy5fY3JlYXRlVHJhaWxNYXRlcmlhbChiYWxsKTtcclxuICAgICAgICB0aGlzLmdyb3VuZE1hdCA9IHRoaXMuX2NyZWF0ZU1hdGVyaWFsKGdyb3VuZCk7XHJcbiAgICAgICAgdGhpcy50cmFwTWF0ID0gdGhpcy5fY3JlYXRlTWF0ZXJpYWwodHJhcCk7XHJcbiAgICAgICAgdGhpcy5jcmFzaE1hdCA9IHRoaXMuYmFsbE1hdDtcclxuICAgICAgICB0aGlzLmJhY2tNYXQgPSB0aGlzLl9jcmVhdGVCYWNrTWF0ZXJpYWwoKTtcclxuICAgICAgICB0aGlzLmJhY2tNZXNoID0gbmV3IEdyYWRpZW50UGxhbmVNZXNoKGJhY2tUb3AsIGJhY2tCb3R0b20pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoZWF0Q29sb3IoKSB7IHJldHVybiBIRUFUX0NPTE9SOyB9XHJcblxyXG4gICAgZ2V0IGhlYXQoKSB7IHJldHVybiB0aGlzLl9oZWF0OyB9XHJcbiAgICBzZXQgaGVhdCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2hlYXQgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmJhbGxNYXQuc2V0SGVhdCh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsVHJhaWxNYXQuc2V0SGVhdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYmFsbFRyYWlsQ29sb3IoKSB7IHJldHVybiB0aGlzLl9iYWxsVHJhaWxDb2xvcjsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgYWxsKCkge1xyXG4gICAgICAgIGlmICghSGVsaXhTa2luLl9hbGwpIHtcclxuICAgICAgICAgICAgSGVsaXhTa2luLl9hbGwgPSBbXHJcbiAgICAgICAgICAgICAgICBuZXcgSGVsaXhTa2luKCdmZWVlZDcnLCAnZmIzYzdkJywgJzdlMDU0OCcsICdmZjVlM2EnLCAnZjFlZWM4JywgJ2NjMDAzMycpLFxyXG4gICAgICAgICAgICAgICAgbmV3IEhlbGl4U2tpbignYTNmYWEzJywgJ2U0NDNmZicsICdlNzZmNTEnLCAnZmZmMjAwJywgJ2FjZmNmOCcsICcwYWQ5ZmYnKSxcclxuICAgICAgICAgICAgICAgIC8vbmV3IEhlbGl4U2tpbignZjNmZmNjJywgJ2UyMjc2YycsICcwQUQzRkYnLCAnMEFEM0ZGJywgJ0EyRkFBMycsICc1NUQ2NTcnKSxcclxuICAgICAgICAgICAgICAgIG5ldyBIZWxpeFNraW4oJ0Q1RTRFNScsICc3RUZGMUMnLCAnNjk4OTFFJywgJ0YxNTAyNScsICdFRkJERUInLCAnQTA2MTlCJyksXHJcbiAgICAgICAgICAgICAgICBuZXcgSGVsaXhTa2luKCdGN0YyRjInLCAnRDFEMTM4JywgJzY5ODkxRScsICdGRkZGMzUnLCAnRkM3RTdFJywgJ0I3MzUzNScpLFxyXG4gICAgICAgICAgICAgICAgbmV3IEhlbGl4U2tpbignRDdGOUYxJywgJ0ZGOUYxQycsICdDOTcyNUMnLCAnRkNGQzIwJywgJ0M3REJEMicsICc4NDlCOTEnKSxcclxuICAgICAgICAgICAgICAgIG5ldyBIZWxpeFNraW4oJzkwRkNGOScsICdFQzBCNDMnLCAnNzM4RTVCJywgJ0ExRjQ1OCcsICdGRkQxRTEnLCAnRDg0NzdBJyksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBIZWxpeFNraW4uX2FsbDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRMZXZlbChsZXZlbCkge1xyXG4gICAgICAgIHZhciBpZHggPSAobGV2ZWwgLSAxKSAlIEhlbGl4U2tpbi5hbGwubGVuZ3RoO1xyXG4gICAgICAgIHJldHVybiBIZWxpeFNraW4uYWxsW2lkeF07XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZU1hdGVyaWFsKHJhd0NvbG9yLCBoZWF0YWJsZSkge1xyXG4gICAgICAgIGNvbnN0IGVtaXNzaW9uID0gMC4zO1xyXG4gICAgICAgIGNvbnN0IGFsYmVkbyA9IDAuODtcclxuICAgICAgICBjb25zdCBzbW9vdGhuZXNzID0gMC4yO1xyXG4gICAgICAgIHZhciBjID0gVXRpbHMudG9Db2xvcihyYXdDb2xvcik7XHJcbiAgICAgICAgdmFyIG1hdCA9IG5ldyBMYXlhLlBCUlN0YW5kYXJkTWF0ZXJpYWwoKTtcclxuICAgICAgICBtYXQucmF3Q29sb3IgPSBjO1xyXG4gICAgICAgIG1hdC5lbmFibGVFbWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgbWF0LmVtaXNzaW9uQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KGMuciAqIGVtaXNzaW9uLCBjLmcgKiBlbWlzc2lvbiwgYy5iICogZW1pc3Npb24sIDEpO1xyXG4gICAgICAgIG1hdC5hbGJlZG9Db2xvciA9IG5ldyBMYXlhLlZlY3RvcjQoYy5yICogYWxiZWRvLCBjLmcgKiBhbGJlZG8sIGMuYiAqIGFsYmVkbywgMSk7XHJcbiAgICAgICAgbWF0LnNtb290aG5lc3MgPSBzbW9vdGhuZXNzO1xyXG4gICAgICAgIG1hdC5tZXRhbGxpYyA9IDA7XHJcbiAgICAgICAgaWYgKGhlYXRhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBiYWxsVHJhaWxDb2xvciA9IHRoaXMuX2JhbGxUcmFpbENvbG9yO1xyXG4gICAgICAgICAgICBtYXQuc2V0SGVhdCA9IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0X2ludiA9IDEgLSB0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBIRUFUX0NPTE9SLnIgKiB0ICsgYy5yICogdF9pbnYsIGcgPSBIRUFUX0NPTE9SLmcgKiB0ICsgYy5nICogdF9pbnYsIGIgPSBIRUFUX0NPTE9SLmIgKiB0ICsgYy5iICogdF9pbnY7XHJcbiAgICAgICAgICAgICAgICBtYXQuZW1pc3Npb25Db2xvci54ID0gciAqIGVtaXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgbWF0LmVtaXNzaW9uQ29sb3IueSA9IGcgKiBlbWlzc2lvbjtcclxuICAgICAgICAgICAgICAgIG1hdC5lbWlzc2lvbkNvbG9yLnogPSBiICogZW1pc3Npb247XHJcbiAgICAgICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IueCA9IHIgKiBhbGJlZG87XHJcbiAgICAgICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IueSA9IGcgKiBhbGJlZG87XHJcbiAgICAgICAgICAgICAgICBtYXQuYWxiZWRvQ29sb3IueiA9IGIgKiBhbGJlZG87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdDtcclxuICAgIH1cclxuICAgIF9jcmVhdGVCYWNrTWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgdmFyIG1hdCA9IG5ldyBMYXlhLkVmZmVjdE1hdGVyaWFsKCk7XHJcbiAgICAgICAgbWF0LmNvbG9yID0gbmV3IExheWEuVmVjdG9yNCgwLjUsIDAuNSwgMC41LCAxKTtcclxuICAgICAgICByZXR1cm4gbWF0O1xyXG4gICAgfVxyXG4gICAgX2NyZWF0ZVRyYWlsTWF0ZXJpYWwocmF3Q29sb3IpIHtcclxuICAgICAgICB2YXIgYyA9IFV0aWxzLnRvQ29sb3IocmF3Q29sb3IpO1xyXG4gICAgICAgIHZhciBtYXQgPSBuZXcgTGF5YS5FZmZlY3RNYXRlcmlhbCgpO1xyXG4gICAgICAgIG1hdC5yZW5kZXJNb2RlID0gTGF5YS5FZmZlY3RNYXRlcmlhbC5SRU5ERVJNT0RFX0FMUEhBQkxFTkRFRDtcclxuICAgICAgICB2YXIgSSA9IDAuNTtcclxuICAgICAgICBtYXQuY29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KGMuciAqIEksIGMuZyAqIEksIGMuYiAqIEksIDAuMjUpO1xyXG4gICAgICAgIG1hdC5zZXRIZWF0ID0gZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICB2YXIgdF9pbnYgPSAxIC0gdDtcclxuICAgICAgICAgICAgbWF0LmNvbG9yLnggPSAoSEVBVF9DT0xPUi5yICogdCArIGMuciAqIHRfaW52KSAqIEk7XHJcbiAgICAgICAgICAgIG1hdC5jb2xvci55ID0gKEhFQVRfQ09MT1IuZyAqIHQgKyBjLmcgKiB0X2ludikgKiBJO1xyXG4gICAgICAgICAgICBtYXQuY29sb3IueiA9IChIRUFUX0NPTE9SLmIgKiB0ICsgYy5iICogdF9pbnYpICogSTtcclxuICAgICAgICAgICAgdGhpcy5iYWxsVHJhaWxDb2xvci54ID0gSEVBVF9DT0xPUi5yO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGxUcmFpbENvbG9yLnkgPSBIRUFUX0NPTE9SLmc7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsbFRyYWlsQ29sb3IueiA9IEhFQVRfQ09MT1IuYjtcclxuICAgICAgICAgICAgdGhpcy5iYWxsVHJhaWxDb2xvci53ID0gdCAqIDAuNTtcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIG1hdDtcclxuICAgIH1cclxufSIsImltcG9ydCBIZWxpeEdhbWUgZnJvbSBcIi4vSGVsaXhHYW1lXCI7XHJcbmltcG9ydCBSaW5nU2xpY2VNZXNoIGZyb20gXCIuL1JpbmdTbGljZU1lc2hcIjtcclxuaW1wb3J0IFJpbmdTbGljZU1lc2hQb29sIGZyb20gXCIuL1JpbmdTbGljZU1lc2hQb29sXCI7XHJcbmltcG9ydCBVdGlscyBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgSHhHbG9iYWxzIGZyb20gXCIuL0h4R2xvYmFsc1wiO1xyXG5cclxuY29uc3QgTEVWRUxfSEVJR0hUID0gSHhHbG9iYWxzLlZJRVdfTEVWRUxfSEVJR0hUO1xyXG5jb25zdCBERUJSSVNfQUNDRUxFUkFUSU9OID0gSHhHbG9iYWxzLkRFQlJJU19BQ0NFTEVSQVRJT047XHJcbmNvbnN0IERFQlJJU19WRUxPQ0lUWSA9IEh4R2xvYmFscy5ERUJSSVNfVkVMT0NJVFk7XHJcbmNvbnN0IERFQlJJU19GQUxMX0RVUkFUSU9OID0gSHhHbG9iYWxzLkRFQlJJU19GQUxMX0RVUkFUSU9OO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVsaXhWaWV3IGV4dGVuZHMgTGF5YS5TcHJpdGUzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcihoZWxpeCwgcGllY2VzV29ybGQsIG1lc2hQb29sLCBza2luLCBibG90cykge1xyXG4gICAgICAgIHN1cGVyKFwiSGVsaXhWaWV3XCIpO1xyXG4gICAgICAgIHRoaXMuX2hlbGl4ID0gaGVsaXg7XHJcbiAgICAgICAgdGhpcy5fcGllY2VzV29ybGQgPSBwaWVjZXNXb3JsZDtcclxuICAgICAgICB0aGlzLl9sZXZlbHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9tZXNoUG9vbCA9IG1lc2hQb29sO1xyXG4gICAgICAgIHRoaXMuX3NraW4gPSBza2luO1xyXG4gICAgICAgIHRoaXMuX2Jsb3RzID0gYmxvdHM7XHJcbiAgICAgICAgaGVsaXgub24oSGVsaXhHYW1lLkVWRU5UX0xFVkVMX0FEREVELCB0aGlzLCB0aGlzLl9vbkxldmVsQWRkZWQpO1xyXG4gICAgICAgIGhlbGl4Lm9uKEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9SRU1PVkVELCB0aGlzLCB0aGlzLl9vbkxldmVsUmVtb3ZlZCk7XHJcbiAgICAgICAgaGVsaXgub24oSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1JFU1VNRUQsIHRoaXMsIHRoaXMuX29uTGV2ZWxSZXN1bWVkKTtcclxuICAgICAgICBoZWxpeC5vbihIZWxpeEdhbWUuRVZFTlRfUkVTVUxULCB0aGlzLCB0aGlzLl9vblJlc3VsdCk7XHJcbiAgICAgICAgaGVsaXgub24oSGVsaXhHYW1lLkVWRU5UX0JBTExfQk9VTkNFLCB0aGlzLCB0aGlzLl9vbkJvdW5jZSk7XHJcbiAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgdGhpcy5fb25GcmFtZSk7XHJcbiAgICAgICAgdGhpcy5tYXJrTW92ZWQoKTtcclxuICAgIH1cclxuICAgIGRlc3Ryb3koZGVzdHJveUNoaWxkcmVuKSB7XHJcbiAgICAgICAgdGhpcy5faGVsaXgub2ZmKEhlbGl4R2FtZS5FVkVOVF9MRVZFTF9BRERFRCwgdGhpcywgdGhpcy5fb25MZXZlbEFkZGVkKTtcclxuICAgICAgICB0aGlzLl9oZWxpeC5vZmYoSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1JFTU9WRUQsIHRoaXMsIHRoaXMuX29uTGV2ZWxSZW1vdmVkKTtcclxuICAgICAgICB0aGlzLl9oZWxpeC5vZmYoSGVsaXhHYW1lLkVWRU5UX0xFVkVMX1JFU1VNRUQsIHRoaXMsIHRoaXMuX29uTGV2ZWxSZXN1bWVkKTtcclxuICAgICAgICB0aGlzLl9oZWxpeC5vZmYoSGVsaXhHYW1lLkVWRU5UX1JFU1VMVCwgdGhpcywgdGhpcy5fb25SZXN1bHQpO1xyXG4gICAgICAgIHRoaXMuX2hlbGl4Lm9mZihIZWxpeEdhbWUuRVZFTlRfQkFMTF9CT1VOQ0UsIHRoaXMsIHRoaXMuX29uQm91bmNlKTtcclxuICAgICAgICBMYXlhLnRpbWVyLmNsZWFyKHRoaXMsIHRoaXMuX29uRnJhbWUpO1xyXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koZGVzdHJveUNoaWxkcmVuKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25MZXZlbEFkZGVkKGluZm8pIHtcclxuICAgICAgICB2YXIgaW5mb1ZpZXcgPSB7IGluZm86aW5mbyB9OyAvLywgY29udGFpbmVyOm5ldyBMYXlhLlNwcml0ZTNEKCkgfTtcclxuICAgICAgICBpZiAoaW5mby5zZWdtZW50cy5zdGF0KSB7XHJcbiAgICAgICAgICAgIGluZm9WaWV3LnN0YXRDb250YWluZXIgPSB0aGlzLl9hZGRDaXJjbGUoaW5mby5zZWdtZW50cy5zdGF0LCBpbmZvLnNlZ21lbnRzLnN0YXRTdGFydCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAvL2luZm9WaWV3LnN0YXRDb250YWluZXIudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgPSAtaW5mby5zZWdtZW50cy5zdGF0U3RhcnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbmZvLnNlZ21lbnRzLm1vdmUpIHtcclxuICAgICAgICAgICAgaW5mb1ZpZXcubW92ZUNvbnRhaW5lciA9IHRoaXMuX2FkZENpcmNsZShpbmZvLnNlZ21lbnRzLm1vdmUsIGluZm8uc2VnbWVudHMubW92ZVN0YXJ0LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbmZvLnNlZ21lbnRzLndhbGwpIHtcclxuICAgICAgICAgICAgaW5mb1ZpZXcuc3RhdENvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9jcmVhdGVXYWxsKGluZm8uc2VnbWVudHMud2FsbCwgaW5mby5zZWdtZW50cy5zdGF0U3RhcnQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGV2ZWxzLnB1c2goaW5mb1ZpZXcpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUluZm9WaWV3UG9zKGluZm9WaWV3KTtcclxuICAgIH1cclxuICAgIG1hcmtNb3ZlZCgpIHtcclxuICAgICAgICB0aGlzLl9tb3ZlZENvdW50ZXIgPSA1O1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRDaXJjbGUoc2VnbWVudHMsIHN0YXJ0QW5nbGUsIGJ1bXApIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IExheWEuU3ByaXRlM0QoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWcgPSBzZWdtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHNlZy50eXBlICE9IEh4R2xvYmFscy5TRUdfSE9MRSkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX2NyZWF0ZUNpcmNsZUl0ZW0oc2VnLCBzdGFydEFuZ2xlLCBidW1wKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBfY3JlYXRlQ2lyY2xlSXRlbShzZWcsIHN0YXJ0QW5nbGUsIGJ1bXApIHtcclxuICAgICAgICB2YXIgb2JqID0gbmV3IExheWEuTWVzaFNwcml0ZTNEKHRoaXMuX21lc2hQb29sLmdldE1lc2goc2VnLmVuZCAtIHNlZy5zdGFydCwgYnVtcCB8fCBzZWcudHlwZSA9PSBIeEdsb2JhbHMuU0VHX0RFQVRILCBzZWcudHlwZSA9PSBIeEdsb2JhbHMuU0VHX0RFQVRIKSk7XHJcbiAgICAgICAgb2JqLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXIgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDM2MCAqIHNlZy5lbmQgKyBzdGFydEFuZ2xlLCAwKTtcclxuICAgICAgICBvYmouaW1wdWxzZURpciA9IHRoaXMuX2dldFJhZEFuZ2xlRGlyKDIgKiBNYXRoLlBJICogKHNlZy5zdGFydCArIHNlZy5lbmQpICogMC41ICsgc3RhcnRBbmdsZSAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgIGlmIChzZWcudHlwZSA9PSBIeEdsb2JhbHMuU0VHX0RFQVRIKVxyXG4gICAgICAgICAgICBvYmoubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gdGhpcy5fc2tpbi50cmFwTWF0O1xyXG4gICAgICAgIGVsc2UgaWYgKHNlZy50eXBlID09IEh4R2xvYmFscy5TRUdfV0lOKVxyXG4gICAgICAgICAgICBvYmoubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gdGhpcy5fc2tpbi5iYWxsTWF0O1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgb2JqLm1lc2hSZW5kZXJlci5zaGFyZWRNYXRlcmlhbCA9IHRoaXMuX3NraW4uZ3JvdW5kTWF0O1xyXG4gICAgICAgIG9iai5zZWcgPSBzZWc7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIF9jcmVhdGVXYWxsKGluZm8sIHN0YXJ0QW5nbGUpIHtcclxuICAgICAgICB2YXIgb2JqID0gbmV3IExheWEuTWVzaFNwcml0ZTNEKHRoaXMuX21lc2hQb29sLmdldE1lc2goSHhHbG9iYWxzLldBTExfQU5HTEUgLyAzNjAsIGZhbHNlLCB0cnVlLCBIeEdsb2JhbHMuVklFV19MRVZFTF9IRUlHSFQgLSBIeEdsb2JhbHMuVklFV19GTE9PUl9USElDS05FU1MpKTtcclxuICAgICAgICBvYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlciA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgaW5mby5wb3MgKiAzNjAgKyBIeEdsb2JhbHMuV0FMTF9BTkdMRSAqIDAuNSArIHN0YXJ0QW5nbGUsIDApO1xyXG4gICAgICAgIG9iai50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgPSBIeEdsb2JhbHMuVklFV19MRVZFTF9IRUlHSFQgKiAwLjU7Ly8gKyBIeEdsb2JhbHMuVklFV19GTE9PUl9USElDS05FU1M7XHJcbiAgICAgICAgb2JqLmltcHVsc2VEaXIgPSB0aGlzLl9nZXRSYWRBbmdsZURpcigyICogTWF0aC5QSSAqIGluZm8ucG9zICsgc3RhcnRBbmdsZSAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgIG9iai5tZXNoUmVuZGVyZXIuc2hhcmVkTWF0ZXJpYWwgPSB0aGlzLl9za2luLnRyYXBNYXQ7XHJcbiAgICAgICAgb2JqLndhbGwgPSBpbmZvO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG9iai50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbkV1bGVyKTtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgX2dldFJhZEFuZ2xlRGlyKHJhZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTGF5YS5WZWN0b3IzKE1hdGguY29zKHJhZCksIDAsIC1NYXRoLnNpbihyYWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25MZXZlbFJlbW92ZWQoaW5mbykge1xyXG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9sZXZlbHMuZmluZEluZGV4KChpdG0pID0+IGl0bS5pbmZvID09IGluZm8pO1xyXG4gICAgICAgIGlmIChpZHggPCAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJfb25MZXZlbFJlbW92ZWQ6IGxldmVsIHZpZXcgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbmZvVmlldyA9IHRoaXMuX2xldmVsc1tpZHhdO1xyXG4gICAgICAgIHRoaXMuX2xldmVscy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICB0aGlzLl9ydW5SZW1vdmVBbmltYXRpb24oaW5mb1ZpZXcuc3RhdENvbnRhaW5lciwgaW5mby5jcmFzaGVkTGV2ZWwpO1xyXG4gICAgICAgIHRoaXMuX3J1blJlbW92ZUFuaW1hdGlvbihpbmZvVmlldy5tb3ZlQ29udGFpbmVyLCBpbmZvLmNyYXNoZWRMZXZlbCk7XHJcbiAgICB9XHJcbiAgICBfb25MZXZlbFJlc3VtZWQoaW5mbykge1xyXG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5fbGV2ZWxzLmZpbmQoKGl0bSkgPT4gaXRtLmluZm8gPT0gaW5mbyk7XHJcbiAgICAgICAgdGhpcy5fcmVwYWludFNlZ21lbnRzKHZpZXcuc3RhdENvbnRhaW5lciwgdGhpcy5fc2tpbi50cmFwTWF0LCB0aGlzLl9za2luLmdyb3VuZE1hdCk7XHJcbiAgICAgICAgdGhpcy5fcmVwYWludFNlZ21lbnRzKHZpZXcubW92ZUNvbnRhaW5lciwgdGhpcy5fc2tpbi50cmFwTWF0LCB0aGlzLl9za2luLmdyb3VuZE1hdCk7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlV2FsbCh2aWV3LnN0YXRDb250YWluZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlcGFpbnRTZWdtZW50cyhjb250YWluZXIsIGZyb21NYXRlcmlhbCwgdG9NYXRlcmFpbCkge1xyXG4gICAgICAgIGlmICghY29udGFpbmVyKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250YWluZXIubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBjb250YWluZXIuZ2V0Q2hpbGRBdChpKS5tZXNoUmVuZGVyZXI7XHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJlci5zaGFyZWRNYXRlcmlhbCA9PSBmcm9tTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gdG9NYXRlcmFpbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9yZW1vdmVXYWxsKGNvbnRhaW5lcikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGFpbmVyLm51bUNoaWxkcmVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gY29udGFpbmVyLmdldENoaWxkQXQoaSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC53YWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29uQm91bmNlKHNlZykge1xyXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlZENvdW50ZXIgPiAwICYmIHRoaXMuX2xldmVscy5sZW5ndGggJiYgdGhpcy5fbGV2ZWxzWzBdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdmVkQ291bnRlci0tO1xyXG4gICAgICAgICAgICB2YXIgbGV2ZWxWaWV3ID0gdGhpcy5fbGV2ZWxzWzBdO1xyXG4gICAgICAgICAgICB2YXIgc2VnVmlldyA9IHRoaXMuX2ZpbmRTZWdWaWV3KGxldmVsVmlldy5zdGF0Q29udGFpbmVyLCBzZWcpIHx8IHRoaXMuX2ZpbmRTZWdWaWV3KGxldmVsVmlldy5tb3ZlQ29udGFpbmVyLCBzZWcpO1xyXG4gICAgICAgICAgICBpZiAoc2VnVmlldykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb3QgPSB0aGlzLl9ibG90cy5hZGRUbyhzZWdWaWV3KVxyXG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBMYXlhLlZlY3RvcjMoSHhHbG9iYWxzLlZJRVdfQkFMTF9YUE9TLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBtID0gVXRpbHMuZnJvbVRvVHJhbnNmb3JtTWF0cml4KHRoaXMuX3BpZWNlc1dvcmxkLnRyYW5zZm9ybSwgYmxvdC50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgTGF5YS5WZWN0b3IzLnRyYW5zZm9ybUNvb3JkaW5hdGUocG9zLCBtLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgcG9zLnkgPSBIeEdsb2JhbHMuVklFV19GTE9PUl9USElDS05FU1MgKiAwLjUgKyBIeEdsb2JhbHMuVklFV19CTE9UX1lPRkZTRVQ7XHJcbiAgICAgICAgICAgICAgICBibG90LnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgYmxvdC50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IG5ldyBMYXlhLlZlY3RvcjMoMC41LCAwLjUsIDAuNSk7XHJcbiAgICAgICAgICAgICAgICBibG90LnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uRXVsZXJZID0gMzYwICogTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9maW5kU2VnVmlldyhjb250YWluZXIsIHNlZykge1xyXG4gICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gY29udGFpbmVyLm51bUNoaWxkcmVuO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGNvbnRhaW5lci5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLnNlZyA9PSBzZWcpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlc3VsdChyZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzdWx0ID09IEhlbGl4R2FtZS5SRVNVTFRfUExBWUlORylcclxuICAgICAgICAgICAgdGhpcy5fb25GcmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkZyYW1lKCkge1xyXG4gICAgICAgIHRoaXMuX2xldmVscy5mb3JFYWNoKGluZm8gPT4geyB0aGlzLl91cGRhdGVJbmZvVmlld1BvcyhpbmZvKTsgfSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZUluZm9WaWV3UG9zKGluZm9WaWV3KSB7XHJcbiAgICAgICAgdmFyIHkgPSAtaW5mb1ZpZXcuaW5mby5wb3MgKiBMRVZFTF9IRUlHSFQ7XHJcbiAgICAgICAgaWYgKGluZm9WaWV3LnN0YXRDb250YWluZXIpXHJcbiAgICAgICAgICAgIGluZm9WaWV3LnN0YXRDb250YWluZXIudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZID0geTtcclxuICAgICAgICBpZiAoaW5mb1ZpZXcubW92ZUNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBpbmZvVmlldy5tb3ZlQ29udGFpbmVyLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSA9IHk7XHJcbiAgICAgICAgICAgIGluZm9WaWV3Lm1vdmVDb250YWluZXIudHJhbnNmb3JtLmxvY2FsUm90YXRpb25FdWxlclkgPSBpbmZvVmlldy5pbmZvLm1vdmVBO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcnVuUmVtb3ZlQW5pbWF0aW9uKGNvbnRhaW5lciwgY3Jhc2hlZExldmVsKSB7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcclxuICAgICAgICB2YXIgd29ybGQgPSB0aGlzLl9waWVjZXNXb3JsZDsvLyB0aGlzLnBhcmVudC5wYXJlbnQ7XHJcbiAgICAgICAgdmFyIG0gPSBVdGlscy5mcm9tVG9UcmFuc2Zvcm1NYXRyaXgoY29udGFpbmVyLnRyYW5zZm9ybSwgd29ybGQudHJhbnNmb3JtKTtcclxuICAgICAgICB2YXIgY291bnQgPSBjb250YWluZXIubnVtQ2hpbGRyZW47XHJcbiAgICAgICAgdmFyIHBpZWNlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBjb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGNvbnRhaW5lci5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICAvLyBWZWxvY2lsaXR5XHJcbiAgICAgICAgICAgIGNoaWxkLnZlbCA9IGNoaWxkLmltcHVsc2VEaXIuY2xvbmUoKTtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLlRyYW5zZm9ybU5vcm1hbChjaGlsZC52ZWwsIG0sIGNoaWxkLnZlbCk7XHJcbiAgICAgICAgICAgIExheWEuVmVjdG9yMy5zY2FsZShjaGlsZC52ZWwsIERFQlJJU19WRUxPQ0lUWSwgY2hpbGQudmVsKTtcclxuICAgICAgICAgICAgY2hpbGQudmVsLnkgPSAtREVCUklTX1ZFTE9DSVRZICogMC4yO1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMYXlhLlZlY3RvcjMoY2hpbGQuaW1wdWxzZURpci56LCAwLCAtY2hpbGQuaW1wdWxzZURpci54KTtcclxuICAgICAgICAgICAgdmFyIHJuZFNjYWxlID0gMC41O1xyXG4gICAgICAgICAgICB2LnkgKz0gTWF0aC5yYW5kb20oKSAqIHJuZFNjYWxlOyB2LnggKz0gTWF0aC5yYW5kb20oKSAqIHJuZFNjYWxlOyB2LnogKz0gTWF0aC5yYW5kb20oKSAqIHJuZFNjYWxlO1xyXG4gICAgICAgICAgICBMYXlhLlZlY3RvcjMubm9ybWFsaXplKHYsIHYpO1xyXG4gICAgICAgICAgICBjaGlsZC5heGlzID0gdjtcclxuICAgICAgICAgICAgTGF5YS5WZWN0b3IzLlRyYW5zZm9ybU5vcm1hbChjaGlsZC5heGlzLCBtLCBjaGlsZC5heGlzKTtcclxuICAgICAgICAgICAgLy8gTW92ZSBzZWN0b3IgdG8gd29ybGRcclxuICAgICAgICAgICAgVXRpbHMucmVwYXJlbnRJbnBsYWNlKGNoaWxkLCB3b3JsZCk7XHJcbiAgICAgICAgICAgIGlmIChjcmFzaGVkTGV2ZWwpXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSB0aGlzLl9za2luLmNyYXNoTWF0O1xyXG4gICAgICAgICAgICBjaGlsZC5jcmFzaERlbGF5ID0gMC4xO1xyXG4gICAgICAgICAgICBwaWVjZXMucHVzaChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsYXN0SW5mbyA9IHRoaXMuX2xldmVscy5sZW5ndGggPyB0aGlzLl9sZXZlbHNbdGhpcy5fbGV2ZWxzLmxlbmd0aCAtIDFdLmluZm8gOiBudWxsO1xyXG4gICAgICAgIExheWEuVHdlZW4udG8obmV3IEZhbGxpbmdQaWVjZXMoY29udGFpbmVyLCBwaWVjZXMsIGxhc3RJbmZvLCAwLjggKyBNYXRoLnJhbmRvbSgpICogMC41KSxcclxuICAgICAgICAgICAgeyB0aW1lOiBERUJSSVNfRkFMTF9EVVJBVElPTiB9LCBERUJSSVNfRkFMTF9EVVJBVElPTiAqIDEwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGYWxsaW5nUGllY2VzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgcGllY2VzLCByZWZMdmwsIGF2ZWwpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5fcGllY2VzID0gcGllY2VzO1xyXG4gICAgICAgIHRoaXMuX3JlZkx2bCA9IHJlZkx2bDtcclxuICAgICAgICB0aGlzLl9hdmVsID0gYXZlbDtcclxuICAgICAgICBpZiAocmVmTHZsKVxyXG4gICAgICAgICAgICB0aGlzLl9yZWZMdmxQb3MgPSByZWZMdmwucG9zO1xyXG4gICAgICAgIHRoaXMuX3RpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX3EgPSBuZXcgTGF5YS5RdWF0ZXJuaW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgdGltZSgpIHsgcmV0dXJuIHRoaXMuX3RpbWU7IH1cclxuICAgIHNldCB0aW1lKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5lci5kZXN0cm95ZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgZHQgPSB2YWx1ZSAtIHRoaXMuX3RpbWU7XHJcbiAgICAgICAgdGhpcy5fdGltZSA9IHZhbHVlO1xyXG4gICAgICAgIHZhciBwaWVjZXMgPSB0aGlzLl9waWVjZXM7XHJcbiAgICAgICAgaWYgKCFwaWVjZXMpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgZWxldmF0aW9uRGVsdGEgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZWZMdmwpIHtcclxuICAgICAgICAgICAgZWxldmF0aW9uRGVsdGEgPSB0aGlzLl9yZWZMdmwucG9zIC0gdGhpcy5fcmVmTHZsUG9zO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWZMdmxQb3MgPSB0aGlzLl9yZWZMdmwucG9zO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYnVmUSA9IHRoaXMuX3E7XHJcbiAgICAgICAgcGllY2VzLmZvckVhY2gocGllY2UgPT4ge1xyXG4gICAgICAgICAgICBwaWVjZS5jcmFzaERlbGF5IC09IGR0O1xyXG4gICAgICAgICAgICBpZiAocGllY2UuY3Jhc2hEZWxheSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHBpZWNlLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSAtPSBlbGV2YXRpb25EZWx0YTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgdmFyIHYgPSBwaWVjZS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbjtcclxuICAgICAgICAgICAgdi54ICs9IHBpZWNlLnZlbC54ICogZHQ7XHJcbiAgICAgICAgICAgIHYueSArPSBwaWVjZS52ZWwueSAqIGR0IC0gZWxldmF0aW9uRGVsdGE7XHJcbiAgICAgICAgICAgIHYueiArPSBwaWVjZS52ZWwueiAqIGR0O1xyXG4gICAgICAgICAgICBwaWVjZS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9IHY7XHJcbiAgICAgICAgICAgIExheWEuUXVhdGVybmlvbi5jcmVhdGVGcm9tQXhpc0FuZ2xlKHBpZWNlLmF4aXMsIC1kdCAqIHRoaXMuX2F2ZWwsIGJ1ZlEpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IHBpZWNlLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uO1xyXG4gICAgICAgICAgICBMYXlhLlF1YXRlcm5pb24ubXVsdGlwbHkoYnVmUSwgcSwgcSk7XHJcbiAgICAgICAgICAgIHBpZWNlLnRyYW5zZm9ybS5sb2NhbFJvdGF0aW9uID0gcTtcclxuICAgICAgICAgICAgcGllY2UudmVsLnkgLT0gREVCUklTX0FDQ0VMRVJBVElPTiAqIGR0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh2YWx1ZSA+PSBERUJSSVNfRkFMTF9EVVJBVElPTikge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBwaWVjZXMuZm9yRWFjaChwaWVjZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwaWVjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9waWVjZXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBVdGlscyBmcm9tIFwiLi9VdGlsc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIeEJ1dHRvbiBleHRlbmRzIExheWEuUGFuZWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuICAgIGluaXQoZXh0cmFQcm9wcykge1xyXG4gICAgICAgIFV0aWxzLmluaXRQcm9wcyh0aGlzLCBbJ25vcm1hbFZpZXcnLCAnZGlzYWJsZWRWaWV3J10uY29uY2F0KGV4dHJhUHJvcHMgfHwgW10pKTtcclxuICAgIH1cclxuICAgIGdldCBkaXNhYmxlZCgpIHsgcmV0dXJuIHRoaXMuX2Rpc2FibGVkOyB9XHJcbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcclxuICAgICAgICAvL3N1cGVyLmRpc2FibGVkID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLm5vcm1hbFZpZXcudmlzaWJsZSA9ICF2YWx1ZTtcclxuICAgICAgICB0aGlzLmRpc2FibGVkVmlldy52aXNpYmxlID0gdmFsdWU7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIeEdsb2JhbHMge1xyXG4gICAgc3RhdGljIGdldCBGRVRDSF9MRVZFTFMoKSB7IHJldHVybiA2OyB9XHJcbiAgICBzdGF0aWMgZ2V0IE1BWF9ERUxUQV9USU1FKCkgeyByZXR1cm4gMC4yNTsgfVxyXG4gICAgXHJcbiAgICAvLyBMb2dpYyB2YWx1ZXNcclxuICAgIHN0YXRpYyBnZXQgTE9HSUNfSEVJR0hUX0xFVkVMKCkgeyByZXR1cm4gMTsgfVxyXG4gICAgc3RhdGljIGdldCBMT0dJQ19MRVZFTF9CUkVBS19GUk9NKCkgeyByZXR1cm4gMzsgfVxyXG4gICAgc3RhdGljIGdldCBNSU5fU0VHX1NJWkUoKSB7IHJldHVybiAyOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVQU0lMT05fU0VHX1NJWkUoKSB7IHJldHVybiAwLjE7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VHX0hPTEUoKSB7IHJldHVybiAnSCc7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VHX0dST1VORCgpIHsgcmV0dXJuICdHJzsgfVxyXG4gICAgc3RhdGljIGdldCBTRUdfREVBVEgoKSB7IHJldHVybiAnVCc7IH1cclxuICAgIHN0YXRpYyBnZXQgU0VHX1dJTigpIHsgcmV0dXJuICdWJzsgfVxyXG4gICAgc3RhdGljIGdldCBXQUxMX0FOR0xFKCkgeyByZXR1cm4gMTA7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TG9hZGluZ1ByZWxvYWQocGdycykgeyByZXR1cm4gcGdycyAqIDAuNTsgfVxyXG4gICAgc3RhdGljIGdldExvYWRpbmdTb2NpYWwocGdycykgeyByZXR1cm4gMC41ICogKDEgLSBwZ3JzKSArIDAuNiAqIHBncnM7IH1cclxuICAgIHN0YXRpYyBnZXRMb2FkaW5nU2NlbmVzKHBncnMpIHsgcmV0dXJuIDAuNiAqICgxIC0gcGdycykgKyAxLjAgKiBwZ3JzOyB9XHJcblxyXG4gICAgLy8gVmlld1xyXG4gICAgc3RhdGljIGdldCBWSUVXX0JBTExfUkFESVVTKCkgeyByZXR1cm4gMC4wODsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX0JBTExfWFBPUygpIHsgcmV0dXJuICh0aGlzLlZJRVdfU0VDVE9SX1JBRElVUyArIHRoaXMuVklFV19DT0xVTU5fUkFESVVTKSAqIDAuNTsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX0ZMT09SX1RISUNLTkVTUygpIHsgcmV0dXJuIDAuMjsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX0xFVkVMX0hFSUdIVCgpIHsgcmV0dXJuIDEuNTsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX0JPVU5DRV9IRUlHSFRfU0NBTEUoKSB7IHJldHVybiBIeEdsb2JhbHMuVklFV19MRVZFTF9IRUlHSFQgKiAxLjU7IH1cclxuICAgIHN0YXRpYyBnZXQgVklFV19TRUNUT1JfUkFESVVTKCkgeyByZXR1cm4gMS4wOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFZJRVdfU0VDVE9SX0RFQVRIX0JVTVAoKSB7IHJldHVybiAwLjAwMjsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX1NFQ1RPUl9ERUFUSF9SQURJVVNfQlVNUCgpIHsgcmV0dXJuIDAuMDQ7IH1cclxuICAgIHN0YXRpYyBnZXQgVklFV19DT0xVTU5fUkFESVVTKCkgeyByZXR1cm4gMC40NTsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX1NFQ1RPUl9TTElDRVMoKSB7IHJldHVybiAzNjsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX01JTl9TRUNUT1JfU0xJQ0VTKCkgeyByZXR1cm4gNDsgfVxyXG4gICAgc3RhdGljIGdldCBWSUVXX0JMT1RfWU9GRlNFVCgpIHsgcmV0dXJuIDAuMDE7IH1cclxuICAgIHN0YXRpYyBnZXQgREVCUklTX0FDQ0VMRVJBVElPTigpIHsgcmV0dXJuIDIuNSAqIEh4R2xvYmFscy5WSUVXX0xFVkVMX0hFSUdIVDsgfVxyXG4gICAgc3RhdGljIGdldCBERUJSSVNfVkVMT0NJVFkoKSB7IHJldHVybiAyLjU7IH1cclxuICAgIHN0YXRpYyBnZXQgREVCUklTX0ZBTExfRFVSQVRJT04oKSB7IHJldHVybiAxLjU7IH1cclxuICAgIHN0YXRpYyBnZXQgSU5QVVRfUk9UQVRFX1NFTlNJVElWSVRZKCkgeyByZXR1cm4gMSAvIDUwMDsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgRlhfTkFNRV9CT1VOQ0UoKSB7IHJldHVybiBcImZ4Qm91bmNlXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRlhfTkFNRV9GQUlMKCkgeyByZXR1cm4gXCJmeEZhaWxcIjsgfVxyXG4gICAgc3RhdGljIGdldCBGWF9OQU1FX1RSQUlMKCkgeyByZXR1cm4gXCJmeFRyYWlsXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRlhfTkFNRV9CQUNLR1JPVU5EKCkgeyByZXR1cm4gXCJmeEJhY2tncm91bmRcIjsgfVxyXG5cclxuICAgIC8vIHN0YXRpYyBnZXQgTUFURVJJQUxfQkFMTCgpIHsgcmV0dXJuIGNyZWF0ZU1hdGVyaWFsKFwiYmFsbFwiLCAwLCAxLCAwKTsgfVxyXG4gICAgLy8gc3RhdGljIGdldCBNQVRFUklBTF9DT0xVTU4oKSB7IHJldHVybiBjcmVhdGVNYXRlcmlhbChcImNvbHVtblwiLCAxLCAxLjUsIDEuNSk7IH1cclxuICAgIC8vIHN0YXRpYyBnZXQgTUFURVJJQUxfR1JPVU5EKCkgeyByZXR1cm4gY3JlYXRlTWF0ZXJpYWwoXCJncm91bmRcIiwgMCwgMC45LCAxKTsgfVxyXG4gICAgLy8gc3RhdGljIGdldCBNQVRFUklBTF9ERUFUSCgpIHsgcmV0dXJuIGNyZWF0ZU1hdGVyaWFsKFwiZGVhdGhcIiwgMSwgMSwgMCk7IH1cclxuICAgIC8vIHN0YXRpYyBnZXQgTUFURVJJQUxfQ1JBU0hFRCgpIHsgcmV0dXJuIGNyZWF0ZU1hdGVyaWFsKFwiY3Jhc2hlZFwiLCAxLjUsIDAuNSwgMC41KTsgfVxyXG4gICAgLy8gc3RhdGljIGdldCBNQVRFUklBTF9XSU4oKSB7IHJldHVybiBjcmVhdGVNYXRlcmlhbChcIndpblwiLCAwLCAxLCAwKTsgfVxyXG4gICAgLy8gc3RhdGljIGdldCBNQVRFUklBTF9CQUNLKCkgeyByZXR1cm4gY3JlYXRlQmFja01hdGVyaWFsKCk7IH1cclxuXHJcbiAgICBzdGF0aWMgY29tcGFyZVNlZ3MoYSwgYikge1xyXG4gICAgICAgIHZhciBtYXAgPSBIeEdsb2JhbHMuc2VnUHJpb3JpdGllcztcclxuICAgICAgICB2YXIgZGlmZiA9IChhID8gbWFwW2EudHlwZV0gOiAwKSAtIChiID8gbWFwW2IudHlwZV0gOiAwKTtcclxuICAgICAgICByZXR1cm4gZGlmZiA8IDAgPyAtMSA6IChkaWZmID4gMCA/IDEgOiAwKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgc2VnUHJpb3JpdGllcygpIHtcclxuICAgICAgICBpZiAoIUh4R2xvYmFscy5fc2VnUHJpb3JpdGllcykge1xyXG4gICAgICAgICAgICBIeEdsb2JhbHMuX3NlZ1ByaW9yaXRpZXMgPSB7IH07XHJcbiAgICAgICAgICAgIEh4R2xvYmFscy5fc2VnUHJpb3JpdGllc1tIeEdsb2JhbHMuU0VHX0hPTEVdID0gMTtcclxuICAgICAgICAgICAgSHhHbG9iYWxzLl9zZWdQcmlvcml0aWVzW0h4R2xvYmFscy5TRUdfR1JPVU5EXSA9IDI7XHJcbiAgICAgICAgICAgIEh4R2xvYmFscy5fc2VnUHJpb3JpdGllc1tIeEdsb2JhbHMuU0VHX0RFQVRIXSA9IDM7XHJcbiAgICAgICAgICAgIEh4R2xvYmFscy5fc2VnUHJpb3JpdGllc1tIeEdsb2JhbHMuU0VHX1dJTl0gPSA0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSHhHbG9iYWxzLl9zZWdQcmlvcml0aWVzO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyB2YXIgaHhNYXRlcmlhbHMgPSB7IH07XHJcblxyXG4vLyBmdW5jdGlvbiBjcmVhdGVNYXRlcmlhbChuYW1lLCByLCBnLCBiKSB7XHJcbi8vICAgICBpZiAoaHhNYXRlcmlhbHNbbmFtZV0pXHJcbi8vICAgICAgICAgcmV0dXJuIGh4TWF0ZXJpYWxzW25hbWVdO1xyXG4vLyAgICAgY29uc3QgZW1pc3Npb24gPSAwLjQ1O1xyXG4vLyAgICAgY29uc3QgYWxiZWRvID0gMC40O1xyXG4vLyAgICAgdmFyIG1hdCA9IG5ldyBMYXlhLlBCUlN0YW5kYXJkTWF0ZXJpYWwoKTtcclxuLy8gICAgIG1hdC5lbmFibGVFbWlzc2lvbiA9IHRydWU7XHJcbi8vICAgICBtYXQuZW1pc3Npb25Db2xvciA9IG5ldyBMYXlhLlZlY3RvcjQociAqIGVtaXNzaW9uLCBnICogZW1pc3Npb24sIGIgKiBlbWlzc2lvbiwgMSk7XHJcbi8vICAgICBtYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KHIgKiBhbGJlZG8sIGcgKiBhbGJlZG8sIGIgKiBhbGJlZG8sIDEpO1xyXG4vLyAgICAgbWF0LnNtb290aG5lc3MgPSAwLjM7XHJcbi8vICAgICBoeE1hdGVyaWFsc1tuYW1lXSA9IG1hdDtcclxuLy8gICAgIHJldHVybiBtYXQ7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNyZWF0ZUJhY2tNYXRlcmlhbCgpIHtcclxuLy8gICAgIHZhciBuYW1lID0gJ2JhY2snO1xyXG4vLyAgICAgaWYgKGh4TWF0ZXJpYWxzW25hbWVdKVxyXG4vLyAgICAgICAgIHJldHVybiBoeE1hdGVyaWFsc1tuYW1lXTtcclxuLy8gICAgIHZhciBtYXQgPSBuZXcgTGF5YS5FZmZlY3RNYXRlcmlhbCgpO1xyXG4vLyAgICAgbWF0LmNvbG9yID0gbmV3IExheWEuVmVjdG9yNCgwLjUsIDAuNSwgMC41LCAxKTtcclxuLy8gICAgIGh4TWF0ZXJpYWxzW25hbWVdID0gbWF0O1xyXG4vLyAgICAgcmV0dXJuIG1hdDtcclxuLy8gfSIsImltcG9ydCB7IExvY2FsZURhdGEgfSBmcm9tIFwiLi9Mb2NhbGVEYXRhXCI7XHJcbmltcG9ydCBDU1ZUb0FycmF5IGZyb20gXCIuL0NTVlRvQXJyYXlcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGUge1xyXG4gICAgc3RhdGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgbGV0IGxhbmcgPSBHRVRbJ2xhbmcnXSB8fCB3aW5kb3cueXNkayAmJiB3aW5kb3cueXNkay5lbnZpcm9ubWVudFsnaTE4biddLmxhbmcgfHwgJ3J1JztcclxuICAgICAgICBpZiAoWydhcicsICdkZScsICdlbicsICdlcycsICdmcicsICdoaScsICdpZCcsICdydSddLmluZGV4T2YobGFuZykgPCAwKVxyXG4gICAgICAgICAgICBsYW5nID0gWydydScsICdiZScsJ2t6JywgJ2trJywgJ3VhJywgJ3VrJ10uaW5kZXhPZihsYW5nKSA8IDAgPyAnZW4nIDogJ3J1JztcclxuICAgICAgICAvLyBpZiAoIWxhbmcpIHtcclxuICAgICAgICAvLyAgICAgaWYgKHdpbmRvdy55c2RrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBsYW5nID0gd2luZG93LnlzZGsuZW52aXJvbm1lbnRbJ2kxOG4nXS5sYW5nO1xyXG4gICAgICAgIC8vICAgICAgICAgbGFuZyA9IFsncnUnLCAnYmUnLCdreicsICdraycsICd1YScsICd1ayddLmluZGV4T2YobGFuZykgPCAwID8gJ2VuJyA6ICdydSc7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICBsYW5nID0gJ3J1JztcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB3aW5kb3cuTG9jYWxlID0gTG9jYWxlO1xyXG4gICAgICAgIHRoaXMubGFuZyA9IGxhbmc7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IExvY2FsZS5wYXJzZURhdGEoTG9jYWxlRGF0YSk7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVtsYW5nIHx8ICdlbiddO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0ZXh0KGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFba2V5XTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmb3JtYXQoa2V5KSB7XHJcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLnRleHQoa2V5KTtcclxuICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ3snICsgKGkgLSAxKSArICd9JywgYXJndW1lbnRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgcnVzc2lvblBsdXJhbChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gdGhpcy50ZXh0KGtleSk7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiAnJztcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSdXNzaW9uUGx1cmFsU3VmZml4KHZhbHVlLCBzdHIuc3BsaXQoJ3wnKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0UnVzc2lvblBsdXJhbFN1ZmZpeCh2YWx1ZSwgZW5kaW5ncykge1xyXG4gICAgICAgIGNvbnN0IGNlbnQgPSB2YWx1ZSAlIDEwMDtcclxuICAgICAgICBsZXQgaTtcclxuICAgICAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKVxyXG4gICAgICAgICAgICBpID0gMjtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZGVjID0gY2VudCAlIDEwO1xyXG4gICAgICAgICAgICBpZiAoZGVjID09IDEpIGkgPSAwO1xyXG4gICAgICAgICAgICBlbHNlICBpZiAoZGVjID49IDIgJiYgZGVjIDw9IDQpIGkgPSAxO1xyXG4gICAgICAgICAgICBlbHNlIGkgPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW5kaW5nc1tNYXRoLm1pbihpLCBlbmRpbmdzLmxlbmd0aCAtIDEpXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VEYXRhKHN0ckRhdGEpIHtcclxuICAgICAgICBjb25zdCByYXdEYXRhID0gQ1NWVG9BcnJheShzdHJEYXRhKTtcclxuICAgICAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICAgICAgY29uc3QgY29kZXMgPSByYXdEYXRhWzBdO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgY29kZXMubGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgIGRhdGFbY29kZXNbal1dID0ge307XHJcbiAgICAgICAgY29uc29sZS5sb2cocmF3RGF0YSwgY29kZXMsIGRhdGEpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcmF3RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSByYXdEYXRhW2ldO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IHJvdy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtjb2Rlc1tqXV1bcm93WzBdXSA9IHJvd1tqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgTG9jYWxlRGF0YSA9XHJcbmBrZXksZW4scnUsZGUsZnIsZXMsaWQsaGksYXJcclxuTF9DVVJSRU5DWV9SVUIsUlVCLNCg0YPQsdC70LXQuSxSVUIsUlVCLFJVQixSVUIsUlVCLFJVQlxyXG5MX0FEU19PRkZfQ09ORElUSU9OLFwiQW55IHB1cmNoYXNlIHdpbGwgcmVtb3ZlIGFkcy5cIixcItCb0Y7QsdC+0Lkg0L/Qu9Cw0YLQtdC2INC+0YLQutC70Y7Rh9Cw0LXRgiDRgNC10LrQu9Cw0LzRgy5cIixcIkJlaSBqZWRlbSBLYXVmIHdlcmRlbiBkaWUgQW56ZWlnZW4gZW50ZmVybnRcIixcIlRvdXQgYWNoYXQgc3VwcHJpbWVyYSBsZXMgcHVic1wiLFwiQ3VhbHF1aWVyIGNvbXByYSBlbGltaW5hcsOhIGxvcyBhbnVuY2lvc1wiLFwiUGVtYmVsaWFuIGFwYSBwdW4gYWthbiBtZW5naGFwdXMgaWtsYW5cIixcIuCkleCli+CkiCDgpJbgpLDgpYDgpKYg4KS14KS/4KSc4KWN4KSe4KS+4KSq4KSo4KWL4KSCIOCkleCliyDgpLngpJ/gpL7gpI/gpJfgpYBcIixcItij2Yog2LnZhdmE2YrYqSDYtNix2KfYoSDYs9iq2LLZitmEINin2YTYpdi52YTYp9mG2KfYqlwiXHJcbkxfVElNRVJfSU4sSU4s0KfQldCg0JXQlyxpbixkYW5zLGVuLGRpLOCkruClh+CkgizZgdmKXHJcbkxfQkVTVF9TQ09SRSxCZXN0LNCb0YPRh9GI0LjQuSxCZXN0ZXMgRXJnZWJuaXMsTWVpbGxldXIsTWVqb3IsVGVyYmFpayzgpLjgpLDgpY3gpLXgpLbgpY3gpLDgpYfgpLfgpY3gpKAs2KfZhNij2YHYttmEXHJcbkxfRlJFRSxGcmVlLNCR0LXRgdC/0LvQsNGC0L3QvixHcmF0aXMsR3JhdHVpdCxHcmF0aXMsR3JhdGlzLOCkruClgeCkq+CkvOCljeCkpCzZhdis2KfZhtmKXHJcbkxfRlJFRVMsRnJlZSzQkdC10YHQv9C70LDRgtC90YvQtSxHcmF0aXMsUGnDqGNlcyxNb25lZGFzLEtvaW4s4KSu4KWB4KSr4KS84KWN4KSkLNi52YXZhNin2Kog2YXYrFxyXG5MX0NPSU5TLNChb2lucyzQnNC+0L3QtdGC0YssTcO8bnplbixncmF0dWl0ZXMsZ3JhdGlzLGdyYXRpcyzgpLjgpL/gpJXgpY3gpJXgpYcs2KfZhtmK2KlcclxuTF9SRVNUQVJULFJFU1RBUlQs0J3QkNCn0JDQotCsXFxcXG7QodCd0JDQp9CQ0JvQkCxORVVcXFxcblNUQVJURU4sUkVDT01NRU5DRVIsUkVJTklDSUFSLE1VTEFJIFVMQU5HLOCkq+Ckv+CksCDgpLjgpYcg4KS24KWB4KSw4KWCIOCkleCksOClh+CkgizYpdi52KfYr9ipXFxcXG7Yp9mE2KjYr9ihXHJcbkxfQ09OVElOVUUsQ09OVElOVUUs0J/QoNCe0JTQntCb0JbQmNCi0KwsRk9SVFNFVFpFTixDT05USU5VRVIsQ09OVElOVUFSLExBTkpVVEtBTizgpJzgpL7gpLDgpYAg4KSw4KSW4KWH4KSCLNin2LPYqtmF2LHYp9ixXHJcbkxfQlROX0NPTlRJTlVFLENvbnRpbnVlLNCf0YDQvtC00L7Qu9C20LjRgtGMLEZPUlRTRVRaRU4sQ09OVElOVUVSLENPTlRJTlVBUixMQU5KVVRLQU4s4KS14KS/4KSc4KWN4KSe4KS+4KSq4KSo4KWL4KSCIOCkleClhyzYp9mE2KXYudmE2KfZhtin2KpcclxuTF9CVE5fRk9SLGZvcizQt9CwLGbDvHIscG91cixwYXJhLHVudHVrLOCksuCkv+Ckjywg2YXZgtin2KjZhFxyXG5MX0JUTl9GT1JfQURTLEFEUyzQoNCV0JrQm9CQ0JzQoyxBRFMsZGVzIHB1YnMsQU5VTkNJT1MsSUtMQU4s4KSc4KS+4KSw4KWAIOCksOCkluClh+CkgizYp9iz2KrZhdix2KfYsVxyXG5MX1RIQU5YX0ZPUl9QVVJDSEFTRSxUSEFOSyBZT1UgRk9SIFBVUkNIQVNFIVxcXFxuWU9VIEdPVCzQodCf0JDQodCY0JHQniDQl9CQINCf0J7QmtCj0J/QmtCjIVxcXFxu0JLQkNCcINCd0JDQp9CY0KHQm9CV0J3QnixEQU5LRSBGw5xSIERFTiBLQVVGIVxcXFxuRFUgSEFTVCxNRVJDSSBERSBWT1RSRSBBQ0hBVCFcXFxcblZPVVMgQVZFWizCoUdSQUNJQVMgUE9SIExBIENPTVBSQSFcXFxcblRJRU5FUyxURVJJTUEgS0FTSUggQVRBUyBQRU1CRUxJQU4gQU5EQSFcXFxcbkFOREEgTUVOREFQQVRLQU4s4KSW4KSw4KWA4KSmIOCkleClhyDgpLLgpL/gpI8g4KSn4KSo4KWN4KSv4KS14KS+4KSmIVxcbuCkhuCkquCkleCliyDgpKrgpY3gpLDgpL7gpKrgpY3gpKQg4KS54KWB4KSPLNmG2LTZg9ix2YMg2LnZhNmJINin2YTYtNix2KfYoSEg2K3YtdmE2Kog2LnZhNmJXHJcbkxfVFVUX0FERF9NRU5VXzAsQWRkIHRoZSBnYW1lIHRvIHRoZSBzaWRlYmFyLNCU0L7QsdCw0LLRjCDQuNCz0YDRgyDQsiDQvNC10L3RjixBZGQgdGhlIGdhbWUgdG8gdGhlIHNpZGViYXIsQWRkIHRoZSBnYW1lIHRvIHRoZSBzaWRlYmFyLEFkZCB0aGUgZ2FtZSB0byB0aGUgc2lkZWJhcixBZGQgdGhlIGdhbWUgdG8gdGhlIHNpZGViYXIsQWRkIHRoZSBnYW1lIHRvIHRoZSBzaWRlYmFyLEFkZCB0aGUgZ2FtZSB0byB0aGUgc2lkZWJhclxyXG5MX1RVVF9BRERfTUVOVV8xLGFuZCBrZWVwIGl0IGF0IGhhbmQhLNGH0YLQvtCx0Ysg0L3QtSDQv9C+0YLQtdGA0Y/RgtGMISxhbmQga2VlcCBpdCBhdCBoYW5kISxhbmQga2VlcCBpdCBhdCBoYW5kISxhbmQga2VlcCBpdCBhdCBoYW5kISxhbmQga2VlcCBpdCBhdCBoYW5kISxhbmQga2VlcCBpdCBhdCBoYW5kISxhbmQga2VlcCBpdCBhdCBoYW5kIVxyXG5MX1JVQl9TVUZGSVgsUlVCfFJVQnxSVUIs0KDRg9Cx0LvRjHzQoNGD0LHQu9GPfNCg0YPQsdC70LXQuSxSVUJ8UlVCfFJVQixSVUJ8UlVCfFJVQixSVUJ8UlVCfFJVQixSVUJ8UlVCfFJVQixSVUJ8UlVCfFJVQixSVUJ8UlVCfFJVQlxyXG5gOyIsImltcG9ydCBHYW1lUHJvZ3Jlc3MgZnJvbSBcIi4vR2FtZVByb2dyZXNzXCJcclxuaW1wb3J0IEdhbWVVSSBmcm9tIFwiLi9HYW1lVUlcIlxyXG5pbXBvcnQgR2FtZVJlc3VsdFVJIGZyb20gXCIuL0dhbWVSZXN1bHRVSVwiXHJcbmltcG9ydCBNZW51VUkgZnJvbSBcIi4vTWVudVVJXCJcclxuaW1wb3J0IEJhbmtVSSBmcm9tIFwiLi9CYW5rVUlcIlxyXG5pbXBvcnQgQ2hlc3RVSSBmcm9tIFwiLi9DaGVzdFVJXCJcclxuaW1wb3J0IEZyaWVuZHNVSSBmcm9tIFwiLi9GcmllbmRzVUlcIlxyXG5pbXBvcnQgSGVsaXhHYW1lVmlldyBmcm9tIFwiLi9IZWxpeEdhbWVWaWV3XCJcclxuaW1wb3J0IEhlbGl4R2FtZSBmcm9tIFwiLi9IZWxpeEdhbWVcIlxyXG5pbXBvcnQgQmFja2VuZCBmcm9tIFwiLi9CYWNrZW5kXCJcclxuaW1wb3J0IEJhY2tlbmRNb2NrIGZyb20gXCIuL0JhY2tlbmRNb2NrXCJcclxuaW1wb3J0IFNjZW5lc09wZW5lciBmcm9tIFwiLi9TY2VuZXNPcGVuZXJcIlxyXG5pbXBvcnQgV25kTWFuIGZyb20gXCIuL1duZE1hblwiXHJcbmltcG9ydCBTb2NpYWxBcGkgZnJvbSBcIi4vU29jaWFsQXBpXCJcclxuaW1wb3J0IFVJUmVzaXplQ29udHJvbGxlciBmcm9tIFwiLi9VSVJlc2l6ZUNvbnRyb2xsZXJcIlxyXG5pbXBvcnQgSGVsaXhTa2luIGZyb20gXCIuL0hlbGl4U2tpblwiXHJcbmltcG9ydCBIeEdsb2JhbHMgZnJvbSBcIi4vSHhHbG9iYWxzXCJcclxuaW1wb3J0IEhlbGl4Q29uZmlnIGZyb20gXCIuL0hlbGl4Q29uZmlnXCJcclxuaW1wb3J0IEhlbGl4R2VuZXJhdG9ySW5maW5pdFJhbmRvbSBmcm9tIFwiLi9IZWxpeEdlbmVyYXRvckluZmluaXRSYW5kb21cIlxyXG5pbXBvcnQgSGVsaXhHZW5lcmF0b3JDb25maWdGbG9vcnMgZnJvbSBcIi4vSGVsaXhHZW5lcmF0b3JDb25maWdGbG9vcnNcIlxyXG5pbXBvcnQgQmxvdFNwcml0ZVBvb2wgZnJvbSBcIi4vQmxvdFNwcml0ZVBvb2xcIlxyXG5pbXBvcnQgU291bmRNYW4gZnJvbSBcIi4vU291bmRNYW5cIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5pbXBvcnQgQWRTaG93UG9saWN5IGZyb20gXCIuL0FkU2hvd1BvbGljeVwiXHJcbmltcG9ydCBZYW5kZXggZnJvbSBcIi4vWWFuZGV4XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluVUkgZXh0ZW5kcyBMYXlhLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5ncCA9IG5ldyBHYW1lUHJvZ3Jlc3MoKTtcclxuICAgICAgICBTb3VuZE1hbi5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlQW5kU3RhcnRCYWNrZW5kKCk7XHJcbiAgICAgICAgV25kTWFuLmluc3Qub24oV25kTWFuLkVWRU5UX1dORF9DSEFOR0VELCB0aGlzLCB0aGlzLl9vblduZENoYW5nZWQpO1xyXG4gICAgICAgIHRoaXMuX3Jlc2l6ZUNvbnRyb2xsZXIgPSBuZXcgVUlSZXNpemVDb250cm9sbGVyKExheWEuU2NlbmUucm9vdCk7XHJcbiAgICAgICAgdGhpcy5oZWxpeENvbmZpZyA9IG5ldyBIZWxpeENvbmZpZyh3aW5kb3cuaGVsaXhDb25maWdEYXRhKTtcclxuICAgICAgICBpZiAoVXRpbHMuZGV2TW9kZSlcclxuICAgICAgICAgICAgd2luZG93LmhlbGl4Q29uZmlnID0gdGhpcy5oZWxpeENvbmZpZztcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgVXRpbHMuZm9yY2VVcGRhdGVMYWJlbHMoTGF5YS5TY2VuZS5yb290KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cubWFpblVJID0gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQW5kU3RhcnRCYWNrZW5kKCkge1xyXG4gICAgICAgIHRoaXMuYmFja2VuZCA9XHJcbiAgICAgICAgICAgICh3aW5kb3cudXNlclRva2VuICYmICFVdGlscy5zdGFydHNXaXRoKHdpbmRvdy51c2VyVG9rZW4sICc8Pz0nKSlcclxuICAgICAgICAgICAgPyBuZXcgQmFja2VuZCh3aW5kb3cudXNlclRva2VuKVxyXG4gICAgICAgICAgICA6IG5ldyBCYWNrZW5kTW9jayhuZXcgQmFja2VuZCgnJywgVXRpbHMuYXBpVXJsLCB0cnVlKSwgZnVuY3Rpb24oKSB7IHJldHVybiBTb2NpYWxBcGkuaW5zdC5wcm9maWxlU3RvcmFnZTsgfSk7XHJcbiAgICAgICAgdGhpcy5fYWRTaG93UG9saWN5ID0gbmV3IEFkU2hvd1BvbGljeSh0aGlzLmJhY2tlbmQsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy50dXRvclVJLnByb21vU2hvdygpOyB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0Lm9uY2UoU29jaWFsQXBpLkVWRU5UX0lOSVRJQUxJWkVELCB0aGlzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHJlbG9hZEFwcCA9IGZ1bmN0aW9uKCkgeyB9OyAvLyBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTsgfVxyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQub24oQmFja2VuZC5FUlJPUl9JTkZPX1VSR0VOVCwgbnVsbCwgcmVsb2FkQXBwKTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLm9uKEJhY2tlbmQuRVJST1JfRVhDRVBUSU9OLCBudWxsLCByZWxvYWRBcHApO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQub24oQmFja2VuZC5FUlJPUl9HQU1FLCB0aGlzLCB0aGlzLl9vbkJhY2tlbmRFcnJvckdhbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQub25jZShCYWNrZW5kLkNMSUVOVF9VU0VSX0VWRU5UUywgdGhpcywgdGhpcy5fbG9hZFNjZW5lcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5zZXR0aW5nc0FsbEdldCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuYmFua0NhcmRzR2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5wcm9maWxlR2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC51c2VyT3B0aW9uc0dldCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQudXNlckV2ZW50c0dldCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuZnJpZW5kUmVwbHlBbGwoKTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLnJlY2VpdmVIZWxwcygpO1xyXG4gICAgICAgICAgICB3aW5kb3cuYmFja2VuZCA9IHRoaXMuYmFja2VuZDtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Qub24oU29jaWFsQXBpLkVWRU5UX09SREVSX1JFU1VMVCwgdGhpcywgdGhpcy5fb25PcmRlclJlc3VsdCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihTb2NpYWxBcGkuRVZFTlRfSU5JVElBTElaRV9QUk9HUkVTUywgdGhpcywgZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5fc2hvd1Byb2dyZXNzKEh4R2xvYmFscy5nZXRMb2FkaW5nU29jaWFsKHZhbHVlKSk7IH0pO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0LmluaXRpYWxpemUoZnVuY3Rpb24oZnJpZW5kSWRzLCBvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBvblVzZXJzR2V0ID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkcyA9IGRhdGEubGlzdC5yZWR1Y2UoKHMsIGl0bSkgPT4geyBpZiAoaXRtLmhhc0FwcCkgcy5wdXNoKGl0bS5pZFNvY2lhbCk7IHJldHVybiBzOyB9LCBbXSk7XHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKGlkcyk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLm9uY2UoQmFja2VuZC5DTElFTlRfVVNFUlNfR0VULCB0aGlzLCBvblVzZXJzR2V0KTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZW5kLnVzZXJzR2V0KGZyaWVuZElkcyk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLmJhY2tlbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbk9yZGVyUmVzdWx0KG9rKSB7XHJcbiAgICAgICAgaWYgKG9rKSB7XHJcbiAgICAgICAgICAgIHZhciB0aWQgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgY3VyTW9uZXkgPSB0aGlzLmJhY2tlbmQucHJvZmlsZS5tb25leVNvZnQ7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2FkaW5nSW5kaWNhdG9yLnNob3coKTtcclxuICAgICAgICAgICAgdGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9uZXlEZWx0YSA9IHRoaXMuYmFja2VuZC5wcm9maWxlLm1vbmV5U29mdCAtIGN1ck1vbmV5O1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vbmV5RGVsdGEgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBXbmRNYW4uaW5zdC5vcmRlclJlc3VsdFVJLnNob3dDb2lucyhtb25leURlbHRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5wcm9maWxlR2V0KCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTUwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZC5wcm9maWxlR2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29uQmFja2VuZEVycm9yR2FtZShkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY29kZSA9PSBCYWNrZW5kLkNPREVfRVJSX1JFU09VUkNFX09QRVJBVElPTikge1xyXG4gICAgICAgICAgICBXbmRNYW4uaW5zdC5iYW5rVUkuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmhhbmRsZWQgZ2FtZSBlcnJvciBcIiArIGRhdGEuY29kZSArIFwiOiBcIiArIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9sb2FkU2NlbmVzKCkge1xyXG4gICAgICAgIHRoaXMuZ3AuYmVzdFNjb3JlID0gdGhpcy5iYWNrZW5kLnByb2ZpbGUuc2NvcmVzTWF4O1xyXG4gICAgICAgIHRoaXMuZ3AuYmVzdFNjb3JlUHJldiA9IHRoaXMuZ3AuYmVzdFNjb3JlO1xyXG4gICAgICAgIHRoaXMuZ3AubGV2ZWwgPSB0aGlzLmJhY2tlbmQucHJvZmlsZS5sZXZlbDtcclxuICAgICAgICB2YXIgc2NlbmVzID0gW1xyXG4gICAgICAgICAgICB7IHVybDogXCJmeC9zY2VuZS5sc1wiLCBvbk9wZW5lZDogdGhpcy5fb25GeE9wZW5lZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogXCJzY2VuZXMvR2FtZVVJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9vbkdhbWVVSU9wZW5lZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogXCJzY2VuZXMvTWVudVVJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9vbk1lbnVVSU9wZW5lZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogXCJzY2VuZXMvR2FtZVJlc3VsdFVJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9hZGRXbmQgfSxcclxuICAgICAgICAgICAgeyB1cmw6IFwic2NlbmVzL0ZyaWVuZHNVSS5zY2VuZVwiLCBvbk9wZW5lZDogdGhpcy5fYWRkV25kIH0sXHJcbiAgICAgICAgICAgIC8veyB1cmw6IFwic2NlbmVzL0ZyaWVuZERlZmVhdFVJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9hZGRXbmQgfSxcclxuICAgICAgICAgICAgeyB1cmw6IFwic2NlbmVzL0ZyaWVuZERlZmVhdFVJMi5zY2VuZVwiLCBvbk9wZW5lZDogdGhpcy5fYWRkV25kIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBcInNjZW5lcy9DaGVzdFVJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9hZGRXbmQgfSxcclxuICAgICAgICAgICAgeyB1cmw6IFwic2NlbmVzL09yZGVyUmVzdWx0VUkuc2NlbmVcIiwgb25PcGVuZWQ6IHRoaXMuX2FkZFduZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogXCJzY2VuZXMvVHV0b3JVSS5zY2VuZVwiLCBvbk9wZW5lZDogdGhpcy5fb25UdXRvclVJT3BlbmVkIH0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAoVXRpbHMuY2FuVXNlUHVyY2hhc2VzKVxyXG4gICAgICAgICAgICBzY2VuZXMucHVzaCh7IHVybDogXCJzY2VuZXMvQmFua1VJLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9hZGRXbmQgfSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzY2VuZXMucHVzaCh7IHVybDogXCJzY2VuZXMvQmFua1VJQWRzLnNjZW5lXCIsIG9uT3BlbmVkOiB0aGlzLl9hZGRXbmQgfSk7XHJcbiAgICAgICAgdGhpcy5fc2NlbmVzT3BlbmVyID0gbmV3IFNjZW5lc09wZW5lcih0aGlzLCBzY2VuZXMpO1xyXG4gICAgICAgIHRoaXMuX3NjZW5lc09wZW5lci5vbmNlKFNjZW5lc09wZW5lci5FVkVOVF9PUEVORUQsIHRoaXMsIHRoaXMuX29uQWxsU2NlbmVzT3BlbmVkKTtcclxuICAgICAgICB0aGlzLl9zY2VuZXNPcGVuZXIub24oU2NlbmVzT3BlbmVyLkVWRU5UX1BST0dSRVNTLCB0aGlzLCB0aGlzLl9vblNjZW5lc09wZW5lclByb2dyZXNzKTtcclxuICAgICAgICB0aGlzLl9zY2VuZXNPcGVuZXIub3BlbigpO1xyXG4gICAgfVxyXG4gICAgX29uU2NlbmVzT3BlbmVyUHJvZ3Jlc3ModmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zaG93UHJvZ3Jlc3MoSHhHbG9iYWxzLmdldExvYWRpbmdTY2VuZXModmFsdWUpKTtcclxuICAgIH1cclxuICAgIF9zaG93UHJvZ3Jlc3ModmFsdWUpIHtcclxuICAgICAgICB3aW5kb3cubG9hZGluZ0luZGljYXRvci5zaG93UHJvZ3Jlc3ModmFsdWUpXHJcbiAgICAgICAgdGhpcy5iYWNrZW5kLnNldExvYWRpbmdQcm9ncmVzcyhNYXRoLmZsb29yKHZhbHVlICogMTAwKSk7XHJcbiAgICB9XHJcbiAgICBfb25BbGxTY2VuZXNPcGVuZWQobGlzdCkge1xyXG4gICAgICAgIHRoaXMuX2Jsb3RzID0gbmV3IEJsb3RTcHJpdGVQb29sKCk7XHJcbiAgICAgICAgLy90aGlzLl9uZXdHYW1lKCk7XHJcbiAgICAgICAgLy90aGlzLmdhbWVWaWV3LnBhdXNlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuYmFja2VuZC5vbihCYWNrZW5kLkNMSUVOVF9QUk9GSUxFLCB0aGlzLCB0aGlzLl9vblByb2ZpbGUpO1xyXG4gICAgICAgIHRoaXMuX29uUHJvZmlsZSh0aGlzLmJhY2tlbmQucHJvZmlsZSk7XHJcblxyXG4gICAgICAgIHRoaXMubWVudVVJLmluaXQodGhpcy5iYWNrZW5kLCBTb2NpYWxBcGkuR1JPVVBfTElOSyk7XHJcbiAgICAgICAgdGhpcy5tZW51VUkub24oTWVudVVJLkVWRU5UX0lOVklURSwgdGhpcywgZnVuY3Rpb24oKSB7IFNvY2lhbEFwaS5pbnN0LnNob3dJbnZpdGVCb3goQ2hlc3RVSS5SRVFVRVNUX1RFWFQpOyB9KTtcclxuICAgICAgICB0aGlzLm1lbnVVSS5vbihNZW51VUkuRVZFTlRfUkFUSU5HLCB0aGlzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKFV0aWxzLmRldk1vZGUpIHRoaXMudHV0b3JVSS5kZXZWS1Njb3Jlcy5zaG93KHRoaXMuZ3AuYmVzdFNjb3JlKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgU29jaWFsQXBpLmluc3Quc2hvd0xlYWRlcmJvYXJkQm94KHRoaXMuZ3AubGV2ZWwpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5tZW51VUkub24oTWVudVVJLkVWRU5UX0NIRVNULCB0aGlzLCBmdW5jdGlvbigpIHsgV25kTWFuLmluc3QuY2hlc3RVSS5zaG93KCk7IH0pO1xyXG4gICAgICAgIHRoaXMubWVudVVJLm9uKE1lbnVVSS5FVkVOVF9TT0NJQUxfR1JPVVAsIHRoaXMsIGZ1bmN0aW9uKCkgeyB3aW5kb3cub3BlbihTb2NpYWxBcGkuR1JPVVBfTElOSywgJ19ibGFuaycpOyB9KTtcclxuICAgICAgICB0aGlzLm1lbnVVSS52aXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgV25kTWFuLmluc3QuZ2FtZVJlc3VsdFVJLmluaXQodGhpcy5iYWNrZW5kKTtcclxuICAgICAgICBXbmRNYW4uaW5zdC5nYW1lUmVzdWx0VUkub24oR2FtZVJlc3VsdFVJLkVWRU5UX1dORF9SRVNVTFQsIHRoaXMsIHRoaXMuX29uR2FtZVJlc3VsdFJlc3VsdCk7XHJcblxyXG4gICAgICAgIFduZE1hbi5pbnN0LmNoZXN0VUkuaW5pdCh0aGlzLmJhY2tlbmQpO1xyXG4gICAgICAgIFduZE1hbi5pbnN0LmJhbmtVSS5pbml0KHRoaXMuYmFja2VuZCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NjZW5lc09wZW5lci5vZmYoU2NlbmVzT3BlbmVyLkVWRU5UX1BST0dSRVNTLCB0aGlzLCB0aGlzLl9vblNjZW5lc09wZW5lclByb2dyZXNzKTtcclxuICAgICAgICB3aW5kb3cubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3Jlc2l6ZUNvbnRyb2xsZXIuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICB0aGlzLmdhbWVVSS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1lbnVVSS52aXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fbmV3R2FtZSgpO1xyXG4gICAgICAgIC8vdGhpcy5nYW1lVmlldy5wYXVzZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBVdGlscy5wcmVsb2FkSW1hZ2VzKFNvY2lhbEFwaS5pbnN0LmFwcEZyaWVuZHMubWFwKGYgPT4gZi5hdmF0YXIpKTtcclxuXHJcbiAgICAgICAgVXRpbHMuZm9yZWFjaENoaWxkUihMYXlhLlNjZW5lLnJvb3QsIGZ1bmN0aW9uKGNoaWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lICYmIFV0aWxzLnN0YXJ0c1dpdGgoY2hpbGQubmFtZSwgJ2J0bicpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5vbihMYXlhLkV2ZW50Lk1PVVNFX0RPV04sIG51bGwsIGZ1bmN0aW9uKCkgeyBTb3VuZE1hbi5wbGF5Q2xpY2soKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU29jaWFsQXBpLmluc3QubG9nTGV2ZWwodGhpcy5ncC5zdGF0ZS5sZXZlbCk7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3QubG9nQmVzdFNjb3JlKHRoaXMuZ3Auc3RhdGUuYmVzdFNjb3JlKTtcclxuXHJcbiAgICAgICAgd2luZG93LmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBfb25XbmRDaGFuZ2VkKHduZCkge1xyXG4gICAgICAgIHRoaXMubWVudVVJLnZpc2libGUgPSB3bmQgPT0gbnVsbDtcclxuICAgICAgICB0aGlzLl9maXhMYWJlbHMod25kKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcmlhbCB0byBmaXggZGlydHkgdGV4dCBzcHJpdGVzIG9mIGxhYmVscyBhZnRlciBzb21lIHRpbWUgb2YgcGxheWluZyBvbiBBbmRyb2lkIG9yIHN3aXRjaGluZyBjaGlsZCB3ZWJ2aWV3cyBpbiBWSyBhcHBcclxuICAgIC8vIGh0dHBzOi8vZGV2b2xlci5hdGxhc3NpYW4ubmV0L2Jyb3dzZS9ITFgtMjdcclxuICAgIF9maXhMYWJlbHMod25kKSB7XHJcbiAgICAgICAgaWYgKHduZClcclxuICAgICAgICAgICAgVXRpbHMuZm9yY2VVcGRhdGVMYWJlbHMod25kKTtcclxuICAgICAgICBpZiAodGhpcy5tZW51VUkudmlzaWJsZSlcclxuICAgICAgICAgICAgVXRpbHMuZm9yY2VVcGRhdGVMYWJlbHModGhpcy5tZW51VUkpO1xyXG4gICAgICAgIFV0aWxzLmZvcmNlVXBkYXRlTGFiZWxzKHRoaXMuZ2FtZVVJKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25GeE9wZW5lZChmeFNjZW5lKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBVdGlscy5nZXRDaGlsZHJlbk9mKGZ4U2NlbmUpO1xyXG4gICAgICAgIHRoaXMuX2Z4cyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgZnggPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICBpZiAoZngucGFydGljbGVTeXN0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Z4c1tmeC5uYW1lXSA9IGZ4O1xyXG4gICAgICAgICAgICAgICAgZngucGFydGljbGVTeXN0ZW0uZ3Jhdml0eU1vZGlmaWVyIC89IDkuODE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfb25HYW1lVUlPcGVuZWQoZ2FtZVVJKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lVUkgPSBnYW1lVUk7XHJcbiAgICAgICAgdGhpcy5nYW1lVUkuZ3AgPSB0aGlzLmdwO1xyXG4gICAgICAgIHRoaXMuZ2FtZVVJLmJhY2tlbmQgPSB0aGlzLmJhY2tlbmQ7XHJcbiAgICAgICAgZ2FtZVVJLm9uKEdhbWVVSS5FVkVOVF9BRERfQ09JTlMsIHRoaXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBTb3VuZE1hbi5wbGF5Q2xpY2soKTtcclxuICAgICAgICAgICAgaWYgKFNvY2lhbEFwaS5pc0JhbmtBdmFpbGFibGUpXHJcbiAgICAgICAgICAgICAgICBXbmRNYW4uaW5zdC5iYW5rVUkuc2hvdygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgZ2FtZVVJLm9uKEdhbWVVSS5FVkVOVF9ERVZfTkVYVF9MRVZFTCwgdGhpcywgZnVuY3Rpb24oKSB7IHRoaXMuYmFja2VuZC5nYW1lV2luKCk7IHRoaXMuX25ld0dhbWUoKTsgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmdhbWVVSS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfb25NZW51VUlPcGVuZWQobWVudVVJKSB7XHJcbiAgICAgICAgdGhpcy5tZW51VUkgPSBtZW51VUk7XHJcbiAgICAgICAgdGhpcy5tZW51VUkudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2FkZFduZCh3bmQpIHsgV25kTWFuLmluc3QuYWRkKHduZCk7IH1cclxuICAgIF9vblR1dG9yVUlPcGVuZWQodHV0b3JVSSkge1xyXG4gICAgICAgIHRoaXMudHV0b3JVSSA9IHR1dG9yVUk7XHJcbiAgICAgICAgdGhpcy50dXRvclVJLmluaXQodGhpcy5iYWNrZW5kKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBfc3RhcnRHYW1lKCkge1xyXG4gICAgLy8gICAgIHRoaXMubWVudVVJLnZpc2libGUgPSBmYWxzZTtcclxuICAgIC8vICAgICBpZiAodGhpcy5nYW1lVmlldyAmJiAhdGhpcy5nYW1lVmlldy5oZWxpeEdhbWUuZmluaXNoZWQpXHJcbiAgICAvLyAgICAgICAgIHJldHVybjtcclxuICAgIC8vICAgICB0aGlzLl9uZXdHYW1lKCk7XHJcbiAgICAvLyB9XHJcbiAgICBfbmV3R2FtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5nYW1lVmlldykge1xyXG4gICAgICAgICAgICB0aGlzLl9meHNSZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5ncC5kZXRhY2hHYW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVZpZXcuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVWaWV3ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VtZVN0YXRlID0gdGhpcy5iYWNrZW5kLnVzZXJPcHRpb25zLnJlc3VtZVN0YXRlO1xyXG4gICAgICAgIC8vdmFyIGdlbmVyYXRvciA9IG5ldyBIZWxpeEdlbmVyYXRvckluZmluaXRSYW5kb20oNiwgMSwgMywgNDApO1xyXG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBuZXcgSGVsaXhHZW5lcmF0b3JDb25maWdGbG9vcnModGhpcy5oZWxpeENvbmZpZy5nZW5lcmF0ZUZsb29ycyh0aGlzLmdwLnN0YXRlLmxldmVsKSwgdGhpcy5oZWxpeENvbmZpZy5tb3ZlRnJlcSk7XHJcbiAgICAgICAgdGhpcy5nYW1lVmlldyA9IG5ldyBIZWxpeEdhbWVWaWV3KGdlbmVyYXRvciwgcmVzdW1lU3RhdGUsIEhlbGl4U2tpbi5nZXRMZXZlbCh0aGlzLmdwLnN0YXRlLmxldmVsKSwgdGhpcy5nYW1lVUksIHRoaXMuX2Jsb3RzLCB0aGlzLl9meHMpO1xyXG4gICAgICAgIExheWEuU2NlbmUucm9vdC5hZGRDaGlsZEF0KHRoaXMuZ2FtZVZpZXcsIDApO1xyXG4gICAgICAgIHRoaXMuZ3AuYXR0YWNoR2FtZSh0aGlzLmdhbWVWaWV3LmhlbGl4R2FtZSk7XHJcbiAgICAgICAgaWYgKHJlc3VtZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3AuaXNMYXN0R2FtZVdhc0Jlc3QgPSByZXN1bWVTdGF0ZS5pc0xhc3RHYW1lV2FzQmVzdDtcclxuICAgICAgICAgICAgdGhpcy5ncC5jdXJTY29yZSA9IHJlc3VtZVN0YXRlLnNjb3JlO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tlbmQuX3Jlc3VtZUNvdW50ID0gcmVzdW1lU3RhdGUuYmVfcmVzdW1lQ291bnQ7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dSZXN1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lVmlldy5oZWxpeEdhbWUub24oSGVsaXhHYW1lLkVWRU5UX1JFU1VMVCwgdGhpcywgZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHZhciBnYW1lID0gdGhpcy5nYW1lVmlldy5oZWxpeEdhbWU7XHJcbiAgICAgICAgICAgIGlmIChnYW1lLmZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2luID0gZ2FtZS5yZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9XSU47XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5nYW1lV2luKHRoaXMuZ3AuY3VyU2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrZW5kLmdhbWVMb29zZSh0aGlzLmdwLmN1clNjb3JlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bWVTdGF0ZSA9IGdhbWUuZ2V0UmVzdW1lU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bWVTdGF0ZS5zY29yZSA9IHRoaXMuZ3AuY3VyU2NvcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lU3RhdGUuaXNMYXN0R2FtZVdhc0Jlc3QgPSB0aGlzLmdwLmlzTGFzdEdhbWVXYXNCZXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZVN0YXRlLmJlX3Jlc3VtZUNvdW50ID0gdGhpcy5iYWNrZW5kLl9yZXN1bWVDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tlbmQudXNlck9wdGlvbnMucmVzdW1lU3RhdGUgPSByZXN1bWVTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93UmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9XbmRNYW4uaW5zdC5nYW1lUmVzdWx0VUkuc2hvd1Jlc3VsdCh3aW4sIHRoaXMuZ3AuaXNMYXN0R2FtZVdhc0Jlc3QsIHRoaXMuZ3AubGV2ZWwsIHRoaXMuZ3AuYmVzdFNjb3JlKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZVZpZXcub24oSGVsaXhHYW1lVmlldy5FVkVOVF9TVEFSVEVELCB0aGlzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ3AuY3VyU2NvcmUgPT0gMClcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZC5nYW1lU3RhcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51VUkudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2Z4c0FkZFRvKHRoaXMuZ2FtZVZpZXcpO1xyXG4gICAgICAgIHRoaXMuYmFja2VuZC5mcmllbmRTY29yZVVwZGF0ZShTb2NpYWxBcGkuaW5zdC5hcHBGcmllbmRzKTtcclxuICAgICAgICB0aGlzLl9hZFNob3dQb2xpY3kub25OZXdHYW1lKCk7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuYmFja2VuZC51c2VyRXZlbnRzLkFkLnNob3dCZWZvcmVTdGFydCkge1xyXG4gICAgICAgIC8vICAgICBjb25zdCBTSE9XX0lOVEVSVkFMID0gMztcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2Fkc1Nob3dDb3VudGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuX2Fkc1Nob3dDb3VudGVyID0gU0hPV19JTlRFUlZBTCAtIDE7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9hZHNTaG93Q291bnRlcisrO1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMuX2Fkc1Nob3dDb3VudGVyID49IFNIT1dfSU5URVJWQUwpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLl9hZHNTaG93Q291bnRlciA9IDA7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgU29jaWFsQXBpLmluc3QuYWRzU2hvdygpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgX3Nob3dSZXN1bHQoKSB7XHJcbiAgICAgICAgV25kTWFuLmluc3QuZ2FtZVJlc3VsdFVJLnNob3dSZXN1bHQodGhpcy5nYW1lVmlldy5oZWxpeEdhbWUucmVzdWx0ID09IEhlbGl4R2FtZS5SRVNVTFRfV0lOLCB0aGlzLmdwLmlzTGFzdEdhbWVXYXNCZXN0LCB0aGlzLmdwLmxldmVsLCB0aGlzLmdwLmJlc3RTY29yZSk7XHJcbiAgICB9XHJcbiAgICBfb25HYW1lUmVzdWx0UmVzdWx0KHJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuYmFja2VuZC51c2VyT3B0aW9ucy5yZXN1bWVTdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBHYW1lUmVzdWx0VUkuV05EX1JFU1VMVF9SRVNVTUUpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lVmlldy5oZWxpeEdhbWUucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMubWVudVVJLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PSBHYW1lUmVzdWx0VUkuV05EX1JFU1VMVF9SRVNUQVJUKSB7XHJcbiAgICAgICAgICAgIHZhciB3aW4gPSB0aGlzLmdhbWVWaWV3LmhlbGl4R2FtZS5yZXN1bHQgPT0gSGVsaXhHYW1lLlJFU1VMVF9XSU47XHJcbiAgICAgICAgICAgIHZhciBjdXJTY29yZSA9IHRoaXMuZ3AuY3VyU2NvcmU7XHJcbiAgICAgICAgICAgIHZhciBwcmV2U2NvcmUgPSB0aGlzLmdwLmJlc3RTY29yZVByZXY7XHJcbiAgICAgICAgICAgIHRoaXMuX25ld0dhbWUoKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51VUkudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICghd2luKVxyXG4gICAgICAgICAgICAgICAgV25kTWFuLmluc3QuZnJpZW5kRGVmZWF0VUkudHJ5U2hvdyhjdXJTY29yZSwgcHJldlNjb3JlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2Z4c1JlbW92ZSgpIHtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2Z4cylcclxuICAgICAgICAgICAgVXRpbHMucmVtb3ZlRnJvbVBhcmVudCh0aGlzLl9meHNbbmFtZV0pO1xyXG4gICAgfVxyXG4gICAgX2Z4c0FkZFRvKHNjZW5lKSB7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl9meHMpXHJcbiAgICAgICAgICAgIHdpbmRvdy5sYXN0RnggPSBzY2VuZS5hZGRDaGlsZCh0aGlzLl9meHNbbmFtZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJhY2tlbmQgcmVzcG9uY2VzXHJcbiAgICBfb25Qcm9maWxlKHByb2ZpbGUpIHtcclxuICAgICAgICB0aGlzLmdwLnN0YXRlLmxldmVsID0gcHJvZmlsZS5sZXZlbDtcclxuICAgICAgICB0aGlzLmdwLnN0YXRlLmJlc3RTY29yZSA9IHByb2ZpbGUuc2NvcmVzTWF4O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IE1haW5VSSBmcm9tIFwiLi9NYWluVUlcIlxyXG5pbXBvcnQgVXNlckV2ZW50cyBmcm9tIFwiLi9Vc2VyRXZlbnRzXCJcclxuaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIlxyXG5pbXBvcnQgU291bmRNYW4gZnJvbSBcIi4vU291bmRNYW5cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbnVVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgLy8gc3RhdGljIGdldCBTVEFURV9HQU1FKCkgeyByZXR1cm4gXCJHQU1FXCI7IH1cclxuICAgIC8vIHN0YXRpYyBnZXQgU1RBVEVfREVGQVVMVCgpIHsgcmV0dXJuIFwiREVGQVVMVFwiOyB9XHJcbiAgICAvLyBzdGF0aWMgZ2V0IFNUQVRFX0JFU1RfU0NPUkUoKSB7IHJldHVybiBcIkJFU1RfU0NPUkVcIjsgfVxyXG4gICAgLy8gc3RhdGljIGdldCBTVEFURV9MRVZFTFVQKCkgeyByZXR1cm4gXCJMRVZFTFVQXCI7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0lOVklURSgpIHsgcmV0dXJuIFwiSU5WSVRFXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfUkFUSU5HKCkgeyByZXR1cm4gXCJSQVRJTkdcIjsgfVxyXG4gICAgc3RhdGljIGdldCBFVkVOVF9DSEVTVCgpIHsgcmV0dXJuIFwiQ0hFU1RcIjsgfVxyXG4gICAgc3RhdGljIGdldCBFVkVOVF9TT0NJQUxfR1JPVVAoKSB7IHJldHVybiBcIlNPQ0lBTF9HUk9VUFwiOyB9XHJcbiAgICAvL3N0YXRpYyBnZXQgRVZFTlRfQUNISUVWUygpIHsgcmV0dXJuIFwiQUNISUVWU1wiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbihcIm9uVmlld0NyZWF0ZWRcIiwgdGhpcywgdGhpcy5fb25WaWV3Q3JlYXRlZCk7XHJcbiAgICB9XHJcbiAgICAvL2dldCBzdGF0ZSgpIHsgcmV0dXJuIHRoaXMuX3N0YXRlOyB9XHJcbiAgICBpbml0KGJhY2tlbmQsIGdyb3VwTGluaykge1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSBiYWNrZW5kO1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5vbihVc2VyRXZlbnRzLkVWRU5UX0NIRVNULCB0aGlzLCB0aGlzLl9vbkNoZXN0RXZlbnQpO1xyXG4gICAgICAgIHRoaXMuX29uQ2hlc3RFdmVudCgpO1xyXG4gICAgICAgIHN1cGVyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzWUEpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51QmxvY2sudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI2dyb3VwTGlua1wiKS5hdHRyKFwiaHJlZlwiLCBncm91cExpbmspO1xyXG4gICAgICAgICQoXCIjZ3JvdXBMaW5rXCIpLmNsaWNrKGZ1bmN0aW9uKCkgeyBTb3VuZE1hbi5wbGF5Q2xpY2soKTsgfSlcclxuICAgIH1cclxuICAgIGdldCB2aXNpYmxlKCkgeyByZXR1cm4gc3VwZXIudmlzaWJsZTsgfVxyXG4gICAgc2V0IHZpc2libGUodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gc3VwZXIudmlzaWJsZSkge1xyXG4gICAgICAgICAgICBzdXBlci52aXNpYmxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNncm91cExpbmtcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgdGhpcy5fb25GcmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkZyYW1lKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2dyb3VwTGlua1wiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBMYXlhLnRpbWVyLmNsZWFyQWxsKDEsIHRoaXMsIHRoaXMuX29uRnJhbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vblZpZXdDcmVhdGVkKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5sYmxTb2NpYWxHcm91cC50ZXh0ID0gU29jaWFsQXBpLkdST1VQX1RJVExFO1xyXG4gICAgICAgIHRoaXMuYnRuSW52aXRlLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyBfdGhpcy5ldmVudChNZW51VUkuRVZFTlRfSU5WSVRFKTsgfSk7XHJcbiAgICAgICAgdGhpcy5idG5SYXRpbmcub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IF90aGlzLmV2ZW50KE1lbnVVSS5FVkVOVF9SQVRJTkcpOyB9KTtcclxuICAgICAgICB0aGlzLmJ0bkNoZXN0Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIGZ1bmN0aW9uKCkgeyBfdGhpcy5ldmVudChNZW51VUkuRVZFTlRfQ0hFU1QpOyB9KTtcclxuICAgICAgICB0aGlzLmJ0bkNoZXN0LnByZWZpeCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5idG5Tb2NpYWxHcm91cC5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbigpIHsgX3RoaXMuZXZlbnQoTWVudVVJLkVWRU5UX1NPQ0lBTF9HUk9VUCk7IH0pO1xyXG4gICAgICAgIGlmIChTb2NpYWxBcGkuaXNPSykge1xyXG4gICAgICAgICAgICB0aGlzLmJ0blJhdGluZy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbnMgPSBbdGhpcy5idG5JbnZpdGUsIHRoaXMuYnRuQ2hlc3QsIHRoaXMuYnRuU29jaWFsR3JvdXBdO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25zID0gW3RoaXMuYnRuSW52aXRlLCB0aGlzLmJ0blJhdGluZywgdGhpcy5idG5DaGVzdCwgdGhpcy5idG5Tb2NpYWxHcm91cF07XHJcbiAgICAgICAgdGhpcy5vbihMYXlhLkV2ZW50LlJFU0laRSwgdGhpcywgdGhpcy5fb25SZXNpemUpO1xyXG4gICAgICAgIHRoaXMuX29uUmVzaXplKCk7XHJcbiAgICB9XHJcbiAgICBfb25DaGVzdEV2ZW50KCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5DaGVzdDtcclxuICAgICAgICB0aGlzLmxibENoZXN0VmFsdWUudGV4dCA9IFN0cmluZyhldmVudC5tb25leV9zb2Z0KSArICcgLyAnICsgZXZlbnQubW9uZXlfc29mdF9tYXg7XHJcbiAgICB9XHJcbiAgICBfb25SZXNpemUoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9idXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBidXR0b24gPSB0aGlzLl9idXR0b25zW2ldO1xyXG4gICAgICAgICAgICBidXR0b24ubGVmdCA9IGJ1dHRvbi5yaWdodCA9IGJ1dHRvbi5jZW50ZXJYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBidXR0b24ueCA9IHRoaXMud2lkdGggKiAoKGkgKyAwLjUpIC8gdGhpcy5fYnV0dG9ucy5sZW5ndGgpIC0gYnV0dG9uLndpZHRoICogMC41O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9vbkZyYW1lKCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuX2JhY2tlbmQudXNlckV2ZW50cy5DaGVzdDtcclxuICAgICAgICB0aGlzLmxibENoZXN0VmFsdWUudmlzaWJsZSA9IGV2ZW50LmV4cGlyZWQ7XHJcbiAgICAgICAgdGhpcy5sYmxIaW50VGltZXIudmlzaWJsZSA9ICFldmVudC5leHBpcmVkO1xyXG4gICAgICAgIGlmICghZXZlbnQuZXhwaXJlZClcclxuICAgICAgICAgICAgdGhpcy5idG5DaGVzdC51cGRhdGUoZXZlbnQpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW91c2VDdHJsIHtcclxuICAgIGNvbnN0cnVjdG9yKGRpc3BhdGNoZXIsIGdldHRlciwgc2V0dGVyKSB7XHJcbiAgICAgICAgdGhpcy5fZ2V0dGVyID0gZ2V0dGVyO1xyXG4gICAgICAgIHRoaXMuX3NldHRlciA9IHNldHRlcjtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcclxuICAgICAgICB0aGlzLl9jdHggPSB7fTtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5fT25Nb3VzZURvd24pO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIub24oTGF5YS5FdmVudC5NT1VTRV9VUCwgdGhpcywgdGhpcy5fT25Nb3VzZVVwKTtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLm9uKExheWEuRXZlbnQuTU9VU0VfT1VULCB0aGlzLCB0aGlzLl9Pbk1vdXNlVXApO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLl9Pbk1vdXNlVXAoKTtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLm9mZihMYXlhLkV2ZW50Lk1PVVNFX0RPV04sIHRoaXMsIHRoaXMuX09uTW91c2VEb3duKTtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLm9mZihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLl9Pbk1vdXNlVXApO1xyXG4gICAgfVxyXG4gICAgX09uTW91c2VEb3duKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNEb3duKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5faXNEb3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jdHguc3RhcnRWYWx1ZSA9IHRoaXMuX2dldHRlcigpO1xyXG4gICAgICAgIHRoaXMuX21vdXNlRG93blggPSBlLnN0YWdlWDtcclxuICAgICAgICB0aGlzLl9tb3VzZURvd25ZID0gZS5zdGFnZVk7XHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hlci5vbihMYXlhLkV2ZW50Lk1PVVNFX01PVkUsIHRoaXMsIHRoaXMuX09uTW91c2VNb3ZlKTtcclxuICAgIH1cclxuICAgIF9Pbk1vdXNlVXAoZSkge1xyXG4gICAgICAgIHRoaXMuX2lzRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIub2ZmKExheWEuRXZlbnQuTU9VU0VfTU9WRSwgdGhpcywgdGhpcy5fT25Nb3VzZU1vdmUpO1xyXG4gICAgfVxyXG4gICAgX09uTW91c2VNb3ZlKGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzRG93bikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2N0eC5kZWx0YVggPSBlLnN0YWdlWCAtIHRoaXMuX21vdXNlRG93blg7XHJcbiAgICAgICAgdGhpcy5fY3R4LmRlbHRhWSA9IGUuc3RhZ2VZIC0gdGhpcy5fbW91c2VEb3duWTtcclxuICAgICAgICB0aGlzLl9zZXR0ZXIodGhpcy5fY3R4KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ldEVycm9ycyB7XHJcbiAgICBzdGF0aWMgZ2V0IE9LKCkgeyByZXR1cm4gMjAwOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEpTT05fUEFSU0UoKSB7IHJldHVybiAyNTA7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IEJBRF9SRVFVRVNUKCkgeyByZXR1cm4gNDAwOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFVOQVVUSE9SSVpFRCgpIHsgcmV0dXJuIDQwMTsgfVxyXG4gICAgc3RhdGljIGdldCBGT1JCSURERU4oKSB7IHJldHVybiA0MDM7IH1cclxuICAgIHN0YXRpYyBnZXQgTk9UX0ZPVU5EKCkgeyByZXR1cm4gNDA0OyB9XHJcbiAgICBzdGF0aWMgZ2V0IE1FVEhPRF9OT1RfQUxMT1dFRCgpIHsgcmV0dXJuIDQwNTsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgSU5URVJOQUxfU0VSVkVSX0VSUk9SKCkgeyByZXR1cm4gNTAwOyB9XHJcbiAgICBzdGF0aWMgZ2V0IFNFUlZJQ0VfVU5BVkFJTEFCTEUoKSB7IHJldHVybiA1MDM7IH1cclxufSIsImltcG9ydCBOZXRFcnJvcnMgZnJvbSBcIi4vTmV0RXJyb3JzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOZXR3b3JrIHtcclxuICAgIGNvbnN0cnVjdG9yKHVybCkge1xyXG4gICAgICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIH1cclxuICAgIHBvc3QoZGF0YSwgb25TdWNjZXNzLCBvbkZhaWwpIHtcclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHRoaXMuX3VybCwgdHJ1ZSk7XHJcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRmFpbChOZXRFcnJvcnMuSlNPTl9QQVJTRSwgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9uRmFpbCh4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICAgICAgeGhyLnNlbmQoZGF0YVN0cik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQmFzZVdpbmRvdyBmcm9tIFwiLi9CYXNlV2luZG93XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyUmVzdWx0VUkgZXh0ZW5kcyBCYXNlV2luZG93IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICBzaG93Q29pbnModmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxibFZhbHVlLnRleHQgPSBTdHJpbmcodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuL1V0aWxzXCJcclxuaW1wb3J0IFNvdW5kTWFuIGZyb20gXCIuL1NvdW5kTWFuXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb21vVmlldyBleHRlbmRzIExheWEuUGFuZWwge1xyXG5cclxuICAgIGluaXQobGlua1VybCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5fbGlua1VybCA9IGxpbmtVcmw7XHJcbiAgICAgICAgLy90aGlzLl90YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgVXRpbHMuaW5pdFByb3BzKHRoaXMsIFtcclxuICAgICAgICAgICAgLy8nbGluaycsXHJcbiAgICAgICAgICAgICdjbG9zZScsXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZS5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLl9vbkNsb3NlQ2xpY2spO1xyXG4gICAgICAgIC8vIEhPVEZJWDogdHJhY2tpbmcgb2YgbmF0aXZlIGNsaWNrcyB0byBwcm9jZXNzIGNvcnJlY3RseSB3aW5kb3cub3BlbiguLi4pXHJcbiAgICAgICAgLy8gdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXlhQ2FudmFzJyk7XHJcbiAgICAgICAgLy8gdmFyIG9uQ2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLl9hbGxvd0NsaWNrTGluaylcclxuICAgICAgICAvLyAgICAgICAgIGxheWEuZXZlbnRzLk1vdXNlTWFuYWdlci5pbnN0YW5jZS5jaGVjayh3aW5kb3cuc3RhZ2UsIGUucGFnZVggfHwgZS5jbGllbnRYLCBlLnBhZ2VZIHx8IGUuY2xpZW50WSwgdGhpcy5fb25MaW5rQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgLy8gY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XHJcbiAgICAgICAgLy8gY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkNsaWNrKTtcclxuICAgICAgICAvLyBDcmVhdGUgZW1wdHkgY2FsbGJhY2sgdG8gbWFrZSB0aGlzLmxpbmsgY2xpY2thYmxlXHJcbiAgICAgICAgLy90aGlzLmxpbmsub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgZnVuY3Rpb24oKSB7IH0pO1xyXG4gICAgICAgICQoXCIjcmFjY29vbkxpbmtcIikuYXR0cihcImhyZWZcIiwgbGlua1VybCk7XHJcbiAgICAgICAgJChcIiNyYWNjb29uTGlua1wiKS5hdHRyKFwidGFyZ2V0XCIsIHRhcmdldCk7XHJcbiAgICAgICAgJChcIiNyYWNjb29uTGlua1wiKS5jbGljayhmdW5jdGlvbigpIHsgU291bmRNYW4ucGxheUNsaWNrKCk7IH0pXHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5fbGlua1VybClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgJChcIiNyYWNjb29uTGlua1wiKS5zaG93KCk7XHJcbiAgICAgICAgLy90aGlzLl9hbGxvd0NsaWNrTGluayA9IGZhbHNlOyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aGlzLl9hbGxvd0NsaWNrTGluayA9IHRydWU7IH0uYmluZCh0aGlzKSwgMTApO1xyXG4gICAgICAgIFNvdW5kTWFuLmxvY2sodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICQoXCIjcmFjY29vbkxpbmtcIikuaGlkZSgpO1xyXG4gICAgICAgIC8vdGhpcy5fYWxsb3dDbGlja0xpbmsgPSBmYWxzZTtcclxuICAgICAgICBTb3VuZE1hbi51bmxvY2sodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gX29uTGlua0NsaWNrKHNwcml0ZSkge1xyXG4gICAgLy8gICAgIGlmIChzcHJpdGUgPT0gdGhpcy5saW5rKVxyXG4gICAgLy8gICAgICAgICB3aW5kb3cub3Blbih0aGlzLl9saW5rVXJsLCB0aGlzLl90YXJnZXQpO1xyXG4gICAgLy8gfVxyXG4gICAgX29uQ2xvc2VDbGljaygpIHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxufSIsIi8vaW1wb3J0IHsgUHJpbWl0aXZlTWVzaCB9IGZyb20gbGF5YS5kMy5yZXNvdXJjZS5tb2RlbHM7XHJcbi8vaW1wb3J0IHsgVmVydGV4UG9zaXRpb25Ob3JtYWxUZXh0dXJlIH0gZnJvbSBsYXlhLmQzLmdyYXBoaWNzLlZlcnRleDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJpbmdTbGljZU1lc2ggZXh0ZW5kcyBMYXlhLlByaW1pdGl2ZU1lc2gge1xyXG4gICAgY29uc3RydWN0b3IocmFkaXVzLCByYWRpdXNJbm5lciwgaGVpZ2h0LCBkZWdCZWdpbiwgZGVnRW5kLCBzbGljZXMsIHJhZGl1c0J1bXApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX3JhZGl1cyA9IHJhZGl1cztcclxuICAgICAgICB0aGlzLl9yYWRpdXNJbm5lciA9IHJhZGl1c0lubmVyO1xyXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLl9kZWdCZWdpbiA9IGRlZ0JlZ2luO1xyXG4gICAgICAgIHRoaXMuX2RlZ0VuZCA9IGRlZ0VuZDtcclxuICAgICAgICB0aGlzLl9zbGljZXMgPSBzbGljZXM7XHJcbiAgICAgICAgdGhpcy5fcmFkaXVzQnVtcCA9IHJhZGl1c0J1bXAgPyByYWRpdXNCdW1wIDogMDtcclxuICAgICAgICB0aGlzLl9jcmVhdGUoKTtcclxuICAgIH1cclxuICAgIF9nZXRSQnVtcCh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JhZGl1c0J1bXAgKiA0ICogdCAqICgxIC0gdCk7XHJcbiAgICB9XHJcbiAgICBfY3JlYXRlKCkge1xyXG4gICAgICAgIHZhciBzbGljZXMgPSB0aGlzLl9zbGljZXM7XHJcbiAgICAgICAgdmFyIHZDb3VudCA9XHJcbiAgICAgICAgICAgIChzbGljZXMgKyAxKSAqIDIgKyAgLy8gdG9wIGNhcFxyXG4gICAgICAgICAgICAoc2xpY2VzICsgMSkgKiAyICsgIC8vIG91dGVyIHdhbGxcclxuICAgICAgICAgICAgKHNsaWNlcyArIDEpICogMiArICAvLyBpbm5lciB3YWxsXHJcbiAgICAgICAgICAgIChzbGljZXMgKyAxKSAqIDIgKyAgIC8vIGJvdHRvbSBjYXBcclxuICAgICAgICAgICAgNCArIDQ7IC8vIDIgc2lkZSBjYXBzXHJcbiAgICAgICAgdmFyIGlDb3VudCA9IHNsaWNlcyAqIDIgKiAzICogNCArIDQgKiAzO1xyXG4gICAgICAgIHZhciB2RGVjbCA9IExheWEuVmVydGV4UG9zaXRpb25Ob3JtYWxUZXh0dXJlLnZlcnRleERlY2xhcmF0aW9uO1xyXG4gICAgICAgIHZhciB2RmxvYXRTdHJpZGUgPSB2RGVjbC52ZXJ0ZXhTdHJpZGUgLyA0O1xyXG4gICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBGbG9hdDMyQXJyYXkodkNvdW50ICogdkZsb2F0U3RyaWRlKTtcclxuICAgICAgICB2YXIgaW5kcyA9IG5ldyBVaW50MTZBcnJheShpQ291bnQpO1xyXG4gICAgICAgIHZhciB2YyA9IDA7XHJcbiAgICAgICAgdmFyIGRlZ1RvUmFkID0gKE1hdGguUEkgKiAyLjApIC8gMzYwLjA7XHJcbiAgICAgICAgdmFyIGRhID0gKHRoaXMuX2RlZ0VuZCAtIHRoaXMuX2RlZ0JlZ2luKSAvIHNsaWNlcyAqIGRlZ1RvUmFkO1xyXG4gICAgICAgIHZhciBmcm9tX2EgPSB0aGlzLl9kZWdCZWdpbiAqIGRlZ1RvUmFkO1xyXG4gICAgICAgIHZhciB0b19hID0gdGhpcy5fZGVnRW5kICogZGVnVG9SYWQ7XHJcbiAgICAgICAgdmFyIGEgPSAwLjA7XHJcbiAgICAgICAgdmFyIGhhbGZIID0gdGhpcy5faGVpZ2h0ICogMC41O1xyXG4gICAgICAgIHZhciBkdCA9IDEgLyBzbGljZXM7XHJcbiAgICAgICAgdmFyIHQgPSAwLjA7XHJcbiAgICAgICAgLy8gVG9wIGNhcFxyXG4gICAgICAgIGEgPSBmcm9tX2E7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gc2xpY2VzOyBpKyssIGEgKz0gZGEpIHtcclxuICAgICAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKGEpO1xyXG4gICAgICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4oYSk7XHJcbiAgICAgICAgICAgIHZhciB0eCA9ICgxICsgY29zKSAqIDAuNTtcclxuICAgICAgICAgICAgdmFyIHR5ID0gKDEgKyBzaW4pICogMC41O1xyXG4gICAgICAgICAgICB2YXIgciA9IHRoaXMuX3JhZGl1cyArIHRoaXMuX2dldFJCdW1wKGkgLyBzbGljZXMpO1xyXG4gICAgICAgICAgICAvLyBPdXRlclxyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHIgKiBjb3M7IHZlcnRzW3ZjKytdID0gaGFsZkg7IHZlcnRzW3ZjKytdID0gciAqIHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0eDsgdmVydHNbdmMrK10gPSB0eTtcclxuICAgICAgICAgICAgLy8gSW5uZXJcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0aGlzLl9yYWRpdXNJbm5lciAqIGNvczsgdmVydHNbdmMrK10gPSBoYWxmSDsgdmVydHNbdmMrK10gPSB0aGlzLl9yYWRpdXNJbm5lciAqIHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0eDsgdmVydHNbdmMrK10gPSB0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW5uZXIgc2lkZVxyXG4gICAgICAgIGEgPSBmcm9tX2E7XHJcbiAgICAgICAgdCA9IDAuMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBzbGljZXM7IGkrKywgdCArPSBkdCwgYSArPSBkYSkge1xyXG4gICAgICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoYSk7XHJcbiAgICAgICAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihhKTtcclxuICAgICAgICAgICAgdmFyIHggPSB0aGlzLl9yYWRpdXNJbm5lciAqIGNvcztcclxuICAgICAgICAgICAgdmFyIHkgPSB0aGlzLl9yYWRpdXNJbm5lciAqIHNpbjtcclxuICAgICAgICAgICAgLy8gVG9wXHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0geDsgdmVydHNbdmMrK10gPSBoYWxmSDsgdmVydHNbdmMrK10gPSB5O1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IGNvczsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0OyB2ZXJ0c1t2YysrXSA9IDE7XHJcbiAgICAgICAgICAgIC8vIEJvdHRvbVxyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHg7IHZlcnRzW3ZjKytdID0gLWhhbGZIOyB2ZXJ0c1t2YysrXSA9IHk7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gY29zOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHQ7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gT3V0ZXIgc2lkZVxyXG4gICAgICAgIGEgPSBmcm9tX2E7XHJcbiAgICAgICAgdCA9IDAuMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBzbGljZXM7IGkrKywgdCArPSBkdCwgYSArPSBkYSkge1xyXG4gICAgICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoYSk7XHJcbiAgICAgICAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihhKTtcclxuICAgICAgICAgICAgdmFyIHIgPSB0aGlzLl9yYWRpdXMgKyB0aGlzLl9nZXRSQnVtcChpIC8gc2xpY2VzKTtcclxuICAgICAgICAgICAgdmFyIHggPSByICogY29zO1xyXG4gICAgICAgICAgICB2YXIgeSA9IHIgKiBzaW47XHJcbiAgICAgICAgICAgIC8vIEJvdHRvbVxyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHg7IHZlcnRzW3ZjKytdID0gLWhhbGZIOyB2ZXJ0c1t2YysrXSA9IHk7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gY29zOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHQ7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgLy8gVG9wXHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0geDsgdmVydHNbdmMrK10gPSBoYWxmSDsgdmVydHNbdmMrK10gPSB5O1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IGNvczsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0OyB2ZXJ0c1t2YysrXSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEJvdHRvbSBjYXBcclxuICAgICAgICBhID0gZnJvbV9hO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHNsaWNlczsgaSsrLCBhICs9IGRhKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhKTtcclxuICAgICAgICAgICAgdmFyIHNpbiA9IE1hdGguc2luKGEpO1xyXG4gICAgICAgICAgICB2YXIgdHggPSAoMSArIGNvcykgKiAwLjU7XHJcbiAgICAgICAgICAgIHZhciB0eSA9ICgxICsgc2luKSAqIDAuNTtcclxuICAgICAgICAgICAgdmFyIHIgPSB0aGlzLl9yYWRpdXMgKyB0aGlzLl9nZXRSQnVtcChpIC8gc2xpY2VzKTtcclxuICAgICAgICAgICAgLy8gSW5udGVyXHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gdGhpcy5fcmFkaXVzSW5uZXIgKiBjb3M7IHZlcnRzW3ZjKytdID0gLWhhbGZIOyB2ZXJ0c1t2YysrXSA9IHRoaXMuX3JhZGl1c0lubmVyICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gLTE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0eDsgdmVydHNbdmMrK10gPSB0eTtcclxuICAgICAgICAgICAgLy8gT3V0ZXJcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSByICogY29zOyB2ZXJ0c1t2YysrXSA9IC1oYWxmSDsgdmVydHNbdmMrK10gPSByICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gLTE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSB0eDsgdmVydHNbdmMrK10gPSB0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2lkZSBjYXBzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgciA9IHRoaXMuX3JhZGl1cztcclxuICAgICAgICAgICAgdmFyIHJpID0gdGhpcy5fcmFkaXVzSW5uZXI7XHJcbiAgICAgICAgICAgIC8vIEJlZ2luIGNhcFxyXG4gICAgICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoZnJvbV9hKTtcclxuICAgICAgICAgICAgdmFyIHNpbiA9IE1hdGguc2luKGZyb21fYSk7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gciAqIGNvczsgdmVydHNbdmMrK10gPSBoYWxmSDsgdmVydHNbdmMrK10gPSByICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHNpbjsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IC1jb3M7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHJpICogY29zOyB2ZXJ0c1t2YysrXSA9IGhhbGZIOyB2ZXJ0c1t2YysrXSA9IHJpICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHNpbjsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IC1jb3M7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gMTsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHIgKiBjb3M7IHZlcnRzW3ZjKytdID0gLWhhbGZIOyB2ZXJ0c1t2YysrXSA9IHIgKiBzaW47XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gc2luOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gLWNvcztcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDE7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gcmkgKiBjb3M7IHZlcnRzW3ZjKytdID0gLWhhbGZIOyB2ZXJ0c1t2YysrXSA9IHJpICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHNpbjsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IC1jb3M7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gMTsgdmVydHNbdmMrK10gPSAxO1xyXG4gICAgICAgICAgICAvLyBFbmQgY2FwXHJcbiAgICAgICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyh0b19hKTtcclxuICAgICAgICAgICAgdmFyIHNpbiA9IE1hdGguc2luKHRvX2EpO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHJpICogY29zOyB2ZXJ0c1t2YysrXSA9IGhhbGZIOyB2ZXJ0c1t2YysrXSA9IHJpICogc2luO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IC1zaW47IHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSBjb3M7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IHIgKiBjb3M7IHZlcnRzW3ZjKytdID0gaGFsZkg7IHZlcnRzW3ZjKytdID0gciAqIHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAtc2luOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gY29zO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSByaSAqIGNvczsgdmVydHNbdmMrK10gPSAtaGFsZkg7IHZlcnRzW3ZjKytdID0gcmkgKiBzaW47XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gLXNpbjsgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IGNvcztcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDE7XHJcbiAgICAgICAgICAgIHZlcnRzW3ZjKytdID0gciAqIGNvczsgdmVydHNbdmMrK10gPSAtaGFsZkg7IHZlcnRzW3ZjKytdID0gciAqIHNpbjtcclxuICAgICAgICAgICAgdmVydHNbdmMrK10gPSAtc2luOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gY29zO1xyXG4gICAgICAgICAgICB2ZXJ0c1t2YysrXSA9IDE7IHZlcnRzW3ZjKytdID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSW5kaWNlc1xyXG4gICAgICAgIHZhciBpYyA9IDA7XHJcbiAgICAgICAgdmFyIGl2ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgeyAvLyA0IHN0cmlwcyAtIHRvcCBjYXAsIGlubmVyIHNpZGUsIGJvdHRvbSBjYXAsIG91dGVyIHNpZGVcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzbGljZXM7IGorKywgaXYgKz0gMikge1xyXG4gICAgICAgICAgICAgICAgaW5kc1tpYysrXSA9IGl2OyBpbmRzW2ljKytdID0gaXYgKyAzOyBpbmRzW2ljKytdID0gaXYgKyAxO1xyXG4gICAgICAgICAgICAgICAgaW5kc1tpYysrXSA9IGl2OyBpbmRzW2ljKytdID0gaXYgKyAyOyBpbmRzW2ljKytdID0gaXYgKyAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl2ICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpZGUgY2Fwc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlkeCA9IGl2Oy8vIHZDb3VudCAtIDg7XHJcbiAgICAgICAgICAgIGluZHNbaWMrK10gPSBpZHg7IGluZHNbaWMrK10gPSBpZHggKyAxOyBpbmRzW2ljKytdID0gaWR4ICsgMzsgXHJcbiAgICAgICAgICAgIGluZHNbaWMrK10gPSBpZHg7IGluZHNbaWMrK10gPSBpZHggKyAzOyBpbmRzW2ljKytdID0gaWR4ICsgMjsgXHJcbiAgICAgICAgICAgIGlkeCArPSA0O1xyXG4gICAgICAgICAgICBpbmRzW2ljKytdID0gaWR4OyBpbmRzW2ljKytdID0gaWR4ICsgMTsgaW5kc1tpYysrXSA9IGlkeCArIDM7IFxyXG4gICAgICAgICAgICBpbmRzW2ljKytdID0gaWR4OyBpbmRzW2ljKytdID0gaWR4ICsgMzsgaW5kc1tpYysrXSA9IGlkeCArIDI7IFxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBcHBseSBnZW9tZXRyeVxyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh2RGVjbCwgdmVydHMsIGluZHMpO1xyXG4gICAgfVxyXG59ICIsImltcG9ydCBSaW5nU2xpY2VNZXNoIGZyb20gJy4vUmluZ1NsaWNlTWVzaCc7XHJcbmltcG9ydCBIeEdsb2JhbHMgZnJvbSAnLi9IeEdsb2JhbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmluZ1NsaWNlTWVzaFBvb2wge1xyXG4gICAgY29uc3RydWN0b3IocmFkaXVzLCByYWRpdXNJbm5lciwgaGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5fcmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMuX3JhZGl1c0lubmVyID0gcmFkaXVzSW5uZXI7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuX21lc2hlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB2YXIgbWVzaGVzID0gdGhpcy5fbWVzaGVzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzaGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAobWVzaGVzW2ldKVxyXG4gICAgICAgICAgICAgICAgbWVzaGVzW2ldLnJlbGVhc2VSZXNvdXJjZSgpO1xyXG4gICAgICAgIHRoaXMuX21lc2hlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgZ2V0TWVzaChjaXJjbGVQYXJ0LCBidW1wLCByYWR1c0J1bXAsIGhlaWdodCkge1xyXG4gICAgICAgIHZhciBrZXkgPSBjaXJjbGVQYXJ0LnRvUHJlY2lzaW9uKDMpICsgJywnICsgYnVtcCArICcsJyArIHJhZHVzQnVtcDtcclxuICAgICAgICBpZiAoaGVpZ2h0KVxyXG4gICAgICAgICAgICBrZXkgKz0gJywnICsgaGVpZ2h0O1xyXG4gICAgICAgIHZhciBtZXNoZXMgPSB0aGlzLl9tZXNoZXM7XHJcbiAgICAgICAgaWYgKCFtZXNoZXNba2V5XSkge1xyXG4gICAgICAgICAgICBtZXNoZXNba2V5XSA9IHRoaXMuX2NyZWF0ZU1lc2goY2lyY2xlUGFydCwgYnVtcCwgcmFkdXNCdW1wLCBoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzaGVzW2tleV07XHJcbiAgICB9XHJcbiAgICBfY3JlYXRlTWVzaChjaXJjbGVQYXJ0LCBidW1wLCByYWR1c0J1bXAsIGhlaWdodCkge1xyXG4gICAgICAgIHZhciByYXRpbyA9IGNpcmNsZVBhcnQ7XHJcbiAgICAgICAgdmFyIHNsaWNlcyA9IE1hdGgubWF4KEh4R2xvYmFscy5WSUVXX01JTl9TRUNUT1JfU0xJQ0VTLCBNYXRoLmNlaWwoSHhHbG9iYWxzLlZJRVdfU0VDVE9SX1NMSUNFUyAqIHJhdGlvKSk7XHJcbiAgICAgICAgdmFyIHIgPSB0aGlzLl9yYWRpdXM7XHJcbiAgICAgICAgdmFyIGggPSBoZWlnaHQgfHwgSHhHbG9iYWxzLlZJRVdfRkxPT1JfVEhJQ0tORVNTO1xyXG4gICAgICAgIGlmIChidW1wKSB7XHJcbiAgICAgICAgICAgIHIgKz0gSHhHbG9iYWxzLlZJRVdfU0VDVE9SX0RFQVRIX0JVTVA7XHJcbiAgICAgICAgICAgIGggKz0gSHhHbG9iYWxzLlZJRVdfU0VDVE9SX0RFQVRIX0JVTVA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUmluZ1NsaWNlTWVzaChyLCB0aGlzLl9yYWRpdXNJbm5lciwgaCwgMCwgcmF0aW8gKiAzNjAsIHNsaWNlcywgcmFkdXNCdW1wID8gSHhHbG9iYWxzLlZJRVdfU0VDVE9SX0RFQVRIX1JBRElVU19CVU1QIDogMCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NlbmVzT3BlbmVyIGV4dGVuZHMgTGF5YS5FdmVudERpc3BhdGNoZXIge1xyXG4gICAgc3RhdGljIGdldCBFVkVOVF9PUEVORUQoKSB7IHJldHVybiBcIlBSRUxPQURFRFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX1BST0dSRVNTKCkgeyByZXR1cm4gXCJQUk9HUkVTU1wiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2FsbGVyLCBzY2VuZXMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2NhbGxlciA9IGNhbGxlcjtcclxuICAgICAgICB0aGlzLl9zY2VuZXMgPSBzY2VuZXM7XHJcbiAgICAgICAgdGhpcy5fY3VySW5kZXggPSAtMTtcclxuICAgICAgICB0aGlzLl9vcGVuZWRTY2VuZXMgPSBbXTtcclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2N1ckluZGV4IDwgMClcclxuICAgICAgICAgICAgdGhpcy5fb3Blbk5leHQoKTtcclxuICAgIH1cclxuICAgIF9vcGVuTmV4dCgpIHtcclxuICAgICAgICB0aGlzLl9jdXJJbmRleCsrO1xyXG4gICAgICAgIGlmICh0aGlzLl9jdXJJbmRleCA+PSB0aGlzLl9zY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQoU2NlbmVzT3BlbmVyLkVWRU5UX1BST0dSRVNTLCAxKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChTY2VuZXNPcGVuZXIuRVZFTlRfT1BFTkVELCB0aGlzLl9vcGVuZWRTY2VuZXMpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuX3NjZW5lc1t0aGlzLl9jdXJJbmRleF0udXJsO1xyXG4gICAgICAgIHZhciBoYW5kbGVyID0gbmV3IExheWEuSGFuZGxlcih0aGlzLCB0aGlzLl9vbk9wZW5lZCk7XHJcbiAgICAgICAgaWYgKFV0aWxzLmVuZHNXaXRoKHVybCwgJy5scycpKSB0aGlzLl9sb2FkTGF5YVNjZW5lKHVybCwgaGFuZGxlcik7XHJcbiAgICAgICAgZWxzZSBMYXlhLlNjZW5lLm9wZW4odXJsLCBmYWxzZSwgaGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5ldmVudChTY2VuZXNPcGVuZXIuRVZFTlRfUFJPR1JFU1MsIHRoaXMuX2N1ckluZGV4IC8gdGhpcy5fc2NlbmVzLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBfbG9hZExheWFTY2VuZSh1cmwsIGhhbmRsZXIpIHtcclxuICAgICAgICB2YXIgbG9hZGVyID0gbmV3IExheWEuU2NlbmVMb2FkZXIoKTtcclxuICAgICAgICBsb2FkZXIub24oTGF5YS5FdmVudC5DT01QTEVURSwgbnVsbCwgb25Mb2FkZWQpO1xyXG4gICAgICAgIGxvYWRlci5sb2FkKHVybCk7XHJcbiAgICAgICAgZnVuY3Rpb24gb25Mb2FkZWQoKSB7XHJcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IExheWEuTG9hZGVyLmdldFJlcyh1cmwpO1xyXG4gICAgICAgICAgICBMYXlhLlNjZW5lLnJvb3QuYWRkQ2hpbGQoc2NlbmUpO1xyXG4gICAgICAgICAgICBoYW5kbGVyLnJ1bldpdGgoc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9vbk9wZW5lZChzY2VuZSkge1xyXG4gICAgICAgIHRoaXMuX29wZW5lZFNjZW5lcy5wdXNoKHNjZW5lKTtcclxuICAgICAgICB0aGlzLl9zY2VuZXNbdGhpcy5fY3VySW5kZXhdLm9uT3BlbmVkLmNhbGwodGhpcy5fY2FsbGVyLCBzY2VuZSk7XHJcbiAgICAgICAgdGhpcy5fb3Blbk5leHQoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzQWxsIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBtb25leVNvZnRQZXJGcmllbmRIZWxwKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5tb25leVNvZnRQZXJGcmllbmRIZWxwOyB9XHJcbiAgICBnZXQgdGltZUJldHdlZW5GcmllbmRIZWxwKCkgeyByZXR1cm4gdGhpcy5fZGF0YS50aW1lQmV0d2VlbkZyaWVuZEhlbHA7IH1cclxuICAgIGdldCBtb25leVNvZnQ0UmVzdW1lKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5tb25leVNvZnQ0UmVzdW1lOyB9XHJcbiAgICBnZXRNb25leVNvZnQ0UmVzdW1lKHRyeUluZGV4KSB7XHJcbiAgICAgICAgdmFyIGFyciA9IHRoaXMuX2RhdGEuYXJyYXlNb25leVNvZnQ0UmVzdW1lO1xyXG4gICAgICAgIHJldHVybiB0cnlJbmRleCA8IGFyci5sZW5ndGggPyBhcnJbdHJ5SW5kZXhdIDogYXJyW2Fyci5sZW5ndGggLSAxXTtcclxuICAgIH1cclxuICAgIGdldCBtb25leVNvZnQ0QWQoKSB7IHJldHVybiB0aGlzLl9kYXRhLm1vbmV5U29mdDRBZDsgfVxyXG4gICAgZ2V0IGNoZXN0KCkgeyByZXR1cm4gdGhpcy5fZGF0YS5jaGVzdDsgfSAvLyBleGFtcGxlOiB7IHRpbWVPcGVuOiAyMTYwMCwgbWF4TW9uZXlTb2Z0OiAxMDAgfVxyXG4gICAgZ2V0IHRpbWVUb0ZyZWVMaWZlKCkgeyByZXR1cm4gdGhpcy5fZGF0YS50aW1lVG9GcmVlTGlmZTsgfVxyXG59IiwiaW1wb3J0IEZyaWVuZEluZm8gZnJvbSBcIi4vRnJpZW5kSW5mb1wiXHJcbmltcG9ydCBVdGlscyBmcm9tIFwiLi9VdGlsc1wiXHJcbmltcG9ydCBZYW5kZXggZnJvbSBcIi4vWWFuZGV4XCJcclxuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9Mb2NhbGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvY2lhbEFwaSBleHRlbmRzIExheWEuRXZlbnREaXNwYXRjaGVyIHtcclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfSU5JVElBTElaRUQoKSB7IHJldHVybiBcIklOSVRJQUxJWkVEXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfSU5JVElBTElaRV9QUk9HUkVTUygpIHsgcmV0dXJuIFwiSU5JVElBTElaRV9QUk9HUkVTU1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX09SREVSX1JFU1VMVCgpIHsgcmV0dXJuIFwiT1JERVJfUkVTVUxUXCI7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKCkgeyByZXR1cm4gXCJBRFNfUkVBRFlfQ0hBTkdFRFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEU19TSE9XX1NUQVJURUQoKSB7IHJldHVybiBcIkFEU19TSE9XTl9TVEFSVEVEXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfQURTX1JFUVVFU1RFRCgpIHsgcmV0dXJuIFwiQURTX1JFUVVFU1RFRFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEU19OTygpIHsgcmV0dXJuIFwiQURTX05PXCI7IH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfQURTX1NIT1dfU1RPUFBFRCgpIHsgcmV0dXJuIFwiQURTX1NIT1dfU1RPUFBFRFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEU19TSE9XX0NPTVBMRVRFKCkgeyByZXR1cm4gXCJBRFNfU0hPV19DT01QTEVURVwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEU19TSE9XX1NLSVBQRUQoKSB7IHJldHVybiBcIkFEU19TSE9XX1NLSVBQRURcIjsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfUEFZTUVOVF9SRVNVTFQoKSB7IHJldHVybiBcInNob3dQYXltZW50XCI7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IFBST01PX1RTQVJfR09SWSgpIHsgcmV0dXJuIHRydWU7IH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IEdBTUVfTElOSygpIHtcclxuICAgICAgICBjb25zdCBpc1RzYXJHb3J5ID0gU29jaWFsQXBpLlBST01PX1RTQVJfR09SWTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzT0spIHJldHVybiAoU29jaWFsQXBpLmlzTW9iaWxlID8gJ2h0dHBzOi8vbS4nIDogJ2h0dHBzOi8vJykgKyAnb2sucnUvYXBwLycgKyAoaXNUc2FyR29yeSA/ICd0c2FyLWdvcnknIDogJ2NvaW55Jyk7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1ZLKSByZXR1cm4gKFNvY2lhbEFwaS5pc01vYmlsZSA/ICd2aycgOiAnaHR0cHMnKSArICc6Ly92ay5jb20vJyArIChpc1RzYXJHb3J5ID8gJ2FwcDgwMjM0ODEnIDogJ3JhY2NvaW4nKTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzWUEgJiYgaXNUc2FyR29yeSkgcmV0dXJuICdodHRwczovL3lhbmRleC5ydS9nYW1lcy9wbGF5LzE4MjMyOCc7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IEdST1VQX0xJTksoKSB7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pbnN0Ll9pc1ZLKVxyXG4gICAgICAgICAgICByZXR1cm4gKFNvY2lhbEFwaS5pbnN0Ll9pc1ZLTW9iaWxlID8gXCJ2a1wiIDogXCJodHRwc1wiKSArIFwiOi8vdmsuY29tL2NsdWIxNzM2MjE1NTFcIjtcclxuICAgICAgICBlbHNlIGlmIChTb2NpYWxBcGkuaW5zdC5faXNPSykge1xyXG4gICAgICAgICAgICBpZiAoU29jaWFsQXBpLmluc3QuX2lzT0tNb2JpbGUpIHJldHVybiBcImh0dHBzOi8vbS5vay5ydS9ncm91cC81OTM4NDIyODY3NTY0NFwiO1xyXG4gICAgICAgICAgICBlbHNlIHJldHVybiBcImh0dHBzOi8vb2sucnUvZ3JvdXAvNTkzODQyMjg2NzU2NDRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbVwiO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBHUk9VUF9USVRMRSgpIHtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmluc3QuX2lzVkspIHJldHVybiBcIlZLINCT0KDQo9Cf0J/QkFwiO1xyXG4gICAgICAgIHJldHVybiBcItCT0KDQo9Cf0J/QkFwiO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBpc0JhbmtBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7Ly8hU29jaWFsQXBpLmluc3QuX2lzT0sgfHwgVXRpbHMuZGV2TW9kZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgcHJvdmlkZXJJZCgpIHsgcmV0dXJuIHdpbmRvdy5pc1lhbmRleCA/IFwieWFcIiA6IChTb2NpYWxBcGkuaW5zdC5faXNPSyA/IFwib2tcIiA6IFwidmtcIik7IH1cclxuICAgIHN0YXRpYyBnZXQgaXNWSygpIHsgcmV0dXJuIFNvY2lhbEFwaS5pbnN0Ll9pc1ZLOyB9XHJcbiAgICBzdGF0aWMgZ2V0IGlzT0soKSB7IHJldHVybiBTb2NpYWxBcGkuaW5zdC5faXNPSzsgfVxyXG4gICAgc3RhdGljIGdldCBpc1lBKCkgeyByZXR1cm4gd2luZG93LmlzWWFuZGV4OyB9XHJcbiAgICBzdGF0aWMgZ2V0IGlzTW9iaWxlKCkge1xyXG4gICAgICAgIHZhciBpbnN0ID0gU29jaWFsQXBpLmluc3Q7XHJcbiAgICAgICAgcmV0dXJuIGluc3QuX2lzT0tNb2JpbGUgfHwgaW5zdC5faXNWS01vYmlsZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgUEhPVE9fTkVXX0xFVkVMKCkgeyByZXR1cm4gU29jaWFsQXBpLmluc3QuX2lzT0sgPyBcImh0dHBzOi8vanVtcC12ay1hcGkuY2FuZHlncmlsbC5jb20vb2svY29tbW9uL2p1bXBlcl9uZXdfbGV2ZWwuanBnXCIgOiBcInBob3RvLTE3MzYyMTU1MV80NTYyMzkwMjhcIjsgfVxyXG4gICAgc3RhdGljIGdldCBQSE9UT19ORVdfU0NPUkUoKSB7IHJldHVybiBTb2NpYWxBcGkuaW5zdC5faXNPSyA/IFwiaHR0cHM6Ly9qdW1wLXZrLWFwaS5jYW5keWdyaWxsLmNvbS9vay9jb21tb24vanVtcGVyX25ld19yZWNvcmQuanBnXCIgOiBcInBob3RvLTE3MzYyMTU1MV80NTYyMzkwMjlcIjsgfVxyXG4gICAgc3RhdGljIGdldCBpc1ZLQnJpZGdlV2ViVmlldygpIHsgcmV0dXJuIHdpbmRvdy52a0JyaWRnZSAmJiB3aW5kb3cudmtCcmlkZ2UuaXNXZWJWaWV3ICYmIHdpbmRvdy52a0JyaWRnZS5pc1dlYlZpZXcoKTsgfVxyXG4gICAgc3RhdGljIGdldCBpc1ZLQnJpZGdlQWRzKCkgeyByZXR1cm4gU29jaWFsQXBpLmlzVksgJiYgU29jaWFsQXBpLmlzVktCcmlkZ2VXZWJWaWV3OyB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHZhciBzcCA9IFV0aWxzLmdldFNlYXJjaFBhcmFtO1xyXG4gICAgICAgIHRoaXMuX2lzVksgPSAhIXNwKCd2aWV3ZXJfaWQnKTtcclxuICAgICAgICB0aGlzLl9pc1ZLTW9iaWxlID0gdGhpcy5faXNWSyAmJiBzcCgncGxhdGZvcm0nKSAhPSBcIndlYlwiO1xyXG4gICAgICAgIHRoaXMuX2lzT0sgPSAhIXNwKCdsb2dnZWRfdXNlcl9pZCcpO1xyXG4gICAgICAgIHRoaXMuX2lzT0tNb2JpbGUgPSB0aGlzLl9pc09LICYmIHNwKCdtb2InKSA9PSBcInRydWVcIjtcclxuICAgICAgICB0aGlzLl9pc09LQW5vbiA9IHNwKCdsb2dnZWRfdXNlcl9pZCcpID09PSAnMCc7XHJcbiAgICAgICAgdGhpcy5fdmtBZG1hbiA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVksgJiYgU29jaWFsQXBpLmlzVktCcmlkZ2VXZWJWaWV3KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy52a0JyaWRnZS5zZW5kKFwiVktXZWJBcHBJbml0XCIsIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3lhQWRSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBpbnN0KCkge1xyXG4gICAgICAgIGlmICghU29jaWFsQXBpLl9pbnN0KVxyXG4gICAgICAgICAgICB3aW5kb3cuU29jaWFsQXBpID0gU29jaWFsQXBpLl9pbnN0ID0gbmV3IFNvY2lhbEFwaSgpO1xyXG4gICAgICAgIHJldHVybiBTb2NpYWxBcGkuX2luc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGluaXRpYWxpemVkKCkgeyByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZWQ7IH1cclxuICAgIHNldCBpbml0aWFsaXplZCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9JTklUSUFMSVpFRCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcm9maWxlU3RvcmFnZSgpIHsgcmV0dXJuIHRoaXMuX3lhbmRleCAmJiB0aGlzLl95YW5kZXgucHJvZmlsZVN0b3JhZ2U7IH1cclxuICAgIHByZUJhbmtTaG93KCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLl95YW5kZXgpXHJcbiAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLl95YW5kZXgucHJlUHVyY2hhc2UoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxvZ1R1dG9yQ29tcGxldGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3lhbmRleClcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3lhbmRleC5sb2dUdXRvcigpO1xyXG4gICAgfVxyXG4gICAgbG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgICAgICBpZiAodGhpcy5feWFuZGV4KVxyXG4gICAgICAgICAgICB0aGlzLl95YW5kZXgubG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgICAgIHRoaXMuX2xvZ2dlZExldmVsID0gbGV2ZWw7XHJcbiAgICB9XHJcbiAgICBsb2dCZXN0U2NvcmUoc2NvcmUpIHtcclxuICAgICAgICB0aGlzLl9sb2dnZWRCZXN0U2NvcmUgPSBzY29yZTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplKGFwcEZyaWVuZHNSZXF1ZXN0ZXIsIHB1cmNoYXNlVmFsaWRhdG9yKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXRhbGl6aW5nIHx8IHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcclxuICAgICAgICB0aGlzLl9pbml0YWxpemluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fYXBwRnJpZW5kc1JlcXVlc3RlciA9IGFwcEZyaWVuZHNSZXF1ZXN0ZXI7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVkspIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJzX2dldF9jYWxsYmFjayA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0lOSVRJQUxJWkVfUFJPR1JFU1MsIDAuMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyID0gbmV3IEZyaWVuZEluZm8oJzEnLCAnQW5vbmltb3VzJywgJycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gZGF0YS5yZXNwb25zZVswXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBuZXcgRnJpZW5kSW5mbyhvYmouaWQsIG9iai5maXJzdF9uYW1lLCBvYmoucGhvdG9fMTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RGcmllbmRzMigpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIFZLLmluaXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNWS01vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFZLLmFkZENhbGxiYWNrKCdvblNldHRpbmdzQm94RG9uZScsIGZ1bmN0aW9uKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3NDYWxsYmFjaykgdGhpcy5fc2V0dGluZ3NDYWxsYmFjayhzdGF0dXMgPT0gJ3N1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZLLmFkZENhbGxiYWNrKCdvbk9yZGVyQm94RG9uZScsIGZ1bmN0aW9uKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc3N1ZU9yZGVyUmVzdWx0KHN0YXR1cyA9PSAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFZLLmFkZENhbGxiYWNrKCdvblNldHRpbmdzQ2hhbmdlZCcsIGZ1bmN0aW9uKHBlcm1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0NhbGxiYWNrKSB0aGlzLl9zZXR0aW5nc0NhbGxiYWNrKCh0aGlzLl9zZXR0aW5nc1Blcm1zICYgcGVybXMpID09IHBlcm1zKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIFZLLmFkZENhbGxiYWNrKCdvblNldHRpbmdzQ2FuY2VsJywgZnVuY3Rpb24ocGVybXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzQ2FsbGJhY2spIHRoaXMuX3NldHRpbmdzQ2FsbGJhY2soZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVksuYWRkQ2FsbGJhY2soJ29uT3JkZXJDYW5jZWwnLCBmdW5jdGlvbigpIHsgdGhpcy5faXNzdWVPcmRlclJlc3VsdChmYWxzZSk7IH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVksuYWRkQ2FsbGJhY2soJ29uT3JkZXJTdWNjZXNzJywgZnVuY3Rpb24oKSB7IHRoaXMuX2lzc3VlT3JkZXJSZXN1bHQodHJ1ZSk7IH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVksuYWRkQ2FsbGJhY2soJ29uT3JkZXJGYWlsJywgZnVuY3Rpb24oKSB7IHRoaXMuX2lzc3VlT3JkZXJSZXN1bHQoZmFsc2UpOyB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgVksuYXBpKCd1c2Vycy5nZXQnLCB0aGlzLl9WS0FyZ3NGaWx0ZXIoe2ZpZWxkczonZmlyc3RfbmFtZSxwaG90b18xMDAnfSksIHVzZXJzX2dldF9jYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnVksuaW5pdCBGQUlMRUQnKTtcclxuICAgICAgICAgICAgfSwgJzUuMTIyJyk7IFxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5faXNPSykge1xyXG4gICAgICAgICAgICB2YXIgYXBwX2tleSA9IFV0aWxzLmdldFNlYXJjaFBhcmFtKCdhcHBsaWNhdGlvbl9rZXknKTtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIGFwcF9pZDogYXBwX2tleSA9PSAnQ0JBTEZPT01FQkFCQUJBQkEnID8gMTI3Mzg0NjI3MiA6IDEyNzM1MTAxNDQsXHJcbiAgICAgICAgICAgICAgICBhcHBfa2V5OiBhcHBfa2V5IC8vJ0NCQUtESk9NRUJBQkFCQUJBJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcmVzdCA9IEZBUEkuUkVTVDtcclxuICAgICAgICAgICAgdmFyIGdldEN1cnJlbnRVc2VyQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0dXMsIGRhdGEsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09ICdvaycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBuZXcgRnJpZW5kSW5mbyhkYXRhLnVpZCwgZGF0YS5uYW1lLCBkYXRhLnBpY18yKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcEZyaWVuZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKFNvY2lhbEFwaS5FVkVOVF9QQVlNRU5UX1JFU1VMVCwgdGhpcywgZnVuY3Rpb24oZGF0YSkgeyBpZiAoZGF0YSkgdGhpcy5faXNzdWVPcmRlclJlc3VsdChkYXRhLnJlc3VsdCA9PSAnb2snKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9rQ2FsbGJhY2tFdmVudHMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxPS1JFU1QoJ2ZyaWVuZHMuZ2V0QXBwVXNlcnMnLCB7fSwgZnVuY3Rpb24oc3RhdHVzLCBkYXRhLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHsgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7IHJldHVybjsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsT0tSRVNUKCd1c2Vycy5nZXRJbmZvJywge3VpZHM6ZGF0YS51aWRzLmpvaW4oJywnKSxmaWVsZHM6J2ZpcnN0X25hbWUscGljXzInfSwgZnVuY3Rpb24oc3RhdHVzLCBkYXRhLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwRnJpZW5kcyA9IGRhdGEubWFwKGUgPT4gbmV3IEZyaWVuZEluZm8oZS51aWQsIGUuZmlyc3RfbmFtZSwgZS5waWNfMikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2Vycy5nZXRJbmZvJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnVW5hYmxlIHRvIHJldHJpZXZlIGN1cnJlbnQgdXNlciAnICsgRkFQSS5VdGlsLnRvU3RyaW5nKGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIHJQYXJhbXMgPSBGQVBJLlV0aWwuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKTtcclxuICAgICAgICAgICAgRkFQSS5pbml0KGNvbmZpZywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzT0tBbm9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyID0gbmV3IEZyaWVuZEluZm8oJzAnLCAnWW91JywgXCJzdHViQXZhdGFycy83LmpwZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcEZyaWVuZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub2tDYWxsYmFja0V2ZW50cyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIEZBUEkuQ2xpZW50LmNhbGwoeyBtZXRob2Q6J3VzZXJzLmdldEN1cnJlbnRVc2VyJywgZmllbGRzOidVSUQsTkFNRSxQSUNfMicgfSwgZ2V0Q3VycmVudFVzZXJDYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Lk9rTWlkcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29rTWlkcm9sbCA9IG5ldyBPa01pZHJvbGwoY29uZmlnLmFwcF9pZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIE5hdGl2ZUFkcy5pbnN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0ZBUEkgZXJyb3InICsgRkFQSS5VdGlsLnRvU3RyaW5nKGVycm9yKSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51c2VyID0gbmV3IEZyaWVuZEluZm8oMSwgXCJZb3VcIiwgXCJzdHViQXZhdGFycy83LmpwZ1wiKTtcclxuICAgICAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcEZyaWVuZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3lhbmRleCA9IG5ldyBZYW5kZXgocHVyY2hhc2VWYWxpZGF0b3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBGcmllbmRzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBGcmllbmRJbmZvKDEsIFwiQm9iXCIsIFwic3R1YkF2YXRhcnMvMS5qcGdcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZyaWVuZEluZm8oMiwgXCJBbGljZVwiLCBcInN0dWJBdmF0YXJzLzIuanBnXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBGcmllbmRJbmZvKDMsIFwiVmFzeWFcIiwgXCJzdHViQXZhdGFycy8zLmpwZ1wiKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRnJpZW5kSW5mbyg0LCBcIlNhbWFudGFcIiwgXCJzdHViQXZhdGFycy80LmpwZ1wiKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRnJpZW5kSW5mbyg1LCBcIkphY2tcIiwgXCJzdHViQXZhdGFycy81LmpwZ1wiKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRnJpZW5kSW5mbyg2LCBcIk1hc2hhXCIsIFwic3R1YkF2YXRhcnMvNi5qcGdcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZyaWVuZEluZm8oNywgXCJNYXR2ZXlcIiwgXCJzdHViQXZhdGFycy83LmpwZ1wiKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRnJpZW5kSW5mbyg4LCBcIkJlbGxhXCIsIFwic3R1YkF2YXRhcnMvOC5qcGdcIiksXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGUkVJTkRTJywgdGhpcy5hcHBGcmllbmRzKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3JlcXVlc3RfVktfYWRtYW4ob25SZXBseSkge1xyXG4gICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRVFVRVNURUQpO1xyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0X1ZLX2FkbWFuKGZ1bmN0aW9uKGFkbWFuKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIChVdGlscy5kZXZNb2RlKVxyXG4gICAgICAgICAgICAvLyAgICAgYWxlcnQoYWRtYW4gPyBcIkhhcyBBZHNcIiA6IFwiTm8gQWRzXCIpO1xyXG4gICAgICAgICAgICBpZiAoYWRtYW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZrQWRtYW4gPSBhZG1hbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZrQWRtYW4ub25Db21wbGV0ZWQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmtBZG1hbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1JFQURZX0NIQU5HRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RfVktfYWRtYW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdmtBZG1hbi5vblNraXBwZWQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU0tJUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX05PKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob25SZXBseSkgb25SZXBseSgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBfY2FsbE9LUkVTVChtZXRob2QsIGFyZ3MsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgRkFQSS5DbGllbnQuY2FsbChPYmplY3QuYXNzaWduKHttZXRob2Q6bWV0aG9kfSwgYXJncyksIGNhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIHNob3dJbnZpdGVCb3gobWVzc2FnZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1ZLKSBWSy5jYWxsTWV0aG9kKCdzaG93SW52aXRlQm94Jyk7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5faXNPSykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tPS0Fub24oKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBGQVBJLlVJLnNob3dJbnZpdGUobWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgYWxlcnQobWVzc2FnZSB8fCBcItCf0YDQuNGF0L7QtNC4INC40LPRgNCw0YLRjCwg0L/QvtC80L7Qs9C4INC00YDRg9Cz0YMhXCIpO1xyXG4gICAgfVxyXG4gICAgc2hvd1JlcXVlc3RCb3godXNlcl9pZCwgbWVzc2FnZSkgeyAvLywgcmVxdWVzdF9rZXkpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNWSykgVksuY2FsbE1ldGhvZCgnc2hvd1JlcXVlc3RCb3gnLCB1c2VyX2lkLCBtZXNzYWdlLCBcIlwiKTsgLy8gcmVxdWVzdF9rZXkpO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2lzT0spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NoZWNrT0tBbm9uKCkpIHJldHVybjtcclxuICAgICAgICAgICAgRkFQSS5VSS5zaG93Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIG51bGwsIHVzZXJfaWQpO1xyXG4gICAgICAgIH0gZWxzZSBhbGVydChcIlJlcXVzdDogXCIgKyBtZXNzYWdlKTtcclxuICAgIH1cclxuICAgIHNob3dTaGFyZUJveChtZXNzYWdlLCBwaG90bykge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1ZLKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1ZLTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0YWNoZW1lbnRzID0gWydodHRwczovL3ZrLmNvbS9qdW1weWJhbGwnXTtcclxuICAgICAgICAgICAgICAgIGlmIChwaG90bylcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hlbWVudHMucHVzaChwaG90byk7XHJcbiAgICAgICAgICAgICAgICBWSy5jYWxsTWV0aG9kKCdzaG93U2hhcmVCb3gnLCBtZXNzYWdlLCBhdHRhY2hlbWVudHMsICd3YWxsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2lzT0spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NoZWNrT0tBbm9uKCkpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgYXR0YWNoZW1lbnRzID0ge21lZGlhOiBbXX07XHJcbiAgICAgICAgICAgIGF0dGFjaGVtZW50cy5tZWRpYS5wdXNoKHt0eXBlOiBcImFwcFwiLCB0ZXh0OiBtZXNzYWdlLCBpbWFnZXM6IFt7dXJsOnBob3RvLHRpdGxlOm1lc3NhZ2V9XSwgYWN0aW9uczpbe3RleHQ6XCLQmNCz0YDQsNGC0YxcIixtYXJrOlwiUGxheVwifV19KTtcclxuICAgICAgICAgICAgRkFQSS5VSS5wb3N0TWVkaWF0b3BpYyhhdHRhY2hlbWVudHMsIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydChtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG93TGVhZGVyYm9hcmRCb3gocmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVktNb2JpbGUpIHsgVksuY2FsbE1ldGhvZCgnc2hvd0xlYWRlcmJvYXJkQm94JywgcmVzdWx0KTsgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2lzT0spIHsgY29uc29sZS5lcnJvcihcIkxlYXJib2FyZCBOT1QgU1VQUE9SVEVEIGZvciBPS1wiKTsgfVxyXG4gICAgICAgIGVsc2UgeyBhbGVydCgnTGVhcmJvYXJkIG5vdCBhdmFpbGFibGUnKTsgfVxyXG4gICAgfVxyXG4gICAgZ2V0UHJpY2VTdHJpbmcoY2FyZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFByaWNlKGNhcmQpICsgJyAnICsgdGhpcy5nZXRDdXJyZW5jeVN0cmluZyhjYXJkKTtcclxuICAgIH1cclxuICAgIGdldFByaWNlKGNhcmQpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNPSykgcmV0dXJuIGNhcmQub2sucHJpY2U7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSByZXR1cm4gY2FyZC55YTtcclxuICAgICAgICByZXR1cm4gY2FyZC52b3RlcztcclxuICAgIH1cclxuICAgIGdldEN1cnJlbmN5U3RyaW5nKGNhcmQpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNPSykgcmV0dXJuIFV0aWxzLmdldFBsdXJhbEJ5VmFsdWUoY2FyZC5vay5wcmljZSwgWydPSycsICdPSycsICdPSyddKTtcclxuICAgICAgICAvL2lmIChTb2NpYWxBcGkuaXNZQSkgcmV0dXJuIExvY2FsZS5ydXNzaW9uUGx1cmFsKCdMX1JVQl9TVUZGSVgnLCBjYXJkLnlhKTsvLyBVdGlscy5nZXRQbHVyYWxCeVZhbHVlKGNhcmQueWEsIFsn0KDRg9Cx0LvQtdC5JywgJ9Cg0YPQsdC70LXQuScsICfQoNGD0LHQu9C10LknXSk7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSByZXR1cm4gdGhpcy5feWFuZGV4LmN1cnJlbmN5Q29kZTsvLyBVdGlscy5nZXRQbHVyYWxCeVZhbHVlKGNhcmQueWEsIFsn0KDRg9Cx0LvQtdC5JywgJ9Cg0YPQsdC70LXQuScsICfQoNGD0LHQu9C10LknXSk7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmdldFBsdXJhbEJ5VmFsdWUoY2FyZC52b3RlcywgWyfQk9C+0LvQvtGBJywgJ9CT0L7Qu9C+0YHQsCcsICfQk9C+0LvQvtGB0L7QsiddKTtcclxuICAgIH1cclxuICAgIHNob3dPcmRlckJveChjYXJkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVkspXHJcbiAgICAgICAgICAgIFZLLmNhbGxNZXRob2QoJ3Nob3dPcmRlckJveCcsIHt0eXBlOidpdGVtJywgaXRlbTogY2FyZC5uYW1lfSk7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5faXNPSykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tPS0Fub24oKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBGQVBJLlVJLnNob3dQYXltZW50KGNhcmQub2sudGl0bGUsIGNhcmQub2sudGl0bGUsIGNhcmQubmFtZSwgY2FyZC5vay5wcmljZSwgbnVsbCwgbnVsbCwgXCJva1wiLCBcInRydWVcIik7XHJcbiAgICAgICAgfSBpZiAoU29jaWFsQXBpLmlzWUEpIHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy55c2RrX3BsYXllcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5feWFuZGV4LnB1cmNoYXNlKGNhcmQpLnRoZW4oZnVuY3Rpb24ob2spIHsgdGhpcy5faXNzdWVPcmRlclJlc3VsdChvayk7IH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB5c2RrLmF1dGgub3BlbkF1dGhEaWFsb2coKS50aGVuKGZ1bmN0aW9uKCkgeyBsb2NhdGlvbi5yZWxvYWQoKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ9CR0LDQvdC60LAg0LfQsNC60YDRi9GC0LAnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzc3VlT3JkZXJSZXN1bHQoZmFsc2UpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGFkc1N1cHBvcnRlZCgpIHsgcmV0dXJuIFNvY2lhbEFwaS5pc1ZLIHx8IFNvY2lhbEFwaS5pc09LIHx8IFNvY2lhbEFwaS5pc1lBOyB9XHJcbiAgICBnZXQgYWRzRm9yQ29pbnNTdXBwb3J0ZWQoKSB7IHJldHVybiBTb2NpYWxBcGkuaXNWSyB8fCBTb2NpYWxBcGkuaXNPSyB8fCBTb2NpYWxBcGkuaXNZQTsgfVxyXG4gICAgZ2V0IGFkc0NhblNob3coKSB7IHJldHVybiB0aGlzLmFkc1N1cHBvcnRlZCAmJiAoU29jaWFsQXBpLmlzWUEgJiYgdGhpcy5feWFBZFJlYWR5IHx8IHRoaXMuX3ZrQWRtYW4gfHwgU29jaWFsQXBpLmlzVktCcmlkZ2VBZHMgfHwgdGhpcy5fb2tNaWRyb2xsICYmIHRoaXMuX29rTWlkcm9sbC5jYW5TaG93KCkgfHwgTmF0aXZlQWRzLmluc3QucmVhZHkgfHwgTmF0aXZlQWRzLmluc3Quc3VwcG9ydGVkSW50ZXJzdGl0aWFsKTsgfVxyXG4gICAgZ2V0IGFkc0NhblNob3dSZXdhcmRlZCgpIHsgcmV0dXJuIHRoaXMuYWRzQ2FuU2hvdyB8fCBTb2NpYWxBcGkuaXNZQTsgfVxyXG4gICAgYWRzU2hvdyhyZXdhcmRlZEhpbnQpIHtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzVktCcmlkZ2VBZHMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBZHNOZXR3b3JrVktCcmlkZ2VdIHNob3cnKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1JFUVVFU1RFRCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUQVJURUQpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmtCcmlkZ2Uuc2VuZFByb21pc2UoJ1ZLV2ViQXBwU2hvd05hdGl2ZUFkcycsIHsgYWRfZm9ybWF0OiAncmV3YXJkJ30pXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBZHNOZXR3b3JrVktCcmlkZ2VdIHNob3cgcmVzdWx0PScgKyBkYXRhLnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0KSB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TS0lQUEVEKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TVE9QUEVEKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Fkc05ldHdvcmtWS0JyaWRnZV0gc2hvdyBlcnJvcj0nICsgZXJyb3IgKyAnIGVycm9yLm1lc3NhZ2U9JyArIGVycm9yLm1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TS0lQUEVEKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TVE9QUEVEKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl92a0FkbWFuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUQVJURUQpO1xyXG4gICAgICAgICAgICB0aGlzLl92a0FkbWFuLnN0YXJ0KCdwcmVyb2xsJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSB7XHJcbiAgICAgICAgICAgIGlmICghcmV3YXJkZWRIaW50ICYmIHRoaXMuX3lhbmRleC5pc0Fkc1BheWVkKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc2V0QWRzUmVhZHkgPSAoZnVuY3Rpb24ocmVzdWx0LCBzZWNvbmRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl95YUFkUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWNvbmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5feWFBZFJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1JFQURZX0NIQU5HRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgc2Vjb25kcyAqIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfUkVRVUVTVEVEKTtcclxuICAgICAgICAgICAgaWYgKHJld2FyZGVkSGludCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIHlzZGsuYWR2LnNob3dSZXdhcmRlZFZpZGVvKHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuOiAoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2hvd1Jld2FyZGVkVmlkZW9dIG9uT3BlbihWaWRlbyknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUQVJURUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJld2FyZGVkOiAoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2hvd1Jld2FyZGVkVmlkZW9dIG9uUmV3YXJkZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5TVMgPSA1MDAwIC0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQpOyAvLyA1IHNlY29uZHMgbWluaW11bVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9SZXNvbHZlID0gKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5feWFuZGV4LmxvZ0FkUmV3YXJkZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGF5TVMgPiAwKSB7IGNvbnNvbGUubG9nKCdbc2hvd1Jld2FyZGVkVmlkZW9dIGV4dHJhIGRlbGF5TVM9JyArIGRlbGF5TVMpOyBzZXRUaW1lb3V0KGRvUmVzb2x2ZSwgZGVsYXlNUyk7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZG9SZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzaG93UmV3YXJkZWRWaWRlb10gb25DbG9zZShWaWRlbyknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NLSVBQRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6IChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2hvd1Jld2FyZGVkVmlkZW9dIG9uRXJyb3IoVmlkZW8pJywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19TS0lQUEVEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUT1BQRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RBUlRFRCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb25BZHNDbG9zZSA9IGZ1bmN0aW9uKHdhc1Nob3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU0tJUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhc1Nob3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3lhbmRleC5sb2dBZFJld2FyZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0QWRzUmVhZHkoZmFsc2UsIDE4MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgeXNkay5hZHYuc2hvd0Z1bGxzY3JlZW5BZHYoeyBjYWxsYmFja3M6IHsgb25DbG9zZTogb25BZHNDbG9zZSwgb25FcnJvcjogb25BZHNDbG9zZSB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyZXdhcmRlZEhpbnQgJiYgTmF0aXZlQWRzLmluc3Quc3VwcG9ydGVkSW50ZXJzdGl0aWFsKSB7XHJcbiAgICAgICAgICAgIE5hdGl2ZUFkcy5pbnN0LnNob3dJbnRlcnN0aXRpYWwoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuYWRzQ2FuU2hvdykgcmV0dXJuO1xyXG4gICAgICAgIC8vIEVtdWxhdGUgcmVxdWVzdFxyXG4gICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRVFVRVNURUQpO1xyXG4gICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUQVJURUQpO1xyXG4gICAgICAgIE5hdGl2ZUFkcy5pbnN0LnNob3coZnVuY3Rpb24obmF0aXZlT2spIHtcclxuICAgICAgICAgICAgaWYgKG5hdGl2ZU9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9BRFNfU0hPV19DT01QTEVURSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9va01pZHJvbGwuc2hvdyhmdW5jdGlvbihvaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvaykgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfQ09NUExFVEUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU0tJUFBFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RPUFBFRCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tPS0Fub24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzT0tBbm9uKSB7XHJcbiAgICAgICAgICAgIEZBUEkuVUkuc2hvd0xvZ2luU3VnZ2VzdGlvbihKU09OLnN0cmluZ2lmeSh7bGV2ZWw6dGhpcy5fbG9nZ2VkTGV2ZWwsYmVzdFNjb3JlOnRoaXMuX2xvZ2dlZEJlc3RTY29yZX0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzT0tBbm9uO1xyXG4gICAgfVxyXG4gICAgX3JlcXVlc3RGcmllbmRzKCkge1xyXG4gICAgICAgIFZLLmFwaSgnZnJpZW5kcy5nZXRBcHBVc2VycycsIHRoaXMuX1ZLQXJnc0ZpbHRlcih7fSksIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfSU5JVElBTElaRV9QUk9HUkVTUywgMC43KTtcclxuICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHVzZXJfaWRzID0gZGF0YS5yZXNwb25zZS5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgIFZLLmFwaSgndXNlcnMuZ2V0JywgdGhpcy5fVktBcmdzRmlsdGVyKHt1c2VyX2lkczp1c2VyX2lkcywgZmllbGRzOidmaXJzdF9uYW1lLHBob3RvXzEwMCd9KSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudChTb2NpYWxBcGkuRVZFTlRfSU5JVElBTElaRV9QUk9HUkVTUywgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcEZyaWVuZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBkYXRhLnJlc3BvbnNlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcEZyaWVuZHMucHVzaChuZXcgRnJpZW5kSW5mbyhvYmouaWQsIG9iai5maXJzdF9uYW1lLCBvYmoucGhvdG9fMTAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIF9yZXF1ZXN0RnJpZW5kczIoKSB7XHJcbiAgICAgICAgVksuYXBpKCdmcmllbmRzLmdldCcsIHRoaXMuX1ZLQXJnc0ZpbHRlcih7IG9yZGVyOidtb2JpbGUnLCBjb3VudDoxMDAsIGZpZWxkczonZmlyc3RfbmFtZSxwaG90b18xMDAnIH0pLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0lOSVRJQUxJWkVfUFJPR1JFU1MsIDAuNyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwRnJpZW5kcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0lOSVRJQUxJWkVfUFJPR1JFU1MsIDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hcHBGcmllbmRzUmVxdWVzdGVyKGRhdGEucmVzcG9uc2UuaXRlbXMucmVkdWNlKChzLCBpdG0pID0+IHsgcy5wdXNoKGl0bS5pZCk7IHJldHVybiBzfSwgW10pLCBmdW5jdGlvbihpZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50KFNvY2lhbEFwaS5FVkVOVF9JTklUSUFMSVpFX1BST0dSRVNTLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGRhdGEucmVzcG9uc2UuaXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGEucmVzcG9uc2UuaXRlbXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHMuaW5kZXhPZihvYmouaWQpICE9IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBGcmllbmRzLnB1c2gobmV3IEZyaWVuZEluZm8ob2JqLmlkLCBvYmouZmlyc3RfbmFtZSwgb2JqLnBob3RvXzEwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0X1ZLX2FkbWFuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBfY2hlY2tWS1Blcm1pc3Npb25zKHBlcm1zLCBvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgVksuYXBpKCdhY2NvdW50LmdldEFwcFBlcm1pc3Npb25zJywgdGhpcy5fVktBcmdzRmlsdGVyKHt9KSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikgb25Db21wbGV0ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgJiBwZXJtcykgb25Db21wbGV0ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzUGVybXMgPSBwZXJtcztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5nc0NhbGxiYWNrID0gZnVuY3Rpb24oc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5nc0NhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZShzdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICBWSy5jYWxsTWV0aG9kKCdzaG93U2V0dGluZ3NCb3gnLCBwZXJtcylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBfVktBcmdzRmlsdGVyKGFyZ3MpIHtcclxuICAgICAgICBpZiAoVXRpbHMuZGV2TW9kZSlcclxuICAgICAgICAgICAgYXJncy50ZXN0X21vZGU9MTtcclxuICAgICAgICByZXR1cm4gYXJncztcclxuICAgIH1cclxuICAgIF9pc3N1ZU9yZGVyUmVzdWx0KHJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnQoU29jaWFsQXBpLkVWRU5UX09SREVSX1JFU1VMVCwgcmVzdWx0KTtcclxuICAgIH1cclxuICAgIC8vIF9wZW5kUGFnZVJlbG9hZE9uRm9jdXMoKSB7XHJcbiAgICAvLyAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oKSB7IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgfSk7XHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbmNsYXNzIE5hdGl2ZUFkcyB7XHJcbiBcclxuICAgIGdldCBzdXBwb3J0ZWQoKSB7IHJldHVybiB3aW5kb3cuRkFQSSAmJiBGQVBJLlVJLmxvYWRBZCAmJiBGQVBJLlVJLnNob3dMb2FkZWRBZDsgfVxyXG4gICAgZ2V0IHN1cHBvcnRlZEludGVyc3RpdGlhbCgpIHsgcmV0dXJuIHdpbmRvdy5GQVBJICYmICEhRkFQSS5VSS5zaG93QWQ7IH1cclxuICAgIGdldCByZWFkeSgpIHsgcmV0dXJuIHRoaXMuX3JlYWR5OyB9XHJcblxyXG4gICAgc3RhdGljIGdldCBpbnN0KCkge1xyXG4gICAgICAgIGlmICghTmF0aXZlQWRzLl9pbnN0KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5OYXRpdmVBZHMgPSBOYXRpdmVBZHMuX2luc3QgPSBuZXcgTmF0aXZlQWRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOYXRpdmVBZHMuX2luc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tOYXRpdmVBZHNdIGNvbnN0cnVjdG9yJyk7XHJcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3Qub24oXCJsb2FkQWRcIiwgdGhpcywgdGhpcy5vbl9sb2FkQWQpO1xyXG4gICAgICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihcInNob3dMb2FkZWRBZFwiLCB0aGlzLCB0aGlzLm9uX3Nob3dMb2FkZWRBZCk7XHJcbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkgeyB0aGlzLl91cGRhdGVBZHMoKTsgfS5iaW5kKHRoaXMpLCAzMTAwMCk7IC8vID4gMzAgc2Vjb25kc1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVBZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5fb25TaG93UmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNob3cob25Db21wbGV0ZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTmF0aXZlQWRzXSBzaG93IHN1cHBvcnRlZD0nICsgISF0aGlzLnN1cHBvcnRlZCArICcgcmVhZHk9JyArIHRoaXMuX3JlYWR5KTtcclxuICAgICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XHJcbiAgICAgICAgICAgIG9uQ29tcGxldGUoZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uU2hvd1Jlc3VsdCA9IGZ1bmN0aW9uKG9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW05hdGl2ZUFkc10gX29uU2hvd1Jlc3VsdCBvaz0nICsgb2spO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25TaG93UmVzdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldFJlYWR5KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUob2spO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTmF0aXZlQWRzXSBGQVBJLlVJLnNob3dMb2FkZWRBZCcpO1xyXG4gICAgICAgICAgICBGQVBJLlVJLnNob3dMb2FkZWRBZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3dJbnRlcnN0aXRpYWwoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tOYXRpdmVBZHNdIHNob3dJbnRlcnN0aXRpYWw6IEZBUEkuVUkuc2hvd0FkJyk7XHJcbiAgICAgICAgRkFQSS5VSS5zaG93QWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlQWRzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fcmVhZHkpXHJcbiAgICAgICAgICAgIEZBUEkuVUkubG9hZEFkKCk7XHJcbiAgICB9XHJcbiAgICBfc2V0UmVhZHkodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5fcmVhZHkpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3QuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbl9sb2FkQWQoZXYpIHtcclxuICAgICAgICB0aGlzLmxvZ0NhbGxiYWNrKCdsb2FkQWQnLCBldik7XHJcbiAgICAgICAgaWYgKGV2LnJlc3VsdCA9PSAnb2snICYmIChldi5kYXRhID09ICdhZF9wcmVwYXJlZCcgfHwgZXYuZGF0YSA9PSAncmVhZHknKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZWFkeSh0cnVlKTtcclxuICAgICAgICAgICAgU29jaWFsQXBpLmluc3QuZXZlbnQoU29jaWFsQXBpLkVWRU5UX0FEU19SRUFEWV9DSEFOR0VEKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbl9zaG93TG9hZGVkQWQoZXYpIHtcclxuICAgICAgICB0aGlzLmxvZ0NhbGxiYWNrKCdzaG93TG9hZGVkQWQnLCBldik7XHJcbiAgICAgICAgaWYgKHRoaXMuX29uU2hvd1Jlc3VsdClcclxuICAgICAgICAgICAgdGhpcy5fb25TaG93UmVzdWx0KGV2LnJlc3VsdCA9PSAnb2snICYmIChldi5kYXRhID09ICdhZF9zaG93bicgfHwgZXYuZGF0YSA9PSAnY29tcGxldGUnKSk7XHJcbiAgICB9XHJcbiAgICBsb2dDYWxsYmFjayhuYW1lLCBldikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTmF0aXZlQWRzXSAnICsgbmFtZSArICcgcmVzdWx0PScgKyBldi5yZXN1bHQgKyAnIGRhdGE9JyArIGV2LmRhdGEpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU291bmRNYW4ge1xyXG4gICAgc3RhdGljIGdldCBGT0xERVIoKSB7IHJldHVybiBcInNvdW5kL1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IEJSRUFLX1NPVU5EX0NPVU5UKCkgeyByZXR1cm4gNDsgfVxyXG4gICAgc3RhdGljIElEX0JSRUFLKGlkeCkgeyByZXR1cm4gXCJicmVha1wiICsgKGlkeCArIDEpOyB9XHJcbiAgICBzdGF0aWMgZ2V0IElEX0NMSUNLKCkgeyByZXR1cm4gXCJjbGlja1wiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IElEX0RFQVRIKCkgeyByZXR1cm4gXCJkZWF0aFwiOyB9XHJcbiAgICBzdGF0aWMgZ2V0IElEX0pVTVAoKSB7IHJldHVybiBcImp1bXBcIjsgfVxyXG4gICAgc3RhdGljIGdldCBJRF9DUkFDSygpIHsgcmV0dXJuIFwiY3JhY2tcIjsgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIGlmICghU291bmRNYW4uX2luaXRlZCkge1xyXG4gICAgICAgICAgICBTb3VuZE1hbi5faW5pdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgU291bmRNYW4uX2VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgaWRzID0gW1NvdW5kTWFuLklEX0NMSUNLLCBTb3VuZE1hbi5JRF9ERUFUSCwgU291bmRNYW4uSURfSlVNUCwgU291bmRNYW4uSURfQ1JBQ0tdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFNvdW5kTWFuLkJSRUFLX1NPVU5EX0NPVU5UOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZHMucHVzaChTb3VuZE1hbi5JRF9CUkVBSyhpKSk7XHJcbiAgICAgICAgICAgIFNvdW5kTWFuLl9yZWdpc3RlcklkcyhpZHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGVuYWJsZWQoKSB7IHJldHVybiB0aGlzLl9lbmFibGVkOyB9XHJcbiAgICBzdGF0aWMgc2V0IGVuYWJsZWQodmFsdWUpIHsgdGhpcy5fZW5hYmxlZCA9IHZhbHVlOyB9XHJcblxyXG4gICAgc3RhdGljIGxvY2sob2JqKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9sb2NrcykgeyB0aGlzLl9sb2NrcyA9IFtdOyB9XHJcbiAgICAgICAgdGhpcy5fbG9ja3MucHVzaChvYmopO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHVubG9jayhvYmopIHtcclxuICAgICAgICBpZiAodGhpcy5fbG9ja3MpIHtcclxuICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMuX2xvY2tzLmluZGV4T2Yob2JqKTtcclxuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbG9ja3Muc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwbGF5Q2xpY2soKSB7IFNvdW5kTWFuLl9wbGF5KFNvdW5kTWFuLklEX0NMSUNLKTsgfVxyXG4gICAgc3RhdGljIHBsYXlKdW1wKCkgeyBTb3VuZE1hbi5fcGxheShTb3VuZE1hbi5JRF9KVU1QKTsgfVxyXG4gICAgc3RhdGljIHBsYXlEZWF0aCgpIHsgU291bmRNYW4uX3BsYXkoU291bmRNYW4uSURfREVBVEgpOyB9XHJcbiAgICBzdGF0aWMgcGxheUJyZWFrKGlkeCkgeyBTb3VuZE1hbi5fcGxheShTb3VuZE1hbi5JRF9CUkVBSyhNYXRoLm1pbihpZHgsIFNvdW5kTWFuLkJSRUFLX1NPVU5EX0NPVU5UIC0gMSkpKTsgfVxyXG4gICAgc3RhdGljIHBsYXlDcmFjaygpIHsgU291bmRNYW4uX3BsYXkoU291bmRNYW4uSURfQ1JBQ0spOyB9XHJcblxyXG4gICAgc3RhdGljIF9yZWdpc3RlcklkcyhpZHMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgY3JlYXRlanMuU291bmQucmVnaXN0ZXJTb3VuZChTb3VuZE1hbi5fdG9GaWxlUGF0aChpZHNbaV0pLCBpZHNbaV0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF90b0ZpbGVQYXRoKGlkKSB7IHJldHVybiBTb3VuZE1hbi5GT0xERVIgKyBpZCArIFwiLm1wM1wiOyB9XHJcbiAgICBzdGF0aWMgX3BsYXkoaWQpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09ICd2aXNpYmxlJyAmJiBTb3VuZE1hbi5lbmFibGVkICYmICghdGhpcy5fbG9ja3MgfHwgIXRoaXMuX2xvY2tzLmxlbmd0aCkpXHJcbiAgICAgICAgICAgIGNyZWF0ZWpzLlNvdW5kLnBsYXkoaWQpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFVzZXJPcHRpb25zIGZyb20gXCIuL1VzZXJPcHRpb25zXCJcclxuaW1wb3J0IFNvdW5kTWFuIGZyb20gXCIuL1NvdW5kTWFuXCI7XHJcbmltcG9ydCBTb2NpYWxBcGkgZnJvbSBcIi4vU29jaWFsQXBpXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb3VuZFRvZ2dsZSBleHRlbmRzIExheWEuQ2hlY2tCb3gge1xyXG4gICAgaW5pdCh1c2VyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJPcHRpb25zID0gdXNlck9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHVzZXJPcHRpb25zLmdldE9wdGlvbihVc2VyT3B0aW9ucy5TT1VORF9PRkYpICE9ICcxJztcclxuICAgICAgICBTb2NpYWxBcGkuaW5zdC5vbihTb2NpYWxBcGkuRVZFTlRfQURTX1NIT1dfU1RBUlRFRCwgdGhpcywgZnVuY3Rpb24oKSB7IFNvdW5kTWFuLmVuYWJsZWQgPSBmYWxzZTsgfSk7XHJcbiAgICAgICAgU29jaWFsQXBpLmluc3Qub24oU29jaWFsQXBpLkVWRU5UX0FEU19TSE9XX1NUT1BQRUQsIHRoaXMsIGZ1bmN0aW9uKCkgeyBTb3VuZE1hbi5lbmFibGVkID0gdGhpcy5nZXRfc3VwZXJfc2VsZWN0ZWQoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5vbihMYXlhLkV2ZW50LkNIQU5HRSwgdGhpcywgdGhpcy5fb25DaGFuZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWxlY3RlZCh2YWx1ZSkge1xyXG4gICAgICAgIHN1cGVyLnNlbGVjdGVkID0gdmFsdWU7XHJcbiAgICAgICAgU291bmRNYW4uZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldF9zdXBlcl9zZWxlY3RlZCgpIHsgcmV0dXJuIHN1cGVyLnNlbGVjdGVkOyB9XHJcblxyXG4gICAgX29uQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJPcHRpb25zLnNldE9wdGlvbihVc2VyT3B0aW9ucy5TT1VORF9PRkYsIHN1cGVyLnNlbGVjdGVkID8gJzAnIDogJzEnKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaWFuZ2xlTWVzaCBleHRlbmRzIExheWEuUHJpbWl0aXZlTWVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB2YXIgdkNvdW50ID0gMztcclxuICAgICAgICB2YXIgaUNvdW50ID0gMztcclxuICAgICAgICB2YXIgdkRlY2wgPSBMYXlhLlZlcnRleFBvc2l0aW9uTm9ybWFsVGV4dHVyZS52ZXJ0ZXhEZWNsYXJhdGlvbjtcclxuICAgICAgICB2YXIgdkZsb2F0U3RyaWRlID0gdkRlY2wudmVydGV4U3RyaWRlIC8gNDtcclxuICAgICAgICB2YXIgdmVydHMgPSBuZXcgRmxvYXQzMkFycmF5KHZDb3VudCAqIHZGbG9hdFN0cmlkZSk7XHJcbiAgICAgICAgdmFyIGluZHMgPSBuZXcgVWludDE2QXJyYXkoaUNvdW50KTtcclxuICAgICAgICB2YXIgdmMgPSAwO1xyXG4gICAgICAgIHZhciBpYyA9IDA7XHJcbiAgICAgICAgLy8gMFxyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gLXdpZHRoICogMC41OyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAxO1xyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgIC8vIDFcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IHdpZHRoICogMC41OyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDtcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMDsgdmVydHNbdmMrK10gPSAxO1xyXG4gICAgICAgIHZlcnRzW3ZjKytdID0gMTsgdmVydHNbdmMrK10gPSAwO1xyXG4gICAgICAgIC8vIDJcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gaGVpZ2h0OyB2ZXJ0c1t2YysrXSA9IDA7XHJcbiAgICAgICAgdmVydHNbdmMrK10gPSAwOyB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMTtcclxuICAgICAgICB2ZXJ0c1t2YysrXSA9IDA7IHZlcnRzW3ZjKytdID0gMTtcclxuICAgICAgICAvLyBJbmRpY2llc1xyXG4gICAgICAgIGluZHNbaWMrK10gPSAwOyBpbmRzW2ljKytdID0gMTsgaW5kc1tpYysrXSA9IDI7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHZEZWNsLCB2ZXJ0cywgaW5kcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEdhbWVSZXN1bHRVSSBmcm9tIFwiLi9HYW1lUmVzdWx0VUlcIlxyXG5pbXBvcnQgV25kTWFuIGZyb20gXCIuL1duZE1hblwiXHJcbmltcG9ydCBTb2NpYWxBcGkgZnJvbSBcIi4vU29jaWFsQXBpXCJcclxuaW1wb3J0IEJhc2VXaW5kb3cgZnJvbSBcIi4vQmFzZVdpbmRvd1wiXHJcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vTG9jYWxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUdXRvclVJIGV4dGVuZHMgTGF5YS5TY2VuZSB7XHJcbiAgICBzdGF0aWMgZ2V0IFRVVE9SX0FERF9UT19NRU5VKCkgeyByZXR1cm4gXCJhZGRUb01lbnVcIjsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgQ09NUExFVEVfTUFSSygpIHsgcmV0dXJuIFwiY29tcGxldGVcIjsgfVxyXG5cclxuICAgIHN0YXRpYyBFVkVOVF9UVVRPUl9DT01QTEVURShuYW1lKSB7IHJldHVybiBuYW1lICsgJy4nICsgVHV0b3JVSS5DT01QTEVURV9NQVJLOyB9XHJcblxyXG4gICAgaW5pdChiYWNrZW5kKSB7XHJcbiAgICAgICAgd2luZG93LnR1dG9yVUkgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSBiYWNrZW5kO1xyXG4gICAgICAgIHRoaXMuX2luaXRBZGRUb01lbnUoKTtcclxuICAgICAgICB0aGlzLmJ0blNvdW5kLmluaXQoYmFja2VuZC51c2VyT3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5kZXZWS1Njb3Jlcy5pbml0KGJhY2tlbmQpO1xyXG4gICAgICAgIGlmIChTb2NpYWxBcGkuR0FNRV9MSU5LKVxyXG4gICAgICAgICAgICB0aGlzLnByb21vVmlldy5pbml0KFNvY2lhbEFwaS5HQU1FX0xJTksgKyAnP3V0bV9zb3VyY2U9YWRfanVtcGNyb3NzJnV0bV9jYW1wYWlnbj1iYW5uZXIxJywgJ19ibGFuaycpOy8vU29jaWFsQXBpLmlzT0sgJiYgU29jaWFsQXBpLmlzTW9iaWxlID8gJ19zZWxmJyA6ICdfYmxhbmsnKTtcclxuICAgIH1cclxuICAgIHByb21vU2hvdygpIHtcclxuICAgICAgICAvL2lmICh0aGlzLl9zaG93bikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vdGhpcy5fc2hvd24gPSB0cnVlO1xyXG4gICAgICAgIHZhciBzaG93Q291bnQgPSBOdW1iZXIodGhpcy5fYmFja2VuZC51c2VyT3B0aW9ucy5nZXRPcHRpb24oJ3Byb21vJyArIHRoaXMucHJvbW9OYW1lICsgJ0NvdW50JykpIHx8IDA7XHJcbiAgICAgICAgaWYgKHNob3dDb3VudCA+PSA1KVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIHN0YW1wQ3VyID0gTWF0aC5mbG9vcigobmV3IERhdGUoKSkuZ2V0VGltZSgpKjAuMDAxLzM2MDAvMjQpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdmFyIHN0YW1wUHJldiA9IHRoaXMuX2JhY2tlbmQudXNlck9wdGlvbnMuZ2V0T3B0aW9uKCdwcm9tbycgKyB0aGlzLnByb21vTmFtZSArICdTdGFtcCcpO1xyXG4gICAgICAgIGlmIChzdGFtcEN1ciA9PSBzdGFtcFByZXYpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB0aGlzLl9iYWNrZW5kLnVzZXJPcHRpb25zLnNldE9wdGlvbigncHJvbW8nICsgdGhpcy5wcm9tb05hbWUgKyAnU3RhbXAnLCBzdGFtcEN1cik7XHJcbiAgICAgICAgdGhpcy5fYmFja2VuZC51c2VyT3B0aW9ucy5zZXRPcHRpb24oJ3Byb21vJyArIHRoaXMucHJvbW9OYW1lICsgJ0NvdW50Jywgc2hvd0NvdW50ICsgMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbW9WaWV3LnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJvbW9WaWV3KCkgeyByZXR1cm4gU29jaWFsQXBpLlBST01PX1RTQVJfR09SWSA/IHRoaXMucHJvbW9Uc2FyIDogdGhpcy5wcm9tb1JhY2Nvb247IH1cclxuICAgIGdldCBwcm9tb05hbWUoKSB7IHJldHVybiBTb2NpYWxBcGkuUFJPTU9fVFNBUl9HT1JZID8gJ1RzYXInIDogJ1JhY2Nvb24nOyB9XHJcblxyXG4gICAgX2luaXRBZGRUb01lbnUoKSB7XHJcbiAgICAgICAgaWYgKCFTb2NpYWxBcGkuaXNNb2JpbGUgfHwgdGhpcy5faXNDb21wbGV0ZShUdXRvclVJLlRVVE9SX0FERF9UT19NRU5VKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX3Jlc3RhcnRHYW1lQ291bnQgPSAwO1xyXG4gICAgICAgIFduZE1hbi5pbnN0LmdhbWVSZXN1bHRVSS5vbihHYW1lUmVzdWx0VUkuRVZFTlRfV05EX1JFU1VMVCwgdGhpcywgZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXMgPT0gR2FtZVJlc3VsdFVJLldORF9SRVNVTFRfUkVTVEFSVCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzdGFydEdhbWVDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UnVuKFR1dG9yVUkuVFVUT1JfQUREX1RPX01FTlUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgV25kTWFuLmluc3QuZnJpZW5kRGVmZWF0VUkub24oQmFzZVdpbmRvdy5FVkVOVF9ISURERU4sIHRoaXMsIHRoaXMuX29uRnJpZW5kRGVmZWF0VUlIaWRkZW4pO1xyXG4gICAgfVxyXG4gICAgX29uRnJpZW5kRGVmZWF0VUlIaWRkZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fdHJ5UnVuKFR1dG9yVUkuVFVUT1JfQUREX1RPX01FTlUpO1xyXG4gICAgfVxyXG4gICAgX3RyeVJ1bihuYW1lKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ29tcGxldGUobmFtZSkpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc3RhcnRHYW1lQ291bnQgPCAyKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChXbmRNYW4uaW5zdC5jdXJXbmQpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpc1tuYW1lXS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhpcy5faG9va09uQ2xpY2soKTsgfS5iaW5kKHRoaXMpLCAxMDAwKTtcclxuICAgICAgICB9LmJpbmQodGhpcyksIDAuMSk7XHJcbiAgICB9XHJcbiAgICBfaXNDb21wbGV0ZSh0dXRvcikgeyByZXR1cm4gdGhpcy5fYmFja2VuZC51c2VyT3B0aW9ucy5nZXRPcHRpb24odGhpcy5fb3B0aW9uS2V5KHR1dG9yKSkgPT0gVHV0b3JVSS5DT01QTEVURV9NQVJLOyB9XHJcbiAgICBfb3B0aW9uS2V5KHR1dG9yKSB7IHJldHVybiAndHV0b3IuJyArIHR1dG9yOyB9XHJcbiAgICBfaG9va09uQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5hZGRUb01lbnUub25jZShMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLl9vbkNsaWNrQ29tcGxldGUpO1xyXG4gICAgICAgIFNvY2lhbEFwaS5pbnN0LmxvZ1R1dG9yQ29tcGxldGUoKTtcclxuICAgIH1cclxuICAgIF9vbkNsaWNrQ29tcGxldGUoZSkge1xyXG4gICAgICAgIGUudGFyZ2V0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbmFtZSA9IGUudGFyZ2V0Lm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYmFja2VuZC51c2VyT3B0aW9ucy5zZXRPcHRpb24odGhpcy5fb3B0aW9uS2V5KG5hbWUpLCBUdXRvclVJLkNPTVBMRVRFX01BUkspO1xyXG4gICAgICAgIHRoaXMuZXZlbnQoVHV0b3JVSS5FVkVOVF9UVVRPUl9DT01QTEVURShuYW1lKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVSVJlc2l6ZUNvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3Iocm9vdCkge1xyXG4gICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xyXG4gICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5SRVNJWkUsIHRoaXMsIHRoaXMuX3VwZGF0ZVNpemVzKTtcclxuICAgICAgICBMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IFwiZnVsbFwiO1xyXG4gICAgfVxyXG4gICAgZm9yY2VVcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU2l6ZXMoKTtcclxuICAgIH1cclxuICAgIF91cGRhdGVTaXplcygpIHtcclxuICAgICAgICB2YXIgc2NhbGUgPSBMYXlhLnN0YWdlLmhlaWdodCAvIExheWEuc3RhZ2UuZGVzaWduSGVpZ2h0O1xyXG4gICAgICAgIHZhciB3aWR0aCA9IExheWEuc3RhZ2Uud2lkdGggLyBzY2FsZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3Jvb3QubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLl9yb290LmdldENoaWxkQXQoaSk7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5fX3Byb3RvX18uX19jbGFzc05hbWUgPT0gXCJsYXlhLmRpc3BsYXkuU2NlbmVcIikge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuc2NhbGUoc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQmFja2VuZCBmcm9tIFwiLi9CYWNrZW5kXCJcclxuaW1wb3J0IFVzZXJUaW1lRXZlbnQgZnJvbSBcIi4vVXNlclRpbWVFdmVudFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyRXZlbnRzIGV4dGVuZHMgTGF5YS5FdmVudERpc3BhdGNoZXIge1xyXG4gICAgc3RhdGljIGdldCBFVkVOVF9DSEVTVCgpIHsgcmV0dXJuIFwiQ2hlc3RcIjsgfSAvLyBwYXJhbXM6IHttb25leV9zb2Z0OjAsIG1vbmV5X3NvZnRfbWF4OjEwMH1cclxuICAgIHN0YXRpYyBnZXQgRVZFTlRfTElGRSgpIHsgcmV0dXJuIFwiTGlmZVwiOyB9IC8vIHBhcmFtczoge2xpdmVzOjEsZXhwaXJlZDo8Ym9vbGVhbj59XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX0FEKCkgeyByZXR1cm4gXCJBZFwiOyB9IC8vIHBhcmFtczoge2RhdGVTaG93OlwiMjAxOTAxMjlcIiwgc2hvd0JlZm9yZUxpZmU6ZmFsc2UsIHNob3dCZWZvcmVTdGFydDp0cnVlfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhY2tlbmQsIGRhdGEpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYmFja2VuZCA9IGJhY2tlbmQ7XHJcbiAgICAgICAgdGhpcy5iYWNrZW5kLm9uKEJhY2tlbmQuQ0xJRU5UX1VTRVJfRVZFTlRTLCB0aGlzLCB0aGlzLl9vbkV2ZW50cyk7XHJcbiAgICAgICAgdGhpcy5fb25FdmVudHMoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRXZlbnRzKGRhdGEpIHtcclxuICAgICAgICB2YXIgZXZlbnRzID0gZGF0YS5ldmVudHM7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBldmVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0V2ZW50KGV2ZW50c1tuYW1lXSwgbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9wcm9jZXNzRXZlbnQobGlzdCwgbmFtZSkge1xyXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGxpc3RbMF07XHJcbiAgICAgICAgICAgIHZhciBldkRhdGEgPSAoJ3RpbWVSZW1haW4nIGluIGRhdGEpID8gbmV3IFVzZXJUaW1lRXZlbnQoZGF0YSkgOiBPYmplY3QuYXNzaWduKHtpZDpkYXRhLmlkfSwgZGF0YS5wYXJhbXMpO1xyXG4gICAgICAgICAgICB0aGlzW25hbWVdID0gZXZEYXRhO1xyXG4gICAgICAgICAgICB0aGlzLl9pc3N1ZUV2ZW50KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaXNzdWVFdmVudChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudChuYW1lLCB0aGlzW25hbWVdKTtcclxuICAgIH1cclxufSIsImltcG9ydCBCYWNrZW5kIGZyb20gXCIuL0JhY2tlbmRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlck9wdGlvbnMge1xyXG4gICAgc3RhdGljIGdldCBTT1VORF9PRkYoKSB7IHJldHVybiBcIlNPVU5EX09GRlwiOyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFja2VuZCkge1xyXG4gICAgICAgIHRoaXMuX2JhY2tlbmQgPSBiYWNrZW5kO1xyXG4gICAgICAgIGJhY2tlbmQub24oQmFja2VuZC5DTElFTlRfVVNFUl9PUFRJT05fR0VUX0FMTCwgdGhpcywgdGhpcy5fb25Vc2VyT3B0aW9uKTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkgeyByZXR1cm4gdGhpcy5fb3B0aW9uczsgfVxyXG4gICAgZ2V0T3B0aW9uKG5hbWUpIHsgcmV0dXJuIHRoaXMuX29wdGlvbnNbbmFtZV07IH1cclxuICAgIHNldE9wdGlvbihuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zW25hbWVdICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fYmFja2VuZC51c2VyT3B0aW9uU2V0KG5hbWUsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgcmVzdW1lU3RhdGUoKSB7XHJcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMuZ2V0T3B0aW9uKFwicmVzdW1lU3RhdGVcIik7XHJcbiAgICAgICAgcmV0dXJuIHJlcyA/IEpTT04ucGFyc2UocmVzKSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXQgcmVzdW1lU3RhdGUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnNldE9wdGlvbihcInJlc3VtZVN0YXRlXCIsIHZhbHVlID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgX29uVXNlck9wdGlvbihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHsgfTtcclxuICAgICAgICBmb3IgKHZhciBpIGluIGRhdGEubGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IGRhdGEubGlzdFtpXTtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9uc1tlLmtleV0gPSBlLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJQcm9maWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuaWQ7IH1cclxuICAgIGdldCBuYW1lKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5uYW1lOyB9XHJcbiAgICBnZXQgbGFuZygpIHsgcmV0dXJuIHRoaXMuX2RhdGEubGFuZzsgfSAgICAgICAgICAgICAgLy8gb3B0aW5hbFxyXG4gICAgZ2V0IGxldmVsKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5sZXZlbDsgfVxyXG4gICAgZ2V0IGxpdmVzKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5saXZlczsgfSAgICAgICAgICAgIC8vIG9wdGluYWxcclxuICAgIGdldCBzY29yZXMoKSB7IHJldHVybiB0aGlzLl9kYXRhLnNjb3JlczsgfVxyXG4gICAgZ2V0IHNjb3Jlc01heCgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuc2NvcmVzTWF4OyB9XHJcbiAgICBzZXQgc2NvcmVzTWF4KHZhbHVlKSB7IHRoaXMuX2RhdGEuc2NvcmVzTWF4ID0gdmFsdWU7IH1cclxuICAgIGdldCBtb25leVNvZnQoKSB7IHJldHVybiB0aGlzLl9kYXRhLm1vbmV5U29mdDsgfVxyXG4gICAgZ2V0IGlzVGVzdGVyKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5pc1Rlc3RlcjsgfSAgICAgIC8vIG9wdGluYWxcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJUaW1lRXZlbnQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgZGF0YS5wYXJhbXMpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBkYXRhLmlkO1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0KGRhdGEudGltZVJlbWFpbik7XHJcbiAgICAgICAgLy90aGlzLmV4cGFpclN0YW1wID0gRGF0ZS5ub3coKSArIGRhdGEudGltZVJlbWFpbiAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBnZXQgc2Vjb25kc1JlbWFpbigpIHtcclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKE1hdGgubWF4KHRoaXMuZXhwYWlyU3RhbXAgLSBub3cpICogMC4wMDEpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHRpbWVyVGV4dCgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXMuc2Vjb25kc1JlbWFpbjtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9UaW1lRGlnaXRTdHIodCAvIDM2MDApICsgJzonICsgdGhpcy5fdG9UaW1lRGlnaXRTdHIodCAvIDYwICUgNjApICsgJzonICsgdGhpcy5fdG9UaW1lRGlnaXRTdHIodCAlIDYwKTtcclxuICAgIH1cclxuICAgIGdldCBleHBpcmVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHNSZW1haW4gPD0gMDtcclxuICAgIH1cclxuXHJcbiAgICBfcmVzZXQodGltZVJlbWFpbikge1xyXG4gICAgICAgIHRoaXMuZXhwYWlyU3RhbXAgPSBEYXRlLm5vdygpICsgdGltZVJlbWFpbiAqIDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvVGltZURpZ2l0U3RyKHZhbHVlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPiA5ID8gU3RyaW5nKHZhbHVlKSA6ICcwJyArIHZhbHVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNvY2lhbEFwaSBmcm9tIFwiLi9Tb2NpYWxBcGlcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcclxuICAgIHN0YXRpYyBmcm9tVG9UcmFuc2Zvcm1NYXRyaXgodHJhbnNmb3JtRnJvbSwgdHJhbnNmb3JtVG8sIG91dE1hdHJpeCkge1xyXG4gICAgICAgIGlmIChvdXRNYXRyaXgpXHJcbiAgICAgICAgICAgIExheWEuTWF0cml4NHg0LkRFRkFVTFQuY2xvbmVUbyhvdXRNYXRyaXgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgb3V0TWF0cml4ID0gbmV3IExheWEuTWF0cml4NHg0KCk7XHJcbiAgICAgICAgaWYgKHRyYW5zZm9ybVRvKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVRvLndvcmxkTWF0cml4LmludmVydChvdXRNYXRyaXgpO1xyXG4gICAgICAgICAgICBMYXlhLk1hdHJpeDR4NC5tdWx0aXBseSh0cmFuc2Zvcm1Gcm9tLndvcmxkTWF0cml4LCBvdXRNYXRyaXgsIG91dE1hdHJpeCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2Zvcm1Gcm9tKVxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1Gcm9tLmNsb25lVG8ob3V0TWF0cml4KTtcclxuICAgICAgICByZXR1cm4gb3V0TWF0cml4O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlcGFyZW50SW5wbGFjZShjaGlsZCwgbmV3UGFyZW50KSB7XHJcbiAgICAgICAgdmFyIG0gPSBVdGlscy5mcm9tVG9UcmFuc2Zvcm1NYXRyaXgoY2hpbGQudHJhbnNmb3JtLCBuZXdQYXJlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICBuZXdQYXJlbnQuYWRkQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgIGNoaWxkLnRyYW5zZm9ybS5sb2NhbE1hdHJpeCA9IG07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlYXRlQW5pbWF0ZWRDb3VudGVyKGxhYmVsLCBpbml0VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvdW50ZXIobGFiZWwsIGluaXRWYWx1ZSlcclxuICAgIH1cclxuICAgIHN0YXRpYyBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih2YWx1ZSwgbWF4KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IGFwaVVybCgpIHtcclxuICAgICAgICBpZiAoVXRpbHMuZGV2TW9kZSkgcmV0dXJuICdodHRwczovL2p1bXBlci1kZXYuY2FuZHlncmlsbC5jb20vYXBpLXdlYi92MSc7XHJcbiAgICAgICAgcmV0dXJuICdodHRwczovL2p1bXAtdmstYXBpLmNhbmR5Z3JpbGwuY29tL2FwaS13ZWIvdjEnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBkZXZNb2RlKCkge1xyXG4gICAgICAgIGlmICghKFwiX2Rldk1vZGVcIiBpbiBVdGlscykpIHtcclxuICAgICAgICAgICAgLy92YXIgc3AgPSBuZXcgVVJMKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcztcclxuICAgICAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFV0aWxzLl9kZXZNb2RlID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5pbmRleE9mKCdhcHAtOTk1MDYnKSA+IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzcCA9IFV0aWxzLmdldFNlYXJjaFBhcmFtO1xyXG4gICAgICAgICAgICB2YXIgdmlld2VyX2lkID0gc3AoJ3ZpZXdlcl9pZCcpO1xyXG4gICAgICAgICAgICB2YXIgbG9nZ2VkX3VzZXJfaWQgPSBzcCgnbG9nZ2VkX3VzZXJfaWQnKTtcclxuICAgICAgICAgICAgdmFyIGFwcF9pZCA9IHNwKCdhcGlfaWQnKTtcclxuICAgICAgICAgICAgVXRpbHMuX2Rldk1vZGUgPSBVdGlscy5lbmRzV2l0aChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSwgXCIuaHRtbFwiKVxyXG4gICAgICAgICAgICAgICAgLy98fCBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCJnYXN0ZWxcIikgIT0gLTFcclxuICAgICAgICAgICAgICAgIHx8IHZpZXdlcl9pZCA9PSAnNzg0MjE0MTAnIC8vfHwgdmlld2VyX2lkID09ICc3NDY4MzAnXHJcbiAgICAgICAgICAgICAgICAgfHwgdmlld2VyX2lkID09ICcxMTUyNjkwJ1xyXG4gICAgICAgICAgICAgICAgfHwgYXBwX2lkID09ICc2NzUzNDcyJ1xyXG4gICAgICAgICAgICAgICAgLy98fCBsb2dnZWRfdXNlcl9pZCA9PSAnNDQzNzk2NTk3OTA5JyB8fCBsb2dnZWRfdXNlcl9pZCA9PSAnNTg3MDIyMDkwMjU0JyB8fCBsb2dnZWRfdXNlcl9pZCA9PSAnMjM2MDU1MjgwOTEyJyB8fCBsb2dnZWRfdXNlcl9pZCA9PSAnNTkwNzQxMDI2NTc4JyB8fCBsb2dnZWRfdXNlcl9pZCA9PSAnNTM2ODg1MTU5MjU2JztcclxuICAgICAgICAgICAgICAgIHx8IHNwKCdlbnYnKSA9PSAnZGV2JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLl9kZXZNb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRDaGlsZHJlbk9mKG5vZGUpIHtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICB2YXIgY291bnQgPSBub2RlLm51bUNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChub2RlLmdldENoaWxkQXQoaSkpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZHJlbjtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZW1vdmVGcm9tUGFyZW50KG5vZGUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnQ7XHJcbiAgICAgICAgaWYgKHBhcmVudClcclxuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0b0NvbG9yKHN0cikge1xyXG4gICAgICAgIHZhciBjID0gTGF5YS5Db2xvclV0aWxzLmNyZWF0ZShzdHIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGF5YS5Db2xvcihjLmFyckNvbG9yWzBdLCBjLmFyckNvbG9yWzFdLCBjLmFyckNvbG9yWzJdLCBjLmFyckNvbG9yWzNdKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYml0Q291bnQgKG4pIHtcclxuICAgICAgICBuID0gbiAtICgobiA+PiAxKSAmIDB4NTU1NTU1NTUpO1xyXG4gICAgICAgIG4gPSAobiAmIDB4MzMzMzMzMzMpICsgKChuID4+IDIpICYgMHgzMzMzMzMzMyk7XHJcbiAgICAgICAgcmV0dXJuICgobiArIChuID4+IDQpICYgMHhGMEYwRjBGKSAqIDB4MTAxMDEwMSkgPj4gMjQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0YXJ0c1dpdGgoc3RyLCBwcmVmaXgpIHsgcmV0dXJuIHN0ciAmJiBwcmVmaXggJiYgc3RyLmluZGV4T2YocHJlZml4KSA9PSAwOyB9XHJcbiAgICBzdGF0aWMgZW5kc1dpdGgoc3RyLCBzdWZmaXgpIHsgcmV0dXJuIHN0ciAmJiBzdWZmaXggJiYgc3RyLmluZGV4T2Yoc3VmZml4KSA9PSBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDsgfVxyXG4gICAgc3RhdGljIGdldFNlYXJjaFBhcmFtKG5hbWUpIHtcclxuICAgICAgICBpZiAoIVV0aWxzLl9zZWFyY2hQYXJhbXMpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/Jyk7XHJcbiAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoIDwgMikgVXRpbHMuX3NlYXJjaFBhcmFtcyA9IHt9O1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IGFyclsxXS5zcGxpdCgnJicpO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuX3NlYXJjaFBhcmFtcyA9IGFyci5yZWR1Y2UoZnVuY3Rpb24ocywgZSkgeyB2YXIgcGFpciA9IGUuc3BsaXQoJz0nKTsgc1twYWlyWzBdXT1wYWlyWzFdOyByZXR1cm4gczsgfSwge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVdGlscy5fc2VhcmNoUGFyYW1zW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmb3JlYWNoQ2hpbGRSKHJvb3QsIGFjdGlvbikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9vdC5udW1DaGlsZHJlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHJvb3QuZ2V0Q2hpbGRBdChpKTtcclxuICAgICAgICAgICAgYWN0aW9uKGNoaWxkKTtcclxuICAgICAgICAgICAgVXRpbHMuZm9yZWFjaENoaWxkUihjaGlsZCwgYWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGluaXRQcm9wcyhyb290LCBjaGlsZE5hbWVzKSB7XHJcbiAgICAgICAgaWYgKHJvb3QuX19pbml0UHJvcHNEb25lKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcm9vdC5fX2luaXRQcm9wc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgIFV0aWxzLl9pbml0UHJvcHNSKHJvb3QsIHJvb3QsIGNoaWxkTmFtZXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9pbml0UHJvcHNSKG5vZGUsIHJvb3QsIG5hbWVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLm51bUNoaWxkcmVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICBpZiAobmFtZXMuaW5kZXhPZihjaGlsZC5uYW1lKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcm9vdFtjaGlsZC5uYW1lXSA9IGNoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFV0aWxzLl9pbml0UHJvcHNSKGNoaWxkLCByb290LCBuYW1lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmb3JjZVVwZGF0ZUxhYmVscyhyb290KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb290Lm51bUNoaWxkcmVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gcm9vdC5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQuX3RmICYmIGNoaWxkLl90Zi5mb250KVxyXG4gICAgICAgICAgICAgICAgY2hpbGQuX3RmLmlzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIFV0aWxzLmZvcmNlVXBkYXRlTGFiZWxzKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgc3RhdGljIGZvcm1hdFByaWNlKHZhbHVlLCBuYW1lcykge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpICsgJyAnICsgVXRpbHMuZ2V0UGx1cmFsQnlWYWx1ZSh2YWx1ZSwgbmFtZXMpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldFBsdXJhbEJ5VmFsdWUodmFsdWUsIHBsdXJhbHMpIHtcclxuICAgICAgICB2YXIgbmFtZTtcclxuICAgICAgICBpZiAodmFsdWUgPj0gNSAmJiB2YWx1ZSA8PSAyMCkgbmFtZSA9IHBsdXJhbHNbMl07XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkaWdpdCA9IHZhbHVlICUgMTA7XHJcbiAgICAgICAgICAgIG5hbWUgPSBkaWdpdCA9PSAxID8gcGx1cmFsc1swXSA6IChkaWdpdCA+PSAyICYmIGRpZ2l0IDw9IDQgPyBwbHVyYWxzWzFdIDogcGx1cmFsc1syXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwcmVsb2FkSW1hZ2VzKHVybHMpIHtcclxuICAgICAgICBmb3IgKHZhciBpIGluIHVybHMpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9IHVybHNbaV07XHJcbiAgICAgICAgICAgIGlmICh1cmwgJiYgIUxheWEuTG9hZGVyLmdldFJlcyh1cmwpKVxyXG4gICAgICAgICAgICAgICAgTGF5YS5sb2FkZXIubG9hZCh1cmwsIG51bGwsIG51bGwsIExheWEuTG9hZGVyLklNQUdFLCAxLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBjYW5Vc2VQdXJjaGFzZXMoKSB7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1lBKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBcIlwiO1xyXG4gICAgICAgIGlmICh1YS5pbmRleE9mKFwiaVBob25lXCIpIDwgMClcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgaWYgKFNvY2lhbEFwaS5pc1ZLKVxyXG4gICAgICAgICAgICByZXR1cm4gIVNvY2lhbEFwaS5pc01vYmlsZTtcclxuICAgICAgICBpZiAoU29jaWFsQXBpLmlzT0spXHJcbiAgICAgICAgICAgIHJldHVybiB1YS5pbmRleE9mKFwiT2tBcHBcIikgPCAwO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb3VudGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGxhYmVsLCBpbml0VmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgIGlmICghaW5pdFZhbHVlKSBpbml0VmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gaW5pdFZhbHVlO1xyXG4gICAgICAgIHRoaXMuYW5pbVZhbHVlID0gaW5pdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkgeyByZXR1cm4gdGhpcy5fdmFsdWU7IH1cclxuICAgIHNldCB2YWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FuaW1WYWx1ZSA9IHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLCB7IGFuaW1WYWx1ZTogdmFsdWV9LCA1MDApO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFuaW1WYWx1ZSgpIHsgcmV0dXJuIHRoaXMuX2FuaW1WYWx1ZTsgfVxyXG4gICAgc2V0IGFuaW1WYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2FuaW1WYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2xhYmVsLnRleHQgPSBTdHJpbmcoTWF0aC5jZWlsKHZhbHVlKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQmFzZVdpbmRvdyBmcm9tIFwiLi9CYXNlV2luZG93XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXbmRNYW4gZXh0ZW5kcyBMYXlhLkV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBzdGF0aWMgZ2V0IEVWRU5UX1dORF9DSEFOR0VEKCkgeyByZXR1cm4gXCJXTkRfQ0hBTkdFRFwiOyB9XHJcblxyXG4gICAgc3RhdGljIGdldCBpbnN0KCkge1xyXG4gICAgICAgIGlmICghV25kTWFuLl9pbnN0KSB7XHJcbiAgICAgICAgICAgIFduZE1hbi5faW5zdCA9IG5ldyBXbmRNYW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFduZE1hbi5faW5zdDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHdpbmRvdy5XbmRNYW4gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX3dpbmRvd3MgPSBbXTtcclxuICAgICAgICB0aGlzLl9zdGFjayA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2N1clduZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tlciA9IG5ldyBMYXlhLlNjZW5lKCk7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tlci53aWR0aCA9IDQwMDA7Ly8gTGF5YS5zdGFnZS53aWR0aDtcclxuICAgICAgICB0aGlzLl9ibG9ja2VyLmhlaWdodCA9IDQwMDA7Ly8gTGF5YS5zdGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tlci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tlci5hbHBoYSA9IDAuMjtcclxuICAgICAgICB0aGlzLl9ibG9ja2VyLm9uKExheWEuRXZlbnQuUkVTSVpFLCB0aGlzLCB0aGlzLl9vbkJsb2NrZXJSZXNpemUpO1xyXG4gICAgICAgIHRoaXMuX29uQmxvY2tlclJlc2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXJXbmQoKSB7IHJldHVybiB0aGlzLl9jdXJXbmQ7IH1cclxuXHJcbiAgICBhZGQod25kKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3dpbmRvd3MuaW5kZXhPZih3bmQpIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzW3duZC5uYW1lXSA9IHduZDtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93cy5wdXNoKHduZCk7XHJcbiAgICAgICAgICAgIHduZC5oaWRlKCk7XHJcbiAgICAgICAgICAgIHduZC5vbihCYXNlV2luZG93LkVWRU5UX1NIT1dOLCB0aGlzLCB0aGlzLl9vbldpbmRvd1Nob3duKTtcclxuICAgICAgICAgICAgd25kLm9uKEJhc2VXaW5kb3cuRVZFTlRfSElEREVOLCB0aGlzLCB0aGlzLl9vbldpbmRvd0hpZGRlbik7XHJcbiAgICAgICAgICAgIC8vd25kLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHduZCwgZnVuY3Rpb24oKSB7IHRoaXMuaGlkZSgpOyB9KTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQmxvY2tlclBvcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlQmxvY2tlclBvcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3dpbmRvd3MubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIG1pbklkeCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLl93aW5kb3dzKSB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gdGhpcy5fd2luZG93c1tpXTtcclxuICAgICAgICAgICAgbWluSWR4ID0gTWF0aC5taW4obWluSWR4LCB3LnBhcmVudC5nZXRDaGlsZEluZGV4KHcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fd2luZG93c1swXS5wYXJlbnQuYWRkQ2hpbGRBdCh0aGlzLl9ibG9ja2VyLCBtaW5JZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbldpbmRvd1Nob3duKHduZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ldmVudFByb2Nlc3NpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLl9ldmVudFByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1clduZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFjay5wdXNoKHRoaXMuY3VyV25kKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJXbmQuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRDdXJXbmQod25kKTtcclxuICAgICAgICB0aGlzLl9ldmVudFByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmV2ZW50KFduZE1hbi5FVkVOVF9XTkRfQ0hBTkdFRCwgdGhpcy5jdXJXbmQpO1xyXG4gICAgfVxyXG4gICAgX29uV2luZG93SGlkZGVuKHduZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ldmVudFByb2Nlc3NpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLl9ldmVudFByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Q3VyV25kKHRoaXMuX3N0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJXbmQuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICB0aGlzLl9zZXRDdXJXbmQobnVsbCk7XHJcbiAgICAgICAgdGhpcy5fZXZlbnRQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ldmVudChXbmRNYW4uRVZFTlRfV05EX0NIQU5HRUQsIHRoaXMuY3VyV25kKTtcclxuICAgIH1cclxuICAgIF9zZXRDdXJXbmQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9jdXJXbmQgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9ibG9ja2VyLnZpc2libGUgPSB2YWx1ZSAhPSBudWxsO1xyXG4gICAgICAgIC8vIGlmICh0aGlzLl9ibG9ja2VyLnZpc2libGUpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5fYmxvY2tlci53aWR0aCA9IExheWEuc3RhZ2Uud2lkdGg7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2Jsb2NrZXIuaGVpZ2h0ID0gTGF5YS5zdGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgX29uQmxvY2tlclJlc2l6ZSgpIHtcclxuICAgICAgICB0aGlzLl9ibG9ja2VyLmdyYXBoaWNzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tlci5ncmFwaGljcy5kcmF3UmVjdCgwLCAwLCB0aGlzLl9ibG9ja2VyLndpZHRoLCB0aGlzLl9ibG9ja2VyLmhlaWdodCAvIHRoaXMuX2Jsb2NrZXIuc2NhbGVZLCBcIjB4ZmZmZmZmXCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFlhbmRleFByb2ZpbGVTdG9yYWdlIGZyb20gXCIuL1lhbmRleFByb2ZpbGVTdG9yYWdlXCJcclxuXHJcbnZhciB5c2RrID0gd2luZG93LnlzZGs7XHJcbnZhciB5c2RrX3BsYXllciA9IHdpbmRvdy55c2RrX3BsYXllcjtcclxudmFyIHlzZGtfZGF0YSA9IHdpbmRvdy55c2RrX2RhdGE7XHJcbnZhciB5bSA9IHdpbmRvdy55bTtcclxuXHJcbnZhciBsb2NhbFN0b3JhZ2UgPSBbXTtcclxudHJ5IHsgbG9jYWxTdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZSB9XHJcbmNhdGNoKGUpIHsgY29uc29sZS53YXJuKCd3aW5kb3cubG9jYWxTdG9yYWdlIGlzIG5vdCBhY2Nlc3NhYmxlJykgfTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFlhbmRleCB7XHJcbiAgICBcclxuICAgIC8vIHN0YXRpYyBnZXQgaW5zdCgpIHtcclxuICAgIC8vICAgICBpZiAoIVlhbmRleC5faW5zdClcclxuICAgIC8vICAgICAgICAgWWFuZGV4Ll9pbnN0ID0gbmV3IFlhbmRleCgpO1xyXG4gICAgLy8gICAgIHJldHVybiBZYW5kZXguX2luc3Q7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgY29uc3RydWN0b3IodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG4gICAgICAgIHdpbmRvdy5ZYW5kZXggPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IDcwOTg2NDM5O1xyXG4gICAgICAgIGlmICh3aW5kb3cueXNka19wbGF5ZXIpXHJcbiAgICAgICAgICAgIHRoaXMucHJvZmlsZVN0b3JhZ2UgPSBuZXcgWWFuZGV4UHJvZmlsZVN0b3JhZ2UodGhpcyk7XHJcbiAgICAgICAgaWYgKHlzZGtfZGF0YSlcclxuICAgICAgICAgICAgdGhpcy55c2RrX2RhdGFfc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoeXNka19kYXRhKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW5jeUNvZGUgPSAnUlVCJztcclxuICAgICAgICB5c2RrLmdldFBheW1lbnRzKHsgc2lnbmVkOiB0cnVlIH0pLnRoZW4oZnVuY3Rpb24ocGF5bWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGF5bWVudHMgPSBwYXltZW50cztcclxuICAgICAgICAgICAgcGF5bWVudHMuZ2V0Q2F0YWxvZygpLnRoZW4oZnVuY3Rpb24oY2F0YWxvZykge1xyXG4gICAgICAgICAgICAgICAgLy8gU2VhcmNoIHNob3J0IG5hbWUgaW4gY2F0YWxvZyAoZnJvbSBmdWxsIG9uZSAnY29tLmNhbmR5Z3JpbGwuanVtcC5wYWNrKicpIGFuZCBmaWxsIGl0cyBwcmljZSAoY2FyZC55YSlcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdmFsaWRhdG9yLmJhbmtDYXJkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJkID0gdmFsaWRhdG9yLmJhbmtDYXJkc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBjYXJkLm5hbWUuc3BsaXQoJy4nKVszXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGNhdGFsb2cuZmlsdGVyKGMgPT4gYy5pZCA9PSBpZClbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC55YSA9IE51bWJlcihjLnByaWNlLm1hdGNoKC9cXGQrLylbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5wcmljZUN1cnJlbmN5Q29kZSkgdGhpcy5fY3VycmVuY3lDb2RlID0gYy5wcmljZUN1cnJlbmN5Q29kZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cueXNka19wbGF5ZXIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzTm90Q29uc3VtZWQoKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMubG9nSW5zdGFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQWRzUGF5ZWQoKSB7IHJldHVybiB0aGlzLl92YWxpZGF0b3IuYmFua0NhcmRzWzBdICYmIHRoaXMuX2RvbmF0ZWQgPj0gdGhpcy5fdmFsaWRhdG9yLmJhbmtDYXJkc1swXS55YTsgfVxyXG4gICAgZ2V0IGN1cnJlbmN5Q29kZSgpIHsgcmV0dXJuIHRoaXMuX2N1cnJlbmN5Q29kZTsgfVxyXG5cclxuICAgIHB1cmNoYXNlKGNhcmQpIHtcclxuICAgICAgICBpZiAodGhpcy5wcmVQdXJjaGFzZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXltZW50cy5wdXJjaGFzZShjYXJkLnNob3J0TmFtZSkudGhlbihmdW5jdGlvbihwdXJjaGFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZFB1cmNoYXNlKHB1cmNoYXNlLnRva2VuLCBwdXJjaGFzZS5zaWduYXR1cmUsIGNhcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlKHB1cmNoYXNlLCBjYXJkKS50aGVuKGZ1bmN0aW9uKG9rKSB7IHJlc29sdmUob2spOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1B1cmNoYXNlKCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByZVB1cmNoYXNlKCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cueXNka19wbGF5ZXIpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHlzZGsuYXV0aC5vcGVuQXV0aERpYWxvZygpLnRoZW4oZnVuY3Rpb24oKSB7IGxvY2F0aW9uLnJlbG9hZCgpOyB9KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nSW5zdGFsbCgpIHsgdGhpcy5fbG9nT25jZVlNKCdqbXBfaW5zdGFsbCcpOyB9XHJcbiAgICBsb2dQdXJjaGFzZSgpIHsgdGhpcy5fbG9nWU0oJ2ptcF9wdXJjaGFzZScpOyB9XHJcbiAgICBsb2dUdXRvcigpIHsgdGhpcy5fbG9nT25jZVlNKCdqbXBfdHV0b3InKTsgfVxyXG4gICAgbG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXN0TG9nbGV2ZWwgPT0gbGV2ZWwpIHJldHVybjtcclxuICAgICAgICB0aGlzLmxhc3RMb2dsZXZlbCA9IGxldmVsO1xyXG4gICAgICAgIHlzZGsuZ2V0TGVhZGVyYm9hcmRzKClcclxuICAgICAgICAgICAgLnRoZW4obGIgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGIuc2V0TGVhZGVyYm9hcmRTY29yZSgnbGV2ZWwnLCBsZXZlbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbG9nQWRSZXdhcmRlZCgpIHtcclxuICAgICAgICB0aGlzLl9sb2dZTSgnam1wX2FkdmlldycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoa2V5KSB7IHJldHVybiB5c2RrX2RhdGEgJiYgeXNka19kYXRhW2tleV07IH1cclxuICAgIHNldERhdGEoa2V5LCB2YWx1ZSwgZmx1c2gpIHtcclxuICAgICAgICBpZiAoIXlzZGtfZGF0YSkgcmV0dXJuO1xyXG4gICAgICAgIHlzZGtfZGF0YVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgeXNka19kYXRhX3N0cmluZyA9IEpTT04uc3RyaW5naWZ5KHlzZGtfZGF0YSk7XHJcbiAgICAgICAgaWYgKHlzZGtfZGF0YV9zdHJpbmcgIT0gdGhpcy55c2RrX2RhdGFfc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMueXNka19kYXRhX3N0cmluZyA9IHlzZGtfZGF0YV9zdHJpbmc7XHJcbiAgICAgICAgICAgIHlzZGtfcGxheWVyLnNldERhdGEoeXNka19kYXRhLCBmbHVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9wcm9jZXNzTm90Q29uc3VtZWQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tZYW5kZXhdIF9wcm9jZXNzTm90Q29uc3VtZWQnKTtcclxuICAgICAgICB0aGlzLl9wYXltZW50cy5nZXRQdXJjaGFzZXMoKS50aGVuKGZ1bmN0aW9uKHB1cmNoYXNlcykge1xyXG4gICAgICAgICAgICBpZiAocHVyY2hhc2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gcHVyY2hhc2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQcm9taXNlID0gdGhpcy5fdmFsaWRhdGUocHVyY2hhc2VzW2ldKTtcclxuICAgICAgICAgICAgICAgIGxhc3RQcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7IHRoaXMuX2ZsdXNoUHVyY2hhc2VzKCk7IH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgX3ZhbGlkYXRlKHB1cmNoYXNlLCBjYXJkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgaWYgKCFjYXJkKSBjYXJkID0gdGhpcy5fZ2V0UHVyY2hhc2VDYXJkKHB1cmNoYXNlLnB1cmNoYXNlVG9rZW4pIHx8IHRoaXMuX3ZhbGlkYXRvci5iYW5rQ2FyZHNbMF07XHJcbiAgICAgICAgICAgIGxldCBzaWduID0gcHVyY2hhc2Uuc2lnbmF0dXJlIHx8IHRoaXMuX2dldFB1cmNoYXNlKHB1cmNoYXNlLnB1cmNoYXNlVG9rZW4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1lhbmRleF0gdmFsaWRhdGUgcHVyY2hhc2UgcHJvZHVjdElEPScgKyBwdXJjaGFzZS5wcm9kdWN0SUQgKyAnIHB1cmNoYXNlVG9rZW49JyArIHB1cmNoYXNlLnB1cmNoYXNlVG9rZW4gKyAnIHNpZ25hdHVyZT0nICsgc2lnbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHB1cmNoYXNlSW5mbyA9IHsgcGF5bWVudFR5cGU6ICd5YW5kZXgnLCBzaWduYXR1cmU6IHNpZ24gfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRvci52YWxpZGF0ZVB1cmNoYXNlKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHB1cmNoYXNlLnByb2R1Y3RJRCxcclxuICAgICAgICAgICAgICAgIGluZm86IHB1cmNoYXNlSW5mbyxcclxuICAgICAgICAgICAgICAgIGhhc2g6IHB1cmNoYXNlLnB1cmNoYXNlVG9rZW5cclxuICAgICAgICAgICAgfSwgY2FyZCkudGhlbihmdW5jdGlvbihvaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlUHVyY2hhc2UocHVyY2hhc2UucHVyY2hhc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXltZW50cy5jb25zdW1lUHVyY2hhc2UocHVyY2hhc2UucHVyY2hhc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICBpZiAob2spXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9uYXRlZCArPSBOdW1iZXIoY2FyZC55YSkgfHwgMDtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUob2spO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1lhbmRleF0gdmFsaWRhdGUnLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIF9nZXRQdXJjaGFzZSh0b2tlbikgeyByZXR1cm4gdGhpcy5fZ2V0UHVyY2hhc2VzKClbdG9rZW5dOyB9XHJcbiAgICBfZ2V0UHVyY2hhc2VDYXJkKHRva2VuKSB7IFxyXG4gICAgICAgIHZhciBpZCA9IHRoaXMuX2dldFB1cmNoYXNlcygpW3Rva2VuICsgJ19jYXJkJ107XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRvci5iYW5rQ2FyZHMuZmlsdGVyKGMgPT4gYy5pZCA9PSBpZClbMF0gfHwgdGhpcy5fdmFsaWRhdG9yLmJhbmtDYXJkc1swXTtcclxuICAgIH1cclxuICAgIF9nZXRQdXJjaGFzZXMoKSB7IHJldHVybiB0aGlzLmdldERhdGEoJ3B1cmNoYXNlcycpIHx8IHt9OyB9XHJcbiAgICBfc2V0UHVyY2hhc2VzKHB1cmNoYXNlcykgeyB0aGlzLnNldERhdGEoJ3B1cmNoYXNlcycsIHB1cmNoYXNlcyk7IH1cclxuICAgIF9mbHVzaFB1cmNoYXNlcygpIHsgdGhpcy5zZXREYXRhKCdwdXJjaGFzZXMnLCB0aGlzLl9nZXRQdXJjaGFzZXMoKSwgdHJ1ZSk7IH1cclxuICAgIF9hZGRQdXJjaGFzZSh0b2tlbiwgc2lnbmF0dXJlLCBjYXJkKSB7XHJcbiAgICAgICAgbGV0IHB1cmNoYXNlcyA9IHRoaXMuX2dldFB1cmNoYXNlcygpO1xyXG4gICAgICAgIHB1cmNoYXNlc1t0b2tlbl0gPSBzaWduYXR1cmU7XHJcbiAgICAgICAgcHVyY2hhc2VzW3Rva2VuICsgJ19jYXJkJ10gPSBjYXJkLmlkO1xyXG4gICAgICAgIHRoaXMuX3NldFB1cmNoYXNlcyhwdXJjaGFzZXMpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZVB1cmNoYXNlKHRva2VuKSB7XHJcbiAgICAgICAgbGV0IHB1cmNoYXNlcyA9IHRoaXMuX2dldFB1cmNoYXNlcygpO1xyXG4gICAgICAgIGRlbGV0ZSBwdXJjaGFzZXNbdG9rZW5dO1xyXG4gICAgICAgIGRlbGV0ZSBwdXJjaGFzZXNbdG9rZW4gKyAnX2NhcmQnXTtcclxuICAgICAgICB0aGlzLl9zZXRQdXJjaGFzZXMocHVyY2hhc2VzKTtcclxuICAgIH1cclxuICAgIGdldCBfZG9uYXRlZCgpIHsgcmV0dXJuIHRoaXMucHJvZmlsZVN0b3JhZ2UgJiYgdGhpcy5wcm9maWxlU3RvcmFnZS5nZXQoJ2RvbmF0ZWQnKSB8fCAwOyB9XHJcbiAgICBzZXQgX2RvbmF0ZWQodmFsdWUpIHsgdGhpcy5wcm9maWxlU3RvcmFnZSAmJiB0aGlzLnByb2ZpbGVTdG9yYWdlLnNldCgnZG9uYXRlZCcsIHZhbHVlKTsgfVxyXG5cclxuICAgIF9sb2dPbmNlWU0oZ29hbCkge1xyXG4gICAgICAgIGNvbnN0IEtFWSA9ICd5bV9sb2dnZWRfJyArIGdvYWw7XHJcbiAgICAgICAgbGV0IGxvY2FsVmFsdWUgPSAnJztcclxuICAgICAgICBjb25zdCBsb2dnZWQgPSBsb2NhbFN0b3JhZ2VbS0VZXSB8fCB5c2RrX2RhdGEgJiYgeXNka19kYXRhW0tFWV07XHJcbiAgICAgICAgaWYgKCFsb2dnZWQpIHRoaXMuX2xvZ1lNKGdvYWwpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZVtLRVldID0gMTtcclxuICAgICAgICB0aGlzLnNldERhdGEoS0VZLCAxLCB0cnVlKTtcclxuICAgIH1cclxuICAgIF9sb2dZTShnb2FsKSB7XHJcbiAgICAgICAgaWYgKCF5bSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbWWFuZGV4TWV0cmljc10gZ29hbCByZWFjaGVkOiAnICsgZ29hbCk7XHJcbiAgICAgICAgeW0odGhpcy5jb3VudGVyLCAncmVhY2hHb2FsJywgZ29hbCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBZYW5kZXhQcm9maWxlU3RvcmFnZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih5YW5kZXgpIHtcclxuICAgICAgICB0aGlzLnlhbmRleCA9IHlhbmRleDtcclxuICAgICAgICB0aGlzLnByb2ZpbGUgPSB0aGlzLnlhbmRleC5nZXREYXRhKCdwcm9maWxlJykgfHwge307XHJcbiAgICB9XHJcbiAgICBnZXQoa2V5KSB7IHJldHVybiB0aGlzLnByb2ZpbGVba2V5XTsgfVxyXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnByb2ZpbGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMueWFuZGV4LnNldERhdGEoJ3Byb2ZpbGUnLCB0aGlzLnByb2ZpbGUpO1xyXG4gICAgfVxyXG59Il19
