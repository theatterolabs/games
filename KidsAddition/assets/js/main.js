!function(){VoiceOvers={LetsBuildBridges:"1501",MeasureTheDistance:"1503",MeasureTheDistanceMouse:"1503-mouse",DoYouWantToPlayAgain:"1201a",TryAgain:"1504",WeNeedToMakeABridgeThatIs:"1505_1",LogsLong:"1505_2",Five:"1505_5",Six:"1505_6",Seven:"1505_7",Eight:"1505_8",Nine:"1505_9",Ten:"1505_10",TapAndDragTwoSets:"1512a",TapAndDragTwoSetsMouse:"1512a-mouse",Whoops:"1513",UhOh:"1513a",Oops:"1513b",TryAgainC:"1513c",Nope:"1514",DontGiveUp:"1515",NiceJob:"1516",CanYouDoItAgain:"1517",YouDidIt:"1518",WeNeedOneLastBridge:"1519",YouGotIt:"1520",GreatBridgeBuilding:"1521",WhichTwoSetsOfLogs:"1522",CanYouFind5:"1531_5",CanYouFind6:"1531_6",CanYouFind7:"1531_7",CanYouFind8:"1531_8",CanYouFind9:"1531_9",CanYouFind10:"1531_10",CanYouHelpMeBuild:"1532",ThatDoesnt5:"1531_5",ThatDoesnt6:"1531_6",ThatDoesnt7:"1531_7",ThatDoesnt8:"1531_8",ThatDoesnt9:"1531_9",ThatDoesnt10:"1533_10"},namespace("dino").VoiceOvers=VoiceOvers}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.Animator"),d=function(){a.call(this),this.dinoClip=null,this.gilbertClip=null,this.cliffLeftClip=null,this.cliffRightClip=null,this.bezelClip=null,this.leftScaffoldingClip=null,this.rightScaffoldingClip=null,this.pointerClip=null},e=a.prototype,f=d.prototype=Object.create(e);f.setup=function(){var a=new b(images.bridgeBuilderBG);this.addChild(a),this.cliffLeftClip=new b(images.cliffLeft),this.addChild(this.cliffLeftClip),this.cliffLeftClip.visible=!1,this.cliffRightClip=new b(images.cliffRight),this.cliffRightClip.x=1024-this.cliffRightClip.image.width,this.addChild(this.cliffRightClip),this.cliffRightClip.visible=!1,this.fgClip=new b(images.bridgeBuilderFG),this.addChild(this.fgClip),this.bezelClip=new b(images.bridgeBuilderBezel),this.bezelClip.name="bezel",this.bezelClip.x=202,this.bezelClip.y=652,this.bezelClip.alpha=0,this.addChild(this.bezelClip);var d=new b(images.spanEdge);d.name="leftScaffoldingClip",d.alpha=0,this.addChild(d),this.leftScaffoldingClip=d;var e=new b(images.spanEdge);e.name="rightScaffoldingClip",e.alpha=0,this.addChild(e),this.rightScaffoldingClip=e;var f=new b(app.hasTouch?images.pointer:images.pointerMouse);f.alpha=0,this.addChild(f),this.pointerClip=f;var g=new b(images.gilbertBG);g.x=0,g.y=557,this.addChild(g);var h=new lib.Gilbert;this.gilbertClip=h,h.framerate=24,c.play(h,"idle"),h.x=20,h.y=557,this.addChild(h)},f.teardown=function(){},f.destroy=function(){e.destroy.call(this)},namespace("dino").GamePanel=d}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.easeljs.Button"),d=include("springroll.easeljs.DwellTimer"),e=function(){a.call(this),this.playButton=null},f=a.prototype,g=e.prototype=Object.create(f);g.setup=function(){this.background=new b(images.TitleBackground),this.background.name="TitleBackground",d.create(this.background),this.addChildAt(this.background,0);var a=this.config.scalingSize;this.playButton=new c(images.PlayButton),this.playButton.x=.5*a.width-.5*images.PlayButton.width,this.playButton.y=620,this.playButton.name="playButton",d.create(this.playButton),this.addChild(this.playButton)},g.teardown=function(){f.teardown.call(this),this.background=null,this.playButton=null},namespace("dino").TitlePanel=e}(),function(){var a=include("springroll.Animator"),b=include("springroll.Application"),c=include("springroll.easeljs.BaseState"),d=include("createjs.Bitmap"),e=include("createjs.BitmapMovieClip"),f=include("springroll.easeljs.Button"),g=include("createjs.ColorFilter"),h=include("createjs.Container"),i=include("springroll.DelayedCall"),j=include("springroll.easeljs.DragManager"),k=include("springroll.easeljs.DwellTimer"),l=include("createjs.Ease"),m=include("springroll.ListTask"),n=include("createjs.Point"),o=include("createjs.Rectangle"),p=include("createjs.Shape"),q=include("springroll.Sound"),r=include("createjs.TextureAtlas"),s=include("createjs.Tween"),t=include("dino.VoiceOvers"),u=function(a){c.call(this,new dino.GamePanel,a),this.dinoData=null,this.dinoChoice="",this.roundNumber=0,this.spanWidth=0,this.spanWidthPx=0,this.spanData={},this.leftCliffEdgePoint=null,this.rightCliffEdgePoint=null,this.previousSum=-1,this.handleEdgeClipDown=this.handleEdgeClipDown.bind(this),this.handleEdgeClipMove=this.handleEdgeClipMove.bind(this),this.handleEdgeClipUp=this.handleEdgeClipUp.bind(this),this._hintClicked=this._hintClicked.bind(this),this.idleTimeoutTimer=null,this.inactiveArray=null,this.dinoChoices=[],this.roundDinoDict={},this.leftSideLogClip=null,this.rightSideLogClip=null,this.idlerClips=[],this.numbersClips=[],this.logClips=[],this.roundLogsArr=[],this.handlePlayAgainButtonClicked=this.handlePlayAgainButtonClicked.bind(this),this.roundMisses=0,app.hasTouch?this.voInputTypeMap={MeasureTheDistance:t.MeasureTheDistance}:this.voInputTypeMap={MeasureTheDistance:t.MeasureTheDistanceMouse}},v=c.prototype,w=u.prototype=Object.create(v);u.LOG_UNIT_WIDTH=64,u.CLIFF_EDGE_Y=322,u.SIDE_LEFT=1,u.SIDE_RIGHT=2;var x={};w.addTasks=function(a){for(var b=this.config.gameplay.dinos.concat(this.config.gameplay.idlers),c=0;c<b.length;c++){var d=b[c].dino;a.push(new m(d,this.config.textureAtlas.game[d],this.onAtlasLoaded.bind(this)))}},w.onAtlasLoaded=function(a,b){var c=b.id;x[c]=new r(a.atlasImage.content,a.atlasConfig.content)},w.onAssetsLoaded=function(){this.dragManager=new j(this.game.display.stage,this.onDragStart.bind(this),this.onDragEnd.bind(this)),this.startRound()},w.enter=function(){v.enter.call(this)},w.enterDone=function(){this.game.music="DT_ILoveTrains_MX",this.game.container.on("playHelp",this._hintClicked,10),this.game.on("update",this.update),this.game.hints.func(this.doInactive.bind(this)),this.disableHints()},w._hintClicked=function(){this.game.learning.clickHelp(this.getPiecesPlaced(),this.spanWidth,this.roundLogsArr)},w.startRound=function(){this.roundNumber++;var a=[null,[5,6],[7,8],[9,10]][this.roundNumber];this.spanWidth=a.shuffle().pop(),this.spanWidthPx=this.spanWidth*u.LOG_UNIT_WIDTH,this.spanData=this.getSpanDataBySpanWidth(this.spanWidth),this.roundLogsArr=this.spanData.logs.shuffle();var b=(this.spanWidth-5)*u.LOG_UNIT_WIDTH*.5;this.panel.cliffLeftClip.x=0-b,this.leftCliffEdgePoint=new n(this.panel.cliffLeftClip.image.width-b,u.CLIFF_EDGE_Y),this.panel.cliffLeftClip.visible=!0,this.rightCliffEdgePoint=new n(this.leftCliffEdgePoint.x+this.spanWidthPx,u.CLIFF_EDGE_Y),this.panel.cliffRightClip.x=this.rightCliffEdgePoint.x,this.panel.cliffRightClip.visible=!0;for(var c=new h,e=this.spanWidth,f=0;e>f;f++){var g=new d(images.BB_box_dotted);g.x=f*u.LOG_UNIT_WIDTH,g.name="dot_"+f,c.addChild(g);var i=new lib.NumbersClip;i.x=g.x,c.addChild(i),i.gotoAndStop(f)}c.cache(0,0,this.spanWidth*u.LOG_UNIT_WIDTH,u.LOG_UNIT_WIDTH),this.rulerBitmap=new d(c.cacheCanvas),this.panel.addChild(this.rulerBitmap),this.rulerBitmap.x=this.leftCliffEdgePoint.x,this.rulerBitmap.y=this.leftCliffEdgePoint.y;var j=this.leftSpanEdgeClip=new p;j.name="edgeLeft",j.side=u.SIDE_LEFT,j.graphics.beginFill("#ffffff").drawRect(this.leftCliffEdgePoint.x-50,this.leftCliffEdgePoint.y-50,100,100),j.alpha=.01,this.panel.addChild(j);var k=this.rightSpanEdgeClip=new p;k.name="edgeRight",k.side=u.SIDE_RIGHT,k.graphics.beginFill("#ffffff").drawRect(this.rightCliffEdgePoint.x-50,this.rightCliffEdgePoint.y-50,100,100),k.alpha=.01,this.panel.addChild(k),this.panel.leftScaffoldingClip.x=this.leftCliffEdgePoint.x-this.panel.leftScaffoldingClip.image.width/2,this.panel.leftScaffoldingClip.y=this.leftCliffEdgePoint.y-this.panel.leftScaffoldingClip.image.height/2,this.panel.rightScaffoldingClip.x=this.rightCliffEdgePoint.x-this.panel.rightScaffoldingClip.image.width/2,this.panel.rightScaffoldingClip.y=this.rightCliffEdgePoint.y-this.panel.rightScaffoldingClip.image.height/2,this.maskRuler(0,0),this.disable(),this.addDinosToStage()},w.enableCliffDrag=function(a){void 0===a&&(a=!0);var b=this.leftSpanEdgeClip;a?(this.enableHints(),b.addEventListener("mousedown",this.handleEdgeClipDown),b.addEventListener("pressmove",this.handleEdgeClipMove),b.addEventListener("pressup",this.handleEdgeClipUp),b.cursor="pointer"):(b.removeEventListener("mousedown",this.handleEdgeClipDown),b.removeEventListener("pressmove",this.handleEdgeClipMove),b.removeEventListener("pressup",this.handleEdgeClipUp),b.cursor=null)},w.addDinosToStage=function(){this.dinoChoices&&0!==this.dinoChoices.length||(this.dinoChoices=this.config.gameplay.dinos.slice().shuffle()),this.roundDinoDict=this.dinoChoices.pop();var b=this.roundDinoDict.dino,c=new e;c.name="dino",this.panel.dinoClip=c;var d=this.config.sprites[b];c.init(x[b],d),this.panel.addChild(c),c.scaleX=c.scaleY=this.roundDinoDict.scale,c.x=-(this.roundDinoDict.size[0]*this.roundDinoDict.scale),c.y=280-this.roundDinoDict.size[1]*this.roundDinoDict.scale/2;var f=this.leftCliffEdgePoint.x-this.roundDinoDict.size[0]*this.roundDinoDict.scale-10,g=1e3*(4-.3*(this.spanWidth-5));a.play(c,"walk"),s.get(c).to({x:f},g).call(this.endWalkOn,null,this);var h=this.config.gameplay.idlers;this.idlerClips=[];for(var i=0;i<h.length;i++){var j=h[i],k=j.dino,l=new e;l.name="idler_"+k,this.idlerClips.push(l);var m=this.config.sprites[k];l.init(x[k],m),this.panel.addChild(l),l.scaleX=l.scaleY=j.scale,l.x=j.origin[0]+this.rightCliffEdgePoint.x,l.y=j.origin[1],a.play(l,"idle")}},w.showHideEdgeScaffoldingAnimated=function(a,b){var c=function(a){s.hasActiveTweens(a)&&s.removeTweens(a)};c(this.panel.pointerClip),c(this.panel.leftScaffoldingClip),c(this.panel.rightScaffoldingClip);var d=a?1:0,e=b?1e3:0;a?(this.bringClipToTop(this.panel.leftScaffoldingClip),this.bringClipToTop(this.panel.rightScaffoldingClip),this.bringClipToTop(this.panel.pointerClip),this.panel.pointerClip.x=this.panel.leftScaffoldingClip.x+this.panel.leftScaffoldingClip.image.width/2,this.panel.pointerClip.y=this.panel.leftScaffoldingClip.y+this.panel.leftScaffoldingClip.image.height/2,s.get(this.panel.pointerClip).to({alpha:1},e).to({x:this.panel.rightScaffoldingClip.x+this.panel.rightScaffoldingClip.image.width/2},3e3).to({alpha:0})):s.get(this.panel.pointerClip).to({alpha:0}),s.get(this.panel.leftScaffoldingClip).to({alpha:d},e),s.get(this.panel.rightScaffoldingClip).to({alpha:d},e)},w.bringClipToTop=function(a){a.parent.setChildIndex(a,a.parent.children.length-1)},w.endWalkOn=function(){switch(a.play(this.panel.dinoClip,"idle"),this.enable(),this.game.learning.startRound(this.spanWidth,this.roundLogsArr),this.game.learning.startMeasure(this.spanWidth),this.roundMisses=0,this.game.learning.startTimer("round"),this.game.learning.startTimer("measure"),this.roundNumber){case 1:this.playGilbertVO([t.LetsBuildBridges,this.showHideEdgeScaffoldingAnimated.bind(this,!0,!0),this.voInputTypeMap.MeasureTheDistance],this.enableCliffDrag.bind(this,!0),"instruction");break;case 2:this.showHideEdgeScaffoldingAnimated(!0,!0),this.playGilbertVO(t.CanYouDoItAgain,this.enableCliffDrag.bind(this,!0),"instruction");break;case 3:this.showHideEdgeScaffoldingAnimated(!0,!0),this.playGilbertVO(t.WeNeedOneLastBridge,this.enableCliffDrag.bind(this,!0),"instruction")}this.inactiveArray=[this.voInputTypeMap.MeasureTheDistance]},w.playGilbertVO=function(b,c,d){var e=function(b){a.play(this.panel.gilbertClip,"idle"),b&&b()}.bind(this,c);switch(d){case"instruction":this.game.media.playInstruction(this.panel.gilbertClip,b,e);break;case"correct":this.game.media.playCorrectFeedback(this.panel.gilbertClip,b,e);break;case"incorrect":this.game.media.playIncorrectFeedback(this.panel.gilbertClip,b,e)}},w.handleEdgeClipDown=function(a){this.draggingFromSide=a.target.side},w.handleEdgeClipMove=function(a){var c,d=b.instance.display.height/this.config.scalingSize.height,e=a.stageX/d;this.draggingFromSide===u.SIDE_LEFT?(this.maskRuler(this.leftCliffEdgePoint.x,e),c=(e-this.leftCliffEdgePoint.x)/this.spanWidthPx):this.draggingFromSide===u.SIDE_RIGHT&&(this.maskRuler(e,this.rightCliffEdgePoint.x),c=(this.rightCliffEdgePoint.x-e)/this.spanWidthPx),c=Math.max(0,Math.min(1,c));var f=Math.round(c*this.spanWidth);if(f!=this.previousSum&&0!==f){var g=f>this.previousSum?"up":"dn",h=g+"_"+f;this.game.hints.enabled=!1,this.playGilbertVO([{anim:h,audio:h}],function(){this.game.hints.enabled=!0}.bind(this),"instruction"),this.previousSum=f}c>=.99&&this.handleEdgeClipUp(a)},w.handleEdgeClipUp=function(a){this.disableHints(),this.game.learning.dragMeasure(this.spanWidth,this.game.normalizePosition(a.stageX,a.stageY)),this.previousSum===this.spanWidth?(this.enableCliffDrag(!1),this.maskRuler(this.leftCliffEdgePoint.x,this.rightCliffEdgePoint.x),this.endMeasurePhase(),this.startBuildPhase()):(this.maskRuler(0,0),this.playGilbertVO([t.TryAgain,this.voInputTypeMap.MeasureTheDistance],this.enableHints.bind(this),"incorrect"),this.roundMisses++),this.draggingFromSide=0},w.maskRuler=function(a,b){var c=b-a,d=new p;d.graphics.beginFill("#fff").drawRect(a,this.leftCliffEdgePoint.y,c,u.LOG_UNIT_WIDTH),this.rulerBitmap.mask=d},w.endMeasurePhase=function(){this.showHideEdgeScaffoldingAnimated(!1,!1),this.panel.cleanupChildren([this.panel.getChildByName("edgeLeft"),this.panel.getChildByName("edgeRight")]),this.game.learning.stopMeasure(this.game.learning.stopTimer("measure"))},w.startBuildPhase=function(){this.playGilbertVO(["1505_1","1505_"+this.spanWidth,"1505_2","1505_"+this.spanWidth],this.enableHints.bind(this),"instruction"),this.inactiveArray=[[t.WhichTwoSetsOfLogs,"1505_"+this.spanWidth],["1531_"+this.spanWidth],[t.CanYouHelpMeBuild]],s.get(this.panel.bezelClip).to({alpha:1},1e3);for(var a=0,b=this.roundLogsArr.length;b--;)a+=this.roundLogsArr[b];var c=40,d=this.panel.bezelClip.x+c,e=Math.min(1,this.panel.bezelClip.image.width/(a*u.LOG_UNIT_WIDTH+4*c));this.logClips=[];for(var f=this.roundLogsArr.length,g=0;f>g;g++){var h=this.roundLogsArr[g],i=this.buildLogClip(h);this.panel.addChild(i),this.logClips.push(i),i.x=d,i.y=this.panel.bezelClip.y+4,i.startProps={x:i.x,y:i.y,scaleX:e,scaleY:e},i.scaleX=i.scaleY=e,i.alpha=0,i.widthUnits=h,i.widthPx=h*u.LOG_UNIT_WIDTH,this.dragManager.addObject(i),i.enableDrag(),i.name="log_"+h,k.create(i),s.get(i).to({alpha:1},1e3),d+=c+i.widthPx*e}this.leftSideLogClip=null,this.rightSideLogClip=null},w.onDragStart=function(a){this.bringClipToTop(a);var b=!0;this.leftSideLogClip==a?(this.leftSideLogClip=null,b=!1):this.rightSideLogClip==a&&(this.rightSideLogClip=null,b=!1),s.get(a).to({scaleX:1,scaleY:1},200),a.source=b?"resources":"gap",this.game.learning.startDrag(a.widthUnits,a.source,this.getPiecesPlaced(),this.game.normalizePosition(a.x,a.y))},w.onDragEnd=function(a){var b,c=this.leftCliffEdgePoint.y;q.instance.play(["log_place1","log_place2"].random());var d=new o(0,500,1024,168);if(d.contains(a.x,a.y)){this.sendLogClipBack(a);var e;this.leftSideLogClip&&(e=this.leftSideLogClip),this.rightSideLogClip&&(e=this.rightSideLogClip),e&&(s.get(e).to({x:this.leftCliffEdgePoint.x,y:c},500,l.backOut),this.leftSideLogClip=e),"gap"==a.source?this.game.learning.playPiece(a.widthUnits,this.getPiecesPlaced(),this.game.normalizePosition(a.x,a.y)):this.game.learning.endDragOutside(a.widthUnits,this.getPiecesPlaced(),this.game.normalizePosition(a.x,a.y),a.source)}else{this.disable();var f=0;this.leftSideLogClip&&(f+=this.leftSideLogClip.widthUnits),this.rightSideLogClip&&(f+=this.rightSideLogClip.widthUnits),b=this.leftCliffEdgePoint.x+f*u.LOG_UNIT_WIDTH,this.leftSideLogClip?this.rightSideLogClip=a:this.leftSideLogClip=a;var g=this.getPiecesPlaced();a.widthUnits+f<=this.spanWidth?this.leftSideLogClip&&this.rightSideLogClip?s.get(a).to({x:b,y:c},500,l.backOut).call(this.checkBridgeLength,null,this):s.get(a).to({x:b,y:c},500,l.backOut).call(this.enableHints,null,this):this.giveIncorrectLogFeedback(a.widthUnits+this.leftSideLogClip.widthUnits);var h=!1;if(2==g.length)g[0]+g[1]==this.spanWidth&&(h=!0);else{var i;for(var j in this.logClips)if(i=this.logClips[j],a!=i&&a.widthUnits+i.widthUnits==this.spanWidth){h=!0;break}}"resources"==a.source?this.game.learning.selectAnswer(a.widthUnits,g,h,this.game.normalizePosition(a.x,a.y)):this.game.learning.endDragOutside(a.widthUnits,this.getPiecesPlaced(),this.game.normalizePosition(a.x,a.y),a.source)}},w.getPiecesPlaced=function(){var a=[];return this.leftSideLogClip&&a.push(this.leftSideLogClip.widthUnits),this.rightSideLogClip&&a.push(this.rightSideLogClip.widthUnits),a},w.checkBridgeLength=function(){var a=this.leftSideLogClip.widthUnits+this.rightSideLogClip.widthUnits;a===this.spanWidth?this.showEndSequence():(this.enable(),this.giveIncorrectLogFeedback(a))},w.showEndSequence=function(){this.disableHints(),this.disable(),this.inactiveArray=[],a.play(this.panel.dinoClip,"walk");var b=1e3*(5+.5*this.spanWidth);s.get(this.panel.dinoClip).to({x:1024,y:this.panel.dinoClip.y-10},b).call(this.endWalkOff,null,this),q.instance.play("walking",{loop:-1}),this.bringClipToTop(this.panel.dinoClip);for(var c=0;c<this.idlerClips.length;c++){var d=this.idlerClips[c];a.play(d,"reward"),this.bringClipToTop(d)}var e=["All_Cheers","cheering1","cheering2","cheering3","giggles","giggles2"].shuffle();q.instance.play(e[0]),this.numbersClips=[];for(var f=0;f<this.spanWidth;f++){var h=new lib.NumbersClip;h.x=this.leftCliffEdgePoint.x+f*u.LOG_UNIT_WIDTH,h.y=this.leftCliffEdgePoint.y+96,h.gotoAndStop(f),h.cache(0,0,u.LOG_UNIT_WIDTH,u.LOG_UNIT_WIDTH);var j=new g(1,.5,0,1);h.filters=[j],h.updateCache(),this.numbersClips.push(h),this.panel.addChild(h),h.alpha=0,s.get(h).wait(500*f).to({alpha:1},250)}q.instance.play("reward_sfx",{delay:500*this.spanWidth});var k=[];switch(this.roundNumber){case 1:k.push({anim:t.NiceJob,audio:t.NiceJob});break;case 2:k.push({anim:t.YouDidIt,audio:t.YouDidIt});break;case 3:k.push({anim:t.YouGotIt,audio:t.YouGotIt}),k.push({anim:t.GreatBridgeBuilding,audio:t.GreatBridgeBuilding})}a.play(this.panel.gilbertClip,"idle");new i(function(){this.playGilbertVO(k,null,"correct")}.bind(this),1700);this.game.learning.endRound(this.game.learning.stopTimer("round"),this.roundMisses)},w.giveIncorrectLogFeedback=function(a){this.disableHints();var b;this.roundMisses++,a>this.spanWidth?(b=[t.Nope],Math.random()<.25&&b.push(["1533_"+this.spanWidth,t.DontGiveUp].random()),this.playGilbertVO(b,this.enableHints.bind(this),"incorrect"),this.sendLogClipBack(this.leftSideLogClip),this.sendLogClipBack(this.rightSideLogClip)):(b=[[t.Whoops,t.UhOh,t.Oops,t.TryAgainC].random()],Math.random()<.25&&b.push(["1533_"+this.spanWidth,t.DontGiveUp].random()),this.playGilbertVO(b,this.enableHints.bind(this),"incorrect"),this.sendLogClipBack(this.leftSideLogClip),this.sendLogClipBack(this.rightSideLogClip))},w.endWalkOff=function(){if(this.panel.cleanupChildren(this.numbersClips),this.panel.cleanupChildren(this.logClips),this.panel.cleanupChildren(this.rulerBitmap),this.panel.cleanupChildren(this.idlerClips),this.panel.cleanupChildren(this.panel.dinoClip),this.panel.bezelClip.alpha=0,this.leftSideLogClip=null,this.rightSideLogClip=null,this.idlerClips=[],this.numbersClips=[],this.logClips=[],this.panel.dinoClip=null,q.instance.stop("walking"),this.roundNumber<3)this.startRound();else{this.game.hints.clear(),this.game.singlePlayEnd(),this.enable(),this.playGilbertVO("1201a",this.startReplayTimeout.bind(this),"instruction");var a=new f(images.playAgainButton);a.name="playAgainButton",k.create(a),a.on("click",this.handlePlayAgainButtonClicked),this.panel.addChild(a);var b=this.config.scalingSize;a.x=.5*b.width-.5*images.playAgainButton.width,a.y=.6*b.height}},w.startReplayTimeout=function(){this.game.hints.anim(this.panel.gilbertClip,"1201a"),this.game.hints.startTimer()},w.handlePlayAgainButtonClicked=function(b){this.game.learning.clickReplay("play again"),b.currentTarget.parent.removeChild(b.currentTarget),a.stop(this.panel.gilbertClip),this.game.hints.func(this.doInactive.bind(this)),this.disableHints(),this.roundNumber=0,this.startRound()},w.sendLogClipBack=function(a){a&&(s.get(a).to(a.startProps,500,l.backOut),this.leftSideLogClip==a?this.leftSideLogClip=null:this.rightSideLogClip==a&&(this.rightSideLogClip=null))},w.buildLogClip=function(a){var b,c=new h;if(1===a)b=new d(images.logSolo),c.addChild(b);else{b=new d(images.logLeft),c.addChild(b);for(var e=0;a-2>e;e++)b=new d(images.logMid),b.x=(e+1)*u.LOG_UNIT_WIDTH,c.addChild(b);b=new d(images.logRight),b.x=(a-1)*u.LOG_UNIT_WIDTH,c.addChild(b)}c.cache(0,0,a*u.LOG_UNIT_WIDTH,96);var f=new d(c.cacheCanvas);return f},w.getSpanDataBySpanWidth=function(a){for(var b=[],c=this.config.gameplay.spans,d=0;d<c.length;d++)c[d].width===a&&b.push(c[d]);return 0===b.length,b.shuffle().pop()},w.enableHints=function(){this.game.hints._playing=!1,this.game.hints.enabled=!0,this.game.hints.startTimer(),this.enable()},w.disableHints=function(){this.game.hints.enabled=!1,this.game.hints.removeTimer()},w.doInactive=function(){if(this.inactiveArray&&this.inactiveArray.length>0){var a=this.inactiveArray.random();a==this.voInputTypeMap.MeasureTheDistance&&this.showHideEdgeScaffoldingAnimated(!0,!0),this.playGilbertVO(a,function(){this.enableHints()}.bind(this),"instruction")}},w.enable=function(){this.panel.mouseChildren=!0},w.disable=function(){this.panel.mouseChildren=!1},w.exitStart=function(){this.game.container.off("playHelp",this._hintClicked)},namespace("dino").GameState=u}(),function(){var a=include("springroll.easeljs.BaseState"),b=function(b){a.call(this,new dino.TitlePanel,b),e=e.bind(this)},c=a.prototype,d=b.prototype=Object.create(c);d.enterDone=function(){this.panel.playButton.on("click",e),this.panel.background.on("click",e),this.panel.background.cursor="pointer"};var e=function(){this.game.music="DT_ILoveTrains_MX",this.app.learning.clickPlay(this.game.normalizePosition(this.panel.stage.mouseX,this.panel.stage.mouseY)),this.manager.next()};d.exit=function(){this.panel.background&&(this.panel.background.cursor=null,this.panel.background.off("click",e)),this.panel.playButton&&this.panel.playButton.off("click",e),c.exit.call(this)},namespace("dino").TitleState=b}(),function(){var a=include("springroll.Application"),b=new a({name:"BridgeBuilder",fps:24,transition:new lib.Transition,state:"title",configPath:"assets/config/config.json",captionsPath:"assets/config/captions.json"});b.on("init",function(){var a=this.config.assets,c=function(){var a=document.getElementById("stage");b.container.send("resizegame",{width:a.offsetWidth,height:a.offsetHeight})};b.on("resize",c),c(),this.states={title:new dino.TitleState({next:"game",manifest:a.title}),game:new dino.GameState({next:"intro",manifest:a.game})}}),window.app=b}();